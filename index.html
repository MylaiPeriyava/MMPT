<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5NTVBUIFJlY2VpcHQgU3lzdGVtIHYzMS41IC0gUmVzdG9yZWQ8L3RpdGxlPg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2h0bWwycGRmLmpzLzAuMTAuMS9odG1sMnBkZi5idW5kbGUubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvaHRtbDJjYW52YXMvMS40LjEvaHRtbDJjYW52YXMubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYvMi41LjEvanNwZGYudW1kLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLWF1dG90YWJsZS8zLjUuMjUvanNwZGYucGx1Z2luLmF1dG90YWJsZS5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzdHlsZT4NCg0KICAgICAgICAubW1wdC11bmlmaWVkLWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAyNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAzMHB4IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQgew0KICAgICAgICAgICAgd2lkdGg6IDE2MHB4OyAvKiBGaXhlZCB3aWR0aCBmb3IgcGVyZmVjdCBhbGlnbm1lbnQgKi8NCiAgICAgICAgICAgIGhlaWdodDogNDVweDsgLyogVW5pZmllZCBoZWlnaHQgKi8NCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuMnM7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQ6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDZweCAxMnB4IHJnYmEoMCwwLDAsMC4xNSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYWRtaW4tdW5pZmllZDphY3RpdmUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgIC8qIFRoZSBNYXN0ZXIgSGlkZSBSdWxlICovDQogICAgICAgIC8qIFRoaXMgcnVsZSBzdGF5cyBhY3RpdmUgZXZlbiBpZiB0aGUgdGFibGUgcmUtcmVuZGVycyAqLw0KICAgICAgICAucGVybS1oaWRkZW4gew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgZGlzYWJsZWQgZWxlbWVudHMgZ2V0IHRoZSBncmV5ZWQtb3V0IGxvb2sgKi8NCiAgICAgICAgYnV0dG9uOmRpc2FibGVkLA0KICAgICAgICBpbnB1dDpkaXNhYmxlZCwNCiAgICAgICAgc2VsZWN0OmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjOTk5OTk5ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjY7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTYXZlIGJ1dHRvbiBzcGVjaWFsIGNvbG9yIHdoZW4gaXQgYmVjb21lcyBhY3RpdmUgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KDQoNCg0KICAgICAgICAvKiBDb250YWluZXIgZm9yIHRoZSAzLWNvbHVtbiB2aWV3ICovDQoNCiAgICAgICAgLyogVXBkYXRlZCBXb3Jrc3BhY2UgdG8gcHJldmVudCBvdmVybGFwcGluZyAqLw0KICAgICAgICAucmVjZWlwdC13b3Jrc3BhY2Ugew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAvKiBMT0NLIHRoZSBoZWlnaHQgaGVyZS4gU2lkZSBwYW5lbHMgd2lsbCBuZXZlciBiZSB0YWxsZXIgdGhhbiB0aGlzICovDQogICAgICAgICAgICBoZWlnaHQ6IDU1MHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnNpZGUtcGFuZWwgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgLyogRm9yY2UgdGhlIHBhbmVsIHRvIG9iZXkgdGhlIHdvcmtzcGFjZSBoZWlnaHQgKi8NCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIC8qIFRoaXMgaGVpZ2h0OiAwIGlzIGEgdHJpY2sgdG8gbWFrZSBmbGV4Ym94IGlnbm9yZSB0aGUgaW1hZ2Uncw0KICAgICAgICBuYXR1cmFsIHNpemUgYW5kIGZvcmNlIGl0IHRvIHN0YXkgd2l0aGluIHRoZSBjb250YWluZXIgKi8NCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIGltZyB7DQogICAgICAgICAgICAgICAgLyogVGhlc2UgbGluZXMgZm9yY2UgdGhlIHNocmluayB3aXRob3V0IGxvc2luZyByYXRpbyAqLw0KICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICNyZWNlaXB0X2Rpc3BsYXlfYXJlYSB7DQogICAgICAgICAgICBmbGV4OiAwIDAgYXV0bzsNCiAgICAgICAgICAgIHdpZHRoOiA0ODBwdDsNCiAgICAgICAgICAgIC8qIFRoZSByZWNlaXB0IHNldHMgdGhlIGhlaWdodCBmb3IgdGhlIHdob2xlIHJvdyAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLmV2ZW50LXBob3RvIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgfQ0KDQoNCg0KDQoNCiAgICAgICAgLmFjdGlvbi1mb290ZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1wZGYgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi13YSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVkMzY2Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIENvbnNlbnQgU3BlY2lmaWMgU3R5bGVzICovDQogICAgICAgIC5idG4tY29uc2VudC1hY3RpdmUgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgb3BhY2l0eTogMTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tY29uc2VudC1kaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICAgICAgb3BhY2l0eTogMC4zOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgb3JpZ2luYWwgc3R5bGVzIHByZXNlcnZlZCBmcm9tIGQ0MyAqLw0KICAgICAgICAucmVjZWlwdC1wcmV2aWV3LXJvdyB7DQogICAgICAgICAgICBncmlkLWNvbHVtbjogc3BhbiAyOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMzBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZTA7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yZWNlaXB0LWNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogNDYwcHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAyLjVweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5oZWFkZXItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY29sIHsNCiAgICAgICAgICAgIHdpZHRoOiA3MHB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFkZHJlc3MtY29sIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC50cnVzdC1uYW1lIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNwdDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRydXN0LWRldGFpbHMgew0KICAgICAgICAgICAgZm9udC1zaXplOiA3LjVwdDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjE7DQogICAgICAgIH0NCg0KICAgICAgICAudmFyaWFibGUtcm93IHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDZwdDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMwMDA7DQogICAgICAgICAgICBwYWRkaW5nOiAzcHQgMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZGl2aWRlciB7DQogICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgIzAwMDsNCiAgICAgICAgICAgIG1hcmdpbjogNnB0IDA7DQogICAgICAgIH0NCg0KICAgICAgICAuZG9ub3ItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxhYmVsLWNvbCB7DQogICAgICAgICAgICB3aWR0aDogODVwdDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHQgMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5kYXRhLWNvbCB7DQogICAgICAgICAgICBmb250LXNpemU6IDkuNXB0Ow0KICAgICAgICAgICAgcGFkZGluZzogMnB0IDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdHJ1c3Qtc2lnbiB7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVwdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdGF4LWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiA4cHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMnB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgOnJvb3Qgew0KICAgICAgICAgICAgLS1zYWZmcm9uOiAjRkY5OTMzOw0KICAgICAgICAgICAgLS1saWdodC1zYWZmcm9uOiAjRkZGNUU2Ow0KICAgICAgICAgICAgLS1kZWVwLXNhZmZyb246ICNGRjhDMDA7DQogICAgICAgICAgICAtLXRleHQtZGFyazogIzMzMzsNCiAgICAgICAgfQ0KDQogICAgICAgICogew0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtc2FmZnJvbik7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZGFyayk7DQogICAgICAgIH0NCg0KICAgICAgICAjYXV0aFNjcmVlbiB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMHZ3Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LXNhZmZyb24pOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB6LWluZGV4OiA5OTk5Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY2lyY2xlIHsNCiAgICAgICAgICAgIGhlaWdodDogNDBweDsNCiAgICAgICAgICAgIHdpZHRoOiA0MHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMik7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sb2dvLWxhcmdlIHsNCiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm1hc3Rlci1oZWFkZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsNCiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjIlIDU2JSAyMiU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zYWZmcm9uKTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmhlYWRlci1zZWN0aW9uIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5oZWFkZXItc2VjdGlvbjpsYXN0LWNoaWxkIHsNCiAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLnNtYWxsLWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmlkLWJhZGdlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29udGFpbmVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYWRkOGU2Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBBREQgVEhFIEZJWCBIRVJFICovDQogICAgICAgIC5lbnRyeS1jb250YWluZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29sdW1uIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBtaW4td2lkdGg6IDMwMHB4Ow0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC5mb3JtLWdyb3VwIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDMzNjY7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCwgLmZvcm0tZ3JvdXAgc2VsZWN0LCAuZm9ybS1ncm91cCB0ZXh0YXJlYSB7DQogICAgICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuc3RhdHVzLWNoZWNrcyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMjBweDsNCiAgICAgICAgICAgIGdyaWQtY29sdW1uOiBzcGFuIDI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFjdGlvbiB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ29uc2VudCBTcGVjaWZpYyBTdHlsZXMgKi8NCiAgICAgICAgLmJ0bi1jb25zZW50LWFjdGl2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1jb25zZW50LWRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmNjY2MgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjNjY2Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDsNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuNjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tc2F2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmU4YjU3Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi11bmxvY2sgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tbG9jayB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2Y4YzhkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1uYXYgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXJuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMjhiMjI7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAjZmllbGRfc2VhcmNoIHsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMyMjhiMjIgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIEFjdGlvbiBCdXR0b24gUm93IFN0eWxpbmcgKi8NCiAgICAgICAgLmJ0bi1hY3Rpb24sIC5idG4tc2F2ZSwgLmJ0bi1sb2NrLCAuYnRuLXVubG9jayB7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIHdpZHRoICovDQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIGhlaWdodCAqLw0KICAgICAgICAgICAgbWFyZ2luOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBISUdIIENPTlRSQVNUIFVOTE9DSzogQnJpZ2h0IEdvbGQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fdW5sb2NrOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkQ3MDAgIWltcG9ydGFudDsgLyogR29sZCAqLw0KICAgICAgICAgICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsgLyogQmxhY2sgdGV4dCBmb3IgY29udHJhc3QgKi8NCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNEQUE1MjA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTQVZFOiBHcmVlbiB3aGVuIGVuYWJsZWQgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzFlN2UzNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIExPQ0s6IE9yYW5nZS9SZWQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fbG9jazpub3QoOmRpc2FibGVkKSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmQ3ZTE0ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNkOTZkMTI7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBESVNBQkxFRCBTVEFURTogVW5pdmVyc2FsIGxvb2sgZm9yIGFsbCBidXR0b25zICovDQogICAgICAgIGJ1dHRvbjpkaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogI2EwYTBhMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYyAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgb3BhY2l0eTogMC41Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ2hlY2tib3ggUm93IENvbnRhaW5lciAqLw0KICAgICAgICAjY2hlY2tib3hfcm93IHsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQWN0aW9uIEJ1dHRvbiBzaXppbmcgKi8NCiAgICAgICAgI2J0bl91bmxvY2ssICNidG5fbG9jaywgI2J0bl9zYXZlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMTBweDsNCiAgICAgICAgICAgIGhlaWdodDogMzhweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC8qIEJpZyBXYWl0IE1lc3NhZ2UgT3ZlcmxheSAqLw0KICAgICAgICAjbG9hZGluZ092ZXJsYXkgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC43KTsNCiAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogMjAlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyNHB0Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KLyoNCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgTWFrZXMgcmVzcG9uaXZlIHNpemUgLSBmb3IgUk4sIFJlY29yZCBhbmQgUmVjZWlwdCBOdW1iZXINCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KICAgICAgICAvKiBBREQgVEhJUyBMSU5FIFRPIEZJWCBUSEUgVE9QIFJPVyAmIFJFQ09SRCBOVU1CRVJTICovDQogICAgICAgIGRpdltzdHlsZSo9ImRpc3BsYXk6IGZsZXgiXSB7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGdhcDogMTBweCAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQoNCiAgICA8ZGl2IGlkPSJsb2FkaW5nT3ZlcmxheSI+QXNzaWduaW5nIE5ldyBSZWNlaXB0IE51bWJlci4uLiBQbGVhc2UgV2FpdDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibG9hZGluZy1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC45KTsgei1pbmRleDogOTk5OTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGRpc3BsYXk6IG5vbmU7Ij4NCiAgICAgICAgPGRpdiBzdHlsZT0iYm9yZGVyOiA1cHggc29saWQgI2YzZjNmMzsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTsiPjwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMzMzM7Ij5QbGVhc2Ugd2FpdCAtIFdvcmtpbmcuLi48L3A+DQogICAgPC9kaXY+DQoNCiAgICA8c3R5bGU+DQogICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQoNCiAgICA8ZGl2IGlkPSJhdXRoU2NyZWVuIj4NCiAgICAgICAgPGRpdiBpZD0ibG9nb0NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgIDxoMiBzdHlsZT0iY29sb3I6IHZhcigtLWRlZXAtc2FmZnJvbik7IG1hcmdpbjogNXB4IDA7Ij5NTVBUIFN5c3RlbTwvaDI+DQogICAgICAgIDxwIGlkPSJzdGF0dXNNc2ciPkNvbm5lY3RpbmcgdG8gQ2xvdWQuLi48L3A+DQogICAgICAgIDxwPkRldmljZSBJRDogPHNwYW4gaWQ9ImRpc3BsYXlEZXZpY2VJRCIgY2xhc3M9ImlkLWJhZGdlIj4uLi48L3NwYW4+PC9wPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibWFpbkFwcENvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KDQoNCiAgICAgICAgPGhlYWRlciBjbGFzcz0ibWFzdGVyLWhlYWRlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItc2VjdGlvbiI+DQogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW46MDsgZm9udC1zaXplOjE0cHg7Ij5Vc2VycyBPbmxpbmU8L2gzPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFjdGl2ZVVzZXJMaXN0IiBjbGFzcz0ic21hbGwtaW5mbyI+LS0tPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZ2FwOjE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibG9nb0hlYWRlckNvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDEgc3R5bGU9Im1hcmdpbjowOyBmb250LXNpemU6MjBweDsiPk15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0PC9oMT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDRweDsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgb3BhY2l0eTogMC45OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWlwdCBHZW5lcmF0aW9uIFNvZnR3YXJlIFZlcnNpb246IDxzcGFuIGlkPSJkaXNwbGF5VmVyc2lvbiI+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGFzaGJvYXJkLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJzdGF0cy10YWJsZSI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsLWluZm8iIHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMnB4IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pkxhc3QgUmVjOiA8c3BhbiBpZD0iZGFzaF9sYXN0X3JlYyI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+QmFuazogPHNwYW4gaWQ9ImRhc2hfYmFua19kYXRlIj4tLS08L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5MYXRlc3Q6IDxzcGFuIGlkPSJkYXNoX2xhdGVzdF9yZWMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkV4cDogPHNwYW4gaWQ9ImRhc2hfZXhwZW5zZXMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlJlYWR5OiA8c3BhbiBpZD0iZGFzaF9yZWFkeV9jb3VudCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+Q2FzaDogPHNwYW4gaWQ9ImRhc2hfY2FzaCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8L2hlYWRlcj4NCg0KDQogICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbnRhaW5lciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbnRyeS1jb2x1bW4iPg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyBiYWNrZ3JvdW5kOiAjMWEyMzdlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBzdHJldGNoOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyI+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOyBwYWRkaW5nLWJvdHRvbTogOHB4OyBtYXJnaW4tYm90dG9tOiAxMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IkFMTCIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IEFMTDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjIxLTIyIiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjEtMjI8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyMi0yMyIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDIyLTIzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjMtMjQiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyMy0yNDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjI0LTI1IiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjQtMjU8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyNS0yNiIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDI1LTI2PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjYtMjciIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyNi0yNzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6ICNGRkVCM0IgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iUlIiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiBSUjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgtMSkiPiYjMTAwOTQ7PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9InJlY19zbGlkZXIiIHN0eWxlPSJmbGV4OiAxOyIgb25pbnB1dD0iY2hlY2tVbnNhdmVkQ2hhbmdlcygoKSA9PiB7IGlmKHZhbGlkYXRlTmF2aWdhdGlvblNlY3VyaXR5KHRoaXMudmFsdWUpKSBuYXZpZ2F0ZURhdGFiYXNlKHRoaXMudmFsdWUpOyB9KSI+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgxKSI+JiMxMDA5NTs8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWxlZnQ6IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRUIzQjsgbWFyZ2luLWJvdHRvbTogMnB4OyI+UkVDRUlQVCBOTzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3JlY25vIiBzdHlsZT0id2lkdGg6IDE0MHB4OyBoZWlnaHQ6IDM4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1zaXplOiAxNnB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlcjogMnB4IHNvbGlkICNGRjk5MzM7IGJhY2tncm91bmQ6ICNmZmY7IGNvbG9yOiAjMDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IG1hcmdpbi1ib3R0b206IDJweDsiPlJlYzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlY29yZE51bWJlckRpc3BsYXkiIHJlYWRvbmx5IHN0eWxlPSJ3aWR0aDogNDVweDsgaGVpZ2h0OiAzOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyOiBub25lOyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2UwZTBlMDsgY29sb3I6ICMxYTIzN2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im5ld19yZWNfYnRuIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iaGVpZ2h0OiAzOHB4OyBtaW4td2lkdGg6IDUwcHg7IGJhY2tncm91bmQ6ICNmNDQzMzY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IiBvbmNsaWNrPSJnZW5lcmF0ZU5ld1JOKCkiPlJOPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5OYW1lPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX25hbWUiIG9uaW5wdXQ9InZhbGlkYXRlQ29uc2VudCgpIj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QWRkcmVzczwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9hZGRyZXNzIiByb3dzPSI0Ij48L3RleHRhcmVhPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGluL0NvdW50cjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBmbGV4OjE7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfcGluY29kZSIgc3R5bGU9IndpZHRoOiA1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfY291bnRyeSIgc3R5bGU9IndpZHRoOiA1MCU7IiB2YWx1ZT0iSU5ESUEiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZW1haWwiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TdGFyPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3N0YXIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Hb3RocmFtPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX2dvdGhyYW0iPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbHVtbiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZGF0ZSI+PC9kaXY+DQogICAgICAgICAgICAgICAgDQoNCg0KICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxMDBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMDAzMzY2OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBwYWRkaW5nLWxlZnQ6IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZWxlcGhvbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IHBhZGRpbmctbGVmdDogMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9waG9uZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJmbGV4OiAxOyBoZWlnaHQ6IDI1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQtY29sb3I6ICNmZmZkZTY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJidG5fZmV0Y2giIGRpc2FibGVkIG9uY2xpY2s9ImZldGNoRG9ub3JEZXRhaWxzKCkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiA1NXB4OyBoZWlnaHQ6IDI3cHg7IGZvbnQtc2l6ZTogMTFweDsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXItcmFkaXVzOiAzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZldGNoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QW1vdW50PC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZmllbGRfYW1vdW50IiBvbmlucHV0PSJ2YWxpZGF0ZUNvbnNlbnQoKSI+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk1vZGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImZpZWxkX21vZGUiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ub3dhcmRzPC9sYWJlbD48c2VsZWN0IGlkPSJmaWVsZF90b3dhcmRzIiBvbmNoYW5nZT0idmFsaWRhdGVDb25zZW50KCkiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5UcmFucy4gUmVmLjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9yZWYiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Db21tZW50czwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9jb21tZW50cyIgcm93cz0iMiI+PC90ZXh0YXJlYT48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+UEFOPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3BhbiI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjaGVja2JveF9yb3ciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmUwOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY2FuY2VsIj4gQ2FuY2VsDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByaW50ZWQiPiBQcmludGVkDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByYXNhZGFtIj4gUHJhc2FkYW0NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY29ycHVzIj4gQ29ycHVzIFNpZ25lZA0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDEwcHg7IG1hcmdpbi10b3A6IDE1cHg7IHBhZGRpbmctdG9wOiAxNXB4OyBib3JkZXItdG9wOiAycHggc29saWQgIzY2NjsiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyI+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fc2F2ZSIgY2xhc3M9ImJ0bi1zYXZlIiBvbmNsaWNrPSJzYXZlUmVjb3JkKCkiIGRpc2FibGVkPlNhdmU8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9jb25zZW50IiBjbGFzcz0iYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCIgZGlzYWJsZWQgb25jbGljaz0iY29uc2VudEFjdGlvbigpIj5Db25zZW50PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fdW5sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0idG9nZ2xlTG9jayhmYWxzZSkiPlVubG9jazwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0iY29uZmlybUxvY2soKSIgZGlzYWJsZWQ+TG9jazwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5TdW1tYXJ5IiBvbmNsaWNrPSJzaG93RG9uYXRpb25TdW1tYXJ5KCkiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1sZWZ0OiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgU3VtbWFyeQ0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJhbmstc3luYy1idG4iIG9uY2xpY2s9InVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHdpbmRvdy5BQ0NFU1NfVE9LRU4pIiBzdHlsZT0iYmFja2dyb3VuZDojMjdhZTYwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo0cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyI+QmFuayBVcGRhdGU8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1hY3Rpb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMTdhMmI4OyBjb2xvcjogd2hpdGU7IiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSI+UmVmcmVzaDwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tYWRtaW4tYWNjZXNzIiBjbGFzcz0iYnRuLWFjdGlvbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMxN2EyYjg7IGNvbG9yOiB3aGl0ZTsiIG9uY2xpY2s9InRvZ2dsZUFkbWluVGFibGUoKSI+QWRtaW48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tZGV2b3RlZS1hY2Nlc3MiIGNsYXNzPSJidG4tYWN0aW9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzE3YTJiODsgY29sb3I6IHdoaXRlOyIgb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHBzOi8vbXlsYWlwZXJpeWF2YS5naXRodWIuaW8vRGV2b3RlZS8nLCAnX2JsYW5rJykiPkRldm90ZWU8L2J1dHRvbj4NCg0KDQogICAgICAgICAgICAgICAgPGJyPjxicj4NCg0KDQoNCg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4LWdyb3c6IDE7Ij48L2Rpdj4NCg0KDQogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9zZWFyY2giIHBsYWNlaG9sZGVyPSJTZWFyY2guLi4iPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNlYXJjaEJ0biIgY2xhc3M9ImJ0bi1ybiIgb25jbGljaz0icGVyZm9ybVNlYXJjaCgpIj5TZWFyY2g8L2J1dHRvbj4NCg0KDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM1NTU7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiA1cHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyI+DQogICAgICAgICAgICAgICAgKiBTZWFyY2ggTG9naWM6IFJldmVyc2Ugc2VhcmNoLiBObyBQcmVmaXg9RnVsbCwgTS09UGhvbmUsIE4tPU5hbWUsIFQtPVRyYW5zIFJlZiwgUC09UEFOLiBOb3QgZm91bmQgcmVzZXRzIHRvIGxhdGVzdCByZWNvcmQuDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0icmVjZWlwdC1wcmV2aWV3LXJvdyI+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlY2VpcHQtd29ya3NwYWNlIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlLXBhbmVsIiBpZD0ibGVmdC1ldmVudHMiPg0KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iZXZlbnQxLmpwZyIgY2xhc3M9ImV2ZW50LXBob3RvIiBhbHQ9IlJlY2VudCBFdmVudCI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJyZWNlaXB0X2Rpc3BsYXlfYXJlYSI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlLXBhbmVsIiBpZD0icmlnaHQtZXZlbnRzIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9ImV2ZW50Mi5qcGciIGNsYXNzPSJldmVudC1waG90byIgYWx0PSJSZWNlbnQgRXZlbnQiPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLWZvb3RlciIgc3R5bGU9ImdyaWQtY29sdW1uOiBzcGFuIDI7Ij4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1wZGYiIG9uY2xpY2s9ImRvd25sb2FkUmVjZWlwdFBERigpIj5Eb3dubG9hZCBQREY8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi13YSIgb25jbGljaz0ic2VuZFdoYXRzQXBwKCkiPldoYXRzQXBwIFJlY2VpcHQ8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bi1zbXMiIGNsYXNzPSJidG4td2EiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmOyBkaXNwbGF5OiBub25lOyIgb25jbGljaz0ic2VuZFNNUygpIj5TTVMgUmVjZWlwdDwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCg0KDQogICAgICAgIDxkaXYgaWQ9InNlY3VyaXR5UG9ydGFsIiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjpmaXhlZDsgdG9wOjEwJTsgbGVmdDoxMCU7IHdpZHRoOjgwJTsgaGVpZ2h0OjgwJTsgYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyOjJweCBzb2xpZCAjMzMzOyB6LWluZGV4Ojk5OTk7IG92ZXJmbG93LXk6YXV0bzsgcGFkZGluZzoyMHB4OyBib3gtc2hhZG93OiAwcHggMHB4IDIwcHggcmdiYSgwLDAsMCwwLjUpOyI+DQogICAgICAgICAgICA8aDM+VXNlciBBY2Nlc3MgQ29udHJvbCBMaXN0PC9oMz4NCiAgICAgICAgICAgIDxwPlRvZ2dsZSBhY2Nlc3MgZm9yIGZlYXR1cmVzLiAiWSIgPSBWaXNpYmxlLCAiTiIgPSBIaWRkZW4uPC9wPg0KICAgICAgICAgICAgPHRhYmxlIGlkPSJwZXJtVGFibGUiIGJvcmRlcj0iMSIgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsiPg0KICAgICAgICAgICAgICAgIDx0aGVhZD48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2VlZTsiPjx0aD5GZWF0dXJlL09iamVjdDwvdGg+PHRoPkFjY2VzcyAoWS9OKTwvdGg+PC90cj48L3RoZWFkPg0KICAgICAgICAgICAgICAgIDx0Ym9keSBpZD0icGVybUJvZHkiPjwvdGJvZHk+DQogICAgICAgICAgICA8L3RhYmxlPg0KICAgICAgICAgICAgPGJyPg0KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb3dubG9hZFNldHRpbmdzRmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDpncmVlbjsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsiPkdlbmVyYXRlIFNldHRpbmdzIEZpbGU8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3VyaXR5UG9ydGFsJykuc3R5bGUuZGlzcGxheT0nbm9uZSciPkNsb3NlPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KDQoNCg0KDQogICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCg0KDQogICAgPGRpdiBpZD0iYWRtaW4tcGFuZWwtY29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTpub25lOyBtYXJnaW4tdG9wOjIwcHg7IG1heC13aWR0aDogODAwcHg7Ij4NCiAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjogIzAwMzM2NjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOiAxMHB4OyI+QWRtaW5pc3RyYXRpdmUgQ29udHJvbCBQYW5lbDwvaDM+DQogICAgICAgIDx0YWJsZSBib3JkZXI9IjAiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlOyBib3JkZXItc3BhY2luZzogMTJweDsiPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLWNvbnRyb2wtbGlzdCIgY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiAjY2NjY2NjOyBjb2xvcjogIzY2NjY2Njsgd2lkdGg6IDEwMCU7IGN1cnNvcjogbm90LWFsbG93ZWQ7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJldHVybiBmYWxzZTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ+DQogICAgICAgICAgICAgICAgICAgICAgICBDb250cm9sIExpc3QNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwJTsiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2YwOTNmYiAwJSwgI2Y1NTc2YyAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkFub255RmlsbCgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEFub255RmlsbA0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM0M2U5N2IgMCUsICMzOGY5ZDcgMTAwJSk7IHdpZHRoOiAxMDAlOyBjb2xvcjogIzAwMzM2NjsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuTU1QVEJhY2t1cCgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEJhY2t1cCBTeXN0ZW0NCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmE3MDlhIDAlLCAjZmVlMTQwIDEwMCUpOyB3aWR0aDogMTAwJTsgY29sb3I6ICMwMDMzNjY7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkNvdW50cnlGaWVsZENvcnJlY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IENvdW50cnkgRmllbGQNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNmExMWNiIDAlLCAjMjU3NWZjIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQ2l0eUV4dHJhY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDaXR5IE5hbWVzDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZmMDg0NCAwJSwgI2ZmYjE5OSAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkNpdHlDb3JyZWN0aW9uQXBwbHkoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IENpdHkgTmFtZXMNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMmI1ODc2IDAlLCAjNGU0Mzc2IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuRG9ub3JOYW1lQ2hlY2soKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBEb25vciBOYW1lIENoZWNrDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2E0NDViMiAwJSwgI2Q0MTg3MiAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkRvbm9yTmFtZUNvcnJlY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IERvbm9yIE5hbWUNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMzBjZmQwIDAlLCAjMzMwODY3IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQWRkcmVzc0NoZWNrKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQWRkcmVzcyBDaGVjaw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMwOTIwM2YgMCUsICM1Mzc4OTUgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5BZGRyZXNzQ29ycmVjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgQWRkcmVzcw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4ZTQ0YWQgMCUsICM3MzJkOTEgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJ0cmlnZ2VyRnVsbEF1ZGl0KCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQXVkaXQgRGF0YWJhc2UNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMmVjYzcxIDAlLCAjMjdhZTYwIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuUEFOQ29ycmVjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgUEFODQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzAwYjA5YiAwJSwgIzk2YzkzZCAxMDAlKTsgd2lkdGg6IDEwMCU7IGNvbG9yOiAjMDAzMzY2OyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJnZW5lcmF0ZUFkZHJlc3NMYWJlbHMoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBBZGRyZXNzIExhYmVscw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ibGFiZWwtY291bnRyeS1maWx0ZXIiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6NDVweDsgYm9yZGVyLXJhZGl1czo4cHg7IHBhZGRpbmc6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsgYm9yZGVyOjJweCBzb2xpZCAjMDBiMDliOyBiYWNrZ3JvdW5kOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUxMIj5BbGwgQ291bnRyaWVzPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMxZTNjNzIgMCUsICMyYTUyOTggMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5VbmlxdWVEb25vckxpc3QoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBEb25vciBMaXN0DQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImRvbm9yLXNlYXJjaC1pbnB1dCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSJTZWFyY2ggKGUuZy4gUHJhc2FkLCBDaGVubmFpIG9yIFByYXNhZCA7IENoZW5uYWkpIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOjEwMCU7IGhlaWdodDo0NXB4OyBib3JkZXItcmFkaXVzOjhweDsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICMyYTUyOTg7Ij4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyIGlkPSJhZG1pbi1waG90by1yb3ciPg0KICAgICAgICAgICAgICAgIDx0ZCBpZD0ic25hcC1ib3gtMSIgc3R5bGU9IndpZHRoOjUwJTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MTVweDsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IGJvcmRlci1yYWRpdXM6IDhweDsiPjwvdGQ+DQogICAgICAgICAgICAgICAgPHRkIGlkPSJzbmFwLWJveC0yIiBzdHlsZT0id2lkdGg6NTAlOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoxNXB4OyBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsgYm9yZGVyLXJhZGl1czogOHB4OyI+PC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgPC90YWJsZT4NCiAgICA8L2Rpdj4NCg0KDQogICAgPGhyIHN0eWxlPSJtYXJnaW4tdG9wOiA0MHB4OyBib3JkZXI6IDA7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyI+DQoNCiAgICA8c2NyaXB0Pg0KDQoNCiAgICAgICAgdmFyIEdMT0JBTF9DSVRZX1JFUE9SVF9EQVRBID0gIiI7DQogICAgICAgIHZhciBHTE9CQUxfRE9OT1JfTkFNRV9EQVRBID0gIiI7DQogICAgICAgIHZhciBHTE9CQUxfQUREUkVTU19DT1JSRUNUSU9OX0RBVEEgPSAiIjsNCg0KICAgICAgICBsZXQgcmVhZHlJbmRpY2VzID0gW107IC8vIEhvbGRzIGluZGljZXMgZm9yIHRoZSBSUiBmaWx0ZXINCg0KICAgICAgICAvLyAtLS0gR0xPQkFMIFNUQUJMRSBJRCBTRVRVUCAtLS0NCiAgICAgICAgbGV0IE1NUFRfR0xPQkFMX0lEID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ01NUFRfU1RBQkxFX0lEJyk7DQoNCiAgICAgICAgLy8gRm9yY2UgYSBuZXcgSUQgaWYgaXQncyBlbXB0eSBPUiBpZiBpdCBkb2Vzbid0IGhhdmUgeW91ciBwcmVmaXgNCiAgICAgICAgaWYgKCFNTVBUX0dMT0JBTF9JRCB8fCAhTU1QVF9HTE9CQUxfSUQuc3RhcnRzV2l0aCgiTU1QVC1ERVYtU1ctIikpIHsNCiAgICAgICAgICAgIGNvbnN0IHJhbmRvbVN1ZmZpeCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA4KS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgTU1QVF9HTE9CQUxfSUQgPSAiTU1QVC1ERVYtU1ctIiArIHJhbmRvbVN1ZmZpeDsNCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdNTVBUX1NUQUJMRV9JRCcsIE1NUFRfR0xPQkFMX0lEKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQoNCiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBbDQogICAgICAgICAgICAvLyBGaXNjYWwgWWVhcnMNCiAgICAgICAgICAgICJGWTIwMjEtMjAyMiIsICJGWTIwMjItMjAyMyIsICJGWTIwMjMtMjAyNCIsICJGWTIwMjQtMjAyNSIsICJGWTIwMjUtMjAyNiIsDQogICAgICAgICAgICAvLyBVSSBFbGVtZW50cyAoUm93cy9TZWN0aW9ucykNCiAgICAgICAgICAgICJBZG1pbl9Sb3ciLCAiRGFzaGJvYXJkX1NlY3Rpb24iLCAiSGlzdG9yeV9UYWIiLA0KICAgICAgICAgICAgLy8gQnV0dG9ucw0KICAgICAgICAgICAgImJ0bl9zYXZlIiwgImJ0bl9kZWxldGUiLCAiYnRuX3ByaW50IiwgImJ0bl9jYW5jZWwiLCAiYnRuX3N5bmMiLCAiYnRuX2V4cG9ydCINCiAgICAgICAgXTsNCg0KDQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Qb3J0YWwgU2VsZWN0aW9uIGZvciBhIHBhcnRpY3VsYXIgdXNlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gb3BlblNlY3VyaXR5UG9ydGFsKHRhcmdldFVzZXIpIHsNCiAgICAgICAgICAgIHVzZXJMaXN0ID0gdGV4dC5zcGxpdA0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt0YXJnZXRVc2VyfS50eHRgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IHt9Ow0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHRleHQuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgc2V0dGluZ3NbcGFydHNbMF0udHJpbSgpXSA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSBbJ2J0bl91bmxvY2snLCAnYnRuX2xvY2snLCAnc2VhcmNoQnRuJywgJ2Jhbmstc3luYy1idG4nLCAnYnRuX2NvbnNlbnQnLCAnYnRuU3VtbWFyeSddOw0KICAgICAgICAgICAgICAgIGxldCByb3dzSHRtbCA9ICIiOw0KDQogICAgICAgICAgICAgICAgLy8gTG9vcCBmb3IgWS9OIGRyb3Bkb3ducw0KICAgICAgICAgICAgICAgIGNvbnRyb2xzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZXR0aW5nc1tpZF0gfHwgIlkiOw0KICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBmb250LWZhbWlseTpBcmlhbDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7aWR9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPjxzZWxlY3QgaWQ9ImlucHV0LSR7aWR9IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzo4cHg7Ij48b3B0aW9uIHZhbHVlPSJZIiAke3ZhbCA9PT0gJ1knID8gJ3NlbGVjdGVkJyA6ICcnfT5ZPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTiIgJHt2YWwgPT09ICdOJyA/ICdzZWxlY3RlZCcgOiAnJ30+Tjwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgLy8gU1RBUlQ6IFRISVMgSVMgVEhFIEZJRUxEIFRIQVQgV0FTIE1JU1NJTkcgRlJPTSBZT1VSIFNDUkVFTg0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9ucyA9IHNldHRpbmdzWydzZWN0aW9ucyddIHx8ICIiOw0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBmb250LWZhbWlseTpBcmlhbDsgZm9udC13ZWlnaHQ6Ym9sZDsiPnNlY3Rpb25zPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5wdXQtc2VjdGlvbnMiIHZhbHVlPSIke2N1cnJlbnRTZWN0aW9uc30iIHBsYWNlaG9sZGVyPSJFbnRlciBkaWdpdHMgMTIzNDU2NyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNlOTFlNjM7IGJveC1zaXppbmc6Ym9yZGVyLWJveDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjExcHg7IGNvbG9yOiM2NjY7IG1hcmdpbi10b3A6NXB4OyI+VHlwZSAxLTcgaGVyZSB0byBzaG93L2hpZGUgYXBwIGNvbnRhaW5lcnMuPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQogICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0aW5nIE1pblJlY29yZE51bWJlciByb3cNCiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TWluID0gc2V0dGluZ3NbJ01pblJlY29yZE51bWJlciddIHx8ICIiOw0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGZvbnQtZmFtaWx5OkFyaWFsOyBmb250LXdlaWdodDpib2xkOyI+TWluUmVjb3JkTnVtYmVyPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6MTBweDsiPjxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnB1dC1NaW5SZWNvcmROdW1iZXIiIHZhbHVlPSIke2N1cnJlbnRNaW59IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNlOTFlNjM7Ij48L3RkPjwvdHI+YDsNCg0KICAgICAgICAgICAgICAgIC8vIFRoZSBVSSBjb250YWluZXINCiAgICAgICAgICAgICAgICBjb25zdCBwb3J0YWxIdG1sID0gYDxkaXYgaWQ9InBvcnRhbC1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246Zml4ZWQ7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTsgei1pbmRleDoxMDAwMDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsiPjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHdpZHRoOjgwMHB4OyBhbGlnbi1zZWxmOmZsZXgtc3RhcnQ7Ij48dGFibGUgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsiPjx0Ym9keT4ke3Jvd3NIdG1sfTwvdGJvZHk+PC90YWJsZT48ZGl2IHN0eWxlPSJwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246cmlnaHQ7Ij48YnV0dG9uIG9uY2xpY2s9InNhdmVQb3J0YWxTZXR0aW5ncygnJHt0YXJnZXRVc2VyfScpIiBzdHlsZT0iYmFja2dyb3VuZDojODAwMDAwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4IDIwcHg7IGN1cnNvcjpwb2ludGVyOyI+U0FWRSBDSEFOR0VTPC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBwb3J0YWxIdG1sKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUG9ydGFsIFNlbGVjdGlvbiBTYXZpbmcgZm9yICBhIHBhcnRpY3VsYXIgdXNlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2F2ZVBvcnRhbFNldHRpbmdzKHRhcmdldFVzZXIpIHsNCiAgICAgICAgICAgIC8vIENvbGxlY3QgYWxsIGZpZWxkcyBpbmNsdWRpbmcgJ3NlY3Rpb25zJw0KICAgICAgICAgICAgY29uc3QgaWRzID0gWydidG5fdW5sb2NrJywgJ2J0bl9sb2NrJywgJ3NlYXJjaEJ0bicsICdiYW5rLXN5bmMtYnRuJywgJ2J0bl9jb25zZW50JywgJ2J0blN1bW1hcnknLCAnc2VjdGlvbnMnLCAnTWluUmVjb3JkTnVtYmVyJ107DQogICAgICAgICAgICBsZXQgZmlsZUxpbmVzID0gW107DQoNCiAgICAgICAgICAgIGlkcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpbnB1dC0ke2lkfWApOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZmlsZUxpbmVzLnB1c2goYCR7aWR9IHwgJHtlbC52YWx1ZS50cmltKCl9YCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmaWxlTGluZXMuam9pbignXG4nKTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBgL1NldHRpbmdzLyR7dGFyZ2V0VXNlcn0udHh0YCwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogZmlsZUNvbnRlbnQNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlVwZGF0ZWQgc3VjY2Vzc2Z1bGx5ISIpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9ydGFsLW92ZXJsYXknKS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFVzZXIgPT09IE1NUFRfVVNFUl9OQU1FKSBhcHBseVVzZXJQZXJtaXNzaW9ucyh0YXJnZXRVc2VyKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJTYXZlIGVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQ29uc3RhbnRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBjb25zdCBzY3JpcHRVUkwgPSAiaHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J6emJpWkMzX295QWRTdUFVZ1hSNklCUW1OWjNmRVJtaEhVVnhDTVN5N0VBWUNYOGpYNkZnZXE0TWtxaC1xYk1BWjAvZXhlYyI7DQoNCiAgICAgICAgY29uc3QgTU1QVF9WRVJTSU9OID0gIjMxLjUiOw0KICAgICAgICAvLyBBbGwgb3JpZ2luYWwgQXV0aGVudGljYXRpb24gS2V5cyBwcmVzZXJ2ZWQgZnJvbSBkNDMNCiAgICAgICAgY29uc3QgTU1QVF9BVVRIX0tFWSA9ICcya2d6ZHZlaTEwYzNybWonOw0KICAgICAgICBjb25zdCBNTVBUX0FVVEhfU0VDUkVUID0gJzd3amxxazNxa29zNmtvcic7DQogICAgICAgIGNvbnN0IE1NUFRfQVVUSF9SRUZSRVNIID0gJ0hXZzZrU1RFR3NzQUFBQUFBQUFBQVk2allfN091N2J3UzhwWEIzMmNDLVNnb0hkYlZ4aUZENzBYaVU0NXpVOTInOw0KDQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9EQiA9ICcvRGF0YUJhc2VzL01NUFQyLktQJzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX1VTRVJTID0gJy9TZXR0aW5ncy9Vc2Vycy50eHQnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfQVBQUk9WRUQgPSAnL1NldHRpbmdzL0FwcHJvdmVkLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9MT0dPID0gJy9JbWFnZXMvTG9nby5qcGcnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfRFJPUERPV05TID0gJy9TZXR0aW5ncy9Ecm9wRG93bi50eHQnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfQ0FTSCA9ICcvU2V0dGluZ3MvQ2FzaERlcG9zaXRlZC50eHQnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfQkFOSyA9ICcvRGF0YUJhc2VzL01NUFQzLktQJzsNCiAgICAgICAgY29uc3QgTU1QVF9VUkxfRVhQRU5TRVMgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9hNWU4OHZqemI2dzJxbWVsM3lzeXgvRXhwZW5zZXMueGxzeD9ybGtleT1qbWQ4aTBqczFza3hsMnZ5YXZzN3BvOHlwJmRsPTEiOw0KICAgICAgICBjb25zdCBCQU5LX1NUQVRFTUVOVF9VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9mMjdtdXlsb2JkYWp2em14Y2k4NWQvQmFua1N0YXRlbWVudC54bHM/cmxrZXk9cjQzajBzdm5tbGlnM3FtNmlhaXJidG9qZCZkbD0xIjsNCiAgICAgICAgY29uc3QgRVhFTVBUX0ZJTEUgPSAiL1NldHRpbmdzL0V4ZW1wdC50eHQiOw0KICAgICAgICBjb25zdCBNTVBUX0xPR19ESVIgPSAiL0xvZ3MvIjsgLy8gVGhlIGZvbGRlciBmb3IgdXNlciBsb2dzDQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9TRVEgPSAnL0RhdGFCYXNlcy9zZXF1ZW5jZS50eHQnOw0KICAgICAgICBsZXQgTU1QVF9SQURJT19GSUxFID0gJyc7DQoNCiAgICAgICAgY29uc3QgTU1QVF9MSU5LX0FOT05ZID0gJ2h0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvM3Q1ZDZqMmFxMXZhem5sNWk5ejd4L0Fub255RmlsbC50eHQ/cmxrZXk9bnhmbDl5MjdwZWVxdjB0c3plamNpM2ZlNiZkbD0xJzsNCg0KICAgICAgICBjb25zdCBNTVBUX0RCX1JBV19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9qNnUzaG8xNGR4eWRyNXY2aDVoYmkvTU1QVDIuS1A/cmxrZXk9M2VrdXJycTh3a3owOGJzcGl4emdqajV6ciZzdD1jcHR5bm5iZCZyYXc9MSI7DQoNCiAgICAgICAgY29uc3QgQ0lUWV9DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS80N2ZicXc3OXFvbHljcWIzNXM4dWcvQ2l0eUNvcnJlY3Rpb25zLnR4dD9ybGtleT16dzN1YjdyM3QyaW80YmQycXEzYXV5NDR5JmRsPTEiOw0KDQogICAgICAgIGNvbnN0IENPVU5UUllfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZ25yMW8yZDRyY2JkYno3NWZ4ZmtiL0NvdW50cnlDb3JyZWN0aW9ucy50eHQ/cmxrZXk9NzRmbHRyeHltOGcwZzg4cWVpZWpqMWJ3eiZkbD0xIjsNCg0KICAgICAgICBjb25zdCBOQU1FX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2JxYnh2eGIxaTIzczhyZG9mN2p2Mi9OYW1lQ29ycmVjdGlvbnMudHh0P3Jsa2V5PWh0eGU1Mmc4ZXltMG5lcGF3dmZpczUybWgmZGw9MSI7DQoNCiAgICAgICAgY29uc3QgTU1QVF9CQUNLVVBfRElSID0gJy9CYWNrdXAvJzsNCg0KICAgICAgICBjb25zdCBNTVBUX0lNR19FVkVOVDEgPSAnL0ltYWdlcy9FdmVudDEuanBnJzsNCiAgICAgICAgY29uc3QgTU1QVF9JTUdfRVZFTlQyID0gJy9JbWFnZXMvRXZlbnQyLmpwZyc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9FVkVOVFNfVFhUID0gJy9JbWFnZXMvRXZlbnRzRGV0YWlscy50eHQnOw0KDQogICAgICAgIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID0gMDsgLy8gRGVmYXVsdDogTm8gcmVzdHJpY3Rpb24NCg0KICAgICAgICBjb25zdCBwYW5lbENvbnRlbnQgPSAodGl0bGUsIHVybCkgPT4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmOTkzMzsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxMHB4OyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBmbGV4LXNocmluazogMDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGl0bGV9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV2ZW50LWltZy1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke3VybH0iIGFsdD0iRXZlbnQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQpgOw0KDQogICAgICAgIGxldCBpc0RpcnR5ID0gZmFsc2U7IC8vIFRyYWNrcyBpZiB0aGUgcmVjb3JkIGhhcyB1bnNhdmVkIGNoYW5nZXMNCg0KICAgICAgICBsZXQgTU1QVF9URU1QMSA9ICIiOw0KICAgICAgICBsZXQgTU1QVF9URU1QMyA9ICIiOw0KDQogICAgICAgIGxldCBNTVBUX1VTRVJfTkFNRSA9ICIiOw0KICAgICAgICBsZXQgTU1QVF9ERVZJQ0VfSUQgPSAiIjsNCg0KDQogICAgICAgIGxldCBHTE9CQUxfREJfTElORVMgPSBbXTsNCiAgICAgICAgbGV0IGN1cnJlbnRSZWNvcmRJbmRleCA9IDA7DQogICAgICAgIGxldCBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IC0xOw0KICAgICAgICBsZXQgdCA9ICIiOw0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NvbnNlbnQgbGV0dGVyIGRvd25sb2FkIGJ1dHRvbiBlbmFibGUgLyBkaXNhYmxlIGxvZ2ljDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gTkVXIENPTlNFTlQgTE9HSUMgLS0tDQogICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlQ29uc2VudCgpIHsNCiAgICAgICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZSkgfHwgMDsNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2NvbnNlbnQnKTsNCg0KICAgICAgICAgICAgLy8gUnVsZTogRW5hYmxlZCAoU29saWQgUmVkKSBpZiBUb3dhcmRzIGlzIENvcnB1cyBBTkQgQW1vdW50ID49IDEwLDAwMA0KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlOiBEaXNhYmxlZCAoRmFkZWQgUmVkKQ0KICAgICAgICAgICAgaWYgKHRvd2FyZHMuaW5jbHVkZXMoIkNPUlBVUyIpICYmIGFtdCA+PSAxMDAwMCkgew0KICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAiYnRuLWFjdGlvbiBidG4tY29uc2VudC1hY3RpdmUiOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAiYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Qb3B1bGF0ZXMgdGhlIDIwIGZpZWxkcyBvZiByZWNlaXB0cyBmcm9tIGRiIGZvciBzZWxlY3RlZCByZWNlaXB0DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkaXNwbGF5UmVjb3JkKGluZGV4KSB7DQogICAgICAgICAgICBpZiAoIUdMT0JBTF9EQl9MSU5FU1tpbmRleF0pIHJldHVybjsNCg0KDQogICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICByZXNldFNpZGVQYW5lbHMoKTsNCg0KDQogICAgICAgICAgICBjb25zdCBjb2xzID0gR0xPQkFMX0RCX0xJTkVTW2luZGV4XS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAvLyBIZWxwZXIgdG8gc2FmZWx5IHNldCB2YWx1ZXMNCiAgICAgICAgICAgIGNvbnN0IHNldFZhbCA9IChpZCwgdmFsKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSBlbC52YWx1ZSA9IHZhbCA/IHZhbC50cmltKCkgOiAiIjsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbnN0IHNldENoZWNrID0gKGlkLCB2YWwpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLmNoZWNrZWQgPSAodmFsPy50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyIpOw0KICAgICAgICAgICAgfTsNCg0KDQogICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICB3cml0ZVVzZXJMb2coInZpZXdlZCByZWNlaXB0IG51bWJlcjogIiArIChjb2xzWzBdIHx8ICJCTEFOSyIpKTsNCg0KICAgICAgICAgICAgLy8gRVhBQ1QgTUFQUElORyBGT1IgTU1QVDIuS1AgKFYxLjcgU3RhbmRhcmRzKQ0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9yZWNubycsIGNvbHNbMF0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9kYXRlJywgY29sc1sxXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX25hbWUnLCBjb2xzWzJdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfcGhvbmUnLCBjb2xzWzNdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfYWRkcmVzcycsIGNvbHNbNF0/LnJlcGxhY2UoL34vZywgJ1xuJykpOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9lbWFpbCcsIGNvbHNbNV0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9wYW4nLCBjb2xzWzZdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfc3RhcicsIGNvbHNbN10pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9nb3RocmFtJywgY29sc1s4XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2Ftb3VudCcsIGNvbHNbOV0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9yZWYnLCBjb2xzWzEwXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX21vZGUnLCBjb2xzWzExXSk7DQoNCiAgICAgICAgICAgIC8vIFRvd2FyZHMgb2Z0ZW4gY29udGFpbnMgYSBzdWZmaXggKGUuZy4sICJDT1JQVVMgLSA4MEciKSwgd2UgdHJpbSBpdCBmb3IgdGhlIGRyb3Bkb3duIG1hdGNoDQogICAgICAgICAgICBjb25zdCB0b3dhcmRzUmF3ID0gY29sc1sxMl0gfHwgIiI7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3Rvd2FyZHMnLCB0b3dhcmRzUmF3LnNwbGl0KCctJylbMF0udHJpbSgpKTsNCg0KICAgICAgICAgICAgc2V0Q2hlY2soJ2ZpZWxkX2NhbmNlbCcsIGNvbHNbMTNdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfY29tbWVudHMnLCBjb2xzWzE0XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3BpbmNvZGUnLCBjb2xzWzE1XSk7DQogICAgICAgICAgICBzZXRDaGVjaygnZmllbGRfcHJpbnRlZCcsIGNvbHNbMTZdKTsNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9wcmFzYWRhbScsIGNvbHNbMTddKTsNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9jb3JwdXMnLCBjb2xzWzE4XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2NvdW50cnknLCBjb2xzWzE5XSB8fCAiSU5ESUEiKTsNCg0KICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGVDb25zZW50ID09PSAiZnVuY3Rpb24iKSB2YWxpZGF0ZUNvbnNlbnQoKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlUmVjZWlwdFByZXZpZXcgPT09ICJmdW5jdGlvbiIpIHVwZGF0ZVJlY2VpcHRQcmV2aWV3KGluZGV4KTsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZSA9IGluZGV4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUmVjZWlwdCBQcmV2aWV3DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVSZWNlaXB0UHJldmlldyhpbmRleCkgew0KICAgICAgICAgICAgY29uc3QgZiA9IEdMT0JBTF9EQl9MSU5FU1tpbmRleF0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgIGNvbnN0IGxvZ29TcmMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkxvZ29JbWcnKT8uc3JjIHx8ICIiOw0KDQogICAgICAgICAgICAvLyBFeHRyYWN0IHNwZWNpYWwgdG93YXJkcyB7YnJhY2tldHN9DQogICAgICAgICAgICBjb25zdCBjb21tZW50cyA9IGZbMTRdIHx8ICIiOw0KICAgICAgICAgICAgY29uc3Qgc3BlY2lhbE1hdGNoID0gY29tbWVudHMubWF0Y2goL1x7Lio/XH0vKTsNCiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxUb3dhcmRzID0gc3BlY2lhbE1hdGNoID8gc3BlY2lhbE1hdGNoWzBdIDogIiI7DQoNCiAgICAgICAgICAgIC8vIERhdGEgTWFwcGluZw0KICAgICAgICAgICAgY29uc3QgcGluY29kZSA9IGZbMTVdIHx8ICIiOw0KICAgICAgICAgICAgY29uc3QgY291bnRyeSA9IGZbMTldIHx8ICJJTkRJQSI7DQoNCiAgICAgICAgICAgIC8vIC0tLSBXQVRFUk1BUksgTE9HSUMgLS0tDQogICAgICAgICAgICBjb25zdCBpc0NhbmNlbGxlZCA9IChmWzEzXT8udHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiKTsNCiAgICAgICAgICAgIGNvbnN0IHdhdGVybWFya0hUTUwgPSBpc0NhbmNlbGxlZCA/DQogICAgICAgICAgICAgICAgYDxkaXYgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1MCU7IGxlZnQ6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKC0zMGRlZyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiA2MHB0OyBjb2xvcjogcmdiYSgyNTUsIDAsIDAsIDAuMjUpOyBmb250LXdlaWdodDogYm9sZDsgYm9yZGVyOiAxMHB4IHNvbGlkIHJnYmEoMjU1LCAwLCAwLCAwLjI1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7IHotaW5kZXg6IDEwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENBTkNFTExFRA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YCA6ICIiOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjZWlwdF9kaXNwbGF5X2FyZWEnKS5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWNlaXB0LWNvbnRhaW5lciIgc3R5bGU9ImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBwb3NpdGlvbjogcmVsYXRpdmU7IG92ZXJmbG93OiBoaWRkZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3dhdGVybWFya0hUTUx9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImhlYWRlci10YWJsZSIgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0ibG9nby1jb2wiIHN0eWxlPSJ3aWR0aDogNzBwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke2xvZ29TcmN9IiBzdHlsZT0id2lkdGg6IDcwcHQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImFkZHJlc3MtY29sIiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idHJ1c3QtbmFtZSIgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE0cHQ7Ij5NWUxBSSBNQUhBUEVSSVlBVkEgQU5VU0hBTSBUUlVTVCAoUkVHRC4pPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idHJ1c3QtZGV0YWlscyIgc3R5bGU9ImZvbnQtc2l6ZTogOXB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5ldyBOby4gNCwgT2xkIE5vLiAyMywgUGl0Y2h1cGlsbGFpIFN0cmVldCwgTXlsYXBvcmUsIENoZW5uYWktNjAwIDAwNC48YnI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBob25lOiA2MzgwODk4MjMxLCA4NjEwMjE0MTM4LiBXaGF0c0FwcDogNjM4MDg5ODIzMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idmFyaWFibGUtcm93IiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tdG9wOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPkRhdGU6ICR7ZlsxXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTJwdDsiPlJFQ0VJUFQ8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPk5vOiAke2ZbMF19PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMTBwdDsgZm9udC1zaXplOiAxMC41cHQ7IGxpbmUtaGVpZ2h0OiAxLjY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWl2ZWQgd2l0aCB0aGFua3MgUnMuIDxiPiR7Zls5XX08L2I+ICg8Yj5SdXBlZXMgJHt0b1dvcmRzKGZbOV0pfSBvbmx5PC9iPikgZm9yIDxiPiR7ZlsxMl19PC9iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWEgJHtmWzExXX0gPGI+JHtmWzEwXSB8fCAnJ308L2I+IGZyb206DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaXZpZGVyIiBzdHlsZT0iYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7IG1hcmdpbjogMTBweCAwOyI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImRvbm9yLXRhYmxlIiBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGxpbmUtaGVpZ2h0OiAxLjg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDogMjAlOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+TmFtZTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGI+JHtmWzJdfTwvYj48L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiB0b3A7Ij5QQU48L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2ZbNl0gfHwgJ04vQSd9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsiPiR7c3BlY2lhbFRvd2FyZHN9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+UGhvbmU8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7ZlszXSB8fCAnTi9BJ308L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiB0b3A7Ij5BZGRyZXNzPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke2ZbNF19IC0gJHtwaW5jb2RlfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPkNvdW50cnk8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7Y291bnRyeX08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaXZpZGVyIiBzdHlsZT0iYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7IG1hcmdpbjogMTBweCAwOyI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgbWFyZ2luLXRvcDogNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogN3B0OyBmb250LXN0eWxlOiBpdGFsaWM7Ij4qQ29tcHV0ZXIgR2VuZXJhdGVkIFJlY2VpcHQgLSBObyBzaWduYXR1cmUgUmVxdWlyZWQ8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyLXRydXN0LXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogOXB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgTVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb290ZXItdGF4LWluZm8iIHN0eWxlPSJmb250LXNpemU6IDhwdDsgbWFyZ2luLXRvcDogMTVweDsgYm9yZGVyLXRvcDogMXB4IGRhc2hlZCAjZWVlOyBwYWRkaW5nLXRvcDogNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlYyAxMi1BIFZhbGlkIHRpbGwgMzEtMDMtMjAyNiB8IFBBTiBBQUVUTTUxNDVKDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCmA7DQoNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0ZldGNoIERyb2JveCBUb2tlbiBmcm9tIGFwaQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQWxsIEF1dGgvVG9rZW4vTG9hZCBsb2dpYyBwcmVzZXJ2ZWQgZnJvbSBkNDMNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0TU1QVFRva2VuKCkgew0KICAgICAgICAgICAgY29uc3QgaCA9IGJ0b2EoTU1QVF9BVVRIX0tFWS50cmltKCkgKyAiOiIgKyBNTVBUX0FVVEhfU0VDUkVULnRyaW0oKSk7DQogICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0Jhc2ljICcgKyBoLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSwNCiAgICAgICAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgJ2dyYW50X3R5cGUnOiAncmVmcmVzaF90b2tlbicsICdyZWZyZXNoX3Rva2VuJzogTU1QVF9BVVRIX1JFRlJFU0gudHJpbSgpIH0pDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsgcmV0dXJuIGQuYWNjZXNzX3Rva2VuIHx8IG51bGw7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Jbml0aWFsaXplcyBkYXRhIGF0IGxhdW5jaC4gdmVyeSBjcnVjaWFsLiBwcm9ibGVtYXRpYyBmdW5jdGlvbi4gbm90IHRvIGJlIGRpc3R1cmJlZC4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVNTVBUKCkgew0KICAgICAgICAgICAgLy8gMS4gSEFSRFdBUkUgSUQgJiBWRVJTSU9OIFNFVFVQDQogICAgICAgICAgICBjb25zdCBjdnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgIGNvbnN0IGdsID0gY3ZzLmdldENvbnRleHQoJ3dlYmdsJyk7DQogICAgICAgICAgICBjb25zdCBkSSA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbycpOw0KICAgICAgICAgICAgY29uc3QgcmVuID0gZ2wuZ2V0UGFyYW1ldGVyKGRJLlVOTUFTS0VEX1JFTkRFUkVSX1dFQkdMKTsNCiAgICAgICAgICAgIGxldCBoYXNoID0gMDsNCiAgICAgICAgICAgIGNvbnN0IHN0ciA9IG5hdmlnYXRvci51c2VyQWdlbnQgKyByZW4gKyBzY3JlZW4ud2lkdGggKyBzY3JlZW4uaGVpZ2h0Ow0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBzdHIuY2hhckNvZGVBdChpKTsNCiAgICAgICAgICAgICAgICBoYXNoIHw9IDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IGRldklEID0gTU1QVF9HTE9CQUxfSUQ7DQogICAgICAgICAgICBNTVBUX0RFVklDRV9JRCA9IGRldklEOw0KDQogICAgICAgICAgICAvLyBSZXN0b3JlIFVJIGRpc3BsYXkgb2YgSUQgYW5kIFZlcnNpb24NCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5RGV2aWNlSUQnKS5pbm5lclRleHQgPSBkZXZJRDsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5VmVyc2lvbicpLmlubmVyVGV4dCA9IE1NUFRfVkVSU0lPTjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICB0ID0gYXdhaXQgZ2V0TU1QVFRva2VuKCk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBMT0dPIEZFVENIIExPR0lDIChSZXN0b3JlZCkNCiAgICAgICAgICAgICAgICBjb25zdCBsUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9MT0dPIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChsUi5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gYXdhaXQgbFIuYmxvYigpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB1ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChiKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyAndScgaXMgdGhlIGJsb2IgVVJMIHVzZWQgYnkgZGlzcGxheVJlY29yZCBmb3IgdGhlIHJlY2VpcHQgbG9nbw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb0NvbnRhaW5lcicpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iJHt1fSIgY2xhc3M9ImxvZ28tY2lyY2xlIGxvZ28tbGFyZ2UiPmA7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvSGVhZGVyQ29udGFpbmVyJykuaW5uZXJIVE1MID0gYDxpbWcgaWQ9Im1haW5Mb2dvSW1nIiBzcmM9IiR7dX0iIGNsYXNzPSJsb2dvLWNpcmNsZSI+YDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDcml0aWNhbDogRW5zdXJlIHRoZSBnbG9iYWwgcmVmZXJlbmNlIGZvciB0aGUgcmVjZWlwdCBpbWFnZSBleGlzdHMNCiAgICAgICAgICAgICAgICAgICAgd2luZG93Lk1NUFRfTE9HT19CTE9CX1VSTCA9IHU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gMy4gQUNDRVNTIENPTlRST0wgJiBNVUxUSS1VU0VSIExPR0lDDQogICAgICAgICAgICAgICAgY29uc3QgYVIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQVBQUk9WRUQgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFUID0gYXdhaXQgYVIudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgLy8gRmluZCBhbGwgbWF0Y2hpbmcgdXNlcnMgZm9yIHRoaXMgZGV2aWNlDQogICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGFULnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwudHJpbSgpICE9PSAiIiAmJiBsLmluY2x1ZGVzKE1NUFRfREVWSUNFX0lEKSk7DQoNCiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIE1VTFRJLVVTRVI6IExldCB0aGUgdXNlciBzZWxlY3QgdGhlaXIgcHJvZmlsZQ0KICAgICAgICAgICAgICAgICAgICBzaG93VXNlcklkZW50aXR5U2VsZWN0b3IobWF0Y2hlcywgdCwgTU1QVF9ERVZJQ0VfSUQpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFNJTkdMRSBVU0VSOiBQcm9jZWVkIHRvIHNlY3VyaXR5IGdhdGUNCiAgICAgICAgICAgICAgICAgICAgcnVuUGVyc29uYWxTZWN1cml0eUdhdGUobWF0Y2hlc1swXSwgTU1QVF9ERVZJQ0VfSUQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmVkOiBMb2cgdGhlIHN1Y2Nlc3NmdWwgbGF1bmNoDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ0xhdW5jaCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFDQ0VTUyBSRVNUUklDVEVEIChSZXN0b3JlZCBmdWxsIFVJIGJsb2NrKQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtYWluQXV0aFNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoU2NyZWVuJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChtYWluQXV0aFNjcmVlbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWFpbkF1dGhTY3JlZW4uaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGhlaWdodDogMTAwdmg7IGJhY2tncm91bmQ6ICNmNGY0ZjQ7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMjBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDMwcHg7IGJvcmRlci1yYWRpdXM6IDE1cHg7IGJvcmRlcjogMnB4IHNvbGlkICNmZjRkNGQ7IGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC4xKTsgbWF4LXdpZHRoOiA0NTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOiAjZDk1MzRmOyI+8J+aqyBBQ0NFU1MgUkVTVFJJQ1RFRDwvaDI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkRldmljZSBJRDogPGI+JHtNTVBUX0RFVklDRV9JRH08L2I+IGlzIG5vdCByZWdpc3RlcmVkLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSIgc3R5bGU9ImJhY2tncm91bmQ6ICNkOTUzNGY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMnB4IDI1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgd2lkdGg6IDEwMCU7Ij5SRVRSWSBDT05ORUNUSU9OPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2hlY2tEZXZpY2VGb3JTTVMoKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJNTVBUIEluaXRpYWxpemF0aW9uIENyaXRpY2FsIEZhaWx1cmU6IiwgZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQoNCg0KDQoNCg0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUG9wdWxhdGVzIGRyb3Bkb3duIG1lbnVzIGZvciBUb3dhcmRzIGFuZCBNb2RlIC0gbGlzdCBmcm9tIERyb3BEb3duLnR4dCBpbiBzZXR0aW5ncyBmb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREcm9wZG93bnModG9rZW4pIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZHJSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfRFJPUERPV05TIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghZHJSLm9rKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCBkclIudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdHh0LnNwbGl0KCdcbicpLm1hcChsID0+IGwudHJpbSgpKS5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbVMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKTsNCg0KICAgICAgICAgICAgICAgIC8vIENsZWFyIGV4aXN0aW5nIG9wdGlvbnMNCiAgICAgICAgICAgICAgICBtUy5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICB0Uy5pbm5lckhUTUwgPSAiIjsNCg0KICAgICAgICAgICAgICAgIGxldCBjdXJTZWMgPSAiIjsNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igc2VjdGlvbiBoZWFkZXJzIGxpa2UgW01PREVdIG9yIFtUT1dBUkRTXQ0KICAgICAgICAgICAgICAgICAgICBpZiAobC5zdGFydHNXaXRoKCdbJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1clNlYyA9IGwudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIHZhbHVlIChwYXJ0IGJlZm9yZSB0aGUgaHlwaGVuKQ0KICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gbC5zcGxpdCgnLScpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIG8udmFsdWUgPSB2YWw7DQogICAgICAgICAgICAgICAgICAgIG8udGV4dENvbnRlbnQgPSB2YWw7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNlYyA9PT0gIltNT0RFXSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1TLmFwcGVuZENoaWxkKG8pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1clNlYyA9PT0gIltUT1dBUkRTXSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRTLmFwcGVuZENoaWxkKG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRyb3Bkb3ducyBQb3B1bGF0ZWQiKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkRyb3Bkb3duIGVycm9yOiIsIGVycik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Db252ZXJ0cyBudW1iZXJzIHRvIHdvcmRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b1dvcmRzKG4pIHsNCiAgICAgICAgICAgIGxldCBhID0gWycnLCAnT25lICcsICdUd28gJywgJ1RocmVlICcsICdGb3VyICcsICdGaXZlICcsICdTaXggJywgJ1NldmVuICcsICdFaWdodCAnLCAnTmluZSAnLCAnVGVuICcsICdFbGV2ZW4gJywgJ1R3ZWx2ZSAnLCAnVGhpcnRlZW4gJywgJ0ZvdXJ0ZWVuICcsICdGaWZ0ZWVuICcsICdTaXh0ZWVuICcsICdTZXZlbnRlZW4gJywgJ0VpZ2h0ZWVuICcsICdOaW5ldGVlbiAnXTsNCiAgICAgICAgICAgIGxldCBiID0gWycnLCAnJywgJ1R3ZW50eScsICdUaGlydHknLCAnRm9ydHknLCAnRmlmdHknLCAnU2l4dHknLCAnU2V2ZW50eScsICdFaWdodHknLCAnTmluZXR5J107DQogICAgICAgICAgICBsZXQgbnVtID0gKCcwMDAwMDAwMDAnICsgcGFyc2VJbnQobikpLnN1YnN0cigtOSkubWF0Y2goL14oXGR7Mn0pKFxkezJ9KShcZHsyfSkoXGR7MX0pKFxkezJ9KSQvKTsNCiAgICAgICAgICAgIGlmICghbnVtKSByZXR1cm4gIiI7DQogICAgICAgICAgICBsZXQgc3RyID0gJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVsxXSAhPSAwKSA/IChhW051bWJlcihudW1bMV0pXSB8fCBiW251bVsxXVswXV0gKyAnICcgKyBhW251bVsxXVsxXV0pICsgJ0Nyb3JlICcgOiAnJzsNCiAgICAgICAgICAgIHN0ciArPSAobnVtWzJdICE9IDApID8gKGFbTnVtYmVyKG51bVsyXSldIHx8IGJbbnVtWzJdWzBdXSArICcgJyArIGFbbnVtWzJdWzFdXSkgKyAnTGFraCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVszXSAhPSAwKSA/IChhW051bWJlcihudW1bM10pXSB8fCBiW251bVszXVswXV0gKyAnICcgKyBhW251bVszXVsxXV0pICsgJ1Rob3VzYW5kICcgOiAnJzsNCiAgICAgICAgICAgIHN0ciArPSAobnVtWzRdICE9IDApID8gKGFbTnVtYmVyKG51bVs0XSldIHx8IGJbbnVtWzRdWzBdXSArICcgJyArIGFbbnVtWzRdWzFdXSkgKyAnSHVuZHJlZCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVs1XSAhPSAwKSA/ICgoc3RyICE9ICcnKSA/ICdhbmQgJyA6ICcnKSArIChhW051bWJlcihudW1bNV0pXSB8fCBiW251bVs1XVswXV0gKyAnICcgKyBhW251bVs1XVsxXV0pIDogJyc7DQogICAgICAgICAgICByZXR1cm4gc3RyLnRyaW0oKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIG5hdmlnYXRlRGF0YWJhc2UodikgeyBjdXJyZW50UmVjb3JkSW5kZXggPSB2OyBkaXNwbGF5UmVjb3JkKHYpOyB9DQogICAgICAgIGZ1bmN0aW9uIGNoYW5nZVJlY29yZChkKSB7IGxldCBuID0gcGFyc2VJbnQoY3VycmVudFJlY29yZEluZGV4KSArIGQ7IGlmIChuID49IDAgJiYgbiA8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGgpIHsgY3VycmVudFJlY29yZEluZGV4ID0gbjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKS52YWx1ZSA9IG47IGRpc3BsYXlSZWNvcmQobik7IH0gfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NyZWF0ZXMgYSBOZXcgQ0cgUmVjZWlwdCAtIEFzc2luZ3MgYSBuZXcgdW5zZWQgQ0cgcmVjZWlwdCBudW1iZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlTmV3Uk4oKSB7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tcm4nKTsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTsNCg0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXROZXdSZWNlaXB0Jyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHNjcmlwdFVSTCwgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogZm9ybURhdGEgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlY2VpcHQgJiYgZGF0YS5pbmRleCkgew0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJHRU5FUkFURUQgTkVXIFJFQ0VJUFQ6ICIgKyBkYXRhLnJlY2VpcHQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMTogVXBkYXRlIHRoZSBnbG9iYWwgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gcGFyc2VJbnQoZGF0YS5pbmRleCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCAyOiBGSVggVEhFIE1FTU9SWSBHQVANCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRhdGFiYXNlIGhhcyA1MDAgcmVjb3JkcyAoMC00OTkpLCBhbmQgbmV3IGluZGV4IGlzIDUwMCwNCiAgICAgICAgICAgICAgICAgICAgLy8gd2UgTVVTVCBncm93IHRoZSBhcnJheSBzbyBpbmRleCA1MDAgYWN0dWFsbHkgZXhpc3RzLg0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA8PSBjdXJyZW50UmVjb3JkSW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5wdXNoKCIiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMzogUkVTRVQgU0VBUkNIIFRSQUNLRVINCiAgICAgICAgICAgICAgICAgICAgLy8gWW91ciBzZWFyY2ggZW5naW5lIGxpa2VseSB1c2VzIGEgdmFyaWFibGUgdG8gcmVtZW1iZXIgd2hlcmUgaXQgd2FzLg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXNldHRpbmcgdGhpcyBmb3JjZXMgc2VhcmNoIHRvIHJlLXNjYW4gZnJvbSB0aGUgbmV3IGVuZC4NCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXN0Rm91bmRTZWFyY2hJbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gLTE7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gYCR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtub3cuZ2V0RnVsbFllYXIoKX1gOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIEZpZWxkcw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZSA9IGRhdGEucmVjZWlwdDsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSA9IGZvcm1hdHRlZERhdGU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgZW50cnkgZmllbGRzDQogICAgICAgICAgICAgICAgICAgIFsnZmllbGRfbmFtZScsICdmaWVsZF9waG9uZScsICdmaWVsZF9hZGRyZXNzJywgJ2ZpZWxkX2VtYWlsJywgJ2ZpZWxkX3BhbicsICdmaWVsZF9zdGFyJywgJ2ZpZWxkX2dvdGhyYW0nLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3JlZicsICdmaWVsZF9jb21tZW50cyddLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSAiMDAwMDAwIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSA9ICJJTkRJQSI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUgPSAiQ2FzaCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUgPSAiT1RIRVJTIjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbENoZWNrKSBjYW5jZWxDaGVjay5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3ByaW50ZWQnKS5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmFzYWRhbScpLmNoZWNrZWQgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDQ6IFN5bmMgdGhlIHNwZWNpZmljIGxpbmUgaW4gbWVtb3J5DQogICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdID0gYCR7ZGF0YS5yZWNlaXB0fXwke2Zvcm1hdHRlZERhdGV9fHx8fHx8fHx8fHxDYXNofE9USEVSU3xZRVN8fDAwMDAwMHxOT3xOT3x8SU5ESUFgOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgNTogVXBkYXRlIHRoZSBTbGlkZXINCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7IC8vIC0gMTsgLy8gRXhwbGljaXRseSB1c2UgdGhlIG5ldyBhcnJheSBsZW5ndGgNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KDQogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAoVGhlIHJlc3Qgb2YgeW91ciBldmVudCBsaXN0ZW5lciBsb2dpYyBmb3IgdW5jaGVja2luZyBjYW5jZWwgc3RheXMgZXhhY3RseSB0aGUgc2FtZSkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpZ2dlckZpZWxkcyA9IFsnZmllbGRfbmFtZScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcGhvbmUnLCAnZmllbGRfYWRkcmVzcyddOw0KICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyRmllbGRzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUudHJpbSgpICE9PSAiIiAmJiBjYW5jZWxDaGVjay5jaGVja2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxDaGVjay5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29scyA9IEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPj0gMTQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xzWzEzXSA9ICJOTyI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW2N1cnJlbnRSZWNvcmRJbmRleF0gPSBjb2xzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgICAgICBybkJ0bi5pbm5lclRleHQgPSAiUk4iOw0KICAgICAgICAgICAgICAgIC8vIERvIG5vdCByZS1lbmFibGUgcm5CdG4gaGVyZSwgaXQgc3RheXMgZGlzYWJsZWQgdW50aWwgbG9ja2VkIGFzIHBlciB5b3VyIGxvZ2ljDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRG93bmxvYWRzIGEgUERGIFJlY2VpcHQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkUmVjZWlwdFBERigpIHsNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjZWlwdC1jb250YWluZXInKTsNCiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlOw0KDQogICAgICAgICAgICBjb25zdCBvcHQgPSB7DQogICAgICAgICAgICAgICAgbWFyZ2luOiBbMC4yLCAwLjJdLCAvLyBbdG9wL2JvdHRvbSwgbGVmdC9yaWdodF0NCiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVjTm8gKyAnLnBkZicsDQogICAgICAgICAgICAgICAgaW1hZ2U6IHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAxIH0sDQogICAgICAgICAgICAgICAgaHRtbDJjYW52YXM6IHsNCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDIsDQogICAgICAgICAgICAgICAgICAgIHVzZUNPUlM6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIGxvZ2dpbmc6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAvLyBUaGVzZSB0d28gbGluZXMgYXJlIHRoZSBrZXkgdG8gZml4aW5nIHRoZSAiSGFsZiBQYWdlIiBjdXQtb2ZmOg0KICAgICAgICAgICAgICAgICAgICBzY3JvbGxZOiAwLA0KICAgICAgICAgICAgICAgICAgICB3aW5kb3dIZWlnaHQ6IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBqc1BERjogeyB1bml0OiAnaW4nLCBmb3JtYXQ6ICdhNCcsIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIC8vIE5ldyBsb2dpYzogVXNlICdodG1sMnBkZicgdG8gY2FwdHVyZSB0aGUgZnVsbCBzY3JvbGwgaGVpZ2h0DQogICAgICAgICAgICBodG1sMnBkZigpLmZyb20oZWxlbWVudCkuc2V0KG9wdCkudG9QZGYoKS5nZXQoJ3BkZicpLnRoZW4oZnVuY3Rpb24gKHBkZikgew0KICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgUERGIG9ubHkgaGFzIDEgcGFnZQ0KICAgICAgICAgICAgICAgIHZhciB0b3RhbFBhZ2VzID0gcGRmLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdG90YWxQYWdlczsgaSA+IDE7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBwZGYuZGVsZXRlUGFnZShpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KS5zYXZlKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU2VuZHMgYSB3aGF0c2FwcCB0ZXh0IG1lc3NhZ2UgYWxvbmcgd2l0aCBvcHRpb24gb2YgcGFzdGluZyBhY3R1YWwgcmVjZWlwdCAtIGRpcmVjdCB0byBkb25vciB0ZWxlcGhvbmUgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzZW5kV2hhdHNBcHAoKSB7DQogICAgICAgICAgICBjb25zdCByZWNlaXB0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWNlaXB0LWNvbnRhaW5lcicpOw0KDQogICAgICAgICAgICAvLyAxLiBQRVJGT1JNIENMSVBCT0FSRCBDT1BZIChXYWl0IGZvciBpdCB0byBmaW5pc2gpDQogICAgICAgICAgICBpZiAocmVjZWlwdEVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBhd2FpdCBodG1sMmNhbnZhcyhyZWNlaXB0RWxlbWVudCwgeyBzY2FsZTogMiwgdXNlQ09SUzogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2FudmFzLnRvQmxvYihyZXNvbHZlKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgQ2xpcGJvYXJkSXRlbSh7ICJpbWFnZS9wbmciOiBibG9iIH0pOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtpdGVtXSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDbGlwYm9hcmQgSW1hZ2UgUmVhZHkiKTsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQ2xpcGJvYXJkIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBDT0xMRUNUIERBVEEgRk9SIFRFWFQNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBwaG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLnJlcGxhY2UoL1xEL2csICcnKTsNCg0KICAgICAgICAgICAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29tbWVudHMnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxNYXRjaCA9IGNvbW1lbnRzLm1hdGNoKC9cey4qP1x9Lyk7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsU3RyID0gc3BlY2lhbE1hdGNoID8gYCAoJHtzcGVjaWFsTWF0Y2hbMF19KWAgOiAiIjsNCg0KICAgICAgICAgICAgaWYgKCFwaG9uZSkgeyBhbGVydCgiTm8gcGhvbmUgbnVtYmVyISIpOyByZXR1cm47IH0NCg0KICAgICAgICAgICAgLy8gMy4gQlVJTEQgVEVYVCBVUkwNCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPQ0KICAgICAgICAgICAgICAgIGAqTVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1QqJTBBYCArDQogICAgICAgICAgICAgICAgYC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0lMEFgICsNCiAgICAgICAgICAgICAgICBgKlJlY2VpcHQgTm86KiAke3JlY05vfSUwQWAgKw0KICAgICAgICAgICAgICAgIGAqRGF0ZToqICR7ZGF0ZX0lMEElMEFgICsNCiAgICAgICAgICAgICAgICBgUmVjZWl2ZWQgd2l0aCB0aGFua3MgZnJvbSAqU2hyaS9TbXQuICR7bmFtZX0qJTBBYCArDQogICAgICAgICAgICAgICAgYGEgc3VtIG9mICpScy4gJHthbW91bnR9KiBvbmx5JTBBYCArDQogICAgICAgICAgICAgICAgYHRvd2FyZHMgKiR7dG93YXJkc30ke3NwZWNpYWxTdHJ9KiUwQSUwQWAgKw0KICAgICAgICAgICAgICAgIGBfVHJ1c3QgUmVnaXN0cmF0aW9uIHZhbGlkIHRpbGwgMzEtMDMtMjAyNl9gOw0KDQogICAgICAgICAgICBjb25zdCB3YVVybCA9IGBodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT05MSR7cGhvbmV9JnRleHQ9JHttZXNzYWdlfWA7DQoNCiAgICAgICAgICAgIC8vIDQuIE9QRU4gV0hBVFNBUFANCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHdhVXJsLCAnX2JsYW5rJyk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRG93bmxvYWRzIGEgQ29uc2VudCBsZXR0ZXIgZm9yIGEgRG9ub3IgLSBmb3IgY29ycHVzIGFuZCBhbW91bnQgPj0xMDAwMA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY29uc2VudEFjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcmVmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlIDogIiI7DQoNCiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZEFkZHJlc3MgPSBhZGRyZXNzLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7DQogICAgICAgICAgICBjb25zdCBhbW91bnRJbldvcmRzID0gTnVtYmVyKGFtb3VudCkudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJykgKyAiIE9ubHkiOw0KDQogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAvLyBVc2luZyBhIHNsaWdodGx5IHNtYWxsZXIgcGFkZGluZyB0byBlbnN1cmUgMS1wYWdlIGZpdA0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuNmluIDAuNzVpbic7DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnIlRpbWVzIE5ldyBSb21hbiIsIHNlcmlmJzsNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9ICcxLjQnOyAvLyBTbGlnaHRseSB0aWdodGVyIGxpbmUgaGVpZ2h0DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gJyMwMDAnOw0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9ICcxMnB0JzsNCg0KICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBtYXJnaW4tYm90dG9tOiAzMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0id2lkdGg6IDU1JTsgdGV4dC1hbGlnbjogbGVmdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij48Yj5Gcm9tOjwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPjxiPiR7bmFtZX08L2I+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij4ke2Zvcm1hdHRlZEFkZHJlc3N9PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5QaDogJHtwaG9uZX08L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMzVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPjxiPlRvOjwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+TVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1Q8L2I+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPlNocmVlIEdhbmVzaCBGbGF0cyw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+TmV3IE5vLiA1Mi8yLCBOb3J0aCBNYWRhIFN0cmVldCw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+TXlsYXBvcmUsIENoZW5uYWkgNjAwIDAwNC48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDMwcHg7IGZvbnQtc2l6ZTogMTNwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1YjogRG9uYXRpb24gVG93YXJkcyBDT1JQVVMgb2YgdGhlIFRydXN0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+U2lyLDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkkgaGVyZWJ5IGNvbmZpcm0gdGhhdCBteSBjb250cmlidXRpb24gYXMgcGVyIGRldGFpbHMgZ2l2ZW4gYmVsb3cgaXMgdG93YXJkcyA8Yj5DT1JQVVM8L2I+IG9mIE15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0LjwvcD4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luOiAyNXB4IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9IndpZHRoOiAzNSU7IHBhZGRpbmc6IDRweCAwOyI+QW1vdW50PC90ZD48dGQ+OiBScy4gPGI+JHthbW91bnR9PC9iPjwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5BbW91bnQgaW4gV29yZHM8L3RkPjx0ZD46IFJ1cGVlcyAke2Ftb3VudEluV29yZHN9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA0cHggMDsiPlBheW1lbnQgUmVmZXJlbmNlPC90ZD48dGQ+OiAke3JlZn08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UmVjZWlwdCBOdW1iZXI8L3RkPjx0ZD46IDxiPiR7cmVjTm99PC9iPjwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5EYXRlPC90ZD48dGQ+OiAke2RhdGV9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA0cHggMDsiPlBob25lIE51bWJlcjwvdGQ+PHRkPjogJHtwaG9uZX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UEFOPC90ZD48dGQ+OiAke3Bhbn08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiA0MHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91cnMgc2luY2VyZWx5LDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiA0NXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPl9fX19fX19fX19fX19fX19fX19fX19fX19fPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7IHBhZGRpbmctdG9wOiA1cHg7Ij4oPGI+JHtuYW1lfTwvYj4pPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQpgOw0KDQogICAgICAgICAgICBjb25zdCBvcHQgPSB7DQogICAgICAgICAgICAgICAgbWFyZ2luOiAwLA0KICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAnQ29uc2VudCBMZXR0ZXIgJyArIHJlY05vICsgJy5wZGYnLA0KICAgICAgICAgICAgICAgIGltYWdlOiB7IHR5cGU6ICdqcGVnJywgcXVhbGl0eTogMC45OCB9LA0KICAgICAgICAgICAgICAgIGh0bWwyY2FudmFzOiB7IHNjYWxlOiAyLCBsb2dnaW5nOiBmYWxzZSB9LA0KICAgICAgICAgICAgICAgIGpzUERGOiB7IHVuaXQ6ICdpbicsIGZvcm1hdDogJ2E0Jywgb3JpZW50YXRpb246ICdwb3J0cmFpdCcgfQ0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgaHRtbDJwZGYoKS5zZXQob3B0KS5mcm9tKGVsZW1lbnQpLnNhdmUoKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIExvYWRzIEluaXRpYWwgRGF0YSBkdXJpbmcgbGF1bmNoLiAgSW1wb3J0YW50IG5vdCB0byBkaXN0dXJiZWQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRGF0YSh0KSB7DQogICAgICAgICAgICAvLyAxLiBLSUxMIFRIRSBTUExBU0ggU0NSRUVOIElNTUVESUFURUxZDQogICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgbm8gIlN0dWNrIGF0IERldmljZSBJRCIgc2NyZWVuDQogICAgICAgICAgICAvLyBTaG93IG92ZXJsYXkNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aFNjcmVlbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkFwcENvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJBcHAgdmlzaWJsZS4gTG9hZGluZyBkYXRhIHdpdGggdG9rZW4uLi4iKTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIElERU5USUZZIFVTRVIgKFRoZSBEMjcgZml4KQ0KICAgICAgICAgICAgICAgIC8vIFdlIGZpbmQgdGhlIHJlYWwgbmFtZSBzbyBwb2xsaW5nIGRvZXNuJ3QganVzdCBzaG93ICJVc2VyIg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcFIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQVBQUk9WRUQgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFwcFIub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcFR4dCA9IGF3YWl0IGFwcFIudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBhcHBUeHQuc3BsaXQoJ1xuJykuZmluZChsID0+IGwuaW5jbHVkZXMoTU1QVF9ERVZJQ0VfSUQpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTU1QVF9VU0VSX05BTUUgPSBtYXRjaC5zcGxpdCgnfCcpWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiV2VsY29tZSAiICsgTU1QVF9VU0VSX05BTUUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBJTlNFUlQgU0VDVVJJVFkgQ0FMTCBIRVJFIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcGx5VXNlclBlcm1pc3Npb25zKE1NUFRfVVNFUl9OQU1FKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNTVBUX1JBRElPX0ZJTEUgPSBgL1NldHRpbmdzLyR7TU1QVF9VU0VSX05BTUV9UmFkaW9zLnR4dGA7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkUmFkaW9zKHQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLndhcm4oIklkZW50aXR5IGxvb2t1cCBmYWlsZWQsIGRlZmF1bHRpbmcgdG8gVW5rbm93biIpOyB9DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBGRVRDSCBEQVRBQkFTRSAmIFNFQ09OREFSWSBGSUxFUw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiVHh0ID0gYXdhaXQgZGJSLnRleHQoKTsNCiAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVMgPSBkYlR4dC5zcGxpdCgnXG4nKS5tYXAobCA9PiBsLnRyaW0oKSkuZmlsdGVyKGwgPT4gbC5sZW5ndGggPiAxMCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBbY2FzaFIsIGJhbmtSXSA9IGF3YWl0IFByb21pc2UuYWxsKFsNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQ0FTSCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+ICh7IG9rOiBmYWxzZSB9KSksDQogICAgICAgICAgICAgICAgICAgIGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0JBTksgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiAoeyBvazogZmFsc2UgfSkpDQogICAgICAgICAgICAgICAgXSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY2FzaENvbnRlbnQgPSBjYXNoUi5vayA/IChhd2FpdCBjYXNoUi50ZXh0KCkpLnRvVXBwZXJDYXNlKCkgOiAiIjsNCiAgICAgICAgICAgICAgICBsZXQgYmFua0RhdGUgPSAiLS0tIjsNCiAgICAgICAgICAgICAgICBpZiAoYmFua1Iub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmwgPSAoYXdhaXQgYmFua1IudGV4dCgpKS5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCd8JykpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYmwubGVuZ3RoID4gMCkgYmFua0RhdGUgPSBibFtibC5sZW5ndGggLSAxXS5zcGxpdCgnfCcpWzBdOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIExPQUQgRFJPUERPV05TICYgREFTSEJPQVJEDQogICAgICAgICAgICAgICAgYXdhaXQgbG9hZERyb3Bkb3ducyh0KTsNCiAgICAgICAgICAgICAgICB1cGRhdGVEYXNoYm9hcmRTdGF0cyhjYXNoQ29udGVudCwgYmFua0RhdGUpOw0KDQoNCiAgICAgICAgICAgICAgICBsb2FkRXZlbnRQYW5lbHModCk7IC8vIFRyaWdnZXIgdGhlIGV2ZW50IGNvbHVtbiBsb2FkaW5nDQoNCiAgICAgICAgICAgICAgICAvLyA1LiBTRVRVUCBTTElERVINCiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgICAgIHNsaWRlci5tYXggPSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsNCg0KICAgICAgICAgICAgICAgIC8vIFNBRkUgVFJJR0dFUjogT25seSBydW4gaWYgdGhlIGZ1bmN0aW9uIGV4aXN0cw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYnVpbGRGWUluZGV4ID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgICAgIGJ1aWxkRllJbmRleCgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHVwZGF0ZURhc2hib2FyZFN0YXRzKGNhc2hDb250ZW50LCBiYW5rRGF0ZSk7DQoNCiAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSBzbGlkZXIubWF4Ow0KICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHNsaWRlci5tYXg7DQogICAgICAgICAgICAgICAgY29uc3QgZmxvb3IgPSAod2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gJiYgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPiAwKSA/IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOIDogMTsNCiAgICAgICAgICAgICAgICBzbGlkZXIubWluID0gZmxvb3I7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KDQoNCg0KICAgICAgICAgICAgICAgIC8vIDYuIFNUQVJUIEJBQ0tHUk9VTkQgU0VSVklDRVMNCiAgICAgICAgICAgICAgICBmZXRjaEV4cGVuc2VEYXRlKCk7IC8vIEV4Y2VsIGZpbGUNCiAgICAgICAgICAgICAgICBzdGFydEJhY2tncm91bmRTeW5jKHQpOyAvLyBVc2VyIFBvbGxpbmcgKFRoZSBENzEgU3R5bGUpDQoNCiAgICAgICAgICAgICAgICB3aW5kb3cuQUNDRVNTX1RPS0VOID0gdDsgLy8gPC0tLSBBREQgVEhJUyBMSU5FIE9OTFkNCg0KICAgICAgICAgICAgICAgIC8vIEhpZGUgb3ZlcmxheSBvbmNlIGV2ZXJ5dGhpbmcgaXMgcmVuZGVyZWQNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5VmVyc2lvbicpLmlubmVyVGV4dCA9IE1NUFRfVkVSU0lPTjsNCg0KICAgICAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgRk9SIEFVVE8tQkFDS1VQDQogICAgICAgICAgICAgICAgcnVuTU1QVEJhY2t1cCh0cnVlKTsgLy8gUGFzc2luZyB0cnVlIHRvIGluZGljYXRlIGEgc2lsZW50L2F1dG8gcnVuDQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImxvYWREYXRhIENyaXRpY2FsIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgYWxlcnQoIkxvYWQgRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVXBkYXRlcyBEYXNoYm9hcmQgVmFsdWVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVEYXNoYm9hcmRTdGF0cyhjYXNoRmlsZSwgYkRhdGUpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgbGV0IHJDb3VudCA9IDAsIHJBbXQgPSAwLCBjQ291bnQgPSAwLCBjQW10ID0gMDsNCg0KICAgICAgICAgICAgICAgIHJlYWR5SW5kaWNlcyA9IFtdOyAvLyA8LS0tIElOU0VSVDogUmVzZXQgdGhlIGxpc3QgZXZlcnkgdGltZSBzdGF0cyB1cGRhdGUNCg0KICAgICAgICAgICAgICAgIGxldCBsYXREID0gMCwgbGF0RGlzcCA9ICItLS0iOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN1dE9mZiA9IDIwMjYwMTAxOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNhZmVDYXNoRmlsZSA9IGNhc2hGaWxlIHx8ICIiOyAvLyBTYWZldHkgYWdhaW5zdCAndW5kZWZpbmVkJyBpbmNsdWRlcyBlcnJvcg0KDQogICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChjLmxlbmd0aCA8IDE1KSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgck5vID0gKGNbMF0gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkU3RyID0gKGNbMV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW10ID0gcGFyc2VGbG9hdChjWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlID0gKGNbMTFdIHx8ICIiKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jID0gKGNbMTNdIHx8ICIiKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyID0gKGNbNF0gfHwgIiIpLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gZFN0ci5yZXBsYWNlKC9cLy9nLCAnLScpLnNwbGl0KCctJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwLmxlbmd0aCA9PT0gMykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeXl5eSA9IHBbMl0ubGVuZ3RoID09PSAyID8gIjIwIiArIHBbMl0gOiBwWzJdOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZENvbXAgPSBwYXJzZUludCh5eXl5ICsgcFsxXS5wYWRTdGFydCgyLCAnMCcpICsgcFswXS5wYWRTdGFydCgyLCAnMCcpKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRDb21wID4gbGF0RCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdEQgPSBkQ29tcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXREaXNwID0gY1swXSArICIgKCIgKyBkU3RyICsgIikiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZENvbXAgPj0gY3V0T2ZmICYmIGNhbmMgIT09ICJZRVMiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FzaCBjaGVjayB3aXRoIHNhZmV0eQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJDbGVhbiA9IHJOby5yZXBsYWNlKCJNUFMiLCAiIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICJDQVNIIiAmJiAhc2FmZUNhc2hGaWxlLmluY2x1ZGVzKHJObykgJiYgIXNhZmVDYXNoRmlsZS5pbmNsdWRlcyhyQ2xlYW4pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjQW10ICs9IGFtdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZHkgY2hlY2sNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkciAhPT0gIiIgJiYgIShjWzE2XSA9PT0gIllFUyIgJiYgY1sxN10gPT09ICJZRVMiKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgckFtdCArPSBhbXQ7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQUREIFRISVMgTElORSBIRVJFOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeUluZGljZXMucHVzaChpbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmbXQgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuLUlOJywgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgbGFzdFJvdyA9IEdMT0JBTF9EQl9MSU5FU1tHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMV0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2xhc3RfcmVjJykuaW5uZXJUZXh0ID0gbGFzdFJvd1swXSArICIgKCIgKyBsYXN0Um93WzFdICsgIikiOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2xhdGVzdF9yZWMnKS5pbm5lclRleHQgPSBsYXREaXNwOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX3JlYWR5X2NvdW50JykuaW5uZXJUZXh0ID0gckNvdW50ICsgIiAo4oK5IiArIGZtdC5mb3JtYXQockFtdCkgKyAiKSI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfY2FzaCcpLmlubmVyVGV4dCA9IGNDb3VudCArICIgKOKCuSIgKyBmbXQuZm9ybWF0KGNBbXQpICsgIikiOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2JhbmtfZGF0ZScpLmlubmVyVGV4dCA9IGJEYXRlIHx8ICItLS0iOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlNUQVRTIEVSUk9SOiAiICsgZS5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBVcGRhdGVzIExhc3QgZXhwZW5zZSBhY2NvdW50IGRhdGUgZm9yIGRhc2hib2FyZA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hFeHBlbnNlRGF0ZSgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkZldGNoaW5nIEV4cGVuc2VzIGJhY2tncm91bmQuLi4iKTsNCiAgICAgICAgICAgICAgICBjb25zdCBlUmVzcCA9IGF3YWl0IGZldGNoKE1NUFRfVVJMX0VYUEVOU0VTKTsNCiAgICAgICAgICAgICAgICBpZiAoIWVSZXNwLm9rKSB0aHJvdyBuZXcgRXJyb3IoIkZldGNoIGZhaWxlZCIpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBlUmVzcC5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGFycmF5QnVmZmVyLCB7IHR5cGU6ICdhcnJheScgfSk7DQogICAgICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1swXV07DQogICAgICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24oc2hlZXQsIHsgaGVhZGVyOiAxIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY2xlYW5Sb3dzID0ganNvbkRhdGEuZmlsdGVyKHJvdyA9PiByb3cgJiYgcm93Lmxlbmd0aCA+IDAgJiYgcm93WzBdKTsNCiAgICAgICAgICAgICAgICBpZiAoY2xlYW5Sb3dzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwRGF0ZSA9IGNsZWFuUm93c1tjbGVhblJvd3MubGVuZ3RoIC0gMV1bMF0gfHwgIi0tLSI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2V4cGVuc2VzJykuaW5uZXJUZXh0ID0gZXhwRGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkV4cGVuc2UgRGF0ZSB1cGRhdGVkOiIsIGV4cERhdGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIkV4cGVuc2UgZGF0ZSBjb3VsZCBub3QgYmUgbG9hZGVkIChsaWtlbHkgQ09SUykuIERlZmF1bHRpbmcgdG8gLS0tIik7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfZXhwZW5zZXMnKS5pbm5lclRleHQgPSAiLS0tIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBTeW5jcyB1c2VyIHN0YXR1cw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVEhFIFNZTkMgRlVOQ1RJT04gKENvcnJlY3RlZCBENzEgbG9naWMpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHN0YXJ0QmFja2dyb3VuZFN5bmModG9rZW4pIHsNCiAgICAgICAgICAgIGNvbnN0IHJ1blN5bmMgPSBhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFNTVBUX1VTRVJfTkFNRSB8fCBNTVBUX1VTRVJfTkFNRSA9PT0gIlVua25vd24iKSByZXR1cm47DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9VU0VSUyB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVMaW5lcyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmVzID0gdHh0LnNwbGl0KCdcbicpLmZpbHRlcihsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gbC5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgZW50cmllcyBmcm9tIGxhc3QgMyBtaW5zDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAubGVuZ3RoID49IDMgJiYgKG5vdyAtIHBhcnNlSW50KHBbMl0pKSA8IDE4MDAwMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgYWN0aXZlTGluZXMgPSBhY3RpdmVMaW5lcy5maWx0ZXIobCA9PiAhbC5zdGFydHNXaXRoKE1NUFRfREVWSUNFX0lEKSk7DQogICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmVzLnB1c2goYCR7TU1QVF9ERVZJQ0VfSUR9fCR7TU1QVF9VU0VSX05BTUV9fCR7bm93fWApOw0KDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9VU0VSUywgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogYWN0aXZlTGluZXMuam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZVVzZXJMaXN0Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5LmlubmVyVGV4dCA9IGFjdGl2ZUxpbmVzLm1hcChsID0+IGwuc3BsaXQoJ3wnKVsxXSkuam9pbignLCAnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmxvZygiU3luYyBza2lwcGVkIik7IH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBydW5TeW5jKCk7DQogICAgICAgICAgICBzZXRJbnRlcnZhbChydW5TeW5jLCA0NTAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9VcGRhdGVzIEV2ZW50cyBpbWFnZXMgaW4gY29sb3VtbiAxIGFuZCAzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRXZlbnRQYW5lbHModG9rZW4pIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0VWRU5UU19UWFQgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHRpdGxlMSA9ICJSZWNlbnQgRXZlbnQiLCB0aXRsZTIgPSAiVXBjb21pbmcgRXZlbnQiOw0KICAgICAgICAgICAgICAgIGlmIChyLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHIudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHR4dC5zcGxpdCgvXHI/XG4vKS5tYXAobCA9PiBsLnRyaW0oKSkuZmlsdGVyKGwgPT4gbC5sZW5ndGggPiAwKTsNCiAgICAgICAgICAgICAgICAgICAgdGl0bGUxID0gbGluZXNbMF0gfHwgdGl0bGUxOw0KICAgICAgICAgICAgICAgICAgICB0aXRsZTIgPSBsaW5lc1sxXSB8fCB0aXRsZTI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZ2V0SW1nVXJsID0gYXN5bmMgKHBhdGgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZ2V0X3RlbXBvcmFyeV9saW5rJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogcGF0aCB9KQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmxpbms7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IFt1cmwxLCB1cmwyXSA9IGF3YWl0IFByb21pc2UuYWxsKFtnZXRJbWdVcmwoTU1QVF9JTUdfRVZFTlQxKSwgZ2V0SW1nVXJsKE1NUFRfSU1HX0VWRU5UMildKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHBhbmVsQ29udGVudCA9ICh0aXRsZSwgdXJsKSA9PiBgDQo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmY5OTMzOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMTRweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjhjMDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGl0bGV9DQo8L2Rpdj4NCjxkaXYgY2xhc3M9ImV2ZW50LWltZy1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7dXJsfSI+DQo8L2Rpdj4NCmA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1ldmVudHMnKS5pbm5lckhUTUwgPSBwYW5lbENvbnRlbnQodGl0bGUxLCB1cmwxKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MID0gcGFuZWxDb250ZW50KHRpdGxlMiwgdXJsMik7DQogICAgICAgICAgICAgICAgTU1QVF9URU1QMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTDsNCiAgICAgICAgICAgICAgICBNTVBUX1RFTVAzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTDsNCg0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoIkV2ZW50IHBhbmVscyBmYWlsZWQ6IiwgZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1VwZGF0ZXMgdGhlIGxhdGVzdCBCYW5rIFN0YXRlbWVudHMgZnJvbSBhbiBFeGNlbCBGaWxlIFN0YXRlbWVudHMueGxzIC0gQ3JlYXRlcyBuZXcgcmNlaXB0cw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQWRkIHRoaXMgdG8geW91ciBnbG9iYWwgdmFyaWFibGVzIGF0IHRoZSB0b3ANCiAgICAgICAgbGV0IGlzQmFua1VwZGF0ZWQgPSBmYWxzZTsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVCYW5rU3RhdGVtZW50cyh0b2tlbikgew0KICAgICAgICAgICAgaWYgKCF0b2tlbikgeyBhbGVydCgiRXJyb3I6IE5vIFRva2VuIGZvdW5kLiIpOyByZXR1cm47IH0NCiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYW5rLXN5bmMtYnRuJyk7DQogICAgICAgICAgICBpZiAoYnRuKSB7IGJ0bi5pbm5lclRleHQgPSAiU3luY2luZy4uLiI7IGJ0bi5kaXNhYmxlZCA9IHRydWU7IH0NCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCBFeGNlbCAmIEJhbmsgU3RhdGVtZW50IChNTVBUMy5LUCkNCiAgICAgICAgICAgICAgICBjb25zdCBleGNlbFJlcyA9IGF3YWl0IGZldGNoKCJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2YyN211eWxvYmRhanZ6bXhjaTg1ZC9CYW5rU3RhdGVtZW50Lnhscz9ybGtleT1yNDNqMHN2bm1saWczcW02aWFpcmJ0b2pkJmRsPTEiLCB7IGNhY2hlOiAnbm8tc3RvcmUnIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZXhjZWxSZXMuYXJyYXlCdWZmZXIoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChhcnJheUJ1ZmZlciwgeyB0eXBlOiAnYXJyYXknLCBjZWxsRGF0ZXM6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZXhjZWxSb3dzID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzBdXSwgeyBoZWFkZXI6IDEgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBiYW5rRmlsZVJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0JBTksgfSkgfSwNCiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICduby1zdG9yZScNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBsb2NhbEJhbmtDb250ZW50ID0gYmFua0ZpbGVSZXMub2sgPyAoYXdhaXQgYmFua0ZpbGVSZXMudGV4dCgpKS50cmltKCkgOiAiIjsNCiAgICAgICAgICAgICAgICBsZXQgYmFua0xpbmVzID0gbG9jYWxCYW5rQ29udGVudC5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCd8JykpOw0KDQogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRCYWwgPSAwOw0KICAgICAgICAgICAgICAgIGlmIChiYW5rTGluZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdExpbmUgPSBiYW5rTGluZXNbYmFua0xpbmVzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50QmFsID0gcGFyc2VGbG9hdChsYXN0TGluZS5zcGxpdCgnfCcpWzVdLnJlcGxhY2UoL1teXGQuXS9nLCAnJykpIHx8IDA7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgbGV0IG5ld2x5QWRkZWRCYW5rTGluZXMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgd29ya2luZ0JhbmtDb250ZW50ID0gbG9jYWxCYW5rQ29udGVudDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIFByb2Nlc3MgRXhjZWwgUm93cw0KICAgICAgICAgICAgICAgIGZvciAobGV0IHJvdyBvZiBleGNlbFJvd3MpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGVWYWwgPSByb3dbMF07DQogICAgICAgICAgICAgICAgICAgIGxldCBpc0RhdGUgPSBkYXRlVmFsIGluc3RhbmNlb2YgRGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzRGF0ZVN0ciA9IHR5cGVvZiBkYXRlVmFsID09PSAnc3RyaW5nJyAmJiAvXlxkezEsMn1cL1xkezEsMn1cL1xkezR9Ly50ZXN0KGRhdGVWYWwudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0RhdGUgJiYgIWlzRGF0ZVN0cikgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRTdHIgPSBpc0RhdGUgPyBgJHtTdHJpbmcoZGF0ZVZhbC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LyR7U3RyaW5nKGRhdGVWYWwuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LyR7ZGF0ZVZhbC5nZXRGdWxsWWVhcigpfWAgOiBkYXRlVmFsLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgcmVmID0gKHJvd1sxXSB8fCAiIikudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywgJyAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjaHEgPSAocm93WzJdIHx8ICIiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRlYiA9IHBhcnNlRmxvYXQocm93WzNdKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY3JlID0gcGFyc2VGbG9hdChyb3dbNF0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGxldCByb3dCYWwgPSBwYXJzZUZsb2F0KHJvd1s1XSkgfHwgMDsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgcm93U3RyaW5nID0gYCR7ZFN0cn18JHtyZWZ9fCR7Y2hxfXwke2RlYiB8fCAiIn18JHtjcmUgfHwgIiJ9fCR7cm93QmFsLnRvRml4ZWQoMil9fGA7DQogICAgICAgICAgICAgICAgICAgIGlmICh3b3JraW5nQmFua0NvbnRlbnQuaW5jbHVkZXMocm93U3RyaW5nLnRyaW0oKSkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIHdvcmtpbmdCYW5rQ29udGVudCArPSAod29ya2luZ0JhbmtDb250ZW50Lmxlbmd0aCA+IDAgPyAiXG4iIDogIiIpICsgcm93U3RyaW5nOw0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50QmFsID0gcm93QmFsOw0KICAgICAgICAgICAgICAgICAgICBuZXdseUFkZGVkQmFua0xpbmVzLnB1c2gocm93U3RyaW5nKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobmV3bHlBZGRlZEJhbmtMaW5lcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgQTogVVBEQVRFIEJBTksgRklMRSAoTU1QVDMuS1ApDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiBNTVBUX0ZJTEVfQkFOSywgIm1vZGUiOiAib3ZlcndyaXRlIiB9KSwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB3b3JraW5nQmFua0NvbnRlbnQNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCBCOiBET1dOTE9BRCBNQUlOIERCIChNTVBUMi5LUCkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfSwgY2FjaGU6ICduby1zdG9yZScNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50REJDb250ZW50ID0gKGF3YWl0IGRiUmVzLnRleHQoKSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZGJMaW5lcyA9IGN1cnJlbnREQkNvbnRlbnQuc3BsaXQoJ1xuJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IG1heENHID0gMDsNCiAgICAgICAgICAgICAgICAgICAgZGJMaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RDb2wgPSBsaW5lLnNwbGl0KCd8JylbMF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb2wudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKCJDRyIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBwYXJzZUludChmaXJzdENvbC5yZXBsYWNlKCJDRyIsICIiKSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA+IG1heENHKSBtYXhDRyA9IG47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEZldGNoIEV4ZW1wdCBMaXN0DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4UmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogRVhFTVBUX0ZJTEUgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ZW1wdFBocmFzZXMgPSAoZXhSZXMgJiYgZXhSZXMub2spID8gKGF3YWl0IGV4UmVzLnRleHQoKSkuc3BsaXQoJ1xuJykubWFwKHAgPT4gcC50cmltKCkudG9Mb3dlckNhc2UoKSkuZmlsdGVyKHAgPT4gcCkgOiBbXTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEM6IEdFTkVSQVRFIE5FVyBSRUNFSVBUUw0KICAgICAgICAgICAgICAgICAgICBsZXQgbmV3UiA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHRvZGF5U3RyID0gYCR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtub3cuZ2V0RnVsbFllYXIoKX1gOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaW1wb3J0Q29tbWVudCA9ICJBdXRvIEltcG9ydGVkOiIgKyB0b2RheVN0cjsNCg0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBiTGluZSBvZiBuZXdseUFkZGVkQmFua0xpbmVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFydHMgPSBiTGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFtdCA9IHBhcnNlRmxvYXQocGFydHNbNF0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVmVGV4dCA9IHBhcnRzWzFdOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW10IDw9IDAgfHwgcmVmVGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJjYXNoIikpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4ZW1wdFBocmFzZXMuc29tZShwID0+IHJlZlRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwKSkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBtYXhDRysrOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJObyA9ICJDRyIgKyBTdHJpbmcobWF4Q0cpLnBhZFN0YXJ0KDYsICcwJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgckRhdGUgPSBwYXJ0c1swXS5yZXBsYWNlKC9cLy9nLCAnLScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJUb3cgPSAoYW10ID49IDEwMDAwKSA/ICJDT1JQVVMiIDogIk9USEVSUyI7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZSA9IHJlZlRleHQudG9VcHBlckNhc2UoKS5pbmNsdWRlcygiVVBJIikgPyAiVVBJIiA6IChyZWZUZXh0LnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMoIkNIUSIpIHx8IHJlZlRleHQudG9VcHBlckNhc2UoKS5pbmNsdWRlcygiQ0hFUVVFIikgPyAiQ0hFUVVFIiA6ICJPTkxJTkUiKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1JvdyA9IGAke3JOb318JHtyRGF0ZX18fHx8fHx8fCR7YW10fXwke3JlZlRleHR9fCR7bW9kZX18JHtyVG93fXx8JHtpbXBvcnRDb21tZW50fXwwMDAwMDB8fHx8SU5ESUF8YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1IucHVzaChuZXdSb3cpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1IubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCBEOiBVUExPQUQgVVBEQVRFRCBNQUlOIERCDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkREIgPSBjdXJyZW50REJDb250ZW50ICsgIlxuIiArIG5ld1Iuam9pbignXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IE1NUFRfRklMRV9EQiwgIm1vZGUiOiAib3ZlcndyaXRlIiB9KSwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogdXBkYXRlZERCDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFNURVAgRTogQ1JJVElDQUwgRklYIC0gVVBEQVRFIFNFUVVFTkNFLlRYVCAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgdXBkYXRlIHRoZSBDbG91ZCBTZXF1ZW5jZSBzbyB0aGUgbmV4dCAiUk4iIGtub3dzIHRoZSBuZXcgc3RhcnRpbmcgcG9pbnQuDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3JtYXQ6IExhc3RSZWNlaXB0TnVtYmVyfFRvdGFsUmVjb3JkQ291bnQNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RvdGFsQ291bnQgPSBkYkxpbmVzLmxlbmd0aCArIG5ld1IubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFJlY2VpcHRObyA9ICJDRyIgKyBTdHJpbmcobWF4Q0cpLnBhZFN0YXJ0KDYsICcwJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXF1ZW5jZUNvbnRlbnQgPSBgJHtsYXN0UmVjZWlwdE5vfXwke25ld1RvdGFsQ291bnR9YDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogIi9zZXF1ZW5jZS50eHQiLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHNlcXVlbmNlQ29udGVudA0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTVUNDRVNTIVxuQmFuayB1cGRhdGVkLlxuJHtuZXdSLmxlbmd0aH0gUmVjZWlwdHMgYWRkZWQuXG5TZXF1ZW5jZSB1cGRhdGVkIHRvOiAke2xhc3RSZWNlaXB0Tm99YCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiQmFuayBVcGRhdGVkLiBObyBEb25vciByZWNlaXB0cyB3ZXJlIG5lZWRlZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlzQmFua1VwZGF0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiQWxyZWFkeSB1cCB0byBkYXRlLiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJDUklUSUNBTCBFUlJPUjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKGJ0bikgeyBidG4uaW5uZXJUZXh0ID0gIkJhbmsgVXBkYXRlIjsgYnRuLmRpc2FibGVkID0gZmFsc2U7IH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgTWFpbiBDYWxscyBhbGwNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHNob3dEb25hdGlvblN1bW1hcnkoKSB7DQogICAgICAgICAgICAvLyAxLiBJbml0aWFsaXplIHRvdGFscyBhcyBudW1iZXJzDQogICAgICAgICAgICBsZXQgdG90YWxzID0geyB0b2RheTogMCwgd2VlazogMCwgbW9udGg6IDAsIHllYXI6IDAsIGZpblllYXI6IDAsIG92ZXJhbGw6IDAgfTsNCg0KICAgICAgICAgICAgTU1QVF9URU1QMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTDsNCiAgICAgICAgICAgIE1NUFRfVEVNUDMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MOw0KDQoNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAvLyBHZXQgdGltZXN0YW1wcyBmb3IgbWlkbmlnaHQgdG9kYXkgYW5kIDcgZGF5cyBhZ28gdG8gZW5zdXJlIGFjY3VyYXRlICJXZWVrIiBjb3VudGluZw0KICAgICAgICAgICAgY29uc3QgdG9kYXlNaWRuaWdodCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgY29uc3Qgc2V2ZW5EYXlzQWdvID0gdG9kYXlNaWRuaWdodCAtICg3ICogMjQgKiA2MCAqIDYwICogMTAwMCk7DQoNCiAgICAgICAgICAgIGNvbnN0IGN1ck0gPSBub3cuZ2V0TW9udGgoKTsgLy8gMC0xMQ0KICAgICAgICAgICAgY29uc3QgY3VyWSA9IG5vdy5nZXRGdWxsWWVhcigpOw0KDQogICAgICAgICAgICAvLyBGaW5hbmNpYWwgWWVhciBMb2dpYzogU3RhcnRzIEFwcmlsIDFzdA0KICAgICAgICAgICAgLy8gSW4gSmFuIDIwMjYsIHRoZSBGWSBzdGFydGVkIEFwcmlsIDEsIDIwMjUNCiAgICAgICAgICAgIGNvbnN0IGZ5U3RhcnRZZWFyID0gKGN1ck0gPj0gMykgPyBjdXJZIDogY3VyWSAtIDE7DQogICAgICAgICAgICBjb25zdCBmeVN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGZ5U3RhcnRZZWFyLCAzLCAxKS5nZXRUaW1lKCk7DQoNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICghbGluZS50cmltKCkgfHwgaW5kZXggPT09IDApIHJldHVybjsgLy8gU2tpcCBlbXB0eSBhbmQgaGVhZGVyDQoNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gQ2FuY2VsbGF0aW9uIENoZWNrIChGaWVsZCAxMyBpcyBZRVMgb3IgTk8pDQogICAgICAgICAgICAgICAgaWYgKGZbMTNdICYmIGZbMTNdLnRyaW0oKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gQW1vdW50IENvbnZlcnNpb24gKEZpZWxkIDkpDQogICAgICAgICAgICAgICAgLy8gU3RyaXAgY29tbWFzL3NwYWNlcyBhbmQgZm9yY2UgdG8gZmxvYXQNCiAgICAgICAgICAgICAgICBsZXQgYW10ID0gMDsNCiAgICAgICAgICAgICAgICBpZiAoZls5XSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5BbXQgPSBmWzldLnRvU3RyaW5nKCkucmVwbGFjZSgvW15cZC5dL2csICcnKTsNCiAgICAgICAgICAgICAgICAgICAgYW10ID0gcGFyc2VGbG9hdChjbGVhbkFtdCkgfHwgMDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBEYXRlIFBhcnNpbmcgKEZpZWxkIDEpDQogICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZbMV0gfHwgIiI7DQogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlU3RyLnNwbGl0KC9bXC9cLV0vKTsNCiAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9PSAzKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyBERC9NTS9ZWVlZDQogICAgICAgICAgICAgICAgY29uc3QgZCA9IHBhcnNlSW50KHBhcnRzWzBdLCAxMCk7DQogICAgICAgICAgICAgICAgY29uc3QgbSA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCkgLSAxOw0KICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwYXJzZUludChwYXJ0c1syXSwgMTApOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlY0RhdGUgPSBuZXcgRGF0ZSh5LCBtLCBkKTsNCiAgICAgICAgICAgICAgICBjb25zdCByZWNUaW1lID0gcmVjRGF0ZS5nZXRUaW1lKCk7DQoNCiAgICAgICAgICAgICAgICAvLyA1LiBBY2N1bXVsYXRlIFRvdGFscw0KICAgICAgICAgICAgICAgIHRvdGFscy5vdmVyYWxsICs9IGFtdDsNCg0KICAgICAgICAgICAgICAgIC8vIFRvZGF5DQogICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPT09IHRvZGF5TWlkbmlnaHQpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLnRvZGF5ICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBUaGlzIFdlZWsgKDcgRGF5cyBpbmNsdXNpdmUgb2YgY3VycmVudCB0aW1lKQ0KICAgICAgICAgICAgICAgIGlmIChyZWNUaW1lID49IHNldmVuRGF5c0FnbyAmJiByZWNUaW1lIDw9IG5vdy5nZXRUaW1lKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLndlZWsgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgTW9udGggKEphbiAyMDI2KQ0KICAgICAgICAgICAgICAgIGlmIChtID09PSBjdXJNICYmIHkgPT09IGN1clkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLm1vbnRoICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBUaGlzIFllYXIgKDIwMjYpDQogICAgICAgICAgICAgICAgaWYgKHkgPT09IGN1clkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLnllYXIgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEZpbmFuY2lhbCBZZWFyIChBcHJpbCB0byBub3cpDQogICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPj0gZnlTdGFydERhdGUgJiYgcmVjVGltZSA8PSBub3cuZ2V0VGltZSgpKSB7DQogICAgICAgICAgICAgICAgICAgIHRvdGFscy5maW5ZZWFyICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZGlzcGxheVN1bW1hcnlUYWJsZSh0b3RhbHMpOw0KICAgICAgICAgICAgc2hvd0RvbmF0aW9uU3VtbWFyeTEoKTsNCiAgICAgICAgICAgIHNob3dEb25hdGlvblN1bW1hcnkzKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IENvbG91bSAyIE1pZGRsZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gZGlzcGxheVN1bW1hcnlUYWJsZShkYXRhKSB7DQogICAgICAgICAgICBjb25zdCB0YWJsZUhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN1bW1hcnktY29udGFpbmVyIiBzdHlsZT0iYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDI1cHg7IGJvcmRlcjogMnB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDEycHg7IG1hcmdpbjogMTBweCBhdXRvOyBtYXgtd2lkdGg6IDUwMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOiAjZmY5OTMzOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtZmFtaWx5OiAnQXJpYWwgQmxhY2snLCBzYW5zLXNlcmlmOyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2ZmZjhmMDsgcGFkZGluZy1ib3R0b206IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBET05BVElPTlMgU1VNTUFSWQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2ZmOTkzMzsgY29sb3I6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IHRleHQtYWxpZ246IGxlZnQ7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5DYXRlZ29yeTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IHRleHQtYWxpZ246IHJpZ2h0OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+QW1vdW50ICjigrkpPC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+VG9kYXk8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEudG9kYXkudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5UaGlzIFdlZWs8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEud2Vlay50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPlRoaXMgTW9udGg8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEubW9udGgudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5DYWxlbmRhciBZZWFyICgke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0pPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLnllYXIudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY4ZjA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjZDM1NDAwOyI+RmluYW5jaWFsIFllYXI8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjZDM1NDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLmZpblllYXIudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBmb250LXdlaWdodDogYm9sZDsiPk9WRVJBTEwgVE9UQUw8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS4yZW07Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEub3ZlcmFsbC50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDE1cHg7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM3ZjhjOGQ7IHRleHQtYWxpZ246IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlZCBvbiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9PGJyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChDYW5jZWxsZWQgcmVjZWlwdHMgZXhjbHVkZWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2VpcHRfZGlzcGxheV9hcmVhJykuaW5uZXJIVE1MID0gdGFibGVIVE1MOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU3VtbWFyeSBDb2xvdW0gMQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gc2hvd0RvbmF0aW9uU3VtbWFyeTEoKSB7DQogICAgICAgICAgICBjb25zdCBkYXRhID0gY2FsY3VsYXRlQnJlYWtkb3duRGF0YSgpLm1vZGVTdW1tYXJ5Ow0KICAgICAgICAgICAgbGV0IHRvdGFsID0gMDsNCiAgICAgICAgICAgIGxldCByb3dzSHRtbCA9ICIiOw0KDQogICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkgew0KICAgICAgICAgICAgICAgIHRvdGFsICs9IHZhbHVlOw0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+JHtrZXl9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPiR7dmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9PC90ZD48L3RyPmA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTCA9IGdlbmVyYXRlU3R5bGVkVGFibGUoIlBheW1lbnQgTW9kZSIsIHJvd3NIdG1sLCB0b3RhbCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IENvbG91bSAzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBzaG93RG9uYXRpb25TdW1tYXJ5MygpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjYWxjdWxhdGVCcmVha2Rvd25EYXRhKCkudG93YXJkc1N1bW1hcnk7DQogICAgICAgICAgICBsZXQgdG90YWwgPSAwOw0KICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gIiI7DQoNCiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7DQogICAgICAgICAgICAgICAgdG90YWwgKz0gdmFsdWU7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4ke2tleX08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+JHt2YWx1ZS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX08L3RkPjwvdHI+YDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTCA9IGdlbmVyYXRlU3R5bGVkVGFibGUoIkNvbnRyaWJ1dGlvbiBUb3dhcmRzIiwgcm93c0h0bWwsIHRvdGFsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1Jlc2V0cyBzaWRlIHBhbmVscyBldmVudHMganBnIC0gZmlyc3QgYW5kIHRoaXJkIGNvbG91bW4gYWZ0ZXIgc3VtbWFyeSAgZGlzcGxheQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gcmVzZXRTaWRlUGFuZWxzKCkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MID0gTU1QVF9URU1QMTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUwgPSBNTVBUX1RFTVAzOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vRm9yIFN1bW1hcnkgLSBCcmVha2Rvd24gY2FsY3VsYXRpb24NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUJyZWFrZG93bkRhdGEoKSB7DQogICAgICAgICAgICBjb25zdCBtb2RlU3VtbWFyeSA9IHsgIkNhc2giOiAwLCAiQ2hlcXVlIjogMCwgIlVQSSI6IDAsICJPbmxpbmUiOiAwLCAiT3RoZXJzIjogMCwgIlBPUyI6IDAgfTsNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHNTdW1tYXJ5ID0gew0KICAgICAgICAgICAgICAgICJPVEhFUlMiOiAwLCAiQ09SUFVTIjogMCwgIktVTUJIQUJISVNIRUtIQU0iOiAwLCAiQU5OQURIQUFOQU0iOiAwLA0KICAgICAgICAgICAgICAgICJBTlVTSEEgUE9PSkEiOiAwLCAiQUFWQUhBTlRISSBIT01BTSI6IDAsICJZQVRISSBNQUFMQVlBTSI6IDAsDQogICAgICAgICAgICAgICAgIkJVSUxESU5HIjogMCwgIk5JVEhZQVBPT0pBSSI6IDANCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgaWYgKGNvbHMubGVuZ3RoIDwgMTMpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoY29sc1s5XSkgfHwgMDsNCiAgICAgICAgICAgICAgICBjb25zdCBtb2RlID0gKGNvbHNbMTFdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IChjb2xzWzEyXSB8fCAiIikuc3BsaXQoJy0nKVswXS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpc0NhbmNlbGxlZCA9IChjb2xzWzEzXSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiOw0KDQogICAgICAgICAgICAgICAgaWYgKCFpc0NhbmNlbGxlZCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBNb2RlIERhdGENCiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVTdW1tYXJ5Lmhhc093blByb3BlcnR5KG1vZGUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtb2RlU3VtbWFyeVttb2RlXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtb2RlU3VtbWFyeVsiT3RoZXJzIl0gKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gUG9wdWxhdGUgVG93YXJkcyBEYXRhDQogICAgICAgICAgICAgICAgICAgIGlmICh0b3dhcmRzU3VtbWFyeS5oYXNPd25Qcm9wZXJ0eSh0b3dhcmRzKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdG93YXJkc1N1bW1hcnlbdG93YXJkc10gKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdG93YXJkc1N1bW1hcnlbIk9USEVSUyJdICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICByZXR1cm4geyBtb2RlU3VtbWFyeSwgdG93YXJkc1N1bW1hcnkgfTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vTWFpbiBUYWJsZSBTdHlsZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gSW50ZXJuYWwgaGVscGVyIHRvIGtlZXAgdGhlIGV4YWN0IGZvcm1hdCBvZiB5b3VyIENvcHkgKDUpIGZpbGUNCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVTdHlsZWRUYWJsZSh0aXRsZSwgcm93cywgdG90YWwpIHsNCiAgICAgICAgICAgIHJldHVybiBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGhlaWdodDoxMDAlOyBvdmVyZmxvdy15OmF1dG87IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICMyYzNlNTA7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMS4yZW07Ij4ke3RpdGxlfTwvaDI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgZm9udC1zaXplOiAxM3B4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmMzljMTI7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiBsZWZ0OyI+Q2F0ZWdvcnk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsiPkFtb3VudCAo4oK5KTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cm93c30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5UT1RBTDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjFlbTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dG90YWwudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU2hvd3MgdXNlcnMgb25saW4gcGhvdG8gb24gdGhlIG1haW4gcGFnZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLyoqDQogICAgICAgICAqIFBIT1RPIExPQURFUiBFTkdJTkUNCiAgICAgICAgICogVXNlcyB0aGUgcHJvdmVuIFhIUiBtZXRob2QgZnJvbSB0aGUgbG9nbyBsb2dpYw0KICAgICAgICAgKi8NCiAgICAgICAgZnVuY3Rpb24gbG9hZFVzZXJQaG90b1ZpYVhIUihwYXRoLCB0YXJnZXRJZCkgew0KICAgICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogICAgICAgICAgICB4aHIub3BlbignUE9TVCcsICdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcpOw0KICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0KTsgLy8gVXNlcyBnbG9iYWwgdG9rZW4gJ3QnDQogICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignRHJvcGJveC1BUEktQXJnJywgSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IHBhdGggfSkpOw0KICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJzsNCg0KICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSB4aHIucmVzcG9uc2U7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGltZykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHVybDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAidHJhbnNwYXJlbnQiOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUGhvdG8gRXJyb3IgIiArIHhoci5zdGF0dXMgKyAiOiAiICsgcGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGltZykgaW1nLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjNzc3IjsgLy8gRmFsbGJhY2sgZ3JheQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB4aHIuc2VuZCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFVJIFdBVENIRVIgJiBQT0xMSU5HIEhBTkRMRVINCiAgICAgICAgICogV2F0Y2hlcyAnYWN0aXZlVXNlckxpc3QnIGZvciBjaGFuZ2VzIGZyb20geW91ciA2MHMgcG9sbA0KICAgICAgICAgKi8NCiAgICAgICAgY29uc3QgcGhvdG9XYXRjaGVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgbGlzdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlVXNlckxpc3QnKTsNCiAgICAgICAgICAgIGlmICghbGlzdEVsZW1lbnQpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3QgcmF3VGV4dCA9IGxpc3RFbGVtZW50LmlubmVyVGV4dC50cmltKCk7DQoNCiAgICAgICAgICAgIC8vIFNhZmV0eTogRG9uJ3QgcnVuIGlmIGVtcHR5LCBqdXN0IHBvbGxpbmcgcGxhY2Vob2xkZXIsIG9yIGlmIGltYWdlcyBhbHJlYWR5IGV4aXN0DQogICAgICAgICAgICBpZiAoIXJhd1RleHQgfHwgcmF3VGV4dCA9PT0gIi0tLSIgfHwgbGlzdEVsZW1lbnQucXVlcnlTZWxlY3RvcignaW1nJykpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gMS4gUHJlcGFyZSBDb250YWluZXIgZm9yIE11bHRpcGxlIFVzZXJzDQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUuZmxleFdyYXAgPSAid3JhcCI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUuZ2FwID0gIjE1cHgiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICI1cHgiOw0KDQogICAgICAgICAgICAvLyAyLiBDbGVhciB0ZXh0IGFuZCBidWlsZCBwaG90byBhcnJheQ0KICAgICAgICAgICAgLy8gU3VwcG9ydHMgc2luZ2xlIG5hbWUgb3IgY29tbWEtc2VwYXJhdGVkIG5hbWVzIGZyb20geW91ciBwb2xsZXINCiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gcmF3VGV4dC5zcGxpdCgnLCcpLm1hcChuID0+IG4udHJpbSgpKTsNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LmlubmVySFRNTCA9ICcnOw0KDQogICAgICAgICAgICBuYW1lcy5mb3JFYWNoKChuYW1lLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAiIikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcElkID0gYHVzZXItcGljLSR7aW5kZXh9LSR7bmFtZS5yZXBsYWNlKC9ccysvZywgJycpfWA7DQogICAgICAgICAgICAgICAgY29uc3QgcFBhdGggPSAiL0ltYWdlcy8iICsgbmFtZSArICIuanBnIjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5zdHlsZS5mbGV4RGlyZWN0aW9uID0gImNvbHVtbiI7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgICAgIHVzZXJXcmFwcGVyLnN0eWxlLm1pbldpZHRoID0gIjYwcHgiOw0KDQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgaWQ9IiR7cElkfSIgc3R5bGU9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDRweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0NHB4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMyk7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9IiR7bmFtZVswXX0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDNweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDFweCAxcHggMnB4IGJsYWNrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtuYW1lfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBsaXN0RWxlbWVudC5hcHBlbmRDaGlsZCh1c2VyV3JhcHBlcik7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBUcmlnZ2VyIGluZGl2aWR1YWwgWEhSIGxvYWQNCiAgICAgICAgICAgICAgICBsb2FkVXNlclBob3RvVmlhWEhSKHBQYXRoLCBwSWQpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIElOSVRJQUxJWkUgV0FUQ0hFUg0KICAgICAgICBjb25zdCBvYnNlcnZlclRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmVVc2VyTGlzdCcpOw0KICAgICAgICBpZiAob2JzZXJ2ZXJUYXJnZXQpIHsNCiAgICAgICAgICAgIHBob3RvV2F0Y2hlci5vYnNlcnZlKG9ic2VydmVyVGFyZ2V0LCB7IGNoaWxkTGlzdDogdHJ1ZSwgY2hhcmFjdGVyRGF0YTogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgZnVuY3Rpb24gY2hlY2tVbnNhdmVkQ2hhbmdlcyhjYWxsYmFjaykgew0KICAgICAgICAgICAgaWYgKCFpc0RpcnR5KSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHVzZXJDaG9pY2UgPSBjb25maXJtKCJSZWNlaXB0IE5vdCBTYXZlZCEgXG5cbkNsaWNrIE9LIHRvIERJU0NBUkQgY2hhbmdlcy4gXG5DbGljayBDQU5DRUwgdG8gU1RBWSBhbmQgU2F2ZS4iKTsNCg0KICAgICAgICAgICAgaWYgKHVzZXJDaG9pY2UpIHsNCiAgICAgICAgICAgICAgICBpc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsgLy8gVGhpcyByZS1lbmFibGVzIHNlYXJjaCBhbmQgbmF2IGF1dG9tYXRpY2FsbHkNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU2F2ZXMgYSBtb2RpZmllZCBvciBuZXcgcmVjZWlwdCAtIGEgYXVkaXQgb2YgcmVjZWlwdCBpcyBwcm9tcHRlZCBiZWZvcmUgc2F2aW5nLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2F2ZVJlY29yZCgpIHsNCiAgICAgICAgICAgIC8vIDEuIFJ1biB0aGUgQXVkaXQgZmlyc3QNCiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHJ1bkF1ZGl0KCk7DQogICAgICAgICAgICBpZiAoIWNvbmZpcm1lZCkgcmV0dXJuOyAvLyBTdG9wIGlmIHVzZXIgY2FuY2Vscw0KDQogICAgICAgICAgICBjb25zdCByZWNvcmRJZHhUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZTsNCiAgICAgICAgICAgIGlmIChyZWNvcmRJZHhUZXh0ID09PSAiLS0tIikgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgaWR4ID0gcGFyc2VJbnQocmVjb3JkSWR4VGV4dCk7DQogICAgICAgICAgICBjb25zdCBzYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9zYXZlJyk7DQoNCiAgICAgICAgICAgIC8vIDIuIEdhdGhlciBkYXRhIGluIGV4YWN0IG9yZGVyIChJbmRpY2VzIDAtMTkpDQogICAgICAgICAgICBjb25zdCByb3dEYXRhID0gWw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlLCAgICAgICAgICAgLy8gMA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWUsICAgICAgICAgICAgLy8gMQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9uYW1lJykudmFsdWUsICAgICAgICAgICAgLy8gMg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLCAgICAgICAgICAgLy8gMw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hZGRyZXNzJykudmFsdWUucmVwbGFjZSgvXG4vZywgJ34nKSwgLy8gNA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpLnZhbHVlLCAgICAgICAgICAgLy8gNQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSwgICAgICAgICAgICAgLy8gNg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9zdGFyJykudmFsdWUsICAgICAgICAgICAgLy8gNw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9nb3RocmFtJykudmFsdWUsICAgICAgICAgLy8gOA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZSwgICAgICAgICAgLy8gOQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWYnKS52YWx1ZSwgICAgICAgICAgICAgLy8gMTANCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpLnZhbHVlLCAgICAgICAgICAgIC8vIDExDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKS52YWx1ZSwgICAgICAgICAvLyAxMg0KICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY2FuY2VsJykuY2hlY2tlZCA/ICJZRVMiIDogIk5PIiksIC8vIDEzDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvbW1lbnRzJykudmFsdWUucmVwbGFjZSgvXG4vZywgJ34nKSwgLy8gMTQNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpLnZhbHVlLCAgICAgICAgICAvLyAxNQ0KICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcHJpbnRlZCcpLmNoZWNrZWQgPyAiWUVTIiA6ICJOTyIpLCAgLy8gMTYNCiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3ByYXNhZGFtJykuY2hlY2tlZCA/ICJZRVMiIDogIk5PIiksIC8vIDE3DQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3JwdXMnKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgICAvLyAxOA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3VudHJ5JykudmFsdWUgICAgICAgICAgIC8vIDE5DQogICAgICAgICAgICBdOw0KDQogICAgICAgICAgICBjb25zdCB1cGRhdGVkTGluZSA9IHJvd0RhdGEuam9pbignfCcpOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHNhdmVCdG4uaW5uZXJUZXh0ID0gIlN5bmNpbmcuLi4iOw0KICAgICAgICAgICAgICAgIHNhdmVCdG4uZGlzYWJsZWQgPSB0cnVlOw0KDQogICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW2lkeF0gPSB1cGRhdGVkTGluZTsNCg0KICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IE1NUFRfRklMRV9EQiwgIm1vZGUiOiAib3ZlcndyaXRlIiB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBHTE9CQUxfREJfTElORVMuam9pbignXG4nKQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJNT0RJRklFRCBSRUNPUkQ6ICIgKyB1cGRhdGVkTGluZSk7DQogICAgICAgICAgICAgICAgYWxlcnQoIlJlY29yZCBTYXZlZCBhbmQgU3luY2VkLiIpOw0KICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2sodHJ1ZSk7DQogICAgICAgICAgICAgICAgLy8gLS0tIEFERCBUSEVTRSBUV08gTElORVMgLS0tDQogICAgICAgICAgICAgICAgLy8gMS4gU3luYyB0aGUgZ2xvYmFsIGluZGV4IHRvIHRoZSByZWNvcmQgd2UgYXJlIGFjdHVhbGx5IGxvb2tpbmcgYXQNCiAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkSW5kZXggPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlKTsNCiAgICAgICAgICAgICAgICAvLyAyLiBGb3JjZSB0aGUgcmVjZWlwdCBIVE1MIHRvIHJlZHJhdyB1c2luZyB0aGUgbGF0ZXN0IGRhdGEgaW4gbWVtb3J5DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiU3luYyBFcnJvcjogIiArIGVycm9yLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBzYXZlQnRuLmlubmVyVGV4dCA9ICJTYXZlIjsNCiAgICAgICAgICAgICAgICBzYXZlQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gUHJvbXB0IGZvciB1c2VyIHdoZW4gaGUgbGVhdmVzIHJlY2VpcHQgd2l0aG91dCBzYXZpbmcNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGNvbmZpcm1Mb2NrKCkgew0KICAgICAgICAgICAgaWYgKGlzRGlydHkpIHsNCiAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ2hvaWNlID0gY29uZmlybSgiUmVjZWlwdCBOb3QgU2F2ZWQhIFxuXG5DbGljayBPSyB0byBESVNDQVJEIGNoYW5nZXMgYW5kIExvY2suIFxuQ2xpY2sgQ0FOQ0VMIHRvIHN0YXkgYW5kIFNhdmUuIik7DQogICAgICAgICAgICAgICAgaWYgKCF1c2VyQ2hvaWNlKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVXNlciBjbGlja2VkIENhbmNlbCwgc28gZG8gbm90aGluZyAoc3RheSBpbiBlZGl0IG1vZGUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gSWYgbm90IGRpcnR5LCBvciBpZiB1c2VyIGNob3NlIHRvIGRpc2NhcmQsIHByb2NlZWQgdG8gbG9jaw0KICAgICAgICAgICAgaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBSTiBCdXR0b24gLSBDcmVhdGVzIGEgbmV3IHJlY2VpcHQgYnkgYXNzaWduaW5nIG5ldyByZWNlaXB0IG51bWJlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTmV3UmVjZWlwdCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHJuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9ybicpOw0KDQogICAgICAgICAgICAvLyAxLiBEaXNhYmxlIGJ1dHRvbiB0byBwcmV2ZW50IGRvdWJsZS1jbGlja3MNCiAgICAgICAgICAgIHJuQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHJuQnRuLmlubmVyVGV4dCA9ICJBc3NpZ25pbmcuLi4iOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhY3Rpb24nLCAnZ2V0TmV3UmVjZWlwdCcpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gQ2FsbCB0aGUgR29vZ2xlIFNjcmlwdA0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc2NyaXB0VVJMLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gUGFyc2UgdGhlIEpTT04gcmVzcG9uc2UNCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3VsdFRleHQpOw0KDQogICAgICAgICAgICAgICAgaWYgKGRhdGEucmVjZWlwdCAmJiBkYXRhLmluZGV4KSB7DQogICAgICAgICAgICAgICAgICAgIC8vIDQuIFVwZGF0ZSB0aGUgaGlkZGVuL2Rpc3BsYXkgcmVjb3JkIGluZGV4DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmROdW1iZXJEaXNwbGF5JykudmFsdWUgPSBkYXRhLmluZGV4Ow0KDQogICAgICAgICAgICAgICAgICAgIC8vIDUuIFBvcHVsYXRlIEZpZWxkcyB3aXRoIERlZmF1bHRzDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlID0gZGF0YS5yZWNlaXB0Ow0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZGF0ZScpLnZhbHVlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9uYW1lJykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2FkZHJlc3MnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZW1haWwnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGFuJykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWYnKS52YWx1ZSA9ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFlvdXIgcmVxdWVzdGVkIGRlZmF1bHRzDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSAiMDAwMDAwIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSA9ICJJTkRJQSI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUgPSAiQ0FTSCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUgPSAiT1RIRVJTIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdG8gQ2FuY2VsbGVkPVlFUyBpbml0aWFsbHkgYXMgYSBwbGFjZWhvbGRlcg0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY2FuY2VsJykuY2hlY2tlZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNi4gVW5sb2NrIGZvciBlbnRyeQ0KICAgICAgICAgICAgICAgICAgICB0b2dnbGVMb2NrKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgaXNEaXJ0eSA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNy4gU3luYyBsb2NhbCBtZW1vcnkgc28gdGhlIG5ldyByb3cgZXhpc3RzIGluIHRoZSBicm93c2VyJ3MgbGlzdA0KICAgICAgICAgICAgICAgICAgICAvLyBXZSBjcmVhdGUgYSBibGFuayBwaXBlcyBzdHJpbmcgdG8gcmVwcmVzZW50IHRoZSBuZXcgcm93IGxvY2FsbHkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxhbmtSb3cgPSBgJHtkYXRhLnJlY2VpcHR9fHx8fHx8fHx8fHx8fFlFU3x8MDAwMDAwfHx8T3xJTkRJQWA7DQogICAgICAgICAgICAgICAgICAgIC8vY29uc3QgYmxhbmtSb3cgPSBgJHtkYXRhLnJlY2VpcHR9fHx8fHx8fHx8fHx8fFlFU3x8MDAwMDAwfE5PfE5PfE5PfElORElBYDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVMucHVzaChibGFua1Jvdyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTmV3IFJlY2VpcHQgQXNzaWduZWQ6ICIgKyBkYXRhLnJlY2VpcHQgKyAiXG5SZWNvcmQgSW5kZXg6ICIgKyBkYXRhLmluZGV4KTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgZGF0YSByZWNlaXZlZCBmcm9tIHNlcnZlciIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlJOIEVycm9yOiIsIGUpOw0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvciBnZXR0aW5nIG5ldyBudW1iZXI6ICIgKyBlLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIHJuQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgcm5CdG4uaW5uZXJUZXh0ID0gIlJOIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBieSBkZWZhdWx0IGFsbCByZWNlaXB0IGZpZWxkcyBhcmUgbG9ja2VkLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlTG9jayhzaG91bGRMb2NrKSB7DQogICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBbJ2ZpZWxkX3JlY25vJywgJ2ZpZWxkX2RhdGUnLCAnZmllbGRfbmFtZScsICdmaWVsZF9waG9uZScsICdmaWVsZF9hZGRyZXNzJywgJ2ZpZWxkX2VtYWlsJywgJ2ZpZWxkX3BhbicsICdmaWVsZF9zdGFyJywgJ2ZpZWxkX2dvdGhyYW0nLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3JlZicsICdmaWVsZF9tb2RlJywgJ2ZpZWxkX3Rvd2FyZHMnLCAnZmllbGRfY29tbWVudHMnLCAnZmllbGRfcGluY29kZScsICdmaWVsZF9jb3VudHJ5JywgJ2ZpZWxkX2NhbmNlbCcsICdmaWVsZF9wcmludGVkJywgJ2ZpZWxkX3ByYXNhZGFtJywgJ2ZpZWxkX2NvcnB1cyddOw0KDQogICAgICAgICAgICBjb25zdCBjaGVja2JveFJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGVja2JveF9yb3cnKTsNCiAgICAgICAgICAgIGNvbnN0IHNJbnAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfc2VhcmNoJyk7DQogICAgICAgICAgICBjb25zdCBzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEJ0bicpOw0KICAgICAgICAgICAgY29uc3QgbmF2QnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tbmF2Jyk7DQogICAgICAgICAgICBjb25zdCBzYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9zYXZlJyk7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tcm4nKTsgLy8gQWRkZWQNCg0KICAgICAgICAgICAgZmllbGRzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZWwudHlwZSA9PT0gImNoZWNrYm94Iikgew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwuZGlzYWJsZWQgPSBzaG91bGRMb2NrOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVhZE9ubHkgPSBzaG91bGRMb2NrOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9IHNob3VsZExvY2sgPyAiI2ZmZmZlMCIgOiAiI2ZmZmZmZiI7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIXNob3VsZExvY2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtEaXJ0eSA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2F2ZUJ0bikgc2F2ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzSW5wKSBzSW5wLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc0J0bikgc0J0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2QnRucy5mb3JFYWNoKGIgPT4gYi5kaXNhYmxlZCA9IHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLm9uaW5wdXQgPSBtYXJrRGlydHk7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5vbmNoYW5nZSA9IG1hcmtEaXJ0eTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBpZiAoY2hlY2tib3hSb3cpIHsNCiAgICAgICAgICAgICAgICBjaGVja2JveFJvdy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzaG91bGRMb2NrID8gIiNmZmZmZTAiIDogIiNmZmZmZmYiOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3VubG9jaycpLmRpc2FibGVkID0gIXNob3VsZExvY2s7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2xvY2snKS5kaXNhYmxlZCA9IHNob3VsZExvY2s7DQogICAgICAgICAgICBpZiAoc2F2ZUJ0bikgc2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBpZiAocm5CdG4pIHJuQnRuLmRpc2FibGVkID0gIXNob3VsZExvY2s7IC8vIFJOIGFjdGl2ZSBvbmx5IHdoZW4gbG9ja2VkDQoNCiAgICAgICAgICAgIGlmIChzaG91bGRMb2NrKSB7DQogICAgICAgICAgICAgICAgaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGlmIChzSW5wKSBzSW5wLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKHNCdG4pIHNCdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBuYXZCdG5zLmZvckVhY2goYiA9PiBiLmRpc2FibGVkID0gZmFsc2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEVzc2VudGlhbCBmaXhlcyAtIG1pc2MNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIC0tLSBJTklUSUFMSVpBVElPTiBBTkQgU0VBUkNIIEZJWCAtLS0NCiAgICAgICAgKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGNvbnN0IHBob25lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKTsNCiAgICAgICAgICAgIGNvbnN0IGZldGNoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9mZXRjaCcpOw0KICAgICAgICAgICAgY29uc3Qgc2VhcmNoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEJ0bicpOw0KDQogICAgICAgICAgICAvLyAxLiBUZWxlcGhvbmUgRmV0Y2ggQnV0dG9uIENvbG9yIExvZ2ljDQogICAgICAgICAgICBpZiAocGhvbmVJbnB1dCAmJiBmZXRjaEJ0bikgew0KICAgICAgICAgICAgICAgIHBob25lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUmVhZHkgPSB0aGlzLnZhbHVlLnRyaW0oKS5sZW5ndGggPj0gMTA7DQogICAgICAgICAgICAgICAgICAgIGZldGNoQnRuLmRpc2FibGVkID0gIWlzUmVhZHk7DQogICAgICAgICAgICAgICAgICAgIC8vIFR1cm5zIGdyZWVuIHdoZW4gMTAgZGlnaXRzIGFyZSBlbnRlcmVkDQogICAgICAgICAgICAgICAgICAgIGZldGNoQnRuLnN0eWxlLmJhY2tncm91bmQgPSBpc1JlYWR5ID8gIiM0Q0FGNTAiIDogIiNlMWUxZTEiOw0KICAgICAgICAgICAgICAgICAgICBmZXRjaEJ0bi5zdHlsZS5jb2xvciA9IGlzUmVhZHkgPyAid2hpdGUiIDogImJsYWNrIjsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMi4gU0VBUkNIIEJVVFRPTiBGSVg6IFJlc2V0IGluZGV4IGlmIGF0IHRoZSBlbmQgb2YgREINCiAgICAgICAgICAgIGlmIChzZWFyY2hCdG4pIHsNCiAgICAgICAgICAgICAgICAvLyBXZSBvdmVycmlkZSB0aGUgY2xpY2sgdG8gZW5zdXJlIGl0IGRvZXNuJ3QgZ2V0IHN0dWNrIGFmdGVyIGEgTmV3IFJODQogICAgICAgICAgICAgICAgc2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRSZWNvcmRJbmRleCAhPT0gJ3VuZGVmaW5lZCcgJiYgY3VycmVudFJlY29yZEluZGV4ID49IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhdCB0aGUgdmVyeSBsYXN0IHJlY29yZCwgcmVzZXQgdG8gc3RhcnQgc28gc2VhcmNoIGNhbiBmaW5kIG9sZGVyIHJlY29yZHMNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9yaWdpbmFsIHBlcmZvcm1TZWFyY2goKSBmcm9tIHlvdXIgZmlsZSB3aWxsIG5vdyBydW4gY29ycmVjdGx5DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIDMuIEF1dG8tVW5jaGVjayAnQ2FuY2VsJyBib3ggd2hlbiB1c2VyIHN0YXJ0cyB0eXBpbmcNCiAgICAgICAgICAgIFsnZmllbGRfbmFtZScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcGhvbmUnXS5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxDaGVjayAmJiBjYW5jZWxDaGVjay5jaGVja2VkKSBjYW5jZWxDaGVjay5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KSgpOw0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBGZXRjaCBkb25vciBiYXNpYyBkZXRhaWxzIGZyb20gcGFzdCAobGF0ZXN0KSByZWNlaXB0cyB3aXRoIHRoZSBoZWxwIG9mIHRlbGVwb25lIG51bWJlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gLS0tIERBVEEgRkVUQ0hJTkcgTE9HSUMgLS0tDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoRG9ub3JEZXRhaWxzKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmVUb0ZpbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KDQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KDQogICAgICAgICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgb3ZlcmxheSBpcyB2aXNpYmxlDQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAvLyBTZWFyY2ggZnJvbSBuZXdlc3QgdG8gb2xkZXN0IChSZXZlcnNlIExvb3ApDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOyBpID49IDE7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgVGVsZXBob25lIENvbHVtbiAoSW5kZXggMykNCiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbWF0Y2ggdGhlIGxhc3QgMTAgZGlnaXRzIHRvIGlnbm9yZSArOTEgb3IgbGVhZGluZyB6ZXJvcw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5EYlBob25lID0gKGNvbHNbM10gfHwgIiIpLnJlcGxhY2UoL1xEL2csICIiKS5zbGljZSgtMTApOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5JbnB1dFBob25lID0gcGhvbmVUb0ZpbmQucmVwbGFjZSgvXEQvZywgIiIpLnNsaWNlKC0xMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFuRGJQaG9uZSA9PT0gY2xlYW5JbnB1dFBob25lICYmIGNsZWFuRGJQaG9uZS5sZW5ndGggPj0gMTApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCB0aGUgZGF0YSB0byB5b3VyIGZpZWxkcw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZSA9IGNvbHNbMl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlID0gKGNvbHNbNF0gfHwgIiIpLnJlcGxhY2UoL34vZywgJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZW1haWwnKS52YWx1ZSA9IGNvbHNbNV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGFuJykudmFsdWUgPSBjb2xzWzZdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2dvdGhyYW0nKS52YWx1ZSA9IGNvbHNbOF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpLnZhbHVlID0gY29sc1sxNV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY291bnRyeScpLnZhbHVlID0gY29sc1sxOV0gfHwgIklORElBIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGEgbm90ZSBpbiBjb21tZW50cw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RheSA9IGAke1N0cmluZyhkLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX0tJHtTdHJpbmcoZC5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtkLmdldEZ1bGxZZWFyKCl9YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb21tZW50cycpLnZhbHVlID0gYEF1dG8tRmV0Y2hlZCBmcm9tIFJOOiAke2NvbHNbMF19IG9uICR7dG9kYXl9YDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KDQogICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTmV3IERvbm9yIC0gTm8gcHJldmlvdXMgcmVjb3JkcyBmb3VuZCBmb3IgdGhpcyBudW1iZXIuIik7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gVW5sb2NrIHRoZSBmb3JtIHNvIHRoZSB1c2VyIGNhbiBlZGl0IHRoZSBmZXRjaGVkIGRhdGENCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2dnbGVMb2NrID09PSAiZnVuY3Rpb24iKSB0b2dnbGVMb2NrKGZhbHNlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCAzMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFNlYXJjaCBSZWNvcmRzIC0gUm91bmQgUm9iaW4gTWV0aG9kDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gRklOQUwgU0VBUkNIIEZJWDogUFJFVkVOVFMgR0VUVElORyBTVFVDSyBBVCBFTkQgLS0tDQogICAgICAgIGZ1bmN0aW9uIHBlcmZvcm1TZWFyY2goKSB7DQogICAgICAgICAgICBjb25zdCByYXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfc2VhcmNoJykudmFsdWUudHJpbSgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICBpZiAoIXJhdykgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyAtLS0gU1RFUCAxOiBQSUNLIFVQIFBSRUZJWCBMT0dJQyBGUk9NIENPTU1FTlRFRCBDT0RFIC0tLQ0KICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gcmF3Ow0KICAgICAgICAgICAgbGV0IGNvbEluZGV4ID0gLTE7IC8vIERlZmF1bHQ6IEZ1bGwgUmVjb3JkIFNlYXJjaA0KDQogICAgICAgICAgICBpZiAocmF3LnN0YXJ0c1dpdGgoIk0tIikpIHsgcXVlcnkgPSByYXcucmVwbGFjZSgiTS0iLCAiIik7IGNvbEluZGV4ID0gMzsgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocmF3LnN0YXJ0c1dpdGgoIk4tIikpIHsgcXVlcnkgPSByYXcucmVwbGFjZSgiTi0iLCAiIik7IGNvbEluZGV4ID0gMjsgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocmF3LnN0YXJ0c1dpdGgoIlQtIikpIHsgcXVlcnkgPSByYXcucmVwbGFjZSgiVC0iLCAiIik7IGNvbEluZGV4ID0gMTA7IH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHJhdy5zdGFydHNXaXRoKCJQLSIpKSB7IHF1ZXJ5ID0gcmF3LnJlcGxhY2UoIlAtIiwgIiIpOyBjb2xJbmRleCA9IDY7IH0NCg0KICAgICAgICAgICAgLy8gLS0tIFNURVAgMjogU0VUVVAgTE9PUCAtLS0NCiAgICAgICAgICAgIC8vIEZPUkNFIFNURVAtQkFDSzogU3RhcnQgbG9va2luZyBmcm9tIHRoZSByZWNvcmQgQkVGT1JFIHRoZSBjdXJyZW50IG9uZS4NCiAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gKGN1cnJlbnRSZWNvcmRJbmRleCA+IDApID8gY3VycmVudFJlY29yZEluZGV4IC0gMSA6IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOw0KDQogICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgIGxldCBpID0gc3RhcnRJbmRleDsNCiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7DQoNCiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgd2hvbGUgZGF0YWJhc2Ugb25jZQ0KICAgICAgICAgICAgd2hpbGUgKGNvdW50IDwgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBHTE9CQUxfREJfTElORVNbaV0udG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgIC8vIERldGVybWluZSB3aGF0IHdlIGFyZSBzZWFyY2hpbmcgYWdhaW5zdCBiYXNlZCBvbiB0aGUgcHJlZml4DQogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gKGNvbEluZGV4ID09PSAtMSkgPyBsaW5lIDogKGxpbmUuc3BsaXQoJ3wnKVtjb2xJbmRleF0gfHwgIiIpOw0KDQogICAgICAgICAgICAgICAgaWYgKHRhcmdldC5pbmNsdWRlcyhxdWVyeSkpIHsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gaTsNCiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpLS07DQogICAgICAgICAgICAgICAgaWYgKGkgPCAwKSBpID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7IC8vIFdyYXAgYXJvdW5kIHRvIGVuZA0KICAgICAgICAgICAgICAgIGNvdW50Kys7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIC0tLSBTVEVQIDM6IERJU1BMQVkgUkVTVUxUUyAtLS0NCiAgICAgICAgICAgIGlmIChmb3VuZCkgew0KICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQoY3VycmVudFJlY29yZEluZGV4KTsNCiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHNsaWRlci52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCiAgICAgICAgICAgICAgICBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5vIG90aGVyIG1hdGNoZXMgZm91bmQgZm9yOiAiICsgcmF3KTsNCiAgICAgICAgICAgICAgICAvLyBSZXNldCBsb2dpYyBpZiBub3RoaW5nIGZvdW5kDQogICAgICAgICAgICAgICAgbGFzdEZvdW5kU2VhcmNoSW5kZXggPSAtMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEVuc3VyZSB5b3VyIGhlbHBlciBpcyBzdHJpY3RseSBjaGVja2luZyBkYXRhDQogICAgICAgIGZ1bmN0aW9uIGNoZWNrU2VhcmNoTWF0Y2goaWR4LCBxdWVyeSkgew0KICAgICAgICAgICAgY29uc3QgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpZHhdOw0KICAgICAgICAgICAgaWYgKCFsaW5lKSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICByZXR1cm4gbGluZS50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBVc2VyIG5hbWUgcmVnaXN0ZXJlZCBhcyBsb2dnZWQgaW4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHdyaXRlVXNlckxvZyhhY3Rpb24pIHsNCiAgICAgICAgICAgIGlmICghTU1QVF9VU0VSX05BTUUpIHJldHVybjsNCiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7TU1QVF9MT0dfRElSfSR7TU1QVF9VU0VSX05BTUV9LnR4dGA7DQogICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7DQogICAgICAgICAgICBjb25zdCBsb2dFbnRyeSA9IGBbJHt0aW1lc3RhbXB9XSAke2FjdGlvbn1cbmA7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgbGV0IGV4aXN0aW5nQ29udGVudCA9ICIiOw0KICAgICAgICAgICAgICAgIC8vIFVzZSAndCcgYXMgcGVyIHlvdXIgQmFzZSBmaWxlDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGZpbGVOYW1lIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCByZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBleGlzdGluZ0NvbnRlbnQgKyBsb2dFbnRyeTsNCiAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZmlsZU5hbWUsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IHVwZGF0ZWRDb250ZW50DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsgY29uc29sZS5lcnJvcigiTG9nZ2luZyBmYWlsZWQ6IiwgZXJyKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vcmVtb3ZlIHVzZXIgZnJvbSBsaXN0IGlmIG5vdCBwb2xsZWQgZm9yIDIgbWludXRlcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZnVuY3Rpb24geW91IGFza2VkIGZvciAtIHBsYWNlIGl0IHdpdGggeW91ciBvdGhlciB1c2VyLWhhbmRsaW5nIGZ1bmN0aW9ucw0KICAgICAgICBhc3luYyBmdW5jdGlvbiByZW1vdmVVc2VyRnJvbVBvbGxpbmcodXNlck5hbWUpIHsNCiAgICAgICAgICAgIC8vIDEuIExvZyB0aGUgZXZlbnQgYmVmb3JlIHRoZXkgYXJlIHJlbW92ZWQNCiAgICAgICAgICAgIGF3YWl0IHdyaXRlVXNlckxvZyhgU0VTU0lPTiBFTkQ6IFVzZXIgJHt1c2VyTmFtZX0gZGlzY29ubmVjdGVkL3JlbW92ZWQgZnJvbSBwb2xsaW5nLmApOw0KDQogICAgICAgICAgICAvLyAyLiBZb3VyIGV4aXN0aW5nIGxvZ2ljIHRvIGFjdHVhbGx5IHJlbW92ZSB0aGVtIGZyb20gdGhlIFVJIG9yIGxpc3QNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVc2VyICR7dXNlck5hbWV9IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBhY3RpdmUgcG9sbGluZy5gKTsNCg0KICAgICAgICAgICAgLy8gSWYgeW91IGhhdmUgYSBzcGVjaWZpYyBVSSBlbGVtZW50IGZvciB0aGUgdXNlciBsaXN0LCB1cGRhdGUgaXQgaGVyZQ0KICAgICAgICAgICAgLy8gdXBkYXRlQWN0aXZlVXNlckxpc3QoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIExvY2F0ZSB0aGlzIGluIHlvdXIgPHNjcmlwdD4gc2VjdGlvbg0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpOw0KICAgICAgICAgICAgaWYgKHRhcmdldCkgew0KICAgICAgICAgICAgICAgIC8vIFBST0JFOiBBZGQgdGhpcyBsaW5lIHRvIGlnbm9yZSB0aGUgc2F2ZSBidXR0b25zDQogICAgICAgICAgICAgICAgaWYgKHRhcmdldC5pZCA9PT0gJ2J0bl9zYXZlJyB8fCB0YXJnZXQuaWQgPT09ICdiYW5rLXN5bmMtYnRuJykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYnRuVGV4dCA9IHRhcmdldC5pbm5lclRleHQgfHwgdGFyZ2V0LnZhbHVlIHx8ICJJY29uIEJ1dHRvbiI7DQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKGBDTElDS0VEIEJVVFRPTjogWyR7YnRuVGV4dH1dYCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQoNCiAgICAgICAgLy8gMi4gTEFVTkNIIExPRyAoSW5zaWRlIHlvdXIgZXhpc3RpbmcgaW5pdGlhbGl6ZU1NUFQgb3IgcmlnaHQgYWZ0ZXIpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvZ0xhdW5jaCgpIHsNCiAgICAgICAgICAgIC8vIFdhaXQgYSB0aW55IGJpdCBmb3IgdGhlIG5hbWUgdG8gYmUgYXZhaWxhYmxlDQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIik7DQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJMQVVOQ0hFRDogSFRNTCBTZXNzaW9uIFN0YXJ0ZWQiKTsNCiAgICAgICAgICAgIH0sIDIwMDApOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBUaGlzIHJ1bnMgNSBzZWNvbmRzIGFmdGVyIGxhdW5jaCBhcyBhIHNlcGFyYXRlICJIZWFsdGggQ2hlY2siDQogICAgICAgIC8vIEJ1bGxldHByb29mIEludGVncml0eSBDaGVjaw0KICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgPT09ICd1bmRlZmluZWQnIHx8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPT09IDApIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIC8vIDEuIEdldCBBY3R1YWwgREIgRGF0YQ0KICAgICAgICAgICAgICAgIGNvbnN0IGxhc3REQkxpbmUgPSBHTE9CQUxfREJfTElORVNbR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbFJOID0gbGFzdERCTGluZS5zcGxpdCgnfCcpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxDb3VudCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCBTZXF1ZW5jZSB3aXRoIENBQ0hFIEJVU1RFUg0KICAgICAgICAgICAgICAgIC8vIEFkZGluZyBhIHRpbWVzdGFtcCBlbnN1cmVzIERyb3Bib3gvQnJvd3NlciBjYW5ub3Qgc2VydmUgYW4gb2xkIHZlcnNpb24NCiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUJ1c3RlciA9IERhdGUubm93KCk7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VxUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9EYXRhQmFzZXMvc2VxdWVuY2UudHh0JyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDdXN0b20tQnVzdGVyJzogY2FjaGVCdXN0ZXIgLy8gU29tZSBicm93c2VycyBuZWVkIHRoaXMgaW4gaGVhZGVyDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChzZXFSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VxVGV4dCA9IChhd2FpdCBzZXFSZXMudGV4dCgpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtmaWxlUk4sIGZpbGVDb3VudF0gPSBzZXFUZXh0LnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkludGVncml0eSBDaGVjayAtPiBEQjoiLCBhY3R1YWxSTiwgIkZpbGU6IiwgZmlsZVJOKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAzLiBDb21wYXJlDQogICAgICAgICAgICAgICAgICAgIGlmIChhY3R1YWxSTiAhPT0gZmlsZVJOKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBhaXIgPSBjb25maXJtKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBNSVNNQVRDSCBERVRFQ1RFRCFcblxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYERhdGFiYXNlOiAke2FjdHVhbFJOfVxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNlcXVlbmNlIEZpbGU6ICR7ZmlsZVJOfVxuXG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgVGhlIHNlcXVlbmNlIGZpbGUgaXMgb3V0ZGF0ZWQuIFN5bmMgaXQgbm93P2ANCiAgICAgICAgICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBhaXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJmb3JtU2VxdWVuY2VGaXgoYWN0dWFsUk4sIGFjdHVhbENvdW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJJbnRlZ3JpdHkgY2hlY2sgZXJyb3I6IiwgZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDQwMDApOyAvLyBTaG9ydGVyIHdhaXQgdGltZQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEFkbWluIFBhbmVsDQogICAgICAgIC8vIFVwZGF0ZXMgY29udHJvbC1saXN0IC0gc2VsZWN0IGFsbG93ZWQgY29udHJvbHMgZm9yIGEgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAxLiBVUERBVEVEIEZFQVRVUkVTIExJU1QNCiAgICAgICAgY29uc3QgcHJvamVjdEZlYXR1cmVzID0gWw0KICAgICAgICAgICAgImJ0bi1hZG1pbi1hY2Nlc3MiLCAiYnRuLWRldm90ZWUtYWNjZXNzIiwgIm1hc3Rlci1oZWFkZXIiLCAiZGFzaGJvYXJkLWNvbnRhaW5lciIsICJlbnRyeS1jb250YWluZXIiLCAicmVjZWlwdC1wcmV2aWV3LXJvdyIsDQogICAgICAgICAgICAiYnRuX3NhdmUiLCAibmV3X3JlY19idG4iLCAiYnRuX3VubG9jayIsICJidG5fbG9jayIsICJzZWFyY2hCdG4iLCAiYmFuay1zeW5jLWJ0biIsICJidG5fY29uc2VudCIsICJidG5TdW1tYXJ5IiwNCiAgICAgICAgICAgICJzZWN0aW9ucyIsICJNaW5SZWNvcmROdW1iZXIiDQogICAgICAgIF07DQoNCiAgICAgICAgLy8gMi4gT1BFTiBQT1JUQUwgKENvcnJlY3RseSBwYXJzaW5nIERldmljZSBJRCB8IFVzZXJuYW1lIHwgUGFzc3dvcmQpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIG9wZW5TZWN1cml0eVBvcnRhbCgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdXNlclJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL1NldHRpbmdzL0FwcHJvdmVkLnR4dCcgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHVzZXJMaXN0ID0gW107DQogICAgICAgICAgICAgICAgaWYgKHVzZXJSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHVzZXJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGVtcHR5IGxpbmVzLCBjb21tZW50cyBzdGFydGluZyB3aXRoICMsIGFuZCBsaW5lcyB3aXRob3V0IHBpcGVzDQogICAgICAgICAgICAgICAgICAgIHVzZXJMaXN0ID0gdGV4dC5zcGxpdCgnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCh1ID0+IHUudHJpbSgpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih1ID0+IHUgIT09ICIiICYmICF1LnN0YXJ0c1dpdGgoJyMnKSAmJiB1LmluY2x1ZGVzKCd8JykpDQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHRha2UgdGhlIG1pZGRsZSBwYXJ0IChVc2VybmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMubGVuZ3RoID49IDIgPyBwYXJ0c1sxXS50cmltKCkgOiBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodSA9PiB1ICE9PSBudWxsKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgaHRtbEhlYWRlciA9IGANCjxkaXYgaWQ9InBvcnRhbC1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246Zml4ZWQ7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTsgei1pbmRleDoxMDAwMDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHdpZHRoOjgwMHB4OyBhbGlnbi1zZWxmOmZsZXgtc3RhcnQ7IGJveC1zaGFkb3c6MCAxMHB4IDMwcHggcmdiYSgwLDAsMCwwLjQpOyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1mYW1pbHk6QXJpYWw7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0icGFkZGluZzoyMHB4OyBiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0ibWFyZ2luOjA7Ij5TZWN1cml0eSBQb3J0YWw8L2gyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+U2VsZWN0IFVzZXI6IDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icG9ydGFsLXVzZXItc2VsZWN0b3IiIG9uY2hhbmdlPSJsb2FkVXNlclNldHRpbmdzKHRoaXMudmFsdWUpIiBzdHlsZT0icGFkZGluZzo1cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IFVzZXIgLS08L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt1c2VyTGlzdC5tYXAodSA9PiBgPG9wdGlvbiB2YWx1ZT0iJHt1fSI+JHt1fTwvb3B0aW9uPmApLmpvaW4oJycpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwb3J0YWwtY29udGVudC1hcmVhIiBzdHlsZT0ibWluLWhlaWdodDoyMDBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9InBhZGRpbmc6NDBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiM2NjY7Ij5TZWxlY3QgYSB1c2VybmFtZSB0byBsb2FkIHRoZSBzZWN1cml0eSBmaWxlLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpyaWdodDsgYm9yZGVyLXRvcDoxcHggc29saWQgI2VlZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzYXZlU2VjdXJpdHlGaWxlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEycHggMzBweDsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NHB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlNBVkUgQ0hBTkdFUzwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9ydGFsLW92ZXJsYXknKS5yZW1vdmUoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OjEwcHg7IHBhZGRpbmc6MTJweCAyNXB4OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6bm9uZTsgY3Vyc29yOnBvaW50ZXI7Ij5DQU5DRUw8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQo8L2Rpdj5gOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sSGVhZGVyKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gMy4gTE9BRCBEQVRBIChQYXRoIGlzIG5vdyBjb3JyZWN0bHkgL1NldHRpbmdzL1VzZXJuYW1lLnR4dCkNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFVzZXJTZXR0aW5ncyh0YXJnZXRVc2VyKSB7DQogICAgICAgICAgICBpZiAoIXRhcmdldFVzZXIpIHJldHVybjsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC1jb250ZW50LWFyZWEnKTsNCiAgICAgICAgICAgIGNvbnRlbnRBcmVhLmlubmVySFRNTCA9ICc8cCBzdHlsZT0icGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPkxvYWRpbmcgJyArIHRhcmdldFVzZXIgKyAnLnR4dC4uLjwvcD4nOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHNldHRpbmdzID0ge307DQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgdGV4dC5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAyKSBzZXR0aW5nc1twYXJ0c1swXS50cmltKCldID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgcm93c0h0bWwgPSBgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ij48dGJvZHk+YDsNCg0KICAgICAgICAgICAgICAgIHByb2plY3RGZWF0dXJlcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gc2V0dGluZ3NbaWRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09ICJNaW5SZWNvcmROdW1iZXIiIHx8IGlkID09PSAic2VjdGlvbnMiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke2lkfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnB1dC0ke2lkfSIgdmFsdWU9IiR7dmFsfSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZTkxZTYzOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkWSA9ICh2YWwgPT09ICdZJyB8fCB2YWwgPT09ICcnKSA/ICdzZWxlY3RlZCcgOiAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkTiA9ICh2YWwgPT09ICdOJykgPyAnc2VsZWN0ZWQnIDogJyc7DQogICAgICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke2lkfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iaW5wdXQtJHtpZH0iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjhweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iWSIgJHtzZWxlY3RlZFl9Plk8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik4iICR7c2VsZWN0ZWROfT5OPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8L3Rib2R5PjwvdGFibGU+YDsNCiAgICAgICAgICAgICAgICBjb250ZW50QXJlYS5pbm5lckhUTUwgPSByb3dzSHRtbDsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29udGVudEFyZWEuaW5uZXJIVE1MID0gIjxwIHN0eWxlPSdwYWRkaW5nOjIwcHg7Jz5FcnJvciBsb2FkaW5nIHNldHRpbmdzLjwvcD4iOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyA0LiBTQVZFIChQYXRoIGZpeGVkIHRvIC9TZXR0aW5ncy9Vc2VybmFtZS50eHQpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNhdmVTZWN1cml0eUZpbGUoKSB7DQogICAgICAgICAgICBjb25zdCB0YXJnZXRVc2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC11c2VyLXNlbGVjdG9yJykudmFsdWU7DQogICAgICAgICAgICBpZiAoIXRhcmdldFVzZXIpIHJldHVybiBhbGVydCgiU2VsZWN0IHVzZXIhIik7DQoNCiAgICAgICAgICAgIGxldCBmaWxlTGluZXMgPSBbXTsNCiAgICAgICAgICAgIHByb2plY3RGZWF0dXJlcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpbnB1dC0ke2lkfWApOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZmlsZUxpbmVzLnB1c2goYCR7aWR9IHwgJHtlbC52YWx1ZS50cmltKCl9YCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBmaWxlTGluZXMuam9pbignXG4nKTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBgL1NldHRpbmdzLyR7dGFyZ2V0VXNlcn0udHh0YCwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogZmlsZUNvbnRlbnQNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlNhdmVkOiAiICsgdGFyZ2V0VXNlciArICIudHh0Iik7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtb3ZlcmxheScpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIlNhdmUgRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQ2hlY2tzIGlmIG91ciBtYWluIERCIGlzIHJlYWR5IGZvciB1c2UNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHN0YXJ0SW50ZWdyaXR5UHJvYmUoYXR0ZW1wdHMpIHsNCiAgICAgICAgICAgIGlmIChhdHRlbXB0cyA8PSAwKSByZXR1cm47IC8vIFN0b3AgdHJ5aW5nIGFmdGVyIDEwIGF0dGVtcHRzDQoNCiAgICAgICAgICAgIC8vIDEuIENoZWNrIGlmIFlPVVIgY29yZSBkYXRhIGlzIHJlYWR5DQogICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyAhPT0gJ3VuZGVmaW5lZCcgJiYgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSB7DQoNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU3lzdGVtIFJlYWR5LiBQcm9iaW5nIFNlcXVlbmNlLi4uIik7DQogICAgICAgICAgICAgICAgcGVyZm9ybVNlcXVlbmNlQ2hlY2soKTsNCg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyAyLiBOb3QgcmVhZHkgeWV0PyBXYWl0IDIgc2Vjb25kcyBhbmQgdHJ5IGFnYWluDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlN5c3RlbSBidXN5Li4uIHJldHJ5aW5nIHByb2JlIGluIDJzIik7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzdGFydEludGVncml0eVByb2JlKGF0dGVtcHRzIC0gMSksIDIwMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIExvb2tzIGZvciBzZXF1ZW5jZS50eHQgYW5kIGNoZWNrcyBsYXN0IHJlY29yZCBhbmQgcmVjZWlwdCBDRyBudW1iZXIgLSBpZiBub3Qgb2sgLSBwcm9tcHRzIGZvciBhdXRvIGNvcnJlY3Rpb24NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1TZXF1ZW5jZUNoZWNrKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBHZXQgdGhlIHRvdGFsIGNvdW50IChpcnJlc3BlY3RpdmUgb2YgcHJlZml4KQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ291bnQgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmluZCB0aGUgbGF0ZXN0IENHIHJlY2VpcHQgYnkgc2VhcmNoaW5nIGJhY2t3YXJkIGZyb20gdGhlIGVuZA0KICAgICAgICAgICAgICAgIGxldCBkYlJOID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXB0TnVtYmVyID0gR0xPQkFMX0RCX0xJTkVTW2ldLnNwbGl0KCd8JylbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmVjZWlwdE51bWJlci5zdGFydHNXaXRoKCJDRyIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJOID0gcmVjZWlwdE51bWJlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBGb3VuZCB0aGUgaGlnaGVzdC9sYXRlc3QgQ0cgbnVtYmVyLCBzdG9wIHNlYXJjaGluZw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IElmIG5vIENHIGZvdW5kIGF0IGFsbCwgdXNlIHRoZSBsYXN0IGxpbmUncyBudW1iZXINCiAgICAgICAgICAgICAgICBpZiAoIWRiUk4gJiYgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgZGJSTiA9IEdMT0JBTF9EQl9MSU5FU1tHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMV0uc3BsaXQoJ3wnKVswXS50cmltKCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9EYXRhQmFzZXMvc2VxdWVuY2UudHh0JyB9KQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gKGF3YWl0IHJlcy50ZXh0KCkpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2ZpbGVSTiwgZmlsZUNvdW50XSA9IHRleHQuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIGZvdW5kIENHIG51bWJlciB3aXRoIHdoYXQgaXMgaW4gc2VxdWVuY2UudHh0DQogICAgICAgICAgICAgICAgICAgIGlmIChkYlJOICE9PSBmaWxlUk4pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGFpciA9IGNvbmZpcm0oYFNFUVVFTkNFIE1JU01BVENIIVxuXG5MYXRlc3QgQ0cgaW4gREI6ICR7ZGJSTn1cbkZpbGUgc2F5czogJHtmaWxlUk59XG5Ub3RhbCBSZWNvcmRzOiAke2RiQ291bnR9XG5cblVwZGF0ZSBzZXF1ZW5jZSBmaWxlP2ApOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGFpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL0RhdGFCYXNlcy9zZXF1ZW5jZS50eHQnLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJOICsgInwiICsgZGJDb3VudA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiUHJvYmUgZmV0Y2ggZmFpbGVkLiBOZXR3b3JrIG1pZ2h0IGJlIGJ1c3kuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gTG9va3MgZm9yIFVzZXJOYW1lLnR4dCBhbmQgY2hlY2tzIHdoYXQgYXJlIHRoZSBjb250cm9scyB0byBiZSBhbGxvd2VkIC0gZnVsbCBhY2Nlc3MgaWYgZmlsZSBub3QgZm91bmQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBTdGFydCB0aGUgcHJvYmUgKHRyeSAxMCB0aW1lcywgZXZlcnkgMiBzZWNvbmRzKQ0KICAgICAgICBzdGFydEludGVncml0eVByb2JlKDEwKTsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkQW5kQXBwbHlTZWN1cml0eSh1c2VyTmFtZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3VzZXJOYW1lfS50eHRgIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm47IC8vIElmIG5vIGZpbGUgZXhpc3RzLCB1c2VyIGhhcyBmdWxsIGFjY2Vzcw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgLy9jb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJyk7DQoNCg0KICAgICAgICAgICAgICAgIC8vIFNraXAgY29tbWVudHMgYW5kIGZvcm1hdHRpbmcgbGluZXMNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gbGluZS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBsICE9PSAiIiAmJiAhbC5zdGFydHNXaXRoKCcjJykgJiYgbC5pbmNsdWRlcygnfCcpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2lkLCBhY2Nlc3NdID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgJiYgYWNjZXNzICYmIGFjY2Vzcy50cmltKCkgPT09ICJOIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkLnRyaW0oKSkgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShpZC50cmltKCkpWzBdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IC8vIERJU0FQUEVBUg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTZWN1cml0eTogSGlkZGVuICR7aWR9YCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIlNlY3VyaXR5IGZpbGUgbm90IGZvdW5kIGZvciB1c2VyLCBncmFudGluZyBkZWZhdWx0IGFjY2Vzcy4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBpZiBtaW5yZWNvcmQgbnVtYmVyIHNwZWNpZmllZCBpbiB1c2VybmFtZS50eHQgdGhlbiBibG9ja3MgdXNlciB0byB2aWV3IHByZXZpb3VzIHJlY29yZHMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8qKg0KKiBTZWN1cml0eSBHYXRlIGZvciBOYXZpZ2F0aW9uDQoqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRJbmRleCAtIFRoZSBpbmRleCB0aGUgdXNlciBpcyB0cnlpbmcgdG8gbW92ZSB0bw0KKi8NCiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVOYXZpZ2F0aW9uU2VjdXJpdHkodGFyZ2V0SW5kZXgpIHsNCiAgICAgICAgICAgIC8vIElmIHRoZSB0YXJnZXQgaW5kZXggaXMgYWN0dWFsbHkgYSByZWNvcmQgbnVtYmVyICgxLWJhc2VkKSwNCiAgICAgICAgICAgIC8vIHdlIHVzZSBpdCBkaXJlY3RseS4gT3RoZXJ3aXNlLCB3ZSBhc3N1bWUgaXQncyBhIDAtYmFzZWQgYXJyYXkgaW5kZXguDQogICAgICAgICAgICBjb25zdCB0YXJnZXRSTiA9IHRhcmdldEluZGV4ICsgMTsNCg0KICAgICAgICAgICAgaWYgKHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID4gMCAmJiB0YXJnZXRSTiA8IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIvCfm5EgU0VDVVJJVFkgQkxPQ0tcblxuWW91ciBhY2Nlc3MgbGV2ZWwgZG9lcyBub3QgcGVybWl0IHZpZXdpbmcgcmVjb3JkcyBiZWZvcmU6ICIgKyB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STik7DQoNCiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgc2xpZGVyIHZpc3VhbCBpZiBpdCBtb3ZlZA0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgc2xpZGVyLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBEZW55IG5hdmlnYXRpb24NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBBbGxvdyBuYXZpZ2F0aW9uDQogICAgICAgIH0NCg0KICAgICAgICAvLyBJZiBhIGZsb29yIGlzIHNldCwgYW5kIHdlIGFyZSBjdXJyZW50bHkgYXQgYSBsb3dlciByZWNvcmQsIGp1bXAgdG8gdGhlIGZsb29yDQogICAgICAgIGlmICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IDApIHsNCiAgICAgICAgICAgIC8vIElmIGN1cnJlbnQgaW5kZXggaXMgMCBvciBsZXNzIHRoYW4gdGhlIGZsb29yLCBsb2FkIHRoZSBmbG9vciByZWNvcmQNCiAgICAgICAgICAgIGlmICgoY3VycmVudFJlY29yZEluZGV4ICsgMSkgPCB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STikgew0KICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOIC0gMTsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQogICAgICAgICAgICAgICAgdXBkYXRlU2xpZGVyKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gbG9va3MgZm9yIGFwcHJvdmVkLnR4dCBhbmQgYWxsb3dzIHVzZXIgdG8gZW50ZXIgc3cgLSBiYXNlZCBvbiBkZXZpY2UgaWQgYW5kIHBhc3N3b3JkDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5QZXJzb25hbFNlY3VyaXR5R2F0ZShzZWxlY3RlZFJvdywgY3VycmVudERldklEKSB7DQogICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHNlbGVjdGVkUm93LnNwbGl0KCd8JykubWFwKHAgPT4gcC50cmltKCkpOw0KICAgICAgICAgICAgY29uc3QgdU5hbWUgPSBwYXJ0c1sxXTsNCiAgICAgICAgICAgIGNvbnN0IHVQYXNzID0gcGFydHNbMl0gfHwgIjAiOw0KDQogICAgICAgICAgICAvLyAtLS0gQ1JJVElDQUw6IFNldCBHbG9iYWwgSWRlbnRpdHkgaW1tZWRpYXRlbHkgLS0tDQogICAgICAgICAgICBNTVBUX1VTRVJfTkFNRSA9IHVOYW1lOw0KDQogICAgICAgICAgICAvLyBIYW5kbGUgUElOID0gMCAoSW1tZWRpYXRlIEF1dG8tTG9naW4pDQogICAgICAgICAgICBpZiAodVBhc3MgPT09ICIwIikgew0KICAgICAgICAgICAgICAgIGxvY2tBbmRSZWZyZXNoVXNlcih1TmFtZSk7DQogICAgICAgICAgICAgICAgYXdhaXQgZmluaXNoTU1QVExhdW5jaCh0KTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEJ1aWxkIFBJTiBVSSBpZiBQSU4gaXMgbm90IDANCiAgICAgICAgICAgIGNvbnN0IGdhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgIGdhdGUuaWQgPSAic2VjdXJpdHlfaGlqYWNrIjsNCiAgICAgICAgICAgIGdhdGUuc3R5bGUgPSAicG9zaXRpb246Zml4ZWQ7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1MCwyNDAsMC45OCk7IHotaW5kZXg6OTk5OTk5OyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBmb250LWZhbWlseTpzYW5zLXNlcmlmOyI7DQoNCiAgICAgICAgICAgIGdhdGUuaW5uZXJIVE1MID0gYA0KICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBwYWRkaW5nOjQwcHg7IGJvcmRlci1yYWRpdXM6MTVweDsgYm9yZGVyOjNweCBzb2xpZCAjRkY5OTMzOyB0ZXh0LWFsaWduOmNlbnRlcjsgYm94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuMSk7IHdpZHRoOjMyMHB4OyI+DQogICAgICAgICAgICA8ZGl2IGlkPSJnYXRlX3Bob3RvX2NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOiMzMzM7IG1hcmdpbjoxMHB4IDA7Ij4ke3VOYW1lfTwvaDI+DQogICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJnYXRlX2lucHV0IiBwbGFjZWhvbGRlcj0iRW50ZXIgUElOIiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxNXB4OyBib3JkZXI6MnB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjIycHg7IG91dGxpbmU6bm9uZTsgbWFyZ2luLWJvdHRvbToxNXB4OyI+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJnYXRlX3ZlcmlmeSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTJweDsgYmFja2dyb3VuZDojMjhhNzQ1OyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6OHB4OyBmb250LXdlaWdodDpib2xkOyBjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjE2cHg7Ij5VTkxPQ0sgQVBQPC9idXR0b24+DQogICAgICAgICAgICA8cCBpZD0iZ2F0ZV9lcnIiIHN0eWxlPSJjb2xvcjpyZWQ7IG1hcmdpbi10b3A6MTBweDsgZGlzcGxheTpub25lOyI+SW52YWxpZCBQYXNzd29yZDwvcD4NCiAgICAgICAgPC9kaXY+YDsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChnYXRlKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2lucHV0JykuZm9jdXMoKTsNCg0KICAgICAgICAgICAgLy8gVXNlciBQaG90byBGZXRjaA0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwaG90b1BhdGggPSBgL0ltYWdlcy8ke3VOYW1lfS5qcGdgOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHBob3RvUGF0aCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgaWYgKHBSLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBhd2FpdCBwUi5ibG9iKCk7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX3Bob3RvX2NvbnRhaW5lcicpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iJHtVUkwuY3JlYXRlT2JqZWN0VVJMKGIpfSIgc3R5bGU9IndpZHRoOjEyMHB4OyBoZWlnaHQ6MTIwcHg7IGJvcmRlci1yYWRpdXM6NTAlOyBib3JkZXI6M3B4IHNvbGlkICNGRjk5MzM7IG9iamVjdC1maXQ6Y292ZXI7IG1hcmdpbi1ib3R0b206MTBweDsiPmA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiRGVmYXVsdGluZyB0byBubyBwaG90byIpOyB9DQoNCiAgICAgICAgICAgIGNvbnN0IHZlcmlmeSA9IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS52YWx1ZSA9PT0gdVBhc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgZ2F0ZS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgbG9ja0FuZFJlZnJlc2hVc2VyKHVOYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmluaXNoTU1QVExhdW5jaCh0KTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9lcnInKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX3ZlcmlmeScpLm9uY2xpY2sgPSB2ZXJpZnk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9pbnB1dCcpLm9ua2V5cHJlc3MgPSAoZSkgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHZlcmlmeSgpOyB9Ow0KICAgICAgICB9DQoNCg0KDQoNCiAgICAgICAgZnVuY3Rpb24gc2hvd1VzZXJJZGVudGl0eVNlbGVjdG9yKG1hdGNoZXMsIHRva2VuLCBkZXZJRCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgb3ZlcmxheS5pZCA9ICJ1c2VyX2lkZW50aXR5X292ZXJsYXkiOw0KICAgICAgICAgICAgb3ZlcmxheS5zdHlsZSA9ICJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6I0ZERkNGQjsgei1pbmRleDoyMTQ3NDgzNjQ3OyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBmb250LWZhbWlseTpzYW5zLXNlcmlmOyI7DQoNCiAgICAgICAgICAgIGxldCBidXR0b25zSHRtbCA9IG1hdGNoZXMubWFwKChsaW5lLCBpZHgpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGluZS5zcGxpdCgnfCcpWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYDxidXR0b24gaWQ9ImlkZW50aXR5X2J0bl8ke2lkeH0iIHN0eWxlPSJ3aWR0aDozMDBweDsgcGFkZGluZzoyMHB4OyBtYXJnaW46MTBweDsgYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyOjNweCBzb2xpZCAjRkY5OTMzOyBib3JkZXItcmFkaXVzOjEycHg7IGZvbnQtc2l6ZToyMHB4OyBmb250LXdlaWdodDpib2xkOyBjdXJzb3I6cG9pbnRlcjsgY29sb3I6IzMzMzsiPiR7bmFtZX08L2J1dHRvbj5gOw0KICAgICAgICAgICAgfSkuam9pbignJyk7DQoNCiAgICAgICAgICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgPGgxIHN0eWxlPSJjb2xvcjojRkY5OTMzOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij5TRUxFQ1QgUFJPRklMRTwvaDE+DQogICAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6IzY2NjsgbWFyZ2luLWJvdHRvbTozMHB4OyI+TXVsdGlwbGUgdXNlcnMgZm91bmQgZm9yIHRoaXMgZGV2aWNlOjwvcD4NCiAgICAgICAgICAgICR7YnV0dG9uc0h0bWx9DQogICAgICAgIGA7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOw0KDQogICAgICAgICAgICBtYXRjaGVzLmZvckVhY2goKGxpbmUsIGlkeCkgPT4gew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpZGVudGl0eV9idG5fJHtpZHh9YCkub25jbGljayA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzZW5kcyB0aGUgc3BlY2lmaWMgc2VsZWN0ZWQgdXNlciByb3cgdG8gdGhlIEdhdGUNCiAgICAgICAgICAgICAgICAgICAgcnVuUGVyc29uYWxTZWN1cml0eUdhdGUobGluZSwgZGV2SUQpOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmluaXNoTU1QVExhdW5jaCh0b2tlbikgew0KICAgICAgICAgICAgLy8gMS4gU3dpdGNoIFVJIFZpc2liaWxpdHkNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoU2NyZWVuJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQXBwQ29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoNCiAgICAgICAgICAgIC8vIDIuIFN0YXJ0IHRoZSBhY3R1YWwgYXBwIGRhdGEgbG9hZGluZw0KICAgICAgICAgICAgLy8gVGhpcyB3aWxsIG5vdyB1c2UgdGhlIGdsb2JhbGx5IHNldCBNTVBUX1VTRVJfTkFNRQ0KICAgICAgICAgICAgbG9hZERhdGEodG9rZW4pOw0KDQogICAgICAgICAgICAvLyAzLiBMb2cgdGhlIHN0YXJ0DQogICAgICAgICAgICBhd2FpdCB3cml0ZVVzZXJMb2coIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIik7DQogICAgICAgICAgICBhd2FpdCB3cml0ZVVzZXJMb2coYExBVU5DSEVEOiBTZXNzaW9uIFN0YXJ0ZWQgZm9yICR7TU1QVF9VU0VSX05BTUV9YCk7DQogICAgICAgIH0NCg0KDQoNCg0KDQoNCg0KICAgICAgICAvKioNCiAgICAgICAgICogVGhlICJIYW1tZXIiIC0gZm9yY2VzIHRoZSBhcHAgdG8gYWNrbm93bGVkZ2UgVEhJUyB1c2VyIGFuZCBubyBvbmUgZWxzZS4NCiAgICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIGxvY2tBbmRSZWZyZXNoVXNlcihmaW5hbE5hbWUpIHsNCiAgICAgICAgICAgIHdpbmRvdy5NTVBUX1VTRVJfTkFNRSA9IGZpbmFsTmFtZTsNCg0KICAgICAgICAgICAgLy8gRm9yY2UgaGVhZGVyL3NpZGViYXIgdXBkYXRlDQogICAgICAgICAgICBjb25zdCB1c2VyTGFiZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheVVzZXInKTsNCiAgICAgICAgICAgIGlmICh1c2VyTGFiZWwpIHVzZXJMYWJlbC5pbm5lclRleHQgPSBmaW5hbE5hbWU7DQoNCiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlVXNlckxpc3QnKTsNCiAgICAgICAgICAgIGlmIChhY3RpdmVMaXN0KSBhY3RpdmVMaXN0LmlubmVyVGV4dCA9IGZpbmFsTmFtZTsNCg0KICAgICAgICAgICAgLy8gUmUtcnVuIHBlcm1pc3Npb24gbG9naWMgZm9yIFRISVMgdXNlciBzcGVjaWZpY2FsbHkNCiAgICAgICAgICAgIGlmICh0eXBlb2YgYXBwbHlVc2VyUGVybWlzc2lvbnMgPT09ICJmdW5jdGlvbiIpIHsNCiAgICAgICAgICAgICAgICBhcHBseVVzZXJQZXJtaXNzaW9ucyhmaW5hbE5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBoaWRlIGxvZ2ljIHJ1bnMgQUZURVIgdGhlIHBhZ2UgYW5kIGFsbCBkYXRhIChpbWFnZXMvc3RhdHMpIGFyZSByZWFkeQ0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIC8vIDEtc2Vjb25kIGRlbGF5IHRvIGVuc3VyZSBhbnkgaW50ZXJuYWwgJ2xvYWRSZWNvcmQnIGZ1bmN0aW9ucyBoYXZlIGZpbmlzaGVkIHJlbmRlcmluZyByb3dzDQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlICdjdXJyZW50VXNlcicgd2l0aCB3aGF0ZXZlciB2YXJpYWJsZSBzdG9yZXMgeW91ciBsb2dnZWQtaW4gbmFtZQ0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFVzZXIgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgICAgIGFwcGx5VXNlclBlcm1pc3Npb25zKGN1cnJlbnRVc2VyKTsNCiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZVNlY3VyaXR5U25hcHNob3QoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIGxvb2tzIGZvciB1c2VybmFtZS50eHQgYW5kIGVuYWJsZXMgLyBkaXNhYmxlcyBjb250cm9scyBmb3IgdGhhdCBwYXJ0aWN1bGFyIHVzZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGFwcGx5VXNlclBlcm1pc3Npb25zKHVzZXJOYW1lKSB7DQogICAgICAgICAgICAvLyAxLiBJbml0aWFsIGRlYnVnIGFsZXJ0DQogICAgICAgICAgICAvL2FsZXJ0KCJGdW5jdGlvbiBTdGFydGVkIGZvcjogIiArIHVzZXJOYW1lKTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSAiL1NldHRpbmdzLyIgKyB1c2VyTmFtZS50cmltKCkgKyAiLnR4dCI7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiBmaWxlUGF0aCB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcbicpOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2lkLCBhY2Nlc3NdID0gbGluZS5zcGxpdCgnfCcpLm1hcChzID0+IHMudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZCkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBBLiBNaW4gUmVjb3JkIExvZ2ljIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09ICJNaW5SZWNvcmROdW1iZXIiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmbG9vclZhbHVlID0gcGFyc2VJbnQoYWNjZXNzKSB8fCAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPSBmbG9vclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZFNsaWRlcicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5zZXRBdHRyaWJ1dGUoJ21pbicsIGZsb29yVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChzbGlkZXIudmFsdWUpIDwgZmxvb3JWYWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSBmbG9vclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxvYWRSZWNvcmRCeUluZGV4ID09PSAiZnVuY3Rpb24iKSBsb2FkUmVjb3JkQnlJbmRleChmbG9vclZhbHVlIC0gMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEIuIFNlY3Rpb25zIExvZ2ljICgxLTcpIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09ICJzZWN0aW9ucyIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoIlNlY3Rpb25zIHJlYWQ6IFsiICsgYWNjZXNzICsgIl0iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5U2VjdGlvbkFjY2VzcyhhY2Nlc3MpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEMuIFN0YW5kYXJkIFVJIFRvZ2dsZXMgKE4gPSBIaWRlKSAtLS0NCg0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBDLiBTdGFuZGFyZCBVSSBUb2dnbGVzIChOID0gSGlkZS9EaXNhYmxlKSAtLS0NCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEMuIFN0YW5kYXJkIFVJIFRvZ2dsZXMgKEFnZ3Jlc3NpdmUgTW9kZSkgLS0tDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgIyR7aWR9LCAuJHtpZH1gKTsNCg0KICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2Nlc3MgPT09ICJOIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIEluaXRpYWwgSGlkZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuZGlzYWJsZWQgPSB0cnVlOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gVGhlICJTZWN1cml0eSBHdWFyZCIgKE9ic2VydmVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFueSBvdGhlciBzY3JpcHQgdHJpZXMgdG8gc2hvdyB0aGlzIGJ1dHRvbiwgdGhpcyBzbmFwcyBpdCBiYWNrIHRvIGhpZGRlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAiYXR0cmlidXRlcyIgJiYgZWwuc3R5bGUuZGlzcGxheSAhPT0gIm5vbmUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnbm9uZScsICdpbXBvcnRhbnQnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGVsLCB7IGF0dHJpYnV0ZXM6IHRydWUsIGF0dHJpYnV0ZUZpbHRlcjogWydzdHlsZScsICdjbGFzcyddIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHBsaWNpdGx5IFNob3cgaWYgJ1knDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgiRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBhcHBseVNlY3Rpb25BY2Nlc3MoYWxsb3dlZFN0cmluZykgew0KICAgICAgICAgICAgLy8gV2UgdGFyZ2V0IHRoZSBjb250YWluZXJzIGV4YWN0bHkgYXMgeW91IGRlZmluZWQgdGhlbQ0KICAgICAgICAgICAgY29uc3Qgc2VjdGlvbk1hcCA9IHsNCiAgICAgICAgICAgICAgICAnMCc6ICcjcmFkaW8tZG9jaycsIC8vSW50ZXJuZXQgUmFkaW8NCiAgICAgICAgICAgICAgICAnMSc6ICcucGFuY2hhbmctb3V0ZXInLA0KICAgICAgICAgICAgICAgICcyJzogJy5mbGFzaGJhY2stY29udGFpbmVyJywNCiAgICAgICAgICAgICAgICAnMyc6ICcuY2hpdHJhbS1jb250YWluZXInLA0KICAgICAgICAgICAgICAgICc0JzogJy5tbXB0LWFyY2hpdmUtYm94JywNCiAgICAgICAgICAgICAgICAnNSc6ICcjYXVkaW9fYXJjaGl2ZV9zZWN0aW9uJywNCiAgICAgICAgICAgICAgICAnNic6ICcjdmlkZW8tYXJjaGl2ZS1ib3gnLCAvLyBUYXJnZXRlZCB2aWEgdGhlIElEIHdlIGFkZGVkIGluIFN0ZXAgMQ0KICAgICAgICAgICAgICAgICc3JzogJyNwYW5jaGFuZ19zZWN0aW9uJywNCiAgICAgICAgICAgICAgICAnOCc6ICcubHVuYXItc2VjdGlvbicsDQogICAgICAgICAgICAgICAgJzknOiAnLm5hdi1zZWN0aW9uJywNCiAgICAgICAgICAgICAgICAnRyc6ICcuZ3VydS1zZWN0aW9uJw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgT2JqZWN0LmtleXMoc2VjdGlvbk1hcCkuZm9yRWFjaChudW0gPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gc2VjdGlvbk1hcFtudW1dOw0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7DQoNCiAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gSUYgdGhlIG51bWJlciBpcyBpbiB0aGUgc3RyaW5nIChlLmcuICcxMjMnKSwga2VlcC9zaG93IGl0Lg0KICAgICAgICAgICAgICAgICAgICAvLyBJRiBOT1QgKGUuZy4gJzYnIGlzIG1pc3NpbmcpLCBoaWRlIGl0IGltbWVkaWF0ZWx5Lg0KICAgICAgICAgICAgICAgICAgICBpZiAoYWxsb3dlZFN0cmluZy5pbmNsdWRlcyhudW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnbm9uZScsICdpbXBvcnRhbnQnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFRha2VzIGEgc25hcCBvZiB1c2VyIHdoaWxlIGxhdW5jaCBhbmQgcHV0cyBpbiBsb2cgZm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBJTkRFUEVOREVOVCBTRUNVUklUWSBTTkFQU0hPVA0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCgpIHsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBHZXQgQ2FtZXJhDQogICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyB2aWRlbzogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7DQogICAgICAgICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtOw0KICAgICAgICAgICAgICAgIGF3YWl0IHZpZGVvLnBsYXkoKTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIENhcHR1cmUgSW1hZ2UNCiAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSB2aWRlby52aWRlb1dpZHRoOw0KICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodDsNCiAgICAgICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UodmlkZW8sIDAsIDApOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gY2FudmFzLnRvQmxvYihyZXMsICdpbWFnZS9qcGVnJywgMC44KSk7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBTaW1wbGUgRmlsZW5hbWUgKFVzZXJfRGF0ZV9UaW1lLmpwZykNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5vdy5nZXRGdWxsWWVhcigpICsgIi0iICsNCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKSArICItIiArDQogICAgICAgICAgICAgICAgICAgIFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpICsgIl8iICsNCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nKG5vdy5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpICsgIi0iICsNCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke01NUFRfTE9HX0RJUn1Vc2VyXyR7dGltZXN0YW1wfS5qcGdgOw0KDQogICAgICAgICAgICAgICAgLy8gNC4gVXBsb2FkIHRvIERyb3Bib3ggKFVzZXMgdGhlIGdsb2JhbCB0b2tlbiAndCcpDQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGZpbGVOYW1lLCBtb2RlOiAnYWRkJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBibG9iDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyA1LiBUdXJuIG9mZiBDYW1lcmENCiAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAvLyBTaWxlbnQgZmFpbCAtIHByZXZlbnRzIHRoZSBhcHAgZnJvbSBoYW5naW5nIGlmIG5vIGNhbWVyYSBpcyBmb3VuZA0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiU25hcHNob3Qgc2tpcHBlZC4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FkbWluIFBhbmVsDQogICAgICAgIC8vIFNob3dzIGxhdGVzdCB0d28gcGhvdG9zIG9mIHVzZXJzIGxvZ2dlZCBpbiBhZG1pbiBwYW5lbA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEFkbWluU25hcHMoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHRoZSBsaXN0IG9mIGZpbGVzDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvbGlzdF9mb2xkZXInLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfTE9HX0RJUiB9KQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gU29ydCBieSBkYXRlIGFuZCB0YWtlIGxhdGVzdCAyDQogICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBkYXRhLmVudHJpZXMNCiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmID0+IGYubmFtZS5lbmRzV2l0aCgnLmpwZycpKQ0KICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jbGllbnRfbW9kaWZpZWQpIC0gbmV3IERhdGUoYS5jbGllbnRfbW9kaWZpZWQpKQ0KICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMik7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBQb3B1bGF0ZSB0aGUgY2VsbHMNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNuYXAtYm94LSR7aSArIDF9YCk7DQogICAgICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gIiI7IC8vIENsZWFyIGV4aXN0aW5nDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVzW2ldKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZ2V0X3RlbXBvcmFyeV9saW5rJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlc1tpXS5wYXRoX2xvd2VyIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtEYXRhID0gYXdhaXQgbGlua1Jlcy5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGltZSBmcm9tIGZpbGVuYW1lIFVzZXJfWVlZWS1NTS1ERF9ISC1NTS5qcGcNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBmaWxlc1tpXS5uYW1lLnNwbGl0KCdfJylbMl0/LnJlcGxhY2UoJy5qcGcnLCAnJykgfHwgIkxvZyI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiM2NjY7IG1hcmdpbi1ib3R0b206MnB4OyI+JHt0aW1lfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bGlua0RhdGEubGlua30iIHN0eWxlPSJ3aWR0aDo3MHB4OyBoZWlnaHQ6NzBweDsgb2JqZWN0LWZpdDpjb3ZlcjsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOjRweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiQ291bGQgbm90IGxvYWQgc2VjdXJpdHkgc25hcHNob3RzLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEF1ZGl0cyB0aGUgZW50cmllcyBvZiBSZWNlaXB0IGZpbGxlZCBqdXN0IGJlZm9yZSBzYXZpbmcgYW5kIHBvaW50cyBvdXQgcG9zc2libGUgZXJyb3JzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBydW5BdWRpdCgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IChpZCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmNoZWNrZWQ7DQogICAgICAgICAgICAgICAgY29uc3QgZ2V0VmFsID0gKGlkKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkudmFsdWUudHJpbSgpOw0KDQogICAgICAgICAgICAgICAgLy8gMS4gREFUQSBWQUxJREFUSU9ODQogICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBnZXRWYWwoJ2ZpZWxkX3Bob25lJykucmVwbGFjZSgvXEQvZywgJycpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhbiA9IGdldFZhbCgnZmllbGRfcGFuJykudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9IGdldFZhbCgnZmllbGRfZW1haWwnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGdldFZhbCgnZmllbGRfYW1vdW50JykpIHx8IDA7DQogICAgICAgICAgICAgICAgY29uc3QgaXNDYW5jZWxsZWQgPSBpc0NoZWNrZWQoJ2ZpZWxkX2NhbmNlbCcpOw0KDQogICAgICAgICAgICAgICAgbGV0IGVycm9ycyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBibGFua3MgPSBbXTsNCg0KICAgICAgICAgICAgICAgIC8vIENvbXByZWhlbnNpdmUgQmxhbmsgQ2hlY2sgKEFsbCB0ZXh0L3RleHRhcmVhIGZpZWxkcykNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0RmllbGRzID0gew0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfcmVjbm8nOiAnUmVjZWlwdCBObycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9kYXRlJzogJ0RhdGUnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfbmFtZSc6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3Bob25lJzogJ1Bob25lJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2FkZHJlc3MnOiAnQWRkcmVzcycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9lbWFpbCc6ICdFbWFpbCcsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9wYW4nOiAnUEFOJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3N0YXInOiAnU3RhcicsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9nb3RocmFtJzogJ0dvdGhyYW0nLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfYW1vdW50JzogJ0Ftb3VudCcsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9yZWYnOiAnUmVmZXJlbmNlL0NocSBObycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9jb21tZW50cyc6ICdDb21tZW50cycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9waW5jb2RlJzogJ1BpbmNvZGUnDQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGZvciAobGV0IGlkIGluIHRleHRGaWVsZHMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRWYWwoaWQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBibGFua3MucHVzaCh0ZXh0RmllbGRzW2lkXSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBGb3JtYXQgJiBMb2dpY2FsIFZhbGlkYXRpb25zDQogICAgICAgICAgICAgICAgaWYgKHBob25lLmxlbmd0aCA+IDAgJiYgcGhvbmUubGVuZ3RoICE9PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIFBob25lIG51bWJlciBtdXN0IGJlIGV4YWN0bHkgMTAgZGlnaXRzLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChwYW4ubGVuZ3RoID4gMCAmJiAhL1tBLVpdezV9WzAtOV17NH1bQS1aXXsxfS8udGVzdChwYW4pKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gUEFOIGZvcm1hdCBpcyBpbnZhbGlkIChFeHBlY3RlZDogQUFBQUExMTExQSkuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gLS0tIE5FVyBFTUFJTCBWQUxJREFUSU9OIC0tLQ0KICAgICAgICAgICAgICAgIGlmIChlbWFpbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsUmVnZXggPSAvXlteXHNAXStAW15cc0BdK1wuW15cc0BdKyQvOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChlbWFpbCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gRW1haWwgZm9ybWF0IGlzIGludmFsaWQgKEV4cGVjdGVkOiBuYW1lQGRvbWFpbi5jb20pLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gWmVybyBBbW91bnQgSGlnaGxpZ2h0IExvZ2ljDQogICAgICAgICAgICAgICAgbGV0IGFtb3VudFdhcm5pbmcgPSAiIjsNCiAgICAgICAgICAgICAgICBpZiAoIWlzQ2FuY2VsbGVkICYmIGFtb3VudCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbW91bnRXYXJuaW5nID0gYDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjJmMjsgY29sb3I6I2Q5MzAyNTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNkOTMwMjU7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IHRleHQtYWxpZ246Y2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKaoO+4jyBDUklUSUNBTDogQW1vdW50IGlzIDAuIFBsZWFzZSB2ZXJpZnkgaWYgdGhpcyBpcyBpbnRlbnRpb25hbC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIEFtb3VudCBpcyB6ZXJvLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgLy8gMi4gQlVJTEQgVEhFIEFVRElUIFVJDQogICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsSGVhZGVyID0gaXNDYW5jZWxsZWQgPw0KICAgICAgICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDpyZWQ7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MS4yZW07IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7Ij4hISEgUkVDRUlQVCBJUyBDQU5DRUxMRUQgISEhPC9kaXY+YCA6ICIiOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzR3JpZCA9IGANCjxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgZ2FwOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7Ij4NCjxkaXY+Q2FuY2VsbGVkOiAke2lzQ2FuY2VsbGVkID8gJzxiIHN0eWxlPSJjb2xvcjpyZWQ7Ij5ZRVM8L2I+JyA6ICdOTyd9PC9kaXY+DQo8ZGl2PlByaW50ZWQ6ICR7aXNDaGVja2VkKCdmaWVsZF9wcmludGVkJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5QcmFzYWRhbTogJHtpc0NoZWNrZWQoJ2ZpZWxkX3ByYXNhZGFtJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5Db3JwdXMgU2lnbmVkOiAke2lzQ2hlY2tlZCgnZmllbGRfY29ycHVzJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICBvdmVybGF5LnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuODUpOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgei1pbmRleDoxMDAwMTsgZm9udC1mYW1pbHk6c2Fucy1zZXJpZjsiOw0KDQoNCiAgICAgICAgICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IGANCjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6MjVweDsgYm9yZGVyLXJhZGl1czoxMnB4OyB3aWR0aDo1ODBweDsgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLDAsMCwwLjUpOyBtYXgtaGVpZ2h0OiA5MHZoOyBvdmVyZmxvdy15OiBhdXRvOyI+DQoke2NhbmNlbEhlYWRlcn0NCiR7YW1vdW50V2FybmluZ30NCg0KPGgyIHN0eWxlPSJtYXJnaW4tdG9wOjA7IGJvcmRlci1ib3R0b206MnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjEwcHg7Ij5SZWNlaXB0IEF1ZGl0IFJlcG9ydDwvaDI+DQoNCjxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTVweDsgbGluZS1oZWlnaHQ6MS41OyI+DQo8Yj5SZWNlaXB0OjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX3JlY25vJyl9IHwgPGI+RGF0ZTo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9kYXRlJyl9PGJyPg0KPGI+TmFtZTo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9uYW1lJyl9PGJyPg0KPGI+QW1vdW50OjwvYj4gPHNwYW4gc3R5bGU9IiR7YW1vdW50ID09PSAwID8gJ2NvbG9yOnJlZDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMmVtOycgOiAnJ30iPuKCuSR7YW1vdW50fTwvc3Bhbj4gfCA8Yj5Ub3dhcmRzOjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX3Rvd2FyZHMnKX0NCjwvZGl2Pg0KDQo8aDQgc3R5bGU9Im1hcmdpbjogMTVweCAwIDVweCAwOyBjb2xvcjojNTU1OyI+RGF0YWJhc2UgU3RhdHVzIEZsYWdzOjwvaDQ+DQoke3N0YXR1c0dyaWR9DQoNCiR7YmxhbmtzLmxlbmd0aCA+IDAgPyBgDQo8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7IGJhY2tncm91bmQ6I2U4ZjRmZDsgcGFkZGluZzoxMHB4OyBib3JkZXItbGVmdDo1cHggc29saWQgIzIxOTZGMzsiPg0KPGIgc3R5bGU9ImNvbG9yOiMwZDQ3YTE7Ij5UaGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgYmxhbms6PC9iPjxicj4NCjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC45ZW07IGNvbG9yOiMzMzM7Ij4ke2JsYW5rcy5qb2luKCcsICcpfTwvc3Bhbj4NCjwvZGl2Pg0KYCA6ICIifQ0KDQoke2Vycm9ycy5sZW5ndGggPiAwID8gYA0KPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBiYWNrZ3JvdW5kOiNmZmYzY2Q7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWxlZnQ6NXB4IHNvbGlkICNmZmMxMDc7Ij4NCjxiIHN0eWxlPSJjb2xvcjojODU2NDA0OyI+VmFsaWRhdGlvbiBBbGVydHM6PC9iPjxicj4NCiR7ZXJyb3JzLmpvaW4oJzxicj4nKX0NCjwvZGl2Pg0KYCA6ICIifQ0KDQo8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBtYXJnaW4tdG9wOjI1cHg7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLXRvcDogMTVweDsiPg0KPGJ1dHRvbiBpZD0iYXVkaXRfYmFjayIgc3R5bGU9InBhZGRpbmc6MTBweCAyMHB4OyBtYXJnaW4tcmlnaHQ6MTBweDsgY3Vyc29yOnBvaW50ZXI7IGJvcmRlci1yYWRpdXM6NXB4OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6IHdoaXRlOyI+R28gQmFjayAmIEVkaXQ8L2J1dHRvbj4NCjxidXR0b24gaWQ9ImF1ZGl0X2NvbmZpcm0iIHN0eWxlPSJwYWRkaW5nOjEwcHggMzBweDsgYmFja2dyb3VuZDojMjhhNzQ1OyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NXB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOiAxLjFlbTsiPkNPTkZJUk0gJiBTWU5DPC9idXR0b24+DQo8L2Rpdj4NCjwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGl0X2JhY2snKS5vbmNsaWNrID0gKCkgPT4geyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpOyByZXNvbHZlKGZhbHNlKTsgfTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaXRfY29uZmlybScpLm9uY2xpY2sgPSAoKSA9PiB7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7IHJlc29sdmUodHJ1ZSk7IH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gRW5zdXJlIGl0IHJ1bnMgYWZ0ZXIgdGhlIHBhZ2UgaGFzIGZpbmlzaGVkIGFsbCBpdHMgaW50ZXJuYWwgZGF0YS1sb2FkaW5nDQogICAgICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRVc2VyICE9PSAndW5kZWZpbmVkJykgYXBwbHlVc2VyUGVybWlzc2lvbnMoY3VycmVudFVzZXIpOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQW5vbnkgUmVjZWlwdHMgQXV0b2ZpbGwgZnJvbSBrbm93biByZWNlaXB0IHRvIGFub255IC0gaW5wdXQgZnJvbSBNTVBUX0xJTktfQU5PTlkgQW5vbnlGaWxsLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkFub255RmlsbCgpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU1QVF9MSU5LX0FOT05ZKTsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoIkxpbmsgdW5yZWFjaGFibGUiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBpbmdUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IG1hcHBpbmdUZXh0LnNwbGl0KCdcbicpLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlTWFkZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3RhcmdldFJOLCBzb3VyY2VSTl0gPSBsaW5lLnNwbGl0KCd8JykubWFwKHAgPT4gcC50cmltKCkpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVJvdyA9IEdMT0JBTF9EQl9MSU5FUy5maW5kKHIgPT4gci5zdGFydHNXaXRoKHNvdXJjZVJOICsgInwiKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4ID0gR0xPQkFMX0RCX0xJTkVTLmZpbmRJbmRleChyID0+IHIuc3RhcnRzV2l0aCh0YXJnZXRSTiArICJ8IikpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VSb3cgJiYgdGFyZ2V0SW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gc291cmNlUm93LnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IEdMT0JBTF9EQl9MSU5FU1t0YXJnZXRJbmRleF0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDEuIERJUkVDVCBSRVBMSUNBVElPTiAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMl0gPSBzWzJdOyAgLy8gTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFszXSA9IHNbM107ICAvLyBQaG9uZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFs0XSA9IHNbNF07ICAvLyBBZGRyZXNzDQogICAgICAgICAgICAgICAgICAgICAgICB0WzVdID0gc1s1XTsgIC8vIEVtYWlsDQogICAgICAgICAgICAgICAgICAgICAgICB0WzZdID0gc1s2XTsgIC8vIFBBTg0KICAgICAgICAgICAgICAgICAgICAgICAgdFs3XSA9IHNbN107ICAvLyBTdGFyDQogICAgICAgICAgICAgICAgICAgICAgICB0WzhdID0gc1s4XTsgIC8vIEdvdGhyYW0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMTVdID0gc1sxNV07IC8vIFBpbiBDb2RlDQogICAgICAgICAgICAgICAgICAgICAgICB0WzE5XSA9IHNbMTldOyAvLyBDb3VudHJ5DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSAyLiBESVJFQ1QgQ09NTUVOVCBBUFBFTkQgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBjaGVja3MsIG5vICJpZiIgYmxvY2tzLiBKdXN0IGFwcGVuZCB0byBpbmRleCAxNC4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGUgPSAiRGV0YWlscyBJbXBvcnRlZCBmcm9tICIgKyBzb3VyY2VSTjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZENvbW1lbnQgPSAodFsxNF0gfHwgIiIpLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBvbGQgY29tbWVudCwgYWRkIHBpcGU7IG90aGVyd2lzZSBqdXN0IHRoZSBub3RlLg0KICAgICAgICAgICAgICAgICAgICAgICAgdFsxNF0gPSBvbGRDb21tZW50ID8gKG9sZENvbW1lbnQgKyAiIDogIiArIG5vdGUpIDogbm90ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDMuIFJFLUpPSU4gLS0tDQogICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbdGFyZ2V0SW5kZXhdID0gdC5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VNYWRlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VNYWRlKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFVVEhFTlRJQ0FUSU9ODQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogdG9rZW5QYXJhbXMNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBVUExPQUQNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW5EYXRhLmFjY2Vzc190b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh1cGxvYWRSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJBbm9ueUZpbGw6IERvbmUuICIgKyB1cGRhdGVDb3VudCArICIgcmVjb3JkcyB1cGRhdGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQW5vbnlGaWxsIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBCYWNrdXBzIENvbXBsZXRlIEFwcCBGb2xkZXIgd2l0aCBhbGwgZmlsZXMgYW5kIHB1dHMgaW4gQmFja3VwIEZvbGRlciB3aXRoIFRpbWVzdGFtcA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuTU1QVEJhY2t1cChpc0F1dG8gPSBmYWxzZSkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEdlbmVyYXRlIFRpbWVzdGFtcCBmb3IgRm9sZGVyIE5hbWUNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5vdy50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0gKyAiXyIgKw0KICAgICAgICAgICAgICAgICAgICBub3cuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyAiLSIgKw0KICAgICAgICAgICAgICAgICAgICBub3cuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERpciA9IE1NUFRfQkFDS1VQX0RJUiArIHRpbWVzdGFtcDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEdldCBBY2Nlc3MgVG9rZW4gdXNpbmcgeW91ciBjcmVkZW50aWFscw0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBib2R5OiB0b2tlblBhcmFtcw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHRva2VuRGF0YS5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBsZXQgY29weUVudHJpZXMgPSBbXTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFNURVAgQTogQ29weSBDb3JlIEluZGl2aWR1YWwgRmlsZXMgKFJlYWQtb25seSBsaW5rcykNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JlRmlsZXMgPSBbDQogICAgICAgICAgICAgICAgICAgIE1NUFRfRklMRV9EQiwgTU1QVF9GSUxFX1VTRVJTLCBNTVBUX0ZJTEVfQVBQUk9WRUQsDQogICAgICAgICAgICAgICAgICAgIE1NUFRfRklMRV9MT0dPLCBNTVBUX0ZJTEVfRFJPUERPV05TLCBNTVBUX0ZJTEVfQ0FTSCwNCiAgICAgICAgICAgICAgICAgICAgTU1QVF9GSUxFX0JBTkssIEVYRU1QVF9GSUxFLCBNTVBUX0ZJTEVfU0VRDQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGNvcmVGaWxlcy5mb3JFYWNoKHBhdGggPT4gew0KICAgICAgICAgICAgICAgICAgICBjb3B5RW50cmllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fcGF0aDogcGF0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvX3BhdGg6IHRhcmdldERpciArICIvIiArIHBhdGguc3BsaXQoJy8nKS5wb3AoKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDQuIFNURVAgQjogRHluYW1pYyBGb2xkZXIgQ29weSAoRXhjbHVkaW5nIFBhbmNoYW5nKQ0KICAgICAgICAgICAgICAgIC8vIFNjYW5zIHRoZSByb290IG9mIHlvdXIgQXBwIGZvbGRlcg0KICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9saXN0X2ZvbGRlcicsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbiwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICIiIH0pDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAobGlzdFJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0RGF0YSA9IGF3YWl0IGxpc3RSZXMuanNvbigpOw0KICAgICAgICAgICAgICAgICAgICBsaXN0RGF0YS5lbnRyaWVzLmZvckVhY2goZW50cnkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZUxvd2VyID0gZW50cnkubmFtZS50b0xvd2VyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IGFsbCBmb2xkZXJzIEVYQ0VQVCAncGFuY2hhbmcnDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlbIi50YWciXSA9PT0gImZvbGRlciIgJiYgbmFtZUxvd2VyICE9PSAicGFuY2hhbmciKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weUVudHJpZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fcGF0aDogZW50cnkucGF0aF9sb3dlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9fcGF0aDogdGFyZ2V0RGlyICsgIi8iICsgZW50cnkubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyBjYXRjaCBhbnkgbG9vc2UgZmlsZXMgaW4gcm9vdCAobGlrZSB2aWRlb3MudHh0KSBub3QgYWxyZWFkeSBpbiBjb3JlRmlsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVudHJ5WyIudGFnIl0gPT09ICJmaWxlIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWxyZWFkeUxpc3RlZCA9IGNvcmVGaWxlcy5zb21lKGNmID0+IGNmLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmFtZUxvd2VyKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0FscmVhZHlMaXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weUVudHJpZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tX3BhdGg6IGVudHJ5LnBhdGhfbG93ZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b19wYXRoOiB0YXJnZXREaXIgKyAiLyIgKyBlbnRyeS5uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSBCYXRjaCBDb3B5DQogICAgICAgICAgICAgICAgaWYgKGNvcHlFbnRyaWVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tLzIvZmlsZXMvY29weV9iYXRjaF92MicsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGVudHJpZXM6IGNvcHlFbnRyaWVzIH0pDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDUuIFNURVAgQzogUHJvY2VzcyBFeHRlcm5hbCBPbmxpbmUgTGlua3MgKERvd25sb2FkL1VwbG9hZCkNCiAgICAgICAgICAgICAgICBjb25zdCBvbmxpbmVMaW5rcyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyB1cmw6IE1NUFRfVVJMX0VYUEVOU0VTLCBuYW1lOiAiRXhwZW5zZXMueGxzeCIgfSwNCiAgICAgICAgICAgICAgICAgICAgeyB1cmw6IEJBTktfU1RBVEVNRU5UX1VSTCwgbmFtZTogIkJhbmtTdGF0ZW1lbnQueGxzIiB9LA0KICAgICAgICAgICAgICAgICAgICB7IHVybDogTU1QVF9MSU5LX0FOT05ZLCBuYW1lOiAiQW5vbnlGaWxsLnR4dCIgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygb25saW5lTGlua3MpIHsNCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVSZXMgPSBhd2FpdCBmZXRjaChpdGVtLnVybCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgZmlsZVJlcy5ibG9iKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogdGFyZ2V0RGlyICsgIi8iICsgaXRlbS5uYW1lLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBibG9iDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKCJMaW5rIGJhY2t1cCBmYWlsZWQ6ICIgKyBpdGVtLm5hbWUpOyB9DQogICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICAvLyBBdCB0aGUgZW5kIG9mIHRoZSBmdW5jdGlvbjoNCiAgICAgICAgICAgICAgICBpZiAoIWlzQXV0bykgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiQmFja3VwIFN1Y2Nlc3NmdWwhIik7IC8vIE9ubHkgc2hvd3MgaWYgWU9VIGNsaWNrZWQgdGhlIGJ1dHRvbg0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNTVBUOiBCYWNrZ3JvdW5kIGJhY2t1cCBjb21wbGV0ZS4iKTsgLy8gU2lsZW50IGxvZyBmb3IgZGV2ZWxvcGVycw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vYWxlcnQoIkJhY2t1cCBTdWNjZXNzIVxuQWxsIGZvbGRlcnMgKGV4Y2VwdCBQYW5jaGFuZykgc2F2ZWQgdG86ICIgKyB0YXJnZXREaXIpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQmFja3VwIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gVGV4dCBEb3dubG9hZCBGdW5jdGlvbiBmb3IgdGhlIGFkbWluIHBhbmVsIGZ1bmN0aW9ucw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRUeHQodGV4dCwgZmlsZW5hbWUpIHsNCiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbdGV4dF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICBhLmRvd25sb2FkID0gZmlsZW5hbWU7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOw0KICAgICAgICAgICAgYS5jbGljaygpOw0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsNCiAgICAgICAgfQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDaXR5IE5hbWUgRXJyb3IgYW5kIFN1Z2dlc3Rpb25zIGZvciBDb3JyZWN0aW9ucyBkb3dubG9hZHMgNiB0ZXh0IGZpbGVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5DaXR5RXh0cmFjdGlvbihtb2RlID0gJ25vcm1hbCcpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU1QVF9EQl9SQVdfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdDb250ZW50ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gcmF3Q29udGVudC5zcGxpdCgvXHI/XG58XHIvKTsNCg0KICAgICAgICAgICAgICAgIGxldCBsaXN0MV9BbGwgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDNfTWFwID0ge307DQogICAgICAgICAgICAgICAgbGV0IGxpc3Q2X01hcCA9IHt9Ow0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVmQ2l0aWVzID0gWyJNdW1iYWkiLCAiRGVsaGkiLCAiQmVuZ2FsdXJ1IiwgIkJhbmdhbG9yZSIsICJIeWRlcmFiYWQiLCAiQWhtZWRhYmFkIiwgIkNoZW5uYWkiLCAiS29sa2F0YSIsICJTdXJhdCIsICJQdW5lIiwgIkphaXB1ciIsICJMdWNrbm93IiwgIkthbnB1ciIsICJOYWdwdXIiLCAiSW5kb3JlIiwgIlRoYW5lIiwgIkJob3BhbCIsICJWaXNha2hhcGF0bmFtIiwgIlBhdG5hIiwgIlZhZG9kYXJhIiwgIkdoYXppYWJhZCIsICJMdWRoaWFuYSIsICJBZ3JhIiwgIk5hc2hpayIsICJGYXJpZGFiYWQiLCAiTWVlcnV0IiwgIlJhamtvdCIsICJWYXJhbmFzaSIsICJTcmluYWdhciIsICJBdXJhbmdhYmFkIiwgIkFtcml0c2FyIiwgIlJhbmNoaSIsICJHd2FsaW9yIiwgIkphYmFscHVyIiwgIkNvaW1iYXRvcmUiLCAiVmlqYXlhd2FkYSIsICJNYWR1cmFpIiwgIlJhaXB1ciIsICJLb3RhIiwgIkNoYW5kaWdhcmgiLCAiR3V3YWhhdGkiLCAiU29sYXB1ciIsICJLYW5jaGlwdXJhbSIsICJNeXNvcmUiLCAiVGlydWNoaXJhcHBhbGxpIiwgIlRyaWNoeSIsICJTYWxlbSIsICJUaXJ1cHB1ciIsICJTcmlyYW5nYW0iLCAiU2VjdW5kZXJhYmFkIiwgIlRoaXJ1dmVkYWdhbSIsICJDYWxpZm9ybmlhIiwgIlRhbWlsbmFkdSIsICJCZXRobGVoZW0iLCAiRG9oYSJdOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlZkNvdW50cmllcyA9IFsiVUFFIiwgIlVLIiwgIlVTQSIsICJTaW5nYXBvcmUiLCAiTWFsYXlzaWEiLCAiQXVzdHJhbGlhIiwgIkNhbmFkYSIsICJHZXJtYW55IiwgIkZyYW5jZSIsICJKYXBhbiIsICJEdWJhaSIsICJRYXRhciIsICJLdXdhaXQiLCAiT21hbiIsICJCYWhyYWluIiwgIlNhdWRpIEFyYWJpYSIsICJVbml0ZWQgS2luZ2RvbSIsICJVbml0ZWQgQXJhYiBFbWlyYXRlcyIsICJVbml0ZWQgU3RhdGVzIiwgIlN3aXR6ZXJsYW5kIiwgIk5ldGhlcmxhbmRzIl07DQoNCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRTaW1pbGFyaXR5KHMxLCBzMikgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbG9uZ2VyID0gczEudG9Mb3dlckNhc2UoKSwgc2hvcnRlciA9IHMyLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzMS5sZW5ndGggPCBzMi5sZW5ndGgpIHsgbG9uZ2VyID0gczIudG9Mb3dlckNhc2UoKTsgc2hvcnRlciA9IHMxLnRvTG93ZXJDYXNlKCk7IH0NCiAgICAgICAgICAgICAgICAgICAgbGV0IGxvbmdlckxlbmd0aCA9IGxvbmdlci5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgIGlmIChsb25nZXJMZW5ndGggPT0gMCkgcmV0dXJuIDEuMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRpdERpc3RhbmNlID0gKHMxLCBzMikgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvc3RzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzMS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXN0VmFsdWUgPSBpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHMyLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIGNvc3RzW2pdID0gajsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaiA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdWYWx1ZSA9IGNvc3RzW2ogLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMS5jaGFyQXQoaSAtIDEpICE9IHMyLmNoYXJBdChqIC0gMSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBNYXRoLm1pbihNYXRoLm1pbihuZXdWYWx1ZSwgbGFzdFZhbHVlKSwgY29zdHNbal0pICsgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvc3RzW2ogLSAxXSA9IGxhc3RWYWx1ZTsgbGFzdFZhbHVlID0gbmV3VmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwKSBjb3N0c1tzMi5sZW5ndGhdID0gbGFzdFZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvc3RzW3MyLmxlbmd0aF07DQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAobG9uZ2VyTGVuZ3RoIC0gZWRpdERpc3RhbmNlKHNob3J0ZXIsIGxvbmdlcikpIC8gcGFyc2VGbG9hdChsb25nZXJMZW5ndGgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0TGluZSA9IGxpbmVzWzBdLmluY2x1ZGVzKCd8JykgJiYgbGluZXNbMF0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygicmVjZWlwdCIpID8gMSA6IDA7DQoNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRMaW5lOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghbGluZSAmJiBpID09PSBsaW5lcy5sZW5ndGggLSAxKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRzID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZHNbMTNdID09PSAiWUVTIikgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWlwdE5vID0gZmllbGRzWzBdIHx8ICJVTktOT1dOIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNpdHkgPSAiIjsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRzWzRdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSB0aWxkZXMgdG8gc3BhY2UgY29udmVyc2lvbg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuQWRkcmVzcyA9IGZpZWxkc1s0XS5yZXBsYWNlKC9+L2csICIgIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRzID0gY2xlYW5BZGRyZXNzLnNwbGl0KC9ccysvKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHcmFiIHRoZSByYXcgbGFzdCB3b3JkICh3aGljaCBtaWdodCBjb250YWluIGNvbG9ucykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5ID0gd29yZHNbd29yZHMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBsaXN0MV9BbGwucHVzaChgJHtjaXR5fSwgJHtyZWNlaXB0Tm99YCk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNpdHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkQ291bnRyeSA9IHJlZkNvdW50cmllcy5maW5kKGMgPT4gYy50b0xvd2VyQ2FzZSgpID09PSBjaXR5LnRvTG93ZXJDYXNlKCkgfHwgZ2V0U2ltaWxhcml0eShjaXR5LCBjKSA+IDAuODUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWRDb3VudHJ5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaXN0Nl9NYXBbbWF0Y2hlZENvdW50cnldKSBsaXN0Nl9NYXBbbWF0Y2hlZENvdW50cnldID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDZfTWFwW21hdGNoZWRDb3VudHJ5XS5wdXNoKHJlY2VpcHRObyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlzdDNfTWFwW2NpdHldKSBsaXN0M19NYXBbY2l0eV0gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0M19NYXBbY2l0eV0ucHVzaChyZWNlaXB0Tm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgbGlzdDJfVW5pcXVlID0gT2JqZWN0LmtleXMobGlzdDNfTWFwKS5zb3J0KCk7DQogICAgICAgICAgICAgICAgbGV0IGxpc3QzX1N0cmluZ3MgPSBsaXN0Ml9VbmlxdWUubWFwKGMgPT4gYCR7Y30sICR7bGlzdDNfTWFwW2NdLmpvaW4oJywgJyl9YCk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDRfQWxsU3VnZ2VzdGlvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDVfQWN0aW9uc09ubHkgPSBbXTsNCg0KICAgICAgICAgICAgICAgIGxpc3QyX1VuaXF1ZS5mb3JFYWNoKG9yaWdpbmFsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHN1Z2dlc3Rpb24gPSAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gTkVXIENPTE9OIExPR0lDIC0tLQ0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgIm9yaWdpbmFsIiBoYXMgYSBjb2xvbiwgd2Ugc3VnZ2VzdCByZXBsYWNpbmcgY29sb24gd2l0aCBjb21tYStzcGFjZQ0KICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwuaW5jbHVkZXMoJzonKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9IG9yaWdpbmFsLnNwbGl0KCc6JykubWFwKHBhcnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhcGl0YWxpemUgZWFjaCBwYXJ0IGZvciBhIGNsZWFuIHN1Z2dlc3Rpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc2xpY2UoMSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcsICcpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhbmRhcmQgU2ltaWxhcml0eSBMb2dpYyBmb3Igc2luZ2xlIHdvcmRzDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmVzdFNjb3JlID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJlZiBvZiByZWZDaXRpZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSBnZXRTaW1pbGFyaXR5KG9yaWdpbmFsLCByZWYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IDAuNzUgJiYgc2NvcmUgPiBiZXN0U2NvcmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFNjb3JlID0gc2NvcmU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSByZWY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Z2dlc3Rpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRSZWYgPSBbLi4ucmVmQ2l0aWVzXS5zb3J0KChhLCBiKSA9PiBiLmxlbmd0aCAtIGEubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCByZWYgb2Ygc29ydGVkUmVmKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoYCguKz8pKCR7cmVmfSkkYCwgJ2knKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3Qob3JpZ2luYWwpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSBvcmlnaW5hbC5tYXRjaChyZWdleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJlZml4ID0gbWF0Y2hbMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBtYXRjaFsxXS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16QS1aXS9nLCAiIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gYCR7cHJlZml4fSwgJHtyZWZ9YDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzSnVzdENhc2luZyA9IHN1Z2dlc3Rpb24udG9Mb3dlckNhc2UoKSA9PT0gb3JpZ2luYWwudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsT3V0ID0gKGlzSnVzdENhc2luZyB8fCAhc3VnZ2VzdGlvbiB8fCBvcmlnaW5hbC5sZW5ndGggPCA0KSA/ICIiIDogc3VnZ2VzdGlvbjsNCg0KICAgICAgICAgICAgICAgICAgICBsaXN0NF9BbGxTdWdnZXN0aW9ucy5wdXNoKG9yaWdpbmFsLnBhZEVuZCgzMCwgJyAnKSArICIgfCAiICsgZmluYWxPdXQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXQgIT09ICIiKSBsaXN0NV9BY3Rpb25zT25seS5wdXNoKG9yaWdpbmFsLnBhZEVuZCgzMCwgJyAnKSArICIgfCAiICsgZmluYWxPdXQpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IGxpc3Q2X1N0cmluZ3MgPSBPYmplY3Qua2V5cyhsaXN0Nl9NYXApLnNvcnQoKS5tYXAoY291bnRyeSA9PiBgJHtjb3VudHJ5fSwgJHtsaXN0Nl9NYXBbY291bnRyeV0uam9pbignLCAnKX1gKTsNCg0KICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxpc3Q1X0FjdGlvbnNPbmx5KSkgew0KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuR0xPQkFMX0NJVFlfQVVESVRfREFUQSA9IGxpc3Q1X0FjdGlvbnNPbmx5LmpvaW4oJ1xuJyk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgd2luZG93LkdMT0JBTF9DSVRZX0FVRElUX0RBVEEgPSBsaXN0NV9BY3Rpb25zT25seTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2F1ZGl0Jykgew0KICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gIk9SSUdJTkFMIE5BTUUiLnBhZEVuZCgzMCwgJyAnKSArICIgfCBTVUdHRVNURUQgQ09SUkVDVElPTlxuIiArICItIi5yZXBlYXQoNjApICsgIlxuIjsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChsaXN0MV9BbGwuam9pbignXG4nKSwgIjFfQ2l0aWVzX1JlY29yZHMudHh0Iik7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb3dubG9hZFR4dChsaXN0Ml9VbmlxdWUuam9pbignXG4nKSwgIjJfQ2l0aWVzX1VuaXF1ZV9MaXN0LnR4dCIpLCA2MDApOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZG93bmxvYWRUeHQobGlzdDNfU3RyaW5ncy5qb2luKCdcbicpLCAiM19DaXRpZXNfQ29ycmVjdGlvbl9NYXAudHh0IiksIDEyMDApOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZG93bmxvYWRUeHQoaGVhZGVyICsgbGlzdDRfQWxsU3VnZ2VzdGlvbnMuam9pbignXG4nKSwgIjRfQ2l0aWVzX0Z1bGxfQXVkaXQudHh0IiksIDE4MDApOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZG93bmxvYWRUeHQoaGVhZGVyICsgbGlzdDVfQWN0aW9uc09ubHkuam9pbignXG4nKSwgIjVfQ2l0aWVzX0FjdGlvbnNfT25seS50eHQiKSwgMjQwMCk7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGxpc3Q2X1N0cmluZ3Muam9pbignXG4nKSwgIjZfQ291bnRyaWVzX01hcC50eHQiKTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkF1ZGl0IENvbXBsZXRlIVxuXG5Db2xvbnMgZGV0ZWN0ZWQ6IFN1Z2dlc3Rpb25zIG5vdyBjb3JyZWN0bHkgdXNlIGNvbW1hcy4iKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICB9LCAzMDAwKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDb3VudHJ5IGNvcnJlY3Rpb24gaW4gdGhlIERCIGJhc2VkIG9uIGlucHV0IENJVFlfQ09SUkVDVElPTlNfVVJMIENpdHlDb3JyZWN0aW9ucy50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5DaXR5Q29ycmVjdGlvbkFwcGx5KGlzQXVkaXQgPSBmYWxzZSkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggeW91ciBhcHByb3ZlZCBjb3JyZWN0aW9ucyBmaWxlDQogICAgICAgICAgICAgICAgY29uc3QgY29yclJlcyA9IGF3YWl0IGZldGNoKENJVFlfQ09SUkVDVElPTlNfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyVGV4dCA9IGF3YWl0IGNvcnJSZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgLy8gUGFyc2UgaW50byBhIE1hcCB7ICJzb2NpZXR5OkF1bmRoOlB1bmUiOiAiU29jaWV0eSwgQXVuZGgsIFB1bmUiIH0NCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyZWN0aW9uTWFwID0ge307DQogICAgICAgICAgICAgICAgY29yclRleHQuc3BsaXQoL1xyP1xuLykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJ3wnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW2p1bmssIGNvcnJlY3RdID0gbGluZS5zcGxpdCgnfCcpLm1hcChzID0+IHMudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqdW5rKSBjb3JyZWN0aW9uTWFwW2p1bmtdID0gY29ycmVjdDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmV0Y2ggdGhlIGxpdmUgZGF0YWJhc2UgKHVzaW5nIHRoZSBBdXRoZW50aWNhdGVkIGxvZ2ljKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgbGV0IGRiTGluZXMgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gUHJvY2VzcyBldmVyeSBsaW5lIGluIHRoZSBEQg0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuZWRMaW5lcyA9IGRiTGluZXMubWFwKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUudHJpbSgpKSByZXR1cm4gbGluZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIGlzIGluZGV4IDQNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHJlc3MgPSBmaWVsZHNbNF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTcGxpdCBhZGRyZXNzIGJ5IHNwYWNlIG9yIHRpbGRlIHRvIGlzb2xhdGUgdGhlIGxhc3QgImNodW5rIg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRzID0gYWRkcmVzcy50cmltKCkuc3BsaXQoL1tcc35dKy8pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gVEhFIEZJWDogUHJlc2VydmUgY29sb25zIGR1cmluZyBsb29rdXAgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBubyBsb25nZXIgc3RyaXAgY29sb25zIGhlcmUsIHNvIG9yaWdpbmFsQ2l0eSA9ICJzb2NpZXR5OkF1bmRoOlB1bmUiDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3JpZ2luYWxDaXR5ID0gd29yZHNbd29yZHMubGVuZ3RoIC0gMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgcmF3IGNodW5rICh3aXRoIGNvbG9ucykgaXMgaW4gb3VyIGNvcnJlY3Rpb24gbGlzdA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcnJlY3Rpb25NYXAuaGFzT3duUHJvcGVydHkob3JpZ2luYWxDaXR5KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXBsYWNlbWVudCA9IGNvcnJlY3Rpb25NYXBbb3JpZ2luYWxDaXR5XTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhlbHBlciB0byBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGZvciBSZWdleA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzY2FwZWRKdW5rID0gb3JpZ2luYWxDaXR5LnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXVxcXS9nLCAnXFwkJicpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSAiIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHJpcCB0aGUganVuayB3b3JkIGZyb20gdGhlIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNF0gPSBhZGRyZXNzLnJlcGxhY2UobmV3IFJlZ0V4cChlc2NhcGVkSnVuayArICIkIiksICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dhcCB0aGUganVuayAod2l0aCBjb2xvbnMpIHdpdGggdGhlIGNvcnJlY3Qgc3RyaW5nICh3aXRoIGNvbW1hcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzRdID0gYWRkcmVzcy5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlZEp1bmsgKyAiJCIpLCByZXBsYWNlbWVudCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBJZiBjaGFuZ2VzIG9jY3VycmVkLCB1cGxvYWQgYmFjayB0byBEcm9wYm94DQogICAgICAgICAgICAgICAgaWYgKGNoYW5nZUNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb250ZW50ID0gY2xlYW5lZExpbmVzLmpvaW4oJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBuZXdDb250ZW50DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBhbGVydChgU3VjY2VzcyEgQXBwbGllZCAke2NoYW5nZUNvdW50fSBjb3JyZWN0aW9ucyB0byB0aGUgZGF0YWJhc2UuXG5cbkNvbG9ucyB3ZXJlIGNvcnJlY3RseSBpZGVudGlmaWVkIGFuZCByZXBsYWNlZC5gKTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIG1hdGNoaW5nIGVudHJpZXMgKGluY2x1ZGluZyB0aG9zZSB3aXRoIGNvbG9ucykgZm91bmQgdG8gY29ycmVjdC4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJDb3JyZWN0aW9uIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ291bnRyeSBjb3JyZWN0aW9uIGluIHRoZSBEQiBiYXNlZCBvbiBpbnB1dCBDb3VudHJ5Q29ycmVjdGlvbnMudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQ291bnRyeUZpZWxkQ29ycmVjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICBjb25zdCBDT1VOVFJZX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2ducjFvMmQ0cmNiZGJ6NzVmeGZrYi9Db3VudHJ5Q29ycmVjdGlvbnMudHh0P3Jsa2V5PTc0Zmx0cnh5bThnMGc4OHFlaWVqajFid3omZGw9MSI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclJlcyA9IGF3YWl0IGZldGNoKENPVU5UUllfQ09SUkVDVElPTlNfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyVGV4dCA9IGF3YWl0IGNvcnJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBjb3JyVGV4dC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobCA9PiBsLnRyaW0oKSAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgbGV0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGxldCBtb3ZlQ291bnQgPSAwOw0KICAgICAgICAgICAgICAgIGxldCBnbG9iYWxVcHBlckNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBTVEVQIDE6IFN1cmdpY2FsIE1vdmUvQ2xlYW4gLS0tDQogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25MaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPCAyKSByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldENvdW50cnkgPSBwYXJ0c1swXS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRJRHMgPSBwYXJ0cy5zbGljZSgxKTsNCg0KICAgICAgICAgICAgICAgICAgICB0YXJnZXRJRHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2hBbmNob3IgPSBpZC50b1VwcGVyQ2FzZSgpICsgInwiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYlJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGJSb3dzW2ldLnRyaW0oKS50b1VwcGVyQ2FzZSgpLnN0YXJ0c1dpdGgoc2VhcmNoQW5jaG9yKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gZGJSb3dzW2ldLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChmaWVsZHMubGVuZ3RoIDwgMjApIGZpZWxkcy5wdXNoKCIiKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWRkciA9IGZpZWxkc1s0XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5SZWdleCA9IG5ldyBSZWdFeHAodGFyZ2V0Q291bnRyeSwgJ2dpJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFuUmVnZXgudGVzdChhZGRyKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzRdID0gYWRkci5yZXBsYWNlKGNsZWFuUmVnZXgsICIiKS5yZXBsYWNlKC9bfiw6IF0rJC8sICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbMTldID0gdGFyZ2V0Q291bnRyeTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiUm93c1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gLS0tIFNURVAgMjogVGhlIERlZXAtQ2xlYW4gR2xvYmFsIFN3ZWVwIC0tLQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGJSb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZGJSb3dzW2ldLnRyaW0oKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBkYlJvd3NbaV0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgd2UgaGF2ZSAyMCBmaWVsZHMgZm9yIGV2ZXJ5IHJvdw0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZmllbGRzLmxlbmd0aCA8IDIwKSBmaWVsZHMucHVzaCgiIik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIEZJWDogU3RyaXAgQUxMIGhpZGRlbiBjaGFyYWN0ZXJzIHVzaW5nIHJlZ2V4IFxzKw0KICAgICAgICAgICAgICAgICAgICBsZXQgcmF3VmFsdWUgPSBmaWVsZHNbMTldIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5WYWx1ZSA9IHJhd1ZhbHVlLnJlcGxhY2UoL1tcclxuXHRdKy9nLCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgdXBwZXJWYWx1ZSA9IGNsZWFuVmFsdWUudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZmllbGQgaXNuJ3QgZW1wdHkgYW5kIGRvZXNuJ3QgbWF0Y2ggdGhlIGNsZWFuIFVwcGVyY2FzZSB2ZXJzaW9uDQogICAgICAgICAgICAgICAgICAgIGlmIChjbGVhblZhbHVlICE9PSAiIiAmJiBjbGVhblZhbHVlICE9PSB1cHBlclZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbMTldID0gdXBwZXJWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRiUm93c1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxVcHBlckNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gRklOQUwgU0FWRSAtLS0NCiAgICAgICAgICAgICAgICBpZiAobW92ZUNvdW50ID4gMCB8fCBnbG9iYWxVcHBlckNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGJSb3dzLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBEQVRBQkFTRSBTWU5DRURcblxuMS4gQWRkcmVzcyBDbGVhbnVwczogJHttb3ZlQ291bnR9XG4yLiBIaWRkZW4tQ2hhciAmIFVwcGVyY2FzZSBGaXhlczogJHtnbG9iYWxVcHBlckNvdW50fWApOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiU3VjY2VzczogRGF0YWJhc2UgaXMgMTAwJSBzdGFuZGFyZGl6ZWQuIE5vIG1peGVkLWNhc2Ugb3IgaGlkZGVuIGNoYXJhY3RlcnMgcmVtYWluLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ2hlY2tzIE5hbWVzIG9mIGFsbCBkb25vcnMgYW5kIHByZXBhcmVzIGxpc3QgYW5kIHN1Z2dlc3Rpb25zIGZvciBjb3JyZWN0aW9ucy4gRG93bmxvYWRzIDQgdGV4dCBmaWxlcy4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkRvbm9yTmFtZUNoZWNrKG1vZGUgPSAnbm9ybWFsJykgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihyb3cgPT4gcm93LnRyaW0oKSAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgbGV0IGFsbE5hbWVzID0gZGJSb3dzLm1hcChyb3cgPT4gKHJvdy5zcGxpdCgnfCcpWzJdIHx8ICIiKS50cmltKCkpOw0KICAgICAgICAgICAgICAgIGxldCB1bmlxdWVOYW1lcyA9IFsuLi5uZXcgU2V0KGFsbE5hbWVzKV0uc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdEluZGlhbk5hbWUgPSAobmFtZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWUpIHJldHVybiAiIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgnKCcpKSByZXR1cm4gbmFtZTsgLy8gU2tpcCBvcmdzDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJyYnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUuc3BsaXQoJyYnKS5tYXAobiA9PiBmb3JtYXRJbmRpYW5OYW1lKG4udHJpbSgpKSkuam9pbignICYgJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBsZXQgcGFydHMgPSBuYW1lLnNwbGl0KC9ccysvKS5maWx0ZXIocCA9PiBwLmxlbmd0aCA+IDApOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaW5pdGlhbHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG1haW5OYW1lcyA9IFtdOw0KDQogICAgICAgICAgICAgICAgICAgIHBhcnRzLmZvckVhY2gocGFydCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsczogMS0zIGNoYXJzLCBubyBkb3VibGUgdm93ZWxzDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5sZW5ndGggPD0gMyAmJiAhL1thZWlvdXldezIsfS9pLnRlc3QocGFydCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFscy5wdXNoKHBhcnQudG9VcHBlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5OYW1lcy5wdXNoKHBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwYXJ0LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLm1haW5OYW1lcywgLi4uaW5pdGlhbHNdLmpvaW4oJyAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIC8vIEFycmF5cyBmb3IgRmlsZSAzIGFuZCBGaWxlIDQNCiAgICAgICAgICAgICAgICBsZXQgYWxsQ29tcGFyaXNvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgY29ycmVjdGlvbnNPbmx5ID0gW107DQoNCiAgICAgICAgICAgICAgICB1bmlxdWVOYW1lcy5mb3JFYWNoKG9yaWdpbmFsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHN1Z2dlc3RlZCA9IGZvcm1hdEluZGlhbk5hbWUob3JpZ2luYWwpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGAke29yaWdpbmFsLnBhZEVuZCg0MCl9IHwgJHtzdWdnZXN0ZWR9YDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBGaWxlIDMgZ2V0cyBldmVyeXRoaW5nDQogICAgICAgICAgICAgICAgICAgIGFsbENvbXBhcmlzb25zLnB1c2gobGluZSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRmlsZSA0IGdldHMgb25seSB0aGUgb25lcyB0aGF0IGNoYW5nZWQNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsICE9PSBzdWdnZXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25zT25seS5wdXNoKGxpbmUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkb3dubG9hZFR4dCA9IChjb250ZW50LCBmaWxlTmFtZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKCk7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIC8vIFRIRSBCUklER0U6IENvbnZlcnQgYXJyYXkgdG8gc3RyaW5nIGFuZCBzdG9yZSBnbG9iYWxseQ0KICAgICAgICAgICAgICAgIHdpbmRvdy5HTE9CQUxfRE9OT1JfTkFNRV9EQVRBID0gQXJyYXkuaXNBcnJheShjb3JyZWN0aW9uc09ubHkpID8gY29ycmVjdGlvbnNPbmx5LmpvaW4oJ1xuJykgOiBjb3JyZWN0aW9uc09ubHk7DQoNCiAgICAgICAgICAgICAgICAvLyBUSEUgRVhJVDogQnlwYXNzIGRvd25sb2FkcyBpZiBpbiBhdWRpdCBtb2RlDQogICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdhdWRpdCcpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRvbm9yIE5hbWUgZGF0YSBjYXB0dXJlZC4gU2tpcHBpbmcgRmlsZSA0IGRvd25sb2FkLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gU2VxdWVuY2Ugb2YgNCBmaWxlcw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGFsbE5hbWVzLnNvcnQoKS5qb2luKCdcbicpLCAiMS4gQ0dfQWxsX0Rvbm9yX05hbWVzLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KHVuaXF1ZU5hbWVzLmpvaW4oJ1xuJyksICIyLiBDR19VbmlxdWVfRG9ub3JfTmFtZXMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoYWxsQ29tcGFyaXNvbnMuam9pbignXG4nKSwgIjMuIENHX05hbWVfRm9ybWF0X1N1Z2dlc3Rpb25zLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGNvcnJlY3Rpb25zT25seS5qb2luKCdcbicpLCAiNC4gQ0dfQ29ycmVjdGlvbnNfT25seS50eHQiKTsNCg0KICAgICAgICAgICAgICAgIGFsZXJ0KGBBdWRpdCBDb21wbGV0ZSFcblxuVW5pcXVlIE5hbWVzOiAke3VuaXF1ZU5hbWVzLmxlbmd0aH1cblJlY29yZHMgTmVlZGluZyBDb3JyZWN0aW9uOiAke2NvcnJlY3Rpb25zT25seS5sZW5ndGh9XG5cbkNoZWNrIEZpbGUgNCBmb3IgdGhlIGFjdGlvbiBpdGVtcy5gKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gTmFtZSBjb3JyZWN0aW9uIGluIHRoZSBEQiBiYXNlZCBvbiBpbnB1dCBOQU1FX0NPUlJFQ1RJT05TX1VSTCBOYW1lQ29ycmVjdGlvbnMudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuRG9ub3JOYW1lQ29ycmVjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHRoZSBDb3JyZWN0aW9uIE1hcA0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJSZXMgPSBhd2FpdCBmZXRjaChOQU1FX0NPUlJFQ1RJT05TX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclRleHQgPSBhd2FpdCBjb3JyUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyTGluZXMgPSBjb3JyVGV4dC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobGluZSA9PiBsaW5lLmluY2x1ZGVzKCd8JykpOw0KDQogICAgICAgICAgICAgICAgLy8gQnVpbGQgYSBsb29rdXAgb2JqZWN0OiB7ICJPcmlnaW5hbCBOYW1lIjogIlN1Z2dlc3RlZCBOYW1lIiB9DQogICAgICAgICAgICAgICAgY29uc3QgY29ycmVjdGlvbk1hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGNvcnJMaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBbb3JpZ2luYWwsIHN1Z2dlc3RlZF0gPSBsaW5lLnNwbGl0KCd8JykubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgJiYgc3VnZ2VzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uTWFwW29yaWdpbmFsXSA9IHN1Z2dlc3RlZDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmV0Y2ggdGhlIERhdGFiYXNlDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgbGV0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0aW9uQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gU3dlZXAgYW5kIFJlcGxhY2UNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiUm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWRiUm93c1tpXS50cmltKCkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBkYlJvd3NbaV0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnROYW1lID0gKGZpZWxkc1syXSB8fCAiIikudHJpbSgpOyAvLyBOYW1lIGlzIEZpZWxkIDINCg0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbmFtZSBleGlzdHMgaW4gb3VyIGNvcnJlY3Rpb24gbWFwIChQZXJmZWN0IE1hdGNoKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY29ycmVjdGlvbk1hcC5oYXNPd25Qcm9wZXJ0eShjdXJyZW50TmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1syXSA9IGNvcnJlY3Rpb25NYXBbY3VycmVudE5hbWVdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGJSb3dzW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25Db3VudCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gU2F2ZSBiYWNrIHRvIERyb3Bib3ggaWYgY2hhbmdlcyB3ZXJlIG1hZGUNCiAgICAgICAgICAgICAgICBpZiAoY29ycmVjdGlvbkNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGJSb3dzLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTVUNDRVNTOiBEYXRhYmFzZSB1cGRhdGVkLlxuXG5Ub3RhbCBEb25vciBOYW1lcyBjb3JyZWN0ZWQ6ICR7Y29ycmVjdGlvbkNvdW50fWApOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gbWF0Y2hpbmcgbmFtZXMgZm91bmQgZm9yIGNvcnJlY3Rpb24uIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTmFtZSBDb3JyZWN0aW9uIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ2hlY2tzIEFkZHJlc3Mgb2YgYWxsIGRvbm9ycyBhbmQgcHJlcGFyZXMgbGlzdCBhbmQgc3VnZ2VzdGlvbnMgZm9yIGNvcnJlY3Rpb25zLiBEb3dubG9hZHMgNCB0ZXh0IGZpbGVzLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQWRkcmVzc0NoZWNrKG1vZGUgPSAnbm9ybWFsJykgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihyb3cgPT4gcm93LnRyaW0oKSAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgbGV0IGFsbEFkZHJlc3NlcyA9IGRiUm93cy5tYXAocm93ID0+IChyb3cuc3BsaXQoJ3wnKVs0XSB8fCAiIikudHJpbSgpKTsNCiAgICAgICAgICAgICAgICBsZXQgdW5pcXVlQWRkcmVzc2VzID0gWy4uLm5ldyBTZXQoYWxsQWRkcmVzc2VzKV0uc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdEFkZHJlc3MgPSAoYWRkcikgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWFkZHIpIHJldHVybiAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAxLiBGbGF0dGVuIGxpbmUgYnJlYWtzIHdpdGggfg0KICAgICAgICAgICAgICAgICAgICBsZXQgZmxhdHRlbmVkID0gYWRkci5yZXBsYWNlKC9bXHJcbl0rL2csICcgfiAnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBTcGxpdCBpbnRvIHdvcmRzDQogICAgICAgICAgICAgICAgICAgIGxldCB3b3JkcyA9IGZsYXR0ZW5lZC5zcGxpdCgvXHMrLyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRXb3JkcyA9IHdvcmRzLm1hcCh3b3JkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd29yZCkgcmV0dXJuICIiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTUEVDSUFMIFRXRUFLOiBXb3JkcyBzdGFydGluZyB3aXRoICQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkLnN0YXJ0c1dpdGgoJyQnKSAmJiB3b3JkLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFpblBhcnQgPSB3b3JkLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJCcgKyBtYWluUGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1haW5QYXJ0LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJ1bGUgMTogQWx3YXlzIFVQUEVSQ0FTRSBmb3IgMyBjaGFycyBvciBsZXNzDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZC5sZW5ndGggPD0gMykgcmV0dXJuIHdvcmQudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUnVsZSAyOiBTZW50ZW5jZSBDYXNlIGZvciBldmVyeXRoaW5nIGVsc2UgKGluY2x1ZGluZyBBcGFydG1lbnQ6MjcpDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFdvcmRzLmpvaW4oJyAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGxldCBhbGxDb21wYXJpc29ucyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0aW9uc09ubHkgPSBbXTsNCg0KICAgICAgICAgICAgICAgIHVuaXF1ZUFkZHJlc3Nlcy5mb3JFYWNoKG9yaWdpbmFsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHN1Z2dlc3RlZCA9IGZvcm1hdEFkZHJlc3Mob3JpZ2luYWwpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheUxpbmUgPSBgJHtvcmlnaW5hbC5wYWRFbmQoMTIwKX0gfCAke3N1Z2dlc3RlZH1gOw0KDQogICAgICAgICAgICAgICAgICAgIGFsbENvbXBhcmlzb25zLnB1c2goZGlzcGxheUxpbmUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgIT09IHN1Z2dlc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbnNPbmx5LnB1c2goZGlzcGxheUxpbmUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkb3dubG9hZFR4dCA9IChjb250ZW50LCBmaWxlTmFtZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKCk7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIC8vIFRIRSBCUklER0U6IFVzZSB0aGUgY29ycmVjdCB2YXJpYWJsZSBuYW1lIHdlIGp1c3QgaWRlbnRpZmllZA0KICAgICAgICAgICAgICAgIHdpbmRvdy5HTE9CQUxfQUREUkVTU19DT1JSRUNUSU9OX0RBVEEgPSBBcnJheS5pc0FycmF5KGNvcnJlY3Rpb25zT25seSkgPyBjb3JyZWN0aW9uc09ubHkuam9pbignXG4nKSA6IGNvcnJlY3Rpb25zT25seTsNCg0KICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnYXVkaXQnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJBZGRyZXNzIGRhdGEgY2FwdHVyZWQgc3VjY2Vzc2Z1bGx5IHZpYSBjb3JyZWN0aW9uc09ubHkuIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgIC8vIEZpbGUgU2VxdWVuY2UNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChhbGxBZGRyZXNzZXMuc29ydCgpLmpvaW4oJ1xuJyksICIxLiBDR19BbGxfQWRkcmVzc2VzLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KHVuaXF1ZUFkZHJlc3Nlcy5qb2luKCdcbicpLCAiMi4gQ0dfVW5pcXVlX0FkZHJlc3Nlcy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChhbGxDb21wYXJpc29ucy5qb2luKCdcbicpLCAiMy4gQ0dfQWRkcmVzc19Gb3JtYXRfU3VnZ2VzdGlvbnMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoY29ycmVjdGlvbnNPbmx5LmpvaW4oJ1xuJyksICI0LiBDR19BZGRyZXNzX0NvcnJlY3Rpb25zX09ubHkudHh0Iik7DQoNCiAgICAgICAgICAgICAgICBhbGVydChgQXVkaXQgQ29tcGxldGUhXG5cblJldmlldyBGaWxlIDQgZm9yIHRoZSAke2NvcnJlY3Rpb25zT25seS5sZW5ndGh9IGl0ZW1zIG5lZWRpbmcgY2hhbmdlcy5gKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQUREUkVTUyBjb3JyZWN0aW9uIGluIHRoZSBEQiBiYXNlZCBvbiBpbnB1dCBBZGRyZXNzQ29ycmVjdGlvbnMudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gR2xvYmFsIENvbnN0YW50IGZvciBBZGRyZXNzIENvcnJlY3Rpb25zDQogICAgICAgIGNvbnN0IEFERFJFU1NfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZGNsN3Y2MHFidWh1dWdzMWY3bTdwL0FkZHJlc3NDb3JyZWN0aW9ucy50eHQ/cmxrZXk9amJ3dzRsZmdkOTByamt0MWtzc2wxNmw4ZCZkbD0xIjsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5BZGRyZXNzQ29ycmVjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHRoZSBDb3JyZWN0aW9uIE1hcCBmcm9tIERyb3Bib3gNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyUmVzID0gYXdhaXQgZmV0Y2goQUREUkVTU19DT1JSRUNUSU9OU19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJUZXh0ID0gYXdhaXQgY29yclJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yckxpbmVzID0gY29yclRleHQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKGxpbmUgPT4gbGluZS5pbmNsdWRlcygnfCcpKTsNCg0KICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGxvb2t1cDogeyAiT3JpZ2luYWwgQWRkcmVzcyI6ICJTdWdnZXN0ZWQgQWRkcmVzcyIgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NNYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBjb3JyTGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBwYXJ0c1swXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWdnZXN0ZWQgPSBwYXJ0c1sxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgJiYgc3VnZ2VzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc01hcFtvcmlnaW5hbF0gPSBzdWdnZXN0ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZldGNoIHRoZSBNYWluIERhdGFiYXNlDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgbGV0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBTd2VlcCBEYXRhYmFzZSBhbmQgQXBwbHkgQ29ycmVjdGlvbnMNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiUm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWRiUm93c1tpXS50cmltKCkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBkYlJvd3NbaV0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRBZGRyZXNzID0gKGZpZWxkc1s0XSB8fCAiIikudHJpbSgpOyAvLyBBZGRyZXNzIGlzIEZpZWxkIDQNCg0KICAgICAgICAgICAgICAgICAgICAvLyBQZXJmZWN0IE1hdGNoIENoZWNrDQogICAgICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzTWFwLmhhc093blByb3BlcnR5KGN1cnJlbnRBZGRyZXNzKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzRdID0gYWRkcmVzc01hcFtjdXJyZW50QWRkcmVzc107DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJvd3NbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIFNhdmUgdG8gRHJvcGJveCBpZiB1cGRhdGVzIHdlcmUgZm91bmQNCiAgICAgICAgICAgICAgICBpZiAodXBkYXRlQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJvd3Muam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFNVQ0NFU1M6IERhdGFiYXNlIHVwZGF0ZWQuXG5cblRvdGFsIEFkZHJlc3NlcyBjb3JyZWN0ZWQ6ICR7dXBkYXRlQ291bnR9YCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBtYXRjaGluZyBhZGRyZXNzZXMgZm91bmQgdG8gY29ycmVjdC4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJBZGRyZXNzIENvcnJlY3Rpb24gRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBQQU5FTCBTSE9XIEFORCBISURFIHRvZ2dsZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQWRtaW5UYWJsZSgpIHsNCiAgICAgICAgICAgIGluaXRDb3VudHJ5RHJvcGRvd24oKTsNCiAgICAgICAgICAgIGNvbnN0IHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkbWluLXBhbmVsLWNvbnRhaW5lcicpOw0KICAgICAgICAgICAgY29uc3QgaXNPcGVuaW5nID0gKHBhbmVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyk7DQogICAgICAgICAgICBwYW5lbC5zdHlsZS5kaXNwbGF5ID0gaXNPcGVuaW5nID8gJ2Jsb2NrJyA6ICdub25lJzsNCg0KICAgICAgICAgICAgaWYgKGlzT3BlbmluZykgew0KICAgICAgICAgICAgICAgIGxvYWRBZG1pblNuYXBzKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDb3VudHJ5IFNlbGVjdGlvbiBmb3IgTGFiZWwgQ3JlYXRpb24NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIDEuIFBvcHVsYXRlIERyb3Bkb3duIGltbWVkaWF0ZWx5DQogICAgICAgIGZ1bmN0aW9uIGluaXRDb3VudHJ5RHJvcGRvd24oKSB7DQogICAgICAgICAgICBjb25zdCBjb3VudHJpZXMgPSBbIklORElBIiwgIlVTQSIsICJVQUUiLCAiVUsiLCAiU0lOR0FQT1JFIiwgIkFVU1RSQUxJQSIsICJDQU5BREEiLCAiVU5JVEVEIEFSQUIgRU1JUkFURVMiLCAiTUFMQVlTSUEiLCAiT01BTiIsICJLVVdBSVQiXTsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1jb3VudHJ5LWZpbHRlcicpOw0KICAgICAgICAgICAgc2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPkFsbCBDb3VudHJpZXM8L29wdGlvbj4nOw0KICAgICAgICAgICAgY291bnRyaWVzLmZvckVhY2goYyA9PiB7DQogICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGM7DQogICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gYzsNCiAgICAgICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gUERGIEdlbmVyYXRpb24gZm9yIEFsbCBVbmlxdWUgRG9ub3JzIExhYmVscy4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIDIuIFRoZSBQREYgR2VuZXJhdGlvbiBMb2dpYw0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUFkZHJlc3NMYWJlbHMoKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb3VudHJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWNvdW50cnktZmlsdGVyJykudmFsdWU7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgLy8gUmV2ZXJzZSB0byBnZXQgTEFURVNUIHJlY29yZHMgZmlyc3QNCiAgICAgICAgICAgICAgICBsZXQgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihyb3cgPT4gcm93LnRyaW0oKSAhPT0gIiIpLnJldmVyc2UoKTsNCg0KICAgICAgICAgICAgICAgIGxldCBsYWJlbHNUb0NyZWF0ZSA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBwcm9jZXNzZWRQaG9uZXMgPSBuZXcgU2V0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBMSU1JVCBSRU1PVkVEOiBQcm9jZXNzaW5nIHRoZSBlbnRpcmUgZGF0YWJhc2UNCiAgICAgICAgICAgICAgICBmb3IgKGxldCByb3cgb2YgZGJSb3dzKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBmID0gcm93LnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBwaG9uZSA9IChmWzNdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBuYW1lID0gKGZbMl0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHIgPSAoZls0XSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaXNDYW5jZWxsZWQgPSAoZlsxM10gfHwgIiIpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY291bnRyeSA9IChmWzE5XSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ2FuY2VsbGVkIHx8ICFuYW1lIHx8ICFhZGRyKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ291bnRyeSAhPT0gIkFMTCIgJiYgY291bnRyeSAhPT0gc2VsZWN0ZWRDb3VudHJ5KSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBob25lICYmIHByb2Nlc3NlZFBob25lcy5oYXMocGhvbmUpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsYWJlbHNUb0NyZWF0ZS5wdXNoKGYpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGhvbmUpIHByb2Nlc3NlZFBob25lcy5hZGQocGhvbmUpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChsYWJlbHNUb0NyZWF0ZS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIHJlY29yZHMgZm91bmQgZm9yIHRoZSBzZWxlY3Rpb24uIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFdpZHRoID0gMTA1Ow0KICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsSGVpZ2h0ID0gNzQuMjU7DQoNCiAgICAgICAgICAgICAgICBsYWJlbHNUb0NyZWF0ZS5mb3JFYWNoKChmLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAwICYmIGluZGV4ICUgOCA9PT0gMCkgZG9jLmFkZFBhZ2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSBpbmRleCAlIDg7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSAocG9zICUgMikgKiBsYWJlbFdpZHRoOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihwb3MgLyAyKSAqIGxhYmVsSGVpZ2h0Ow0KDQogICAgICAgICAgICAgICAgICAgIC8vIEN1dHRpbmcgZ3VpZGVzDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXREcmF3Q29sb3IoMjAwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnJlY3QoeCwgeSwgbGFiZWxXaWR0aCwgbGFiZWxIZWlnaHQpOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJZID0geSArIDg7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZFggPSB4ICsgMTA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0UGFkWCA9IHggKyBsYWJlbFdpZHRoIC0gMTA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gbGFiZWxXaWR0aCAtIDIwOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDEuIFJFRkVSRU5DRSAoUmlnaHQgQWxpZ25lZCkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSg4KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFJlZiA6ICR7ZlswXSB8fCAiIn1gLCByaWdodFBhZFgsIGN1clksIHsgYWxpZ246ICJyaWdodCIgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSA2Ow0KDQogICAgICAgICAgICAgICAgICAgIC8vIDIuIE5BTUUgKDE0cHQgQm9sZCwgV3JhcHBlZCkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxNCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBmdWxsTmFtZSA9IGBTbXQuU2hyaS4gJHtmWzJdfWA7DQogICAgICAgICAgICAgICAgICAgIGxldCB3cmFwcGVkTmFtZSA9IGRvYy5zcGxpdFRleHRUb1NpemUoZnVsbE5hbWUsIGF2YWlsYWJsZVdpZHRoKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQod3JhcHBlZE5hbWUsIHBhZFgsIGN1clkpOw0KDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gKHdyYXBwZWROYW1lLmxlbmd0aCAqIDYpICsgMjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAzLiBBRERSRVNTICYgQ0lUWSBFWFRSQUNUSU9ODQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkZ1bGxBZGRyID0gKGZbNF0gfHwgIiIpLnJlcGxhY2UoL34vZywgJyAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRyV29yZHMgPSBjbGVhbkZ1bGxBZGRyLnNwbGl0KC9ccysvKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNpdHkgPSBhZGRyV29yZHMubGVuZ3RoID4gMCA/IGFkZHJXb3Jkcy5wb3AoKSA6ICIiOw0KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkckJvZHkgPSBhZGRyV29yZHMuam9pbigiICIpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDQuIEFERFJFU1MgQk9EWSAoMTFwdCBOb3JtYWwsIFdyYXBwZWQpDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7DQogICAgICAgICAgICAgICAgICAgIGxldCB3cmFwcGVkQWRkciA9IGRvYy5zcGxpdFRleHRUb1NpemUoYWRkckJvZHksIGF2YWlsYWJsZVdpZHRoKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQod3JhcHBlZEFkZHIsIHBhZFgsIGN1clkpOw0KDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gKHdyYXBwZWRBZGRyLmxlbmd0aCAqIDUpICsgMTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA1LiBDSVRZIC0gUElOQ09ERSAoMTFwdCBCb2xkKQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYCR7Y2l0eS50b1VwcGVyQ2FzZSgpfSAtICR7KGZbMTVdIHx8ICIiKS50cmltKCl9YCwgcGFkWCwgY3VyWSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNi4gQ09VTlRSWSAoMTFwdCBOb3JtYWwpDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gNjsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoKGZbMTldIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKSwgcGFkWCwgY3VyWSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNy4gUEhPTkUgKDExcHQgQm9sZCkNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSA5Ow0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFBob25lIDogJHsoZlszXSB8fCAiIikudHJpbSgpfWAsIHBhZFgsIGN1clkpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gRFlOQU1JQyBGSUxFTkFNRQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50cnlOYW1lID0gc2VsZWN0ZWRDb3VudHJ5ID09PSAiQUxMIiA/ICJBbGwgQ291bnRyaWVzIiA6IHNlbGVjdGVkQ291bnRyeTsNCiAgICAgICAgICAgICAgICBkb2Muc2F2ZShgTU1QVCBEb25vciBBZGRyZXNzIExhYmVscy0gJHtjb3VudHJ5TmFtZX0ucGRmYCk7DQoNCiAgICAgICAgICAgICAgICBhbGVydChgU3VjY2VzcyEgR2VuZXJhdGVkICR7bGFiZWxzVG9DcmVhdGUubGVuZ3RofSB1bmlxdWUgbGFiZWxzIGZvciAke2NvdW50cnlOYW1lfS5gKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gRlVMTCBGbGVnZWQgQXVkaXQgb2YgVGhlIERhdGFiYXNlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5EYXRhYmFzZUF1ZGl0UERGKCkgew0KICAgICAgICAgICAgbGV0IHN0YXRzID0gew0KICAgICAgICAgICAgICAgIHRvdGFsOiAwLCBjYW5jZWxsZWQ6IDAsIG5vTmFtZTogMCwgbm9QaG9uZTogMCwgbm9BZGRyOiAwLA0KICAgICAgICAgICAgICAgIG5vUGluOiAwLCBub0VtYWlsOiAwLCBub1BhbjogMCwgbm9SZWY6IDAsIG5vQ29tbTogMCwNCiAgICAgICAgICAgICAgICBub0FtdDogMCwgbm9QcmFzYWRhbTogMCwgbm9QcmludDogMCwgcGVuZGluZ0NvbnNlbnQ6IDANCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbnN0IGNsZWFuU3RyID0gKHN0cikgPT4gew0KICAgICAgICAgICAgICAgIGlmICghc3RyKSByZXR1cm4gIiI7DQogICAgICAgICAgICAgICAgcmV0dXJuIHN0ci50b1N0cmluZygpLm5vcm1hbGl6ZSgiTkZEIikucmVwbGFjZSgvW15ceDIwLVx4N0VdL2csICIiKTsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIC8vIDEuIERBVEEgUFJPQ0VTU0lORyAoTG9ja2VkIENvcmUgTG9naWMgLSBJZ25vcmVzIENBTkNFTExFRCkNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChmWzEzXSA9PT0gIllFUyIpIHN0YXRzLmNhbmNlbGxlZCsrOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHN0YXRzLnRvdGFsKys7DQogICAgICAgICAgICAgICAgY29uc3QgYW10ID0gcGFyc2VGbG9hdChmWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSAoZlsxMl0gfHwgIiIpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgcGluID0gKGZbMTVdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3UGhvbmUgPSAoZlszXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUGhvbmUgPSByYXdQaG9uZS5yZXBsYWNlKC9cRC9nLCAnJyk7DQogICAgICAgICAgICAgICAgY29uc3QgaXNQbGFjZWhvbGRlciA9IGNsZWFuUGhvbmUuc3RhcnRzV2l0aCgiODg4ODgiKSB8fCBjbGVhblBob25lLnN0YXJ0c1dpdGgoIjk5OTk5Iik7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZbMl0gfHwgZlsyXS50cmltKCkgPT09ICIiKSBzdGF0cy5ub05hbWUrKzsNCiAgICAgICAgICAgICAgICBpZiAoIXJhd1Bob25lIHx8IGlzUGxhY2Vob2xkZXIpIHN0YXRzLm5vUGhvbmUrKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbNF0gfHwgZls0XS50cmltKCkgPT09ICIiIHx8IGZbNF0gPT09ICJ+Iikgc3RhdHMubm9BZGRyKys7DQogICAgICAgICAgICAgICAgaWYgKCFwaW4gfHwgcGluID09PSAiMDAwMDAwIiB8fCBwaW4ubGVuZ3RoICE9PSA2IHx8ICEvXlsxLTldWzAtOV17NX0kLy50ZXN0KHBpbikpIHN0YXRzLm5vUGluKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzVdIHx8IGZbNV0udHJpbSgpID09PSAiIikgc3RhdHMubm9FbWFpbCsrOw0KICAgICAgICAgICAgICAgIGlmICghZls2XSB8fCBmWzZdLnRyaW0oKSA9PT0gIiIpIHN0YXRzLm5vUGFuKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzEwXSB8fCBmWzEwXS50cmltKCkgPT09ICIiKSBzdGF0cy5ub1JlZisrOw0KICAgICAgICAgICAgICAgIGlmICghZlsxNF0gfHwgZlsxNF0udHJpbSgpID09PSAiIiB8fCBmWzE0XSA9PT0gIn4iKSBzdGF0cy5ub0NvbW0rKzsNCiAgICAgICAgICAgICAgICBpZiAoYW10IDwgMSkgc3RhdHMubm9BbXQrKzsNCiAgICAgICAgICAgICAgICBpZiAoZlsxN10gPT09ICJOTyIpIHN0YXRzLm5vUHJhc2FkYW0rKzsNCiAgICAgICAgICAgICAgICBpZiAoZlsxNl0gPT09ICJOTyIpIHN0YXRzLm5vUHJpbnQrKzsNCiAgICAgICAgICAgICAgICBpZiAoYW10ID49IDEwMDAwICYmIHRvd2FyZHMuaW5jbHVkZXMoIkNPUlBVUyIpICYmIGZbMThdID09PSAiTk8iKSBzdGF0cy5wZW5kaW5nQ29uc2VudCsrOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IHsganNQREYgfSA9IHdpbmRvdy5qc3BkZjsNCiAgICAgICAgICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERih7DQogICAgICAgICAgICAgICAgcHV0T25seVVzZWRGb250czogdHJ1ZSwNCiAgICAgICAgICAgICAgICBjb21wcmVzczogdHJ1ZQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIElmIHRoZSBlbmNyeXB0aW9uIHBsdWdpbiBpcyBsb2FkZWQsIHRoaXMgd2lsbCBub3cgd29yaw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2Muc2V0RW5jcnlwdGlvbiA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIGRvYy5zZXRFbmNyeXB0aW9uKHsNCiAgICAgICAgICAgICAgICAgICAgdXNlclBhc3N3b3JkOiAiTU1QVCIsDQogICAgICAgICAgICAgICAgICAgIG93bmVyUGFzc3dvcmQ6ICJNTVBUIiwNCiAgICAgICAgICAgICAgICAgICAgdXNlclBlcm1pc3Npb25zOiBbInByaW50IiwgIm1vZGlmeSIsICJjb3B5IiwgImFubm90LWZvcm1zIl0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRW5jcnlwdGlvbiBwbHVnaW4gbWlzc2luZyBmcm9tIHRoZSBsb2FkZWQganNQREYgbGlicmFyeS4iKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdG90YWxQYWdlc0V4cCA9ICJ7dG90YWxfcGFnZXNfY291bnRfc3RyaW5nfSI7DQogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IG5vdy50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUlOJywgeyBkYXk6ICcyLWRpZ2l0JywgbW9udGg6ICdzaG9ydCcsIHllYXI6ICdudW1lcmljJyB9KTsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVTdGFtcCA9IG5vdy50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKS5zbGljZSgwLCAxNik7DQogICAgICAgICAgICBsZXQgcE1hcCA9IHsgc3VtbWFyeTogMCwgcGFuOiAwLCBjb3VudHJ5OiAwLCBwaG9uZTogMCwgcGluY29kZTogMCwgZG9sbGFyOiAwLCBjaXR5OiAwLCBkb25vck5hbWVzOiAwLCBhZGRyQ29ycjogMCB9Ow0KDQogICAgICAgICAgICBjb25zdCBkcmF3QnJhbmRpbmcgPSAocGFnZVRpdGxlLCBpc0luZGV4ID0gZmFsc2UpID0+IHsNCiAgICAgICAgICAgICAgICAvLyBTTEFURSBCTFVFIEhFQURFUg0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoNzAsIDEzMCwgMTgwKTsgZG9jLnJlY3QoMCwgMCwgMjEwLCA0MCwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAyNTUpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnNldEZvbnRTaXplKDIyKTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihwYWdlVGl0bGUpLCAxMDUsIDE4LCB7IGFsaWduOiAiY2VudGVyIiB9KTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTEpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKGBNTVBUIEludGVybmFsIEF1ZGl0IHwgR2VuZXJhdGVkOiAke2RhdGVTdHJ9ICR7bm93LnRvTG9jYWxlVGltZVN0cmluZygpfWApLCAxMDUsIDI4LCB7IGFsaWduOiAiY2VudGVyIiB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIENPT0wgR1JFWSBGT09URVINCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDE0OSwgMTY1LCAxNjYpOyBkb2MucmVjdCgwLCAyODIsIDIxMCwgMTUsICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUsIDI1NSwgMjU1KTsgZG9jLnNldEZvbnRTaXplKDguNSk7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoIklOVEVSTkFMIFNFQ1VSSVRZIERPQ1VNRU5UIC0gTU1QVCBBRE1JTklTVFJBVElPTiIsIDE1LCAyOTIpOw0KDQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUsIDI1NSwgMCk7IC8vIFllbGxvdyBmb3IgdmlzaWJpbGl0eQ0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KGRvYy5pbnRlcm5hbC5nZXRDdXJyZW50UGFnZUluZm8oKS5wYWdlTnVtYmVyICsgIiAvICIgKyB0b3RhbFBhZ2VzRXhwLCAyMDAsIDI5MiwgeyBhbGlnbjogInJpZ2h0IiB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghaXNJbmRleCkgew0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAyNTUpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCgiQmFjayB0byBJbmRleCIsIDEzMCwgMjkyLCB7IGFsaWduOiAiY2VudGVyIiB9KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLmxpbmsoMTIwLCAyODUsIDIwLCAxMCwgeyBwYWdlTnVtYmVyOiAxIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIC8vIFBBR0UgMTogSU5ERVgNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiQVVESVQgTkFWSUdBVElPTiBJTkRFWCIsIHRydWUpOw0KDQogICAgICAgICAgICAvLyBQQUdFIDI6IFNVTU1BUlkNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuc3VtbWFyeSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkVYRUNVVElWRSBBVURJVCBTVU1NQVJZIik7DQogICAgICAgICAgICBsZXQgc3kgPSA1NTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGFSb3dzID0gWw0KICAgICAgICAgICAgICAgIFsiVG90YWwgQWN0aXZlIFJlY2VpcHRzIChFeGNsLiBDYW5jZWxsZWQpIiwgc3RhdHMudG90YWwsICIjMmMzZTUwIl0sDQogICAgICAgICAgICAgICAgWyJUb3RhbCBDYW5jZWxsZWQgKElnbm9yZWQpIiwgc3RhdHMuY2FuY2VsbGVkLCAiI2U3NGMzYyJdLA0KICAgICAgICAgICAgICAgIFsiTm8gTmFtZSBGb3VuZCIsIHN0YXRzLm5vTmFtZSwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIFRlbGVwaG9uZSAvIFBsYWNlaG9sZGVyIiwgc3RhdHMubm9QaG9uZSwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIEFkZHJlc3MgLyBFbXB0eSIsIHN0YXRzLm5vQWRkciwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIkludmFsaWQgUGluY29kZSIsIHN0YXRzLm5vUGluLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gRW1haWwgSUQiLCBzdGF0cy5ub0VtYWlsLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gUEFOIE51bWJlciIsIHN0YXRzLm5vUGFuLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gUmVmZXJlbmNlIERldGFpbHMiLCBzdGF0cy5ub1JlZiwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIENvbW1lbnRzIFByb3ZpZGVkIiwgc3RhdHMubm9Db21tLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gQW1vdW50IEZvdW5kIiwgc3RhdHMubm9BbXQsICIjYzAzOTJiIl0sDQogICAgICAgICAgICAgICAgWyJQcmFzYWRhbSBTdGF0dXMgKE5PKSIsIHN0YXRzLm5vUHJhc2FkYW0sICIjZDM1NDAwIl0sDQogICAgICAgICAgICAgICAgWyJOb3QgUHJpbnRlZCAoTk8pIiwgc3RhdHMubm9QcmludCwgIiNkMzU0MDAiXSwNCiAgICAgICAgICAgICAgICBbIlBlbmRpbmcgQ29uc2VudCBMZXR0ZXJzKiIsIHN0YXRzLnBlbmRpbmdDb25zZW50LCAiI2ZmMDAwMCJdDQogICAgICAgICAgICBdOw0KICAgICAgICAgICAgZGF0YVJvd3MuZm9yRWFjaCgociwgaSkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChpICUgMiA9PT0gMCkgeyBkb2Muc2V0RmlsbENvbG9yKDI0NSk7IGRvYy5yZWN0KDE1LCBzeSAtIDgsIDE4MCwgMTIsICdGJyk7IH0NCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKHJbMl0pOyBkb2Muc2V0Rm9udFNpemUoMTEpOyBkb2MudGV4dChjbGVhblN0cihyWzBdKSwgMjUsIHN5KTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChyWzFdLnRvU3RyaW5nKCksIDE4NSwgc3ksIHsgYWxpZ246ICJyaWdodCIgfSk7IHN5ICs9IDEyOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgMzogUEFODQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLnBhbiA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkRlZmVjdGl2ZSBQQU4gTnVtYmVycyIpOw0KICAgICAgICAgICAgbGV0IHBueSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDE1NSwgODksIDE4Mik7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkludmFsaWQgUEFOIFZhbHVlIiwgMTAwLCA1OSk7DQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOyBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBwYW4gPSAoZls2XSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGlmIChwYW4gJiYgIS9eW0EtWl17NX1bMC05XXs0fVtBLVpdezF9JC8udGVzdChwYW4pKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwbnkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJQQU4gKENvbnQuKSIpOyBwbnkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIHBueSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KHBhbiwgMTAwLCBwbnkpOyBwbnkgKz0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSA0OiBDT1VOVFJJRVMgKFVzaW5nIFJldmVyc2UgU2VhcmNoKQ0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5jb3VudHJ5ID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiQ291bnRyaWVzIGluIEFkZHJlc3MgRmllbGQiKTsNCiAgICAgICAgICAgIGxldCBjeVkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigzOSwgMTc0LCA5Nik7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkFkZHJlc3MgRW50cnkiLCA4MCwgNTkpOw0KDQogICAgICAgICAgICBjb25zdCBjb3VudHJpZXMgPSBbIlVTQSIsICJVSyIsICJVTklURUQgS0lOR0RPTSIsICJVQUUiLCAiQ0FOQURBIiwgIkFVU1RSQUxJQSIsICJTSU5HQVBPUkUiXTsNCg0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAvLyBGaWVsZCAxMyBpcyBDYW5jZWxsZWQuIEphbiAyNiBpbnN0cnVjdGlvbjogSWdub3JlIENBTkNFTExFRCByZWNlaXB0cy4NCiAgICAgICAgICAgICAgICBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGFkciA9IChmWzRdIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBpZiAoIWFkcikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgLy8gUkVWRVJTRSBTRUFSQ0ggTE9HSUM6DQogICAgICAgICAgICAgICAgLy8gU3BsaXQgYnkgY29tbW9uIGRlbGltaXRlcnMgYW5kIGxvb2sgYXQgdGhlIHZlcnkgbGFzdCBzZWdtZW50DQogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBhZHIuc3BsaXQoL1tccyxdKy8pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07IC8vIEdldCB0aGUgbGFzdCB3b3JkDQogICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kTGFzdFNlZ21lbnQgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbcGFydHMubGVuZ3RoIC0gMl0gOiAiIjsNCg0KICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBsYXN0IHNlZ21lbnQgKG9yIGxhc3QgdHdvIGZvciAiVU5JVEVEIEtJTkdET00iKSBtYXRjaGVzIG91ciBsaXN0DQogICAgICAgICAgICAgICAgY29uc3QgaXNGb3JlaWduID0gY291bnRyaWVzLnNvbWUoYyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAiVU5JVEVEIEtJTkdET00iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRyLmVuZHNXaXRoKCJVTklURUQgS0lOR0RPTSIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0U2VnbWVudCA9PT0gYzsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChpc0ZvcmVpZ24pIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGN5WSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIkNvdW50cmllcyAoQ29udC4pIik7IGN5WSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgY3lZKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDkpOw0KICAgICAgICAgICAgICAgICAgICAvLyBEaXNwbGF5aW5nIG9ubHkgdGhlIGVuZCBvZiB0aGUgYWRkcmVzcyB0byBoaWdobGlnaHQgdGhlIGNvdW50cnkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIoZls0XS5zbGljZSgtNTUpKSwgODAsIGN5WSk7DQogICAgICAgICAgICAgICAgICAgIGN5WSArPSA5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQoNCiAgICAgICAgICAgIC8vIFBBR0UgNTogUEhPTkVTDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLnBob25lID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiSW5jb3JyZWN0IFRlbGVwaG9uZSBOdW1iZXJzIik7DQogICAgICAgICAgICBsZXQgdHkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcig1MiwgNzMsIDk0KTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiSW52YWxpZCBQaG9uZSBWYWx1ZSIsIDEwMCwgNTkpOw0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgcGggPSAoZlszXSB8fCAiIikudHJpbSgpOyBjb25zdCBjcCA9IHBoLnJlcGxhY2UoL1xEL2csICcnKTsNCiAgICAgICAgICAgICAgICBpZiAocGggJiYgIWNwLnN0YXJ0c1dpdGgoIjg4ODg4IikgJiYgIWNwLnN0YXJ0c1dpdGgoIjk5OTk5IikgJiYgY3AubGVuZ3RoICE9PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodHkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJQaG9uZXMgKENvbnQuKSIpOyB0eSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgdHkpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChwaCwgMTAwLCB0eSk7IHR5ICs9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgNjogUElOQ09ERQ0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5waW5jb2RlID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiSW52YWxpZCBQSU5DT0RFIFJlY29yZHMiKTsNCiAgICAgICAgICAgIGxldCBwY3kgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigyNDMsIDE1NiwgMTgpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJJbnZhbGlkIFBpbmNvZGUiLCAxMDAsIDU5KTsNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7IGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGlmICgoZlsxOV0gfHwgIklORElBIikudHJpbSgpLnRvVXBwZXJDYXNlKCkgIT09ICJJTkRJQSIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBwaW4gPSAoZlsxNV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBpZiAoIWZbNF0gfHwgZls0XSA9PT0gIn4iIHx8ICFmWzJdKSByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKCEvXlsxLTldWzAtOV17NX0kLy50ZXN0KHBpbikpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBjeSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIlBpbmNvZGUgKENvbnQuKSIpOyBwY3kgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIHBjeSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KHBpbiB8fCAiW0VNUFRZXSIsIDEwMCwgcGN5KTsgcGN5ICs9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgNzogRE9MTEFSIFNJR04gKCQpDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmRvbGxhciA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkludmFsaWQgTmFtZXMgb3IgQWRkcmVzcyAoJCkiKTsNCiAgICAgICAgICAgIGxldCBkeSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDIzMSwgNzYsIDYwKTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiRGV0YWlscyIsIDcwLCA1OSk7DQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOyBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBpZiAoKChmWzJdIHx8ICIiKSArIChmWzRdIHx8ICIiKSkuaW5jbHVkZXMoIiQiKSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gW2BOYW1lOiAke2ZbMl19YCwgYEFkZHI6ICR7Zls0XX1gXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsaXRUeHQgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGluZm8uam9pbigiXG4iKSwgMTE1KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGR5ICsgMTUgPiAyNzUpIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJEb2xsYXIgQ2hlY2sgKENvbnQuKSIpOyBkeSA9IDY1OyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgZHkpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2Muc2V0Rm9udFNpemUoOSk7IGRvYy50ZXh0KHNwbGl0VHh0LCA3MCwgZHkpOyBkeSArPSAxNTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSA4OiBDSVRZIENPUlJFQ1RJT04NCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuY2l0eSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkNpdHkgTmFtZSBWYWxpZGF0aW9uIik7DQogICAgICAgICAgICBsZXQgY3R5WSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDE0MiwgNjgsIDE3Myk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnRleHQoIk9yaWdpbmFsIiwgMjUsIDU5KTsgZG9jLnRleHQoIlN1Z2dlc3RlZCIsIDExMCwgNTkpOw0KICAgICAgICAgICAgbGV0IGNpdHlSYXcgPSB3aW5kb3cuR0xPQkFMX0NJVFlfQVVESVRfREFUQSB8fCAiIjsNCiAgICAgICAgICAgIGlmIChjaXR5UmF3KSB7DQogICAgICAgICAgICAgICAgU3RyaW5nKGNpdHlSYXcpLnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHB0cy5sZW5ndGggPj0gMiAmJiAhbGluZS5pbmNsdWRlcygnT1JJR0lOQUwnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eVkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJDaXR5IChDb250LikiKTsgY3R5WSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoOSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIocHRzWzBdLnRyaW0oKSksIDI1LCBjdHlZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KGNsZWFuU3RyKHB0c1sxXS50cmltKCkpLCAxMTAsIGN0eVkpOyBjdHlZICs9IDc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gUEFHRSA5OiBET05PUiBOQU1FUw0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5kb25vck5hbWVzID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiRG9ub3IgTmFtZSBDb3JyZWN0aW9ucyIpOw0KICAgICAgICAgICAgbGV0IGRueVkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcig0MSwgMTI4LCAxODUpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy50ZXh0KCJPcmlnaW5hbCIsIDI1LCA1OSk7IGRvYy50ZXh0KCJDb3JyZWN0ZWQiLCAxMTAsIDU5KTsNCiAgICAgICAgICAgIGxldCBkb25vclJhdyA9IHdpbmRvdy5HTE9CQUxfRE9OT1JfTkFNRV9EQVRBIHx8ICIiOw0KICAgICAgICAgICAgaWYgKGRvbm9yUmF3KSB7DQogICAgICAgICAgICAgICAgU3RyaW5nKGRvbm9yUmF3KS5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwdHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwdHMubGVuZ3RoID49IDIgJiYgIWxpbmUuaW5jbHVkZXMoJ09SSUdJTkFMJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkbnlZID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiTmFtZXMgKENvbnQuKSIpOyBkbnlZID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSg5KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihwdHNbMF0udHJpbSgpKSwgMjUsIGRueVkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQoY2xlYW5TdHIocHRzWzFdLnRyaW0oKSksIDExMCwgZG55WSk7IGRueVkgKz0gNzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBQQUdFIDEwOiBBRERSRVNTIENPUlJFQ1RJT05TDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmFkZHJDb3JyID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiQWRkcmVzcyBDb3JyZWN0aW9ucyIpOw0KICAgICAgICAgICAgbGV0IGFkeVkgPSA3MDsNCiAgICAgICAgICAgIGNvbnN0IGNvbFdpZHRoID0gNzU7DQogICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDIyLCAxNjAsIDEzMyk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnRleHQoIk9yaWdpbmFsIEFkZHJlc3MiLCAyNSwgNTkpOyBkb2MudGV4dCgiQ29ycmVjdGVkIEFkZHJlc3MiLCAxMTUsIDU5KTsNCiAgICAgICAgICAgIGxldCBhZGRyUmF3ID0gd2luZG93LkdMT0JBTF9BRERSRVNTX0NPUlJFQ1RJT05fREFUQSB8fCAiIjsNCiAgICAgICAgICAgIGlmIChhZGRyUmF3KSB7DQogICAgICAgICAgICAgICAgU3RyaW5nKGFkZHJSYXcpLnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHB0cy5sZW5ndGggPj0gMiAmJiAhbGluZS5pbmNsdWRlcygnT1JJR0lOQUwnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ1cgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGNsZWFuU3RyKHB0c1swXS50cmltKCkpLCBjb2xXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3JyVyA9IGRvYy5zcGxpdFRleHRUb1NpemUoY2xlYW5TdHIocHRzWzFdLnRyaW0oKSksIGNvbFdpZHRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0ggPSBNYXRoLm1heChvcmlnVy5sZW5ndGgsIGNvcnJXLmxlbmd0aCkgKiA1Ow0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkeVkgKyByb3dIID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiQWRkcmVzcyAoQ29udC4pIik7IGFkeVkgPSA3MDsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDgpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KG9yaWdXLCAyNSwgYWR5WSk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChjb3JyVywgMTE1LCBhZHlZKTsgYWR5WSArPSByb3dIICsgNjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXREcmF3Q29sb3IoMjMwKTsgZG9jLmxpbmUoMjAsIGFkeVkgLSAzLCAxOTAsIGFkeVkgLSAzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBVUERBVEUgSU5ERVggTElOS1MNCiAgICAgICAgICAgIGRvYy5zZXRQYWdlKDEpOw0KICAgICAgICAgICAgY29uc3QgbmF2ID0gWw0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJFeGVjdXRpdmUgQXVkaXQgU3VtbWFyeSIsIHRhcmdldDogcE1hcC5zdW1tYXJ5LCBjb2xvcjogWzQ0LCA2MiwgODBdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkRlZmVjdGl2ZSBQQU4gTnVtYmVycyIsIHRhcmdldDogcE1hcC5wYW4sIGNvbG9yOiBbMTU1LCA4OSwgMTgyXSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJDb3VudHJpZXMgaW4gQWRkcmVzcyBGaWVsZCIsIHRhcmdldDogcE1hcC5jb3VudHJ5LCBjb2xvcjogWzM5LCAxNzQsIDk2XSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJJbmNvcnJlY3QgVGVsZXBob25lIE51bWJlcnMiLCB0YXJnZXQ6IHBNYXAucGhvbmUsIGNvbG9yOiBbNTIsIDczLCA5NF0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiSW52YWxpZCBQSU5DT0RFIFJlY29yZHMiLCB0YXJnZXQ6IHBNYXAucGluY29kZSwgY29sb3I6IFsyNDMsIDE1NiwgMThdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkludmFsaWQgTmFtZXMgb3IgQWRkcmVzcyAoJCkiLCB0YXJnZXQ6IHBNYXAuZG9sbGFyLCBjb2xvcjogWzIzMSwgNzYsIDYwXSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJDaXR5IE5hbWUgVmFsaWRhdGlvbiIsIHRhcmdldDogcE1hcC5jaXR5LCBjb2xvcjogWzE0MiwgNjgsIDE3M10gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiRG9ub3IgTmFtZSBDb3JyZWN0aW9ucyIsIHRhcmdldDogcE1hcC5kb25vck5hbWVzLCBjb2xvcjogWzQxLCAxMjgsIDE4NV0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiQWRkcmVzcyBDb3JyZWN0aW9ucyIsIHRhcmdldDogcE1hcC5hZGRyQ29yciwgY29sb3I6IFsyMiwgMTYwLCAxMzNdIH0NCiAgICAgICAgICAgIF07DQogICAgICAgICAgICBsZXQgaXkgPSA2NTsNCiAgICAgICAgICAgIG5hdi5mb3JFYWNoKGl0ID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIWl0LnRhcmdldCkgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoMjQ4KTsgZG9jLnJlY3QoMjAsIGl5LCAxNzAsIDE0LCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoaXQuY29sb3JbMF0sIGl0LmNvbG9yWzFdLCBpdC5jb2xvclsyXSk7IGRvYy5yZWN0KDIwLCBpeSwgNCwgMTQsICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcihpdC5jb2xvclswXSwgaXQuY29sb3JbMV0sIGl0LmNvbG9yWzJdKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7IGRvYy5zZXRGb250U2l6ZSgxMik7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoaXQubGFiZWwsIDMyLCBpeSArIDkuNSk7DQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcihpdC5jb2xvclswXSwgaXQuY29sb3JbMV0sIGl0LmNvbG9yWzJdKTsgZG9jLnJlY3QoMTcyLCBpeSArIDIuNSwgMTIsIDksICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2MudGV4dChpdC50YXJnZXQudG9TdHJpbmcoKSwgMTc4LCBpeSArIDguNSwgeyBhbGlnbjogImNlbnRlciIgfSk7DQogICAgICAgICAgICAgICAgZG9jLmxpbmsoMjAsIGl5LCAxNzAsIDE0LCB7IHBhZ2VOdW1iZXI6IGl0LnRhcmdldCB9KTsgaXkgKz0gMTg7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2MucHV0VG90YWxQYWdlcyA9PT0gJ2Z1bmN0aW9uJykgZG9jLnB1dFRvdGFsUGFnZXModG90YWxQYWdlc0V4cCk7DQogICAgICAgICAgICBkb2Muc2F2ZShgTU1QVF9EYXRhYmFzZV9BdWRpdF8ke3RpbWVTdGFtcH0ucGRmYCk7DQogICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7IGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICB9DQoNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiB0cmlnZ2VyRnVsbEF1ZGl0KCkgew0KICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgYXdhaXQgcnVuQ2l0eUV4dHJhY3Rpb24oJ2F1ZGl0Jyk7DQogICAgICAgICAgICAgICAgYXdhaXQgcnVuRG9ub3JOYW1lQ2hlY2soJ2F1ZGl0Jyk7DQogICAgICAgICAgICAgICAgYXdhaXQgcnVuQWRkcmVzc0NoZWNrKCdhdWRpdCcpOyAvLyBBZGRlZA0KDQogICAgICAgICAgICAgICAgYXdhaXQgcnVuRGF0YWJhc2VBdWRpdFBERigpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQXVkaXQgRXJyb3I6IiwgZXJyKTsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBQQU4gTnVtYmVycyBBdXRvIENvcnJlY3QgLSAoVXBwZXJjYXNlIGZvciBhbGwgUEFOIEZJRUxEUykNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuUEFOQ29ycmVjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IGxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgdGhlIG92ZXJsYXkgcmVuZGVycyBiZWZvcmUgdGhlIENQVSB3b3Jrcw0KICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IGNvcnJlY3Rpb25Db3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAvLyAxLiBQcm9jZXNzIHRoZSBnbG9iYWwgYXJyYXkgZGlyZWN0bHkNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBHTE9CQUxfREJfTElORVMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUEFOIGlzIEluZGV4IDYgKDd0aCBjb2x1bW4pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRzLmxlbmd0aCA+IDYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gZmllbGRzWzZdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1cHBlclZhbCA9IHZhbC50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gdXBwZXJWYWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzZdID0gdXBwZXJWYWw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25Db3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIDIuIFN5bmMgdG8gQ2xvdWQgaWYgY2hhbmdlcyB3ZXJlIG1hZGUNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcnJlY3Rpb25Db3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFVVEhFTlRJQ0FUSU9OOiBVc2luZyB5b3VyIE1NUFRfQVVUSCBzeXN0ZW0gdG8gZ2V0IGEgZnJlc2ggdG9rZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5SZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHRva2VuUGFyYW1zDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVVBMT0FEOiBTYXZpbmcgdGhlIG1vZGlmaWVkIEdMT0JBTF9EQl9MSU5FUw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW5EYXRhLmFjY2Vzc190b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBHTE9CQUxfREJfTElORVMuam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGxvYWRSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBzY3JlZW4gZGlzcGxheQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hvd1JlY29yZCA9PT0gJ2Z1bmN0aW9uJykgc2hvd1JlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBQQU4gQ29ycmVjdGlvbiBTdWNjZXNzIVxuVG90YWwgUmVjb3JkcyBVcGRhdGVkOiAke2NvcnJlY3Rpb25Db3VudH1gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDbG91ZCBTeW5jIEZhaWxlZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJTY2FuIENvbXBsZXRlOiBObyBsb3dlcmNhc2UgUEFOIGVudHJpZXMgZm91bmQuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJQQU4gRXJyb3I6IiwgZXJyKTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIDEwMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBVbmlxdWUgRG9ub3IgTGlzdCBDcmVhdGlvbiBMb2dpYw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuVW5pcXVlRG9ub3JMaXN0KCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG9ub3Itc2VhcmNoLWlucHV0JykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKE1NUFRfREJfUkFXX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3Q29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHJhd0NvbnRlbnQuc3BsaXQoL1xyP1xufFxyLyk7DQoNCiAgICAgICAgICAgICAgICAvLyBVc2UgYSBNYXAgdG8gc3RvcmUgYWdncmVnYXRlZCBkYXRhDQogICAgICAgICAgICAgICAgbGV0IGRvbm9yTWFwID0gbmV3IE1hcCgpOw0KDQogICAgICAgICAgICAgICAgLy8gU2NhbiBBTEwgcmVjb3JkcyAobm90IGp1c3QgcmV2ZXJzZSkgdG8gZW5zdXJlIHdlIG1pc3Mgbm90aGluZw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIC8vIFNraXAgaGVhZGVyIG9yIGVtcHR5IGxpbmVzDQogICAgICAgICAgICAgICAgICAgIGlmICghbGluZSB8fCBsaW5lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInJlY2VpcHR8ZGF0ZSIpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpcHRObyA9IGZpZWxkc1swXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGZpZWxkc1syXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBmaWVsZHNbM10gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBmaWVsZHNbNF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoZmllbGRzWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWwgPSBmaWVsZHNbMTNdIHx8ICJOTyI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpbiA9IGZpZWxkc1sxNV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50cnkgPSBmaWVsZHNbMTldIHx8ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBTVFJJQ1QgSUdOT1JFIExPR0lDIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY2FuY2VsID09PSAiWUVTIikgY29udGludWU7IC8vIElnbm9yZSBBTEwgY2FuY2VsbGVkIHJlY29yZHMNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwaG9uZS50cmltKCkgfHwgcGhvbmUuc3RhcnRzV2l0aCgiODg4ODgiKSB8fCBwaG9uZS5zdGFydHNXaXRoKCI5OTk5OSIpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoIiQiKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGlmICghbmFtZS50cmltKCkgJiYgYW1vdW50IDw9IDApIGNvbnRpbnVlOyAvLyBTa2lwIGdob3N0IHJlY29yZHMNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU0VBUkNIIEZJTFRFUiAoaWYgYXBwbGljYWJsZSkgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb3dlckxpbmUgPSBsaW5lLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoVGVybS5pbmNsdWRlcygnOycpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybXMgPSBzZWFyY2hUZXJtLnNwbGl0KCc7JykubWFwKHQgPT4gdC50cmltKCkudG9Mb3dlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtcy5zb21lKHQgPT4gbG93ZXJMaW5lLmluY2x1ZGVzKHQpKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlYXJjaFRlcm0uaW5jbHVkZXMoJywnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1zID0gc2VhcmNoVGVybS5zcGxpdCgnLCcpLm1hcCh0ID0+IHQudHJpbSgpLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybXMuZXZlcnkodCA9PiBsb3dlckxpbmUuaW5jbHVkZXModCkpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsb3dlckxpbmUuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQUdHUkVHQVRJT04gTE9HSUMgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmICghZG9ub3JNYXAuaGFzKHBob25lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9ub3JNYXAuc2V0KHBob25lLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwgcGhvbmUsIGFkZHJlc3MsIHBpbiwgY291bnRyeSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRlc3RSZWNlaXB0OiByZWNlaXB0Tm8sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxBbW91bnQ6IGFtb3VudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhpc3RpbmcgPSBkb25vck1hcC5nZXQocGhvbmUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcudG90YWxBbW91bnQgKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuY291bnQgKz0gMTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyByZWNlaXB0IG51bWJlciBpcyBoaWdoZXIgdGhhbiB3aGF0IHdlIGhhdmUsIHVwZGF0ZSB0aGUgIkxhdGVzdCIgZGV0YWlscw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHdlIGhhdmUgdGhlIG1vc3QgcmVjZW50IE5hbWUvQWRkcmVzcyBldmVuIGlmIHdlIHByb2Nlc3Mgb3V0IG9mIG9yZGVyDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQocmVjZWlwdE5vLnJlcGxhY2UoL1xEL2csICcnKSkgPiBwYXJzZUludChleGlzdGluZy5sYXRlc3RSZWNlaXB0LnJlcGxhY2UoL1xEL2csICcnKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5uYW1lID0gbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5hZGRyZXNzID0gYWRkcmVzczsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5waW4gPSBwaW47DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuY291bnRyeSA9IGNvdW50cnk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGF0ZXN0UmVjZWlwdCA9IHJlY2VpcHRObzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZURvbm9ycyA9IEFycmF5LmZyb20oZG9ub3JNYXAudmFsdWVzKCkpOw0KDQogICAgICAgICAgICAgICAgaWYgKHVuaXF1ZURvbm9ycy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIGRvbm9ycyBmb3VuZCBtYXRjaGluZyB0aGUgY3JpdGVyaWEuIik7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdGVVbmlxdWVEb25vclBERih1bmlxdWVEb25vcnMsIHNlYXJjaFRlcm0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkRvbm9yIExpc3QgRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gUERGIGZpbGUgR2VuZXJhdGlvbiBmb3IgVW5pcXVlIERvbm9yIExpc3QNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlVW5pcXVlRG9ub3JQREYoZG9ub3JzLCBzZWFyY2hUZXJtKSB7DQogICAgICAgICAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7DQogICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoJ3AnLCAnbW0nLCAnYTQnKTsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTsNCg0KICAgICAgICAgICAgLy8gMS4gU29ydCBieSBUb3RhbCBBbW91bnQgKEhpZ2hlc3Qgb24gdG9wKQ0KICAgICAgICAgICAgZG9ub3JzLnNvcnQoKGEsIGIpID0+IGIudG90YWxBbW91bnQgLSBhLnRvdGFsQW1vdW50KTsNCg0KICAgICAgICAgICAgbGV0IHRpdGxlMyA9ICIiOw0KICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0pIHsNCiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gc2VhcmNoVGVybS5pbmNsdWRlcygnOycpID8gIk9SIiA6ICJBTkQiOw0KICAgICAgICAgICAgICAgIHRpdGxlMyA9IGBTZWFyY2ggUmVzdWx0cyBmb3I6ICR7c2VhcmNoVGVybS5yZXBsYWNlKC9bOyxdL2csICIgIiArIHR5cGUgKyAiICIpfWA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IGRvbm9ycy5tYXAoZCA9PiB7DQogICAgICAgICAgICAgICAgLy8gQWR2YW5jZWQgQWRkcmVzcyBMb2dpYzogU3BsaXQgYnkgc3BhY2UsIHRpbGRlLCBvciBjb2xvbiB0byBmaW5kIHRoZSBjaXR5DQogICAgICAgICAgICAgICAgY29uc3QgYWRkclBhcnRzID0gZC5hZGRyZXNzLnRyaW0oKS5zcGxpdCgvW1xzfjpdKy8pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNpdHkgPSBhZGRyUGFydHMubGVuZ3RoID4gMCA/IGFkZHJQYXJ0c1thZGRyUGFydHMubGVuZ3RoIC0gMV0gOiAiIjsNCiAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgcmVtYWluaW5nIGFkZHJlc3MgZm9yIGRpc3BsYXkNCiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdBZGRyID0gZC5hZGRyZXNzLnJlcGxhY2UoL1s6fl0vZywgJywgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG1haW5BZGRyID0gcmVtYWluaW5nQWRkci5zcGxpdCgnLCAnKS5zbGljZSgwLCAtMSkuam9pbignLCAnKTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiBbDQogICAgICAgICAgICAgICAgICAgIC8vIENvbHVtbiAxOiBOYW1lICYgQ29udGFjdA0KICAgICAgICAgICAgICAgICAgICAvL3sgY29udGVudDogYCR7ZC5uYW1lfVxuJHtkLnBob25lfVxuJHtkLnJlY2VpcHROb31gLCBzdHlsZXM6IHsgZm9udFN0eWxlOiAnYm9sZCcgfSB9LA0KICAgICAgICAgICAgICAgICAgICB7IGNvbnRlbnQ6IGAke2QubmFtZX1cbiR7ZC5waG9uZX1cbiR7ZC5sYXRlc3RSZWNlaXB0fWAsIHN0eWxlczogeyBmb250U3R5bGU6ICdib2xkJyB9IH0sDQogICAgICAgICAgICAgICAgICAgIC8vIENvbHVtbiAyOiBDb250cmlidXRpb24NCiAgICAgICAgICAgICAgICAgICAgeyBjb250ZW50OiBgUnMuICR7ZC50b3RhbEFtb3VudC50b0xvY2FsZVN0cmluZygnZW4tSU4nLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiwgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pfVxuJHtkLmNvdW50fSBUaW1lc2AsIHN0eWxlczogeyBoYWxpZ246ICdjZW50ZXInLCBmb250U3R5bGU6ICdib2xkJyB9IH0sDQogICAgICAgICAgICAgICAgICAgIC8veyBjb250ZW50OiBgUnMuICR7ZC50b3RhbEFtb3VudC50b0xvY2FsZVN0cmluZygpfVxuJHtkLmNvdW50fSBUaW1lc2AsIHN0eWxlczogeyBoYWxpZ246ICdjZW50ZXInLCBmb250U3R5bGU6ICdib2xkJyB9IH0sDQogICAgICAgICAgICAgICAgICAgIC8vIENvbHVtbiAzOiBBZGRyZXNzIERldGFpbHMgKENpdHkgLSBQaW5jb2RlIC0gQ291bnRyeSBvbiBsYXN0IGxpbmUpDQogICAgICAgICAgICAgICAgICAgIHsgY29udGVudDogYCR7bWFpbkFkZHJ9XG4ke2NpdHkudG9VcHBlckNhc2UoKX0gLSAke2QucGlufSAtICR7ZC5jb3VudHJ5LnRvVXBwZXJDYXNlKCl9YCwgc3R5bGVzOiB7IGZvbnRTdHlsZTogJ2JvbGQnIH0gfQ0KICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZG9jLmF1dG9UYWJsZSh7DQogICAgICAgICAgICAgICAgaGVhZDogW1snTmFtZSAmIENvbnRhY3QnLCAnQ29udHJpYnV0aW9uJywgJ0FkZHJlc3MgRGV0YWlscyddXSwNCiAgICAgICAgICAgICAgICBib2R5OiB0YWJsZURhdGEsDQogICAgICAgICAgICAgICAgc3RhcnRZOiA1MCwgLy8gUHVzaGVkIGRvd24gc2lnbmlmaWNhbnRseSB0byBwcmV2ZW50IGFueSBvdmVybGFwDQogICAgICAgICAgICAgICAgbWFyZ2luOiB7IHRvcDogNTAgfSwgLy8gRW5zdXJlcyBzdWJzZXF1ZW50IHBhZ2VzIGRvbid0IG92ZXJsYXAgaGVhZGVyDQogICAgICAgICAgICAgICAgdGhlbWU6ICdncmlkJywNCiAgICAgICAgICAgICAgICBoZWFkU3R5bGVzOiB7DQogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogWzAsIDUxLCAxMDJdLA0KICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IDI1NSwNCiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDExLA0KICAgICAgICAgICAgICAgICAgICBmb250U3R5bGU6ICdib2xkJywNCiAgICAgICAgICAgICAgICAgICAgY2VsbFBhZGRpbmc6IDQsDQogICAgICAgICAgICAgICAgICAgIGhhbGlnbjogJ2NlbnRlcicNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGJvZHlTdHlsZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDEwLA0KICAgICAgICAgICAgICAgICAgICBjZWxsUGFkZGluZzogNCwNCiAgICAgICAgICAgICAgICAgICAgbGluZUNvbG9yOiBbMTgwLCAxODAsIDE4MF0sDQogICAgICAgICAgICAgICAgICAgIHRleHRDb2xvcjogWzAsIDAsIDBdIC8vIFNoYXJwIGJsYWNrIHRleHQNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGNvbHVtblN0eWxlczogew0KICAgICAgICAgICAgICAgICAgICAwOiB7IGNlbGxXaWR0aDogNTUgfSwNCiAgICAgICAgICAgICAgICAgICAgMTogeyBjZWxsV2lkdGg6IDQwIH0sDQogICAgICAgICAgICAgICAgICAgIDI6IHsgY2VsbFdpZHRoOiAnYXV0bycgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgZGlkRHJhd1BhZ2U6IGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFBlcm1hbmVudCBIZWFkZXIgZm9yIEFsbCBQYWdlcw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTgpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDAsIDUxLCAxMDIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCh1bmRlZmluZWQsICdib2xkJyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJNeWxhaSBNYWhhIFBlcmlheWF2YSBBbnVzaGFtIFRydXN0IiwgMTA1LCAxNSwgeyBhbGlnbjogJ2NlbnRlcicgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU3RhdHMgJiBUaW1lc3RhbXANCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigxMDApOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCh1bmRlZmluZWQsICdib2xkJyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBVbmlxdWUgRG9ub3IgTGlzdCBDcmVhdGVkIG9uOiAke3RpbWVzdGFtcH1gLCAxNCwgMjUpOw0KDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCwgMTAyLCAwKTsgLy8gRGFyayBHcmVlbiBmb3IgdG90YWwgY291bnQNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFRvdGFsIFVuaXF1ZSBEb25vcnM6ICR7ZG9ub3JzLmxlbmd0aH1gLCAxNCwgMzMpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh0aXRsZTMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDE1MCwgMCwgMCk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCh0aXRsZTMsIDE0LCA0MCk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBTdHlsaXNoIERpdmlkZXIgTGluZQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0RHJhd0NvbG9yKDAsIDUxLCAxMDIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0TGluZVdpZHRoKDEpOw0KICAgICAgICAgICAgICAgICAgICBkb2MubGluZSgxNCwgNDMsIDE5NiwgNDMpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEZvb3Rlcg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlU2l6ZSA9IGRvYy5pbnRlcm5hbC5wYWdlU2l6ZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZUhlaWdodCA9IHBhZ2VTaXplLmhlaWdodCA/IHBhZ2VTaXplLmhlaWdodCA6IHBhZ2VTaXplLmdldEhlaWdodCgpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTApOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDE1MCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KHVuZGVmaW5lZCwgJ2JvbGQnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoIkludGVybmFsIERvY3VtZW50IiwgMTQsIHBhZ2VIZWlnaHQgLSAxMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBQYWdlICR7ZGF0YS5wYWdlTnVtYmVyfWAsIDE5NiwgcGFnZUhlaWdodCAtIDEwLCB7IGFsaWduOiAncmlnaHQnIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCBmaWxlU3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpLnNsaWNlKDAsIDE5KTsNCiAgICAgICAgICAgIGRvYy5zYXZlKGBNTVBUX0Rvbm9yX0xpc3RfJHtmaWxlU3RhbXB9LnBkZmApOw0KICAgICAgICB9DQoNCg0KICAgICAgICB3aW5kb3cub25sb2FkID0gaW5pdGlhbGl6ZU1NUFQ7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c2NyaXB0Pg0KICAgICAgICBmdW5jdGlvbiBidWlsZEZZSW5kZXgoKSB7DQogICAgICAgICAgICAvLyAxLiBJbml0aWFsIERhdGEgQ2hlY2sNCiAgICAgICAgICAgIGlmICh0eXBlb2YgR0xPQkFMX0RCX0xJTkVTID09PSAndW5kZWZpbmVkJyB8fCBHTE9CQUxfREJfTElORVMubGVuZ3RoIDw9IDEpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gMi4gU0VDVVJJVFkgQ0hFQ0s6IE9ubHkgZGlzYWJsZSBpZiByZXN0cmljdGVkIGFib3ZlIHJlY29yZCAxDQogICAgICAgICAgICAvLyBJZiBNaW5SZWNvcmROdW1iZXIgaXMgMSwgaXQgbWVhbnMgInN0YXJ0IGZyb20gYmVnaW5uaW5nIiwgc28gdGhleSBhcmUgTk9UIHJlc3RyaWN0ZWQuDQogICAgICAgICAgICBjb25zdCBtaW5BbGxvd2VkID0gd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gfHwgMDsNCiAgICAgICAgICAgIGNvbnN0IHJhZGlvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdmeV9maWx0ZXInKTsNCg0KICAgICAgICAgICAgaWYgKG1pbkFsbG93ZWQgPiAxKSB7IC8vIDwtLS0gRklYRUQ6IE9ubHkgbG9jayBpZiBudW1iZXIgaXMgZ3JlYXRlciB0aGFuIDENCiAgICAgICAgICAgICAgICByYWRpb3MuZm9yRWFjaChyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgci5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHIucGFyZW50RWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gIjAuNSI7DQogICAgICAgICAgICAgICAgICAgIHIucGFyZW50RWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gIm5vbmUiOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTZWN1cml0eTogRlkgRmlsdGVyIGRpc2FibGVkIChSZXN0cmljdGVkIFVzZXIgbG9ja2VkIHRvIGluZGV4OiAiICsgbWluQWxsb3dlZCArICIpIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgYnV0dG9ucyBhcmUgRU5BQkxFRCBpZiB0aGV5IGFyZW4ndCByZXN0cmljdGVkDQogICAgICAgICAgICAgICAgcmFkaW9zLmZvckVhY2gociA9PiB7DQogICAgICAgICAgICAgICAgICAgIHIuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgci5wYXJlbnRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAiMSI7DQogICAgICAgICAgICAgICAgICAgIHIucGFyZW50RWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gImF1dG8iOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAzLiBJbml0aWFsaXplIFJhbmdlcyBmb3IgZnVsbCBhY2Nlc3MgdXNlcnMNCiAgICAgICAgICAgIGZ5UmFuZ2VzID0geyAiQUxMIjogeyBtaW46IDEsIG1heDogR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDEgfSB9Ow0KDQogICAgICAgICAgICAvLyA0LiBCdWlsZCB0aGUgWWVhciBNYXANCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKChsaW5lLCBpZHgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAwKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gY29sc1sxXSA/IGNvbHNbMV0udHJpbSgpIDogIiI7DQoNCiAgICAgICAgICAgICAgICBpZiAoZGF0ZVN0ci5pbmNsdWRlcygnLScpKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVN0ci5zcGxpdCgnLScpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID49IDMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBwYXJzZUludChwYXJ0c1sxXSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gcGFyc2VJbnQocGFydHNbMl0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRZID0gKG0gPD0gMykgPyB5IC0gMSA6IHk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmeUtleSA9IHN0YXJ0WS50b1N0cmluZygpLnNsaWNlKC0yKSArICItIiArIChzdGFydFkgKyAxKS50b1N0cmluZygpLnNsaWNlKC0yKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmeVJhbmdlc1tmeUtleV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmeVJhbmdlc1tmeUtleV0gPSB7IG1pbjogaWR4LCBtYXg6IGlkeCB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmeVJhbmdlc1tmeUtleV0ubWF4ID0gaWR4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIDUuIEFVVE8tU0VMRUNUIENVUlJFTlQgRlkgKEphbiAyMDI2IGlzIEZZIDI1LTI2KQ0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgY3VyTW9udGggPSB0b2RheS5nZXRNb250aCgpICsgMTsNCiAgICAgICAgICAgIGNvbnN0IGN1clllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgY29uc3Qgc3RhcnRZID0gKGN1ck1vbnRoIDw9IDMpID8gY3VyWWVhciAtIDEgOiBjdXJZZWFyOw0KICAgICAgICAgICAgY29uc3QgY3VycmVudEZZS2V5ID0gc3RhcnRZLnRvU3RyaW5nKCkuc2xpY2UoLTIpICsgIi0iICsgKHN0YXJ0WSArIDEpLnRvU3RyaW5nKCkuc2xpY2UoLTIpOw0KDQogICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgIHJhZGlvcy5mb3JFYWNoKHIgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyLnZhbHVlID09PSBjdXJyZW50RllLZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgci5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYXBwbHlGWUZpbHRlcihjdXJyZW50RllLZXkpOw0KICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIEZhbGxiYWNrIGlmIGN1cnJlbnQgeWVhciBpcyBlbXB0eQ0KICAgICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZnlfZmlsdGVyIl1bdmFsdWU9IkFMTCJdJyk7DQogICAgICAgICAgICAgICAgaWYgKGFsbFJhZGlvKSB7DQogICAgICAgICAgICAgICAgICAgIGFsbFJhZGlvLmNoZWNrZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBhcHBseUZZRmlsdGVyKCJBTEwiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBhcHBseUZZRmlsdGVyKHZhbCkgew0KICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgIGNvbnN0IHJuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld19yZWNfYnRuJyk7DQogICAgICAgICAgICBpZiAoIXNsaWRlcikgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyAxLiBDQUxDVUxBVEUgQ1VSUkVOVCBGWSAoSmFuIDIwMjYgaXMgRlkgMjUtMjYpDQogICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBjdXJNb250aCA9IHRvZGF5LmdldE1vbnRoKCkgKyAxOw0KICAgICAgICAgICAgY29uc3QgY3VyWWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICBjb25zdCBzdGFydFkgPSAoY3VyTW9udGggPD0gMykgPyBjdXJZZWFyIC0gMSA6IGN1clllYXI7DQogICAgICAgICAgICBjb25zdCBjdXJyZW50RllLZXkgPSBzdGFydFkudG9TdHJpbmcoKS5zbGljZSgtMikgKyAiLSIgKyAoc3RhcnRZICsgMSkudG9TdHJpbmcoKS5zbGljZSgtMik7DQoNCiAgICAgICAgICAgIC8vIDIuIFJOIEJVVFRPTiBTQUZFVFkNCiAgICAgICAgICAgIGlmIChybkJ0bikgew0KICAgICAgICAgICAgICAgIGlmICh2YWwgPT09ICJBTEwiIHx8IHZhbCA9PT0gY3VycmVudEZZS2V5KSB7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLnN0eWxlLm9wYWNpdHkgPSAiMSI7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLnN0eWxlLm9wYWNpdHkgPSAiMC4zIjsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uc3R5bGUuY3Vyc29yID0gIm5vdC1hbGxvd2VkIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIDMuIEZJTFRFUiBMT0dJQw0KICAgICAgICAgICAgaWYgKHZhbCA9PT0gIlJSIikgew0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZHlJbmRpY2VzID09PSAndW5kZWZpbmVkJyB8fCByZWFkeUluZGljZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBSZWFkeSBSZWNlaXB0cyBmb3VuZCEiKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJmeV9maWx0ZXIiXVt2YWx1ZT0iQUxMIl0nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbFJhZGlvKSBhbGxSYWRpby5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYXBwbHlGWUZpbHRlcigiQUxMIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gQ0hBTkdFIEhFUkU6IERJU0FCTEUgSU5TVEVBRCBPRiBISURFIC0tLQ0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOyAvLyBLZWVwIGl0IHZpc2libGUNCiAgICAgICAgICAgICAgICBzbGlkZXIuZGlzYWJsZWQgPSB0cnVlOyAgICAgICAgICAgICAgLy8gTWFrZSBpdCB1bmNsaWNrYWJsZQ0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS5vcGFjaXR5ID0gIjAuNCI7ICAgICAgICAvLyBHcmF5IGl0IG91dCB2aXN1YWxseQ0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS5jdXJzb3IgPSAibm90LWFsbG93ZWQiOw0KDQogICAgICAgICAgICAgICAgc2xpZGVyLm1pbiA9IDA7DQogICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IHJlYWR5SW5kaWNlcy5sZW5ndGggLSAxOw0KICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IDA7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChyZWFkeUluZGljZXNbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gLS0tIFJFU1RPUkUgU0xJREVSIEZPUiBOT1JNQUwgVklFV1MgLS0tDQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgICAgICAgICAgICAgc2xpZGVyLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLm9wYWNpdHkgPSAiMSI7DQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gKGZ5UmFuZ2VzICYmIGZ5UmFuZ2VzW3ZhbF0pID8gZnlSYW5nZXNbdmFsXSA6IChmeVJhbmdlcyA/IGZ5UmFuZ2VzWyJBTEwiXSA6IG51bGwpOw0KDQogICAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsb29yID0gKHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOICYmIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID4gcmFuZ2UubWluKQ0KICAgICAgICAgICAgICAgICAgICAgICAgPyB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STg0KICAgICAgICAgICAgICAgICAgICAgICAgOiByYW5nZS5taW47DQoNCiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm1pbiA9IGZsb29yOw0KICAgICAgICAgICAgICAgICAgICBzbGlkZXIubWF4ID0gcmFuZ2UubWF4Ow0KICAgICAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSByYW5nZS5tYXg7DQogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQoc2xpZGVyLnZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBGaXhlZCBBcnJvdyBOYXZpZ2F0aW9uIGZvciBSUiBNb2RlDQogICAgICAgIGZ1bmN0aW9uIG1vdmVGWVJlY29yZChkaXJlY3Rpb24pIHsNCiAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICBjb25zdCByYWRpb0NoZWNrZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJmeV9maWx0ZXIiXTpjaGVja2VkJyk7DQogICAgICAgICAgICBpZiAoIXNsaWRlciB8fCAhcmFkaW9DaGVja2VkKSByZXR1cm47DQoNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkTW9kZSA9IHJhZGlvQ2hlY2tlZC52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHBhcnNlSW50KHNsaWRlci52YWx1ZSkgKyBkaXJlY3Rpb247DQoNCiAgICAgICAgICAgIGlmIChuZXdWYWwgPj0gcGFyc2VJbnQoc2xpZGVyLm1pbikgJiYgbmV3VmFsIDw9IHBhcnNlSW50KHNsaWRlci5tYXgpKSB7DQogICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gbmV3VmFsOw0KICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE1vZGUgPT09ICJSUiIpIHsNCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChyZWFkeUluZGljZXNbbmV3VmFsXSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChuZXdWYWwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAvKiBDb21wcmVzc2VkIHBhZGRpbmcgZm9yIHRoZSBtYWluIHdvcmtzcGFjZSAqLw0KICAgICAgICBib2R5IHsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA2MHB4ICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCg0KICAgICAgICAjcmFkaW8tZG9jayB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICBib3R0b206IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICMwMDIyNDQsICMwMDQ0ODgpOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDIwcHg7IC8qIFJlZHVjZWQgdmVydGljYWwgcGFkZGluZyAqLw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAtMnB4IDEwcHggcmdiYSgwLDAsMCwwLjMpOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7IC8qIFJvdyBpbnN0ZWFkIG9mIENvbHVtbiAqLw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgLyogVGl0bGUgbGVmdCwgQ29udHJvbHMgcmlnaHQgKi8NCiAgICAgICAgICAgIHotaW5kZXg6IDEwMDAwOw0KICAgICAgICAgICAgaGVpZ2h0OiA0NXB4OyAvKiBGaXhlZCBzbWFsbCBoZWlnaHQgKi8NCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAucmFkaW8tdGl0bGUgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBjb2xvcjogI2ZmOTkzMzsNCiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgIH0NCg0KICAgICAgICAucmFkaW8tY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBnYXA6IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgICNyYWRpb1NlbGVjdCB7DQogICAgICAgICAgICBwYWRkaW5nOiA0cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICB3aWR0aDogMTgwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDI4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAucmFkaW8tYnRuIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTJweDsNCiAgICAgICAgICAgIGhlaWdodDogMjhweDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tcGxheSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjhhNzQ1Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1zdG9wIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkOTUzNGY7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBpZD0icmFkaW8tZG9jayI+DQogICAgICAgIDxkaXYgY2xhc3M9InJhZGlvLXRpdGxlIj5IaW5kdSBEZXZvdGlvbmFsIFJhZGlvPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0icmFkaW8tY29udHJvbHMiPg0KICAgICAgICAgICAgPHNlbGVjdCBpZD0icmFkaW9TZWxlY3QiPg0KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gTG9hZGluZyAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJyYWRpby1idG4gYnRuLXBsYXkiIG9uY2xpY2s9InBsYXlSYWRpbygpIj5QTEFZPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJyYWRpby1idG4gYnRuLXN0b3AiIG9uY2xpY2s9InN0b3BSYWRpbygpIj5TVE9QPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIA0KICAgICAgICA8YXVkaW8gaWQ9InJhZGlvUGxheWVyIiBjcm9zc29yaWdpbj0iYW5vbnltb3VzIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9hdWRpbz4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQoNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkUmFkaW9zKHRva2VuKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9SQURJT19GSUxFIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBJZiBwZXJzb25hbGl6ZWQgZmlsZSBpcyBtaXNzaW5nLCBmZXRjaCB0aGUgZGVmYXVsdCBvbmUNCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUGVyc29uYWxpemVkIHJhZGlvIG5vdCBmb3VuZCwgbG9hZGluZyBkZWZhdWx0Li4uIik7DQogICAgICAgICAgICAgICAgICAgIHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9TZXR0aW5ncy9SYWRpb3MudHh0JyB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKCJObyBSYWRpbyBGaWxlIik7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBzdGF0aW9ucyA9IHRleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gbC5pbmNsdWRlcygnLCcpKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYWRpb0Ryb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9TZWxlY3QnKTsNCg0KICAgICAgICAgICAgICAgIHJhZGlvRHJvcC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgU3RhdGlvbiAtLTwvb3B0aW9uPicgKw0KICAgICAgICAgICAgICAgICAgICBzdGF0aW9ucy5tYXAocyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbbmFtZSwgdXJsXSA9IHMuc3BsaXQoJywnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPG9wdGlvbiB2YWx1ZT0iJHt1cmwudHJpbSgpfSI+JHtuYW1lLnRyaW0oKX08L29wdGlvbj5gOw0KICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcnKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1NlbGVjdCcpLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPlJhZGlvIFVuYXZhaWxhYmxlPC9vcHRpb24+JzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgZnVuY3Rpb24gcGxheVJhZGlvKCkgew0KICAgICAgICAgICAgY29uc3QgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvUGxheWVyJyk7DQogICAgICAgICAgICBjb25zdCBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9TZWxlY3QnKTsNCiAgICAgICAgICAgIGNvbnN0IHVybCA9IHNlbC52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBzZWwub3B0aW9uc1tzZWwuc2VsZWN0ZWRJbmRleF0udGV4dDsNCg0KICAgICAgICAgICAgaWYgKCF1cmwpIHJldHVybjsNCg0KICAgICAgICAgICAgcGxheWVyLnNyYyA9IHVybDsNCiAgICAgICAgICAgIHBsYXllci5wbGF5KCkNCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBVcGRhdGUgeW91ciBhcHAncyBtYWluIHN0YXR1cyB0ZXh0IGlmIHlvdSBoYXZlIG9uZQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUGxheWluZzogIiArIG5hbWUpOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gYWxlcnQoIlN0YXRpb24gb2ZmbGluZS4gVHJ5IGFub3RoZXIuIikpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gc3RvcFJhZGlvKCkgew0KICAgICAgICAgICAgY29uc3QgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvUGxheWVyJyk7DQogICAgICAgICAgICBwbGF5ZXIucGF1c2UoKTsNCiAgICAgICAgICAgIHBsYXllci5zcmMgPSAiIjsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAucGFuY2hhbmctb3V0ZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgIH0NCg0KICAgICAgICAucGFuY2hhbmctaGFsZiB7DQogICAgICAgICAgICBmbGV4OiAxOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAucGFuY2hhbmctbWFpbi10aXRsZSB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDsNCiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgIH0NCg0KICAgICAgICAucC1zdWItaGVhZCB7DQogICAgICAgICAgICBmb250LXNpemU6IDE1cHg7DQogICAgICAgICAgICBjb2xvcjogIzAwMzM2NjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgbWFyZ2luOiAxNXB4IDAgOHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDNweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wLWV2ZW50LWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOWYwOw0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICAgICAgICAgICAgLyogRGF0YSBzcGVjaWZpYyBzdHlsaW5nICovDQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQogICAgICAgIH0NCg0KICAgICAgICAucC1jZW50ZXItYm94IHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmMGY0ZmY7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAzMzY2Ow0KICAgICAgICB9DQogICAgICAgIC8qIEJvbGQgQ29sb3IgQ29kaW5nIGZvciBEYXRhICovDQogICAgICAgIC5jLWRhdGUgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jLW5hbWUgew0KICAgICAgICAgICAgY29sb3I6ICMwMDAwZmY7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jLWV4dHJhIHsNCiAgICAgICAgICAgIGNvbG9yOiAjMmU3ZDMyOw0KICAgICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljOw0KICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7DQogICAgICAgICAgICAucGFuY2hhbmctb3V0ZXIgew0KICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5wLWV2ZW50LWJveCB7DQogICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbDsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0icGFuY2hhbmctb3V0ZXIiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1oYWxmIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLW1haW4tdGl0bGUiPlVwY29taW5nIEFudXNoYW0gRGF0ZXM8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3AtYW51c2hhbSI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLXN1Yi1oZWFkIj7wn5WJ77iPIFBlcml5YXZhIEpheWFudGhpPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJkaXNwLWpheWFudGhpIj48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtc3ViLWhlYWQiPvCflYnvuI8gUGVyaXlhdmEgQXJhZGhhbmE8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3AtYXJhZGhhbmEiPjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1oYWxmIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLW1haW4tdGl0bGUiPlVwY29taW5nIEVrYWRhc2hpIERhdGVzPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJkaXNwLWVrYWRhc2hpIj48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkUGFuY2hhbmdTdWl0ZSgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIG5vdy5zZXRIb3VycygwLCAwLCAwLCAwKTsNCg0KICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldExpbmVzKHBhdGgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogcGF0aCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHh0LnJlcGxhY2UoLzxiclxzKlwvPz4vZ2ksICdcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpLnNwbGl0KCdcbicpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDApOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDEuIEFOVVNIQU0NCiAgICAgICAgICAgICAgICBjb25zdCByb3dzMSA9IGF3YWl0IGdldExpbmVzKCcvUGFuY2hhbmcvQW51c2hhbS8wLjEuaHRtbCcpOw0KICAgICAgICAgICAgICAgIGxldCBoMSA9ICIiOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93czEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MxW2ldLm1hdGNoKC9cZHsxLDJ9LVx3Ky1cZHs0fS8pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUocm93czFbaV0pID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgxICs9IGA8ZGl2IGNsYXNzPSJwLWV2ZW50LWJveCI+PHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzMVtpXX08L3NwYW4+IDxzcGFuIGNsYXNzPSJjLWV4dHJhIj4ke3Jvd3MxW2kgKyAxXSB8fCAnJ308L3NwYW4+PC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcC1hbnVzaGFtJykuaW5uZXJIVE1MID0gaDEgfHwgIk5vIFVwY29taW5nIjsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEpBWUFOVEhJDQogICAgICAgICAgICAgICAgY29uc3Qgcm93czMgPSBhd2FpdCBnZXRMaW5lcygnL1BhbmNoYW5nL0FudXNoYW0vMC4zLmh0bWwnKTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyb3dzM1tpXS5tYXRjaCgvXGR7MSwyfS1cdystXGR7NH0vKSAmJiBuZXcgRGF0ZShyb3dzM1tpXSkgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IChyb3dzM1tpICsgMV0gfHwgIiIpLnJlcGxhY2UoL1wvXGR7Mn1cL1xkezR9L2csICcnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWpheWFudGhpJykuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InAtZXZlbnQtYm94IHAtY2VudGVyLWJveCI+PHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzM1tpXX0gKFNhdCk8L3NwYW4+IDxzcGFuIGNsYXNzPSJjLWV4dHJhIj5UaW1pbmc6ICR7dGltZX08L3NwYW4+PC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gMy4gQVJBREhBTkENCiAgICAgICAgICAgICAgICBjb25zdCByb3dzNCA9IGF3YWl0IGdldExpbmVzKCcvUGFuY2hhbmcvQW51c2hhbS8wLjQuaHRtbCcpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93czQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3M0W2ldLm1hdGNoKC9cZHsxLDJ9LVx3Ky1cZHs0fS8pICYmIG5ldyBEYXRlKHJvd3M0W2ldKSA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWFyYWRoYW5hJykuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InAtZXZlbnQtYm94IHAtY2VudGVyLWJveCI+PHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzNFtpXX0gKE1vbik8L3NwYW4+PC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gRUtBREFTSEkNCiAgICAgICAgICAgICAgICBjb25zdCByb3dzRSA9IGF3YWl0IGdldExpbmVzKCcvUGFuY2hhbmcvRWthZGFzaGkvMC4xLmh0bWwnKTsNCiAgICAgICAgICAgICAgICBsZXQgaEUgPSAiIjsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3NFLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gcm93c0VbaV0ubWF0Y2goLyhcZHsxLDJ9KS0oXGR7Mn18W2EtekEtWl0rKS0oXGR7NH0pLyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZFBhcnRzID0gcm93c0VbaV0uc3BsaXQoJyAnKVswXS5zcGxpdCgnLScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHQgPSBuZXcgRGF0ZShkUGFydHNbMl0sIG5ldyBEYXRlKERhdGUucGFyc2UoZFBhcnRzWzFdICsgIiAxLCAyMDEyIikpLmdldE1vbnRoKCksIGRQYXJ0c1swXSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkdCA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoRSArPSBgPGRpdiBjbGFzcz0icC1ldmVudC1ib3giPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzRVtpXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYy1uYW1lIj4ke3Jvd3NFW2kgKyAxXSB8fCAnJ308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYy1leHRyYSI+JHtyb3dzRVtpICsgMl0gfHwgJyd9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAyOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWVrYWRhc2hpJykuaW5uZXJIVE1MID0gaEUgfHwgIk5vIFVwY29taW5nIjsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiTG9hZCBGYWlsIiwgZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkUGFuY2hhbmdTdWl0ZSgpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAuZmxhc2hiYWNrLWNvbnRhaW5lciB7DQogICAgICAgICAgICBtYXJnaW46IDIwcHggYXV0bzsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmYWZhOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDk1JTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2staGVhZGVyLXdyYXBwZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2staGVhZGVyIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdHZW9yZ2lhJywgc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDI2cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBKdW1wIHRvIERhdGUgU3R5bGluZyAqLw0KICAgICAgICAuanVtcC1ib3ggew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBnYXA6IDhweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgICAgICAgICBwYWRkaW5nOiA1cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5qdW1wLWJveCBzZWxlY3Qgew0KICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgICAgICBvdXRsaW5lOiBub25lOw0KICAgICAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAudmlldy10b2dnbGUgew0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmRmMmYyOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4IDE1cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDE1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLnZpZXctdG9nZ2xlIGxhYmVsIHsNCiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgICAgIGdhcDogNXB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtYnRuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM4MDAwMDA7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMzVweDsNCiAgICAgICAgICAgIGhlaWdodDogMzVweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWJ0bjpob3ZlciB7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmOTkzMzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWdyaWQgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgICAgIGdhcDogMjVweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2stY2FyZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA4NTBweDsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDIwcHggcmdiYSgwLDAsMCwwLjEpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mbGFzaGJhY2stY2FyZCBoNCB7DQogICAgICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDEycHggMDsNCiAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4Ow0KICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1pbWctd3JhcHBlciB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1pbWcgew0KICAgICAgICAgICAgd2lkdGg6IDE5MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxNTBweDsNCiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IDAuM3M7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmZsYXNoYmFjay1pbWc6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7DQogICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZmY5OTMzOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgew0KICAgICAgICAgICAgLmZsYXNoYmFjay1oZWFkZXIgew0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLmZsYXNoYmFjay1pbWcgew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxNDBweDsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDExMHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWNvbnRyb2xzIHsNCiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9ImZsYXNoYmFjay1jb250YWluZXIiIGlkPSJmbGFzaGJhY2tTZWN0aW9uIiBzdHlsZT0iZGlzcGxheTpub25lOyI+DQogICAgICAgIDxkaXYgY2xhc3M9ImZsYXNoYmFjay1oZWFkZXItd3JhcHBlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29udHJvbHMiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9ImNoYW5nZUZsYXNoYmFja0RhdGUoLTEpIj7il4A8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJmbGFzaGJhY2tUaXRsZSIgY2xhc3M9ImZsYXNoYmFjay1oZWFkZXIiPvCfjp7vuI8gVHJ1c3QgTWVtb3JpZXM6IE9uIFRoaXMgRGF5PC9kaXY+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgb25jbGljaz0iY2hhbmdlRmxhc2hiYWNrRGF0ZSgxKSI+4pa2PC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBmbGV4LXdyYXA6IHdyYXA7IGp1c3RpZnktY29udGVudDogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ianVtcC1ib3giPg0KICAgICAgICAgICAgICAgICAgICDwn5OFIEp1bXAgdG86DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imp1bXBEYXkiPjwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJqdW1wTW9udGgiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMCI+SmFuPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxIj5GZWI8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPk1hcjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMyI+QXByPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI0Ij5NYXk8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjUiPkp1bjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNiI+SnVsPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI3Ij5BdWc8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjgiPlNlcDwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iOSI+T2N0PC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMCI+Tm92PC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMSI+RGVjPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InRlbGVwb3J0VG9EYXRlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czoxMHB4OyBwYWRkaW5nOjJweCA4cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MTJweDsiPkdPPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ2aWV3LXRvZ2dsZSI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InZpZXdNb2RlIiB2YWx1ZT0iMyIgY2hlY2tlZCBvbmNsaWNrPSJzZXRWaWV3TW9kZSgzKSI+IFN1bW1hcnk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJ2aWV3TW9kZSIgdmFsdWU9ImFsbCIgb25jbGljaz0ic2V0Vmlld01vZGUoJ2FsbCcpIj4gQWxsPC9sYWJlbD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBpZD0iZmxhc2hiYWNrR3JpZCIgY2xhc3M9ImZsYXNoYmFjay1ncmlkIj48L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGxldCBmbGFzaGJhY2tPZmZzZXQgPSAwOw0KICAgICAgICBsZXQgY3VycmVudFZpZXdMaW1pdCA9IDM7DQoNCiAgICAgICAgLy8gSW5pdGlhbGl6ZSBEYXkgZHJvcGRvd24gKDEtMzEpDQogICAgICAgIGNvbnN0IGRheVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wRGF5Jyk7DQogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDMxOyBpKyspIHsNCiAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgIG9wdC52YWx1ZSA9IGk7IG9wdC5pbm5lckhUTUwgPSBpOw0KICAgICAgICAgICAgZGF5U2VsZWN0LmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzZXRWaWV3TW9kZShtb2RlKSB7DQogICAgICAgICAgICBjdXJyZW50Vmlld0xpbWl0ID0gbW9kZTsNCiAgICAgICAgICAgIGxvYWREeW5hbWljRmxhc2hiYWNrcygpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gY2hhbmdlRmxhc2hiYWNrRGF0ZShvZmZzZXQpIHsNCiAgICAgICAgICAgIGZsYXNoYmFja09mZnNldCArPSBvZmZzZXQ7DQogICAgICAgICAgICBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHRlbGVwb3J0VG9EYXRlKCkgew0KICAgICAgICAgICAgY29uc3QgZCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wRGF5JykudmFsdWUpOw0KICAgICAgICAgICAgY29uc3QgbSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wTW9udGgnKS52YWx1ZSk7DQogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG0sIGQpOw0KDQogICAgICAgICAgICAvLyBDYWxjdWxhdGUgZGlmZmVyZW5jZSBpbiBkYXlzIHRvIHNldCB0aGUgb2Zmc2V0DQogICAgICAgICAgICBjb25zdCBkaWZmVGltZSA9IHRhcmdldC5nZXRUaW1lKCkgLSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkpLmdldFRpbWUoKTsNCiAgICAgICAgICAgIGZsYXNoYmFja09mZnNldCA9IE1hdGgucm91bmQoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpOw0KICAgICAgICAgICAgbG9hZER5bmFtaWNGbGFzaGJhY2tzKCk7DQogICAgICAgIH0NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKSB7DQogICAgICAgICAgICBjb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYXNoYmFja0dyaWQnKTsNCiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2hiYWNrU2VjdGlvbicpOw0KICAgICAgICAgICAgY29uc3QgdGl0bGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2hiYWNrVGl0bGUnKTsNCiAgICAgICAgICAgIGNvbnN0IGRvbWFpbiA9ICJodHRwczovL3d3dy5nYW5lc2FzYXJtYS5jb20iOw0KICAgICAgICAgICAgY29uc3QgVGltZWxpbmVVUkxfRmxhc2ggPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9yZjg1ZWxrejVmYzNjbDFoOGtjY2MvVGltZUxpbmUudHh0P3Jsa2V5PXVta2gwcjd3dGY3dWx1M3J6cXpjZ2IxeWMmZGw9MSI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICB0YXJnZXREYXRlLnNldERhdGUodGFyZ2V0RGF0ZS5nZXREYXRlKCkgKyBmbGFzaGJhY2tPZmZzZXQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbW0gPSBTdHJpbmcodGFyZ2V0RGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkZCA9IFN0cmluZyh0YXJnZXREYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkb3RQYXR0ZXJuID0gYC4ke21tfS4ke2RkfWA7DQogICAgICAgICAgICAgICAgY29uc3QgZGFzaFBhdHRlcm4gPSBgLSR7bW19LSR7ZGR9YDsNCg0KICAgICAgICAgICAgICAgIC8vIFN5bmMgRHJvcGRvd25zIHdpdGggY3VycmVudCB2aWV3aW5nIGRhdGUNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcERheScpLnZhbHVlID0gdGFyZ2V0RGF0ZS5nZXREYXRlKCk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBNb250aCcpLnZhbHVlID0gdGFyZ2V0RGF0ZS5nZXRNb250aCgpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgaXNUb2RheSA9ICh0YXJnZXREYXRlLmdldE1vbnRoKCkgPT09IG5vdy5nZXRNb250aCgpICYmIHRhcmdldERhdGUuZ2V0RGF0ZSgpID09PSBub3cuZ2V0RGF0ZSgpKTsNCiAgICAgICAgICAgICAgICB0aXRsZURpdi5pbm5lclRleHQgPSBpc1RvZGF5ID8gYPCfjp7vuI8gVHJ1c3QgTWVtb3JpZXM6IE9uIFRoaXMgRGF5YCA6IGDwn46e77iPIE1lbW9yaWVzOiAke3RhcmdldERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1JTicsIHsgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycgfSl9YDsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVGltZWxpbmVVUkxfRmxhc2gpOw0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gZGF0YS5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGdyaWQuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzTWFwID0ge307DQogICAgICAgICAgICAgICAgbGV0IGZvdW5kTWF0Y2ggPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICgobGluZS5pbmNsdWRlcyhkb3RQYXR0ZXJuKSB8fCBsaW5lLmluY2x1ZGVzKGRhc2hQYXR0ZXJuKSkgJiYgbGluZS5tYXRjaCgvXC4oanBnfGpwZWd8cG5nKSQvaSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdlYlBhdGggPSBsaW5lLnRyaW0oKS5yZXBsYWNlKC9cXC9nLCAnLycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbFVybCA9IGRvbWFpbiArIGVuY29kZVVSSSh3ZWJQYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gd2ViUGF0aC5zcGxpdCgnLycpLnBvcCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IGZpbGVuYW1lLm1hdGNoKC9eKFxkezR9KS8pID8gZmlsZW5hbWUubWF0Y2goL14oXGR7NH0pLylbMV0gOiAiUGFzdCI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBldmVudE5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKC9eXGR7NH1bLi1dXGR7Mn1bLi1dXGR7Mn0tLywgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xzKlxkKlxzKlwuKGpwZ3xqcGVnfHBuZykkL2ksICcnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9eXGQrXHMrLywgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnROYW1lKSBldmVudE5hbWUgPSAiVHJ1c3QgQWN0aXZpdHkiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cEtleSA9IGAke3llYXJ9fCR7ZXZlbnROYW1lfWA7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50c01hcFtncm91cEtleV0pIGV2ZW50c01hcFtncm91cEtleV0gPSB7IHllYXIsIGV2ZW50TmFtZSwgcGhvdG9zOiBbXSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzTWFwW2dyb3VwS2V5XS5waG90b3MucHVzaChmdWxsVXJsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kTWF0Y2ggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kTWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0icGFkZGluZzo0MHB4OyB3aWR0aDoxMDAlOyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDpib2xkOyBiYWNrZ3JvdW5kOndoaXRlOyBib3JkZXItcmFkaXVzOjEwcHg7Ij5ObyByZWNvcmRzIGZvdW5kIGZvciAke3RhcmdldERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1JTicsIHsgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycgfSl9LjwvZGl2PmA7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXZlbnRzTWFwKS5zb3J0KChhLCBiKSA9PiBiLnNwbGl0KCd8JylbMF0gLSBhLnNwbGl0KCd8JylbMF0pLmZvckVhY2goa2V5ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gZXZlbnRzTWFwW2tleV07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXJkLmNsYXNzTmFtZSA9ICdmbGFzaGJhY2stY2FyZCc7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5UGhvdG9zID0gY3VycmVudFZpZXdMaW1pdCA9PT0gJ2FsbCcgPyBncm91cC5waG90b3MgOiBncm91cC5waG90b3Muc2xpY2UoMCwgMyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PiR7Z3JvdXAuZXZlbnROYW1lfSAke2lzVG9kYXkgPyBgKCR7Z3JvdXAueWVhcn0pYCA6IGAtICR7Z3JvdXAueWVhcn1gfTwvaDQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGFzaGJhY2staW1nLXdyYXBwZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGlzcGxheVBob3Rvcy5tYXAoc3JjID0+IGA8aW1nIHNyYz0iJHtzcmN9IiBjbGFzcz0iZmxhc2hiYWNrLWltZyIgb25jbGljaz0id2luZG93Lm9wZW4odGhpcy5zcmMpIiBvbmVycm9yPSJ0aGlzLnN0eWxlLmRpc3BsYXk9J25vbmUnIj5gKS5qb2luKCcnKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICBncmlkLmFwcGVuZENoaWxkKGNhcmQpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfQ0KICAgICAgICB9DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgbG9hZER5bmFtaWNGbGFzaGJhY2tzKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KDQogICAgPHN0eWxlPg0KICAgICAgICAuY2hpdHJhbS1jb250YWluZXIgew0KICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87DQogICAgICAgICAgICBwYWRkaW5nOiAyMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmFmYTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA5NSU7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1oZWFkZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0dlb3JnaWEnLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjZweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1ncmlkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC44cyBlYXNlLWluLW91dDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sYW5kc2NhcGUtYm94IHsNCiAgICAgICAgICAgIHdpZHRoOiA0NTBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wb3J0cmFpdC1ib3ggew0KICAgICAgICAgICAgd2lkdGg6IDMyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0taW1nIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7DQogICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0tbGFiZWwgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgIH0NCg0KICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogODAwcHgpIHsNCiAgICAgICAgICAgIC5sYW5kc2NhcGUtYm94LCAucG9ydHJhaXQtYm94IHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDQwMHB4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tY29udGFpbmVyIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1oZWFkZXIiPvCflYnvuI8gQ2hpdHJhIFB1cmFuYW08L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1ncmlkIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tYm94IGxhbmRzY2FwZS1ib3giPg0KICAgICAgICAgICAgICAgIDxpbWcgaWQ9ImltZ19sYW5kc2NhcGUiIHNyYz0iIiBjbGFzcz0iY2hpdHJhbS1pbWciIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuc3JjKSIgdGl0bGU9IlZpZXcgRnVsbCBJbWFnZSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1sYWJlbCIgaWQ9ImxibF9sYW5kc2NhcGUiPkNvbm5lY3RpbmcgdG8gRGl2aW5lIEdhbGxlcnkuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1ib3ggcG9ydHJhaXQtYm94Ij4NCiAgICAgICAgICAgICAgICA8aW1nIGlkPSJpbWdfcG9ydHJhaXQiIHNyYz0iIiBjbGFzcz0iY2hpdHJhbS1pbWciIG9uY2xpY2s9IndpbmRvdy5vcGVuKHRoaXMuc3JjKSIgdGl0bGU9IlZpZXcgRnVsbCBJbWFnZSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1sYWJlbCIgaWQ9ImxibF9wb3J0cmFpdCI+Q29ubmVjdGluZyB0byBEaXZpbmUgR2FsbGVyeS4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgY29uc3QgQ0hJVFJBTV9DT05GSUcgPSB7DQogICAgICAgICAgICBmb2xkZXI6ICIvUGFuY2hhbmcvQ2hpdGhyYVB1cmFuYW0vIiwNCiAgICAgICAgICAgIGxhbmRzY2FwZUNvdW50OiA0MSwNCiAgICAgICAgICAgIHBvcnRyYWl0Q291bnQ6IDgwLA0KICAgICAgICAgICAgaW50ZXJ2YWw6IDcwMDANCiAgICAgICAgfTsNCg0KICAgICAgICBsZXQgY3VycmVudEwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDSElUUkFNX0NPTkZJRy5sYW5kc2NhcGVDb3VudCkgKyAxOw0KICAgICAgICBsZXQgY3VycmVudFAgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDSElUUkFNX0NPTkZJRy5wb3J0cmFpdENvdW50KSArIDE7DQogICAgICAgIGxldCBkcm9wYm94VG9rZW4gPSAiIjsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXREcm9wYm94TGluayhmaWxlTmFtZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2dldF90ZW1wb3JhcnlfbGluaycsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgZHJvcGJveFRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IENISVRSQU1fQ09ORklHLmZvbGRlciArIGZpbGVOYW1lIH0pDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5saW5rOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkxpbmsgRmV0Y2ggRmFpbDoiLCBmaWxlTmFtZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuICIiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ2hpdHJhbSgpIHsNCiAgICAgICAgICAgIC8vIDEuIEdldCBBY2Nlc3MgVG9rZW4gKHVzaW5nIHlvdXIgZ2xvYmFsIE1NUFQgY29uc3RhbnRzKQ0KICAgICAgICAgICAgaWYgKCFkcm9wYm94VG9rZW4pIHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGRyb3Bib3hUb2tlbiA9IGQuYWNjZXNzX3Rva2VuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBQcmVwYXJlIEZpbGUgTmFtZXMNCiAgICAgICAgICAgIGNvbnN0IGxOdW0gPSBTdHJpbmcoY3VycmVudEwpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCBwTnVtID0gU3RyaW5nKGN1cnJlbnRQKS5wYWRTdGFydCgyLCAnMCcpOw0KDQogICAgICAgICAgICAvLyAzLiBGZXRjaCBUZW1wIExpbmtzIGZyb20gRHJvcGJveA0KICAgICAgICAgICAgY29uc3QgW2xVcmwsIHBVcmxdID0gYXdhaXQgUHJvbWlzZS5hbGwoWw0KICAgICAgICAgICAgICAgIGdldERyb3Bib3hMaW5rKGBMJHtsTnVtfS5qcGdgKSwNCiAgICAgICAgICAgICAgICBnZXREcm9wYm94TGluayhgUCR7cE51bX0uanBnYCkNCiAgICAgICAgICAgIF0pOw0KDQogICAgICAgICAgICAvLyA0LiBVcGRhdGUgVUkgKExhbmRzY2FwZSkNCiAgICAgICAgICAgIGNvbnN0IGxJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX2xhbmRzY2FwZScpOw0KICAgICAgICAgICAgY29uc3QgbEJveCA9IGxJbWcucGFyZW50RWxlbWVudDsNCiAgICAgICAgICAgIGxCb3guc3R5bGUub3BhY2l0eSA9IDAuMzsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChsVXJsKSBsSW1nLnNyYyA9IGxVcmw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xibF9sYW5kc2NhcGUnKS5pbm5lclRleHQgPSBgS2FuY2hpIE1haGFwZXJpeWF2YWA7DQogICAgICAgICAgICAgICAgbEJveC5zdHlsZS5vcGFjaXR5ID0gMTsNCiAgICAgICAgICAgIH0sIDgwMCk7DQoNCiAgICAgICAgICAgIC8vIDUuIFVwZGF0ZSBVSSAoUG9ydHJhaXQpDQogICAgICAgICAgICBjb25zdCBwSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19wb3J0cmFpdCcpOw0KICAgICAgICAgICAgY29uc3QgcEJveCA9IHBJbWcucGFyZW50RWxlbWVudDsNCiAgICAgICAgICAgIHBCb3guc3R5bGUub3BhY2l0eSA9IDAuMzsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChwVXJsKSBwSW1nLnNyYyA9IHBVcmw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xibF9wb3J0cmFpdCcpLmlubmVyVGV4dCA9IGBLYW5jaGkgTWFoYXBlcml5YXZhYDsNCiAgICAgICAgICAgICAgICBwQm94LnN0eWxlLm9wYWNpdHkgPSAxOw0KICAgICAgICAgICAgfSwgODAwKTsNCg0KICAgICAgICAgICAgLy8gNi4gSW5jcmVtZW50IG9yIFJlc2V0DQogICAgICAgICAgICBjdXJyZW50TCA9IGN1cnJlbnRMID49IENISVRSQU1fQ09ORklHLmxhbmRzY2FwZUNvdW50ID8gMSA6IGN1cnJlbnRMICsgMTsNCiAgICAgICAgICAgIGN1cnJlbnRQID0gY3VycmVudFAgPj0gQ0hJVFJBTV9DT05GSUcucG9ydHJhaXRDb3VudCA/IDEgOiBjdXJyZW50UCArIDE7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBJbml0aWFsaXplDQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gew0KICAgICAgICAgICAgdXBkYXRlQ2hpdHJhbSgpOw0KICAgICAgICAgICAgc2V0SW50ZXJ2YWwodXBkYXRlQ2hpdHJhbSwgQ0hJVFJBTV9DT05GSUcuaW50ZXJ2YWwpOw0KICAgICAgICB9KTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLm1tcHQtYXJjaGl2ZS1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMjVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMzBweCAxMHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsMCwwLDAuMSk7DQogICAgICAgIH0NCg0KICAgICAgICAuYXJjaGl2ZS1oZWFkZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXNpemU6IDIycHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2ZmZjVlNjsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFyY2hpdmUtY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgfQ0KDQogICAgICAgICNzY3JpcHR1cmVfZHJvcGRvd24gew0KICAgICAgICAgICAgd2lkdGg6IDM4MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiA0NXB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMCAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgI0ZGOTkzMzsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmYWYwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1hcmNoaXZlLWRvd25sb2FkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4MDAwMDAgMCUsICM0YTAwMDAgMTAwJSk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDMwcHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYXJjaGl2ZS1kb3dubG9hZDpob3ZlciB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAzKTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLDAsMCwwLjIpOw0KICAgICAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJtbXB0LWFyY2hpdmUtYm94Ij4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2ZS1oZWFkZXIiPvCfk5wgU2NyaXB0dXJlcyBmcm9tIE1NUFQgQXJjaGl2ZXM8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2ZS1jb250cm9scyI+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJzY3JpcHR1cmVfZHJvcGRvd24iPg0KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gTG9hZGluZyBUaXRsZXMgZnJvbSBEcml2ZS4uLiAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYXJjaGl2ZS1kb3dubG9hZCIgb25jbGljaz0iaGFuZGxlQXJjaGl2ZURvd25sb2FkKCkiPvCfk6UgRG93bmxvYWQgUERGPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzY2NjsgbWFyZ2luLXRvcDogMTVweDsiPk5vdGU6IFNjYW5uZWQgdmVyc2lvbnMgYXJlIHByb3ZpZGVkIGZvciBwZXJzb25hbCBzcGlyaXR1YWwgc3R1ZHkuPC9wPg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0Pg0KDQogICAgICAgIC8vIC0tLSBHT09HTEUgRFJJVkUgQVJDSElWRSBMT0dJQyAtLS0NCiAgICAgICAgLy8gUkVQTEFDRSAnWU9VUl9BUFBTX1NDUklQVF9VUkwnIHdpdGggdGhlIG9uZSB5b3UgZ2V0IGZyb20gR29vZ2xlIFNjcmlwdCBEZXBsb3ltZW50DQogICAgICAgIGNvbnN0IEFSQ0hJVkVfQlJJREdFX1VSTCA9ICJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYndxMXdOTDd4ZlJLWnFTcDFjNVVHR2hlbmJfSWwyWFlDc2NHUHNwa04wQXp4UXJfbFd5SWdqSkgtR2ZjSTdMdVZqSmZBL2V4ZWMiOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRNTVBUQXJjaGl2ZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmlwdHVyZV9kcm9wZG93bicpOw0KICAgICAgICAgICAgaWYgKCFkcm9wZG93bikgcmV0dXJuOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vICdyZWRpcmVjdDogZm9sbG93JyBpcyByZXF1aXJlZCBmb3IgR29vZ2xlIEFwcHMgU2NyaXB0IFdlYiBBcHBzDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChBUkNISVZFX0JSSURHRV9VUkwsIHsgcmVkaXJlY3Q6ICJmb2xsb3ciIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KDQogICAgICAgICAgICAgICAgZHJvcGRvd24uaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IGEgU2NyaXB0dXJlIC0tPC9vcHRpb24+JzsNCg0KICAgICAgICAgICAgICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPk5vIGZpbGVzIGZvdW5kIGluIGZvbGRlcjwvb3B0aW9uPic7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIC8vb3B0LnZhbHVlID0gYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9leHBvcnQ9ZG93bmxvYWQmaWQ9JHtmaWxlLmlkfWA7DQogICAgICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdS8wL3VjP2lkPSR7ZmlsZS5pZH0mZXhwb3J0PWRvd25sb2FkYDsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gZmlsZS5uYW1lOw0KICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQXJjaGl2ZSBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPkFyY2hpdmUgT2ZmbGluZSAoQ2hlY2sgVVJMKTwvb3B0aW9uPic7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUFyY2hpdmVEb3dubG9hZCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JpcHR1cmVfZHJvcGRvd24nKS52YWx1ZTsNCiAgICAgICAgICAgIGlmICghdXJsKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlBsZWFzZSBzZWxlY3QgYSBzY3JpcHR1cmUgdGl0bGUgZmlyc3QuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBGaWxlIElEIGZyb20gdGhlIFVSTA0KICAgICAgICAgICAgY29uc3QgZmlsZUlkID0gdXJsLnNwbGl0KCdpZD0nKVsxXTsNCg0KICAgICAgICAgICAgLy8gV2UgdXNlIGEgImJ5cGFzcyIgVVJMIHN0cnVjdHVyZS4NCiAgICAgICAgICAgIC8vIFRoaXMgdGVsbHMgR29vZ2xlIHRvIHNraXAgdGhlIGNvbmZpcm1hdGlvbiBwYWdlIGJ5IHByZS1jb25maXJtaW5nIHRoZSBkb3dubG9hZC4NCiAgICAgICAgICAgIGNvbnN0IGZvcmNlRG93bmxvYWRVcmwgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL3VjP2V4cG9ydD1kb3dubG9hZCZpZD0ke2ZpbGVJZH0mY29uZmlybT10YDsNCg0KICAgICAgICAgICAgd2luZG93Lm9wZW4oZm9yY2VEb3dubG9hZFVybCwgJ19ibGFuaycpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBBZGQgdGhpcyB0byB5b3VyIGV4aXN0aW5nIHdpbmRvdy5sb2FkIGxpc3RlbmVyIG9yIGNyZWF0ZSBhIG5ldyBvbmU6DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgaW5pdE1NUFRBcmNoaXZlKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxkaXYgY2xhc3M9Im1tcHQtdW5pZmllZC1ib3giIGlkPSJhdWRpb19hcmNoaXZlX3NlY3Rpb24iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJhcmNoaXZlLWhlYWRlciI+DQogICAgICAgICAgICDwn46nIEF1ZGlvIEJvb2tzIEZyb20gTU1QVCBBcmNoaXZlcw0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZ2FwOiAxNXB4OyBhbGlnbi1pdGVtczogZmxleC1lbmQ7IGZsZXgtd3JhcDogd3JhcDsgbWFyZ2luOiAyMHB4IDA7Ij4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNXB4OyI+Qm9vazwvbGFiZWw+DQogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXVkaW9fYm9va19kcm9wZG93biIgb25jaGFuZ2U9ImxvYWRBdWRpb0NoYXB0ZXJzKCkiIHN0eWxlPSJtaW4td2lkdGg6IDIyMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogNXB4OyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQm9vayAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNXB4OyI+Q2hhcHRlcjwvbGFiZWw+DQogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXVkaW9fY2hhcHRlcl9kcm9wZG93biIgZGlzYWJsZWQgb25jaGFuZ2U9InVwZGF0ZUF1ZGlvVUkoKSIgc3R5bGU9Im1pbi13aWR0aDogMzAwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogNHB4OyBwYWRkaW5nOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBDaGFwdGVyIC0tPC9vcHRpb24+DQogICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA4cHg7Ij4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fYXVkaW9fcGxheSIgZGlzYWJsZWQgb25jbGljaz0icGxheUF1ZGlvQm9vaygpIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iYmFja2dyb3VuZDogIzI4YTc0NTsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDAgMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7Ij7ilrYgUGxheTwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9hdWRpb19zdG9wIiBkaXNhYmxlZCBvbmNsaWNrPSJzdG9wQXVkaW9Cb29rKCkiIGNsYXNzPSJidG4tcm4iIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZDMyZjJmOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMCAyMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsiPuKWoCBTdG9wPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0iYXVkaW9fcGxheWVyX2NvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiByZWxhdGl2ZTsgbWFyZ2luOiAxMHB4IGF1dG87IGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYmFja2dyb3VuZDogIzAwMDsgaGVpZ2h0OiA4NXB4OyBtYXgtd2lkdGg6IDkwMHB4OyI+DQogICAgICAgICAgICA8ZGl2IGlkPSJwbGF5X2luc3RydWN0aW9uIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMTAwJTsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogI2ZmOTkzMzsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTRweDsgdG9wOiAxMHB4OyB6LWluZGV4OiA1OyBwb2ludGVyLWV2ZW50czogbm9uZTsiPg0KICAgICAgICAgICAgICAgIENsaWNrIFBsYXkgb24gdGhlIHBsYXllciBiZWxvdyB0byBzdGFydA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8aWZyYW1lIGlkPSJnb29nbGVfYXVkaW9faWZyYW1lIiBzcmM9IiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTYwIiBmcmFtZWJvcmRlcj0iMCIgc3R5bGU9Im1hcmdpbi10b3A6IC0zNXB4OyI+PC9pZnJhbWU+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9ImF1ZGlvX3N0YXR1cyIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM4MDAwMDA7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tdG9wOiAxMHB4OyI+Q29ubmVjdGluZyB0byBBcmNoaXZlLi4uPC9kaXY+DQogICAgPC9kaXY+DQoNCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIFNjcmlwdCBsb2dpYyByZW1haW5zIHRoZSBzYW1lIChyZXN0b3JlcyB0aGUgY29ubmVjdGluZyBtZXNzYWdlKQ0KICAgICAgICBjb25zdCBHT09HTEVfQVVESU9fVVJMID0gImh0dHBzOi8vc2NyaXB0Lmdvb2dsZS5jb20vbWFjcm9zL3MvQUtmeWNieEdJMkFnd2RzZ3FaLXFGWEV4bU1NWUV5TzRLX2FGbS03SDNBU25sZEtmQVR4VDhHLUdfc2J1SG9LNDB0cXVfYmMtL2V4ZWMiOw0KICAgICAgICBsZXQgYXVkaW9MaWJEYXRhID0gW107DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaW5pdEF1ZGlvQXJjaGl2ZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19zdGF0dXMnKTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChHT09HTEVfQVVESU9fVVJMKTsNCiAgICAgICAgICAgICAgICBhdWRpb0xpYkRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYm9va1NlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19ib29rX2Ryb3Bkb3duJyk7DQogICAgICAgICAgICAgICAgYm9va1NlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQm9vayAtLTwvb3B0aW9uPic7DQogICAgICAgICAgICAgICAgYXVkaW9MaWJEYXRhLmZvckVhY2goKGl0ZW0sIGlkeCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGlkeDsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gaXRlbS5ib29rTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgYm9va1NlbC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHN0YXR1cy5pbm5lclRleHQgPSAiQXJjaGl2ZSBSZWFkeS4iOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIHN0YXR1cy5pbm5lclRleHQgPSAiQXJjaGl2ZSBjb25uZWN0aW9uIGVycm9yLiI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpbml0QXVkaW9BcmNoaXZlKCk7DQoNCiAgICAgICAgZnVuY3Rpb24gbG9hZEF1ZGlvQ2hhcHRlcnMoKSB7DQogICAgICAgICAgICBjb25zdCBpZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fYm9va19kcm9wZG93bicpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgY2hhcFNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19jaGFwdGVyX2Ryb3Bkb3duJyk7DQogICAgICAgICAgICBzdG9wQXVkaW9Cb29rKCk7DQogICAgICAgICAgICBjaGFwU2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBDaGFwdGVyIC0tPC9vcHRpb24+JzsNCiAgICAgICAgICAgIGlmIChpZHggPT09ICIiKSB7IGNoYXBTZWwuZGlzYWJsZWQgPSB0cnVlOyByZXR1cm47IH0NCiAgICAgICAgICAgIGF1ZGlvTGliRGF0YVtpZHhdLmNoYXB0ZXJzLmZvckVhY2goZmlsZSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGZpbGUuaWQ7DQogICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gZmlsZS5uYW1lLnJlcGxhY2UoL1wuW14vLl0rJC8sICIiKTsNCiAgICAgICAgICAgICAgICBjaGFwU2VsLmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGNoYXBTZWwuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUF1ZGlvVUkoKSB7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3BsYXknKS5kaXNhYmxlZCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpLnZhbHVlID09PSAiIik7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBwbGF5QXVkaW9Cb29rKCkgew0KICAgICAgICAgICAgY29uc3QgZmlsZUlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2NoYXB0ZXJfZHJvcGRvd24nKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19wbGF5ZXJfY29udGFpbmVyJyk7DQogICAgICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZ2xlX2F1ZGlvX2lmcmFtZScpOw0KICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX3N0YXR1cycpOw0KICAgICAgICAgICAgaWYgKCFmaWxlSWQpIHJldHVybjsNCiAgICAgICAgICAgIGlmcmFtZS5zcmMgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL2ZpbGUvZC8ke2ZpbGVJZH0vcHJldmlld2A7DQogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3BsYXknKS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3N0b3AnKS5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgc3RhdHVzLmlubmVyVGV4dCA9ICJTdHJlYW1pbmc6ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpLnNlbGVjdGVkT3B0aW9uc1swXS50ZXh0Ow0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gc3RvcEF1ZGlvQm9vaygpIHsNCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19wbGF5ZXJfY29udGFpbmVyJyk7DQogICAgICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZ2xlX2F1ZGlvX2lmcmFtZScpOw0KICAgICAgICAgICAgaWZyYW1lLnNyYyA9ICIiOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2F1ZGlvX3N0b3AnKS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fc3RhdHVzJykuaW5uZXJUZXh0ID0gIkFyY2hpdmUgUmVhZHkuIjsNCiAgICAgICAgICAgIHVwZGF0ZUF1ZGlvVUkoKTsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPGRpdiBpZD0idmlkZW8tYXJjaGl2ZS1ib3giIGNsYXNzPSJtbXB0LXVuaWZpZWQtYm94IiBzdHlsZT0iZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyB3aWR0aDogMTAwJTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsgcGFkZGluZzogMjVweDsgYm9yZGVyLXJhZGl1czogMTJweDsgYmFja2dyb3VuZDogI2ZmZjsgbWFyZ2luOiAxNXB4IDA7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyI+DQoNCiAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjogIzgwMDAwMDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDI0cHg7IG1hcmdpbi10b3A6IDA7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij4NCiAgICAgICAgICAgIPCfjqwgVmlkZW9zIEZyb20gTU1QVCBBcmNoaXZlcw0KICAgICAgICA8L2gyPg0KDQogICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICMwMDA7IGZvbnQtc2l6ZTogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOiAxNXB4OyBsaW5lLWhlaWdodDogMS42OyI+DQogICAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJjb2xvcjogIzgwMDAwMDsgZm9udC1zaXplOiAxN3B4OyI+Tm90ZTo8L3N0cm9uZz4NCiAgICAgICAgICAgIDxzdHJvbmcgc3R5bGU9InRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogOTAwOyBmb250LXNpemU6IDE2cHg7Ij5TZWxlY3QgdGhlIHJlcXVpcmVkIGVwaXNvZGUgZnJvbSB0aGUgcGxheWxpc3QgaWNvbiBhdCB0aGUgdG9wLXJpZ2h0IGNvcm5lciBvZiB0aGUgdmlkZW8gd2luZG93Ljwvc3Ryb25nPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDIwcHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDE1cHg7IGZsZXgtd3JhcDogd3JhcDsiPg0KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGZvbnQtc2l6ZTogMTZweDsiPlRvcGljOjwvbGFiZWw+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJ0b3BpY19zZWxlY3QiIG9uY2hhbmdlPSJQcmVwYXJlVmlkZW8oKSIgc3R5bGU9IndpZHRoOiAzMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOyBib3JkZXItcmFkaXVzOiA1cHg7IHBhZGRpbmc6IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJhY2tncm91bmQ6ICNmZmY7Ij4NCiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIExvYWRpbmcgQXJjaGl2ZSAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IkxhdW5jaElmcmFtZSgpIiBzdHlsZT0iYmFja2dyb3VuZDogIzI4YTc0NTsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEwcHggMzBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE1cHg7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7Ij7ilrYgUGxheTwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuX3N0b3AiIG9uY2xpY2s9IlN0b3BJZnJhbWUoKSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IGJhY2tncm91bmQ6ICNkYzM1NDU7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMHB4IDMwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNXB4OyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOyI+4pyWIFN0b3A8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0iRGl2VmlkVGl0bGUxIiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMjBweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBtaW4taGVpZ2h0OiAyNnB4OyI+UmVhZHkuPC9kaXY+DQogICAgICAgIDxkaXYgaWQ9IkRpdlRpbWVyIiBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBjb2xvcjogYmx1ZTsgdGV4dC1hbGlnbjogY2VudGVyOyBoZWlnaHQ6IDIwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyI+PC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0idmlkX2NvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IG1hcmdpbjogMjBweCBhdXRvIDAgYXV0bzsgd2lkdGg6IDEwMCU7IG1heC13aWR0aDogNTYwcHg7IGFzcGVjdC1yYXRpbzogMTYvOTsgYmFja2dyb3VuZDogIzAwMDsgYm9yZGVyOiA0cHggc29saWQgIzgwMDAwMDsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDZweCAxOHB4IHJnYmEoMCwwLDAsMC4zKTsiPg0KICAgICAgICAgICAgPGlmcmFtZSBpZD0iaWZyX21haW4iIG5hbWU9Imlmcl9tYWluIiBzcmM9ImFib3V0OmJsYW5rIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmcmFtZWJvcmRlcj0iMCINCiAgICAgICAgICAgICAgICAgICAgYWxsb3c9ImFjY2VsZXJvbWV0ZXI7IGF1dG9wbGF5OyBjbGlwYm9hcmQtd3JpdGU7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmU7IHdlYi1zaGFyZSINCiAgICAgICAgICAgICAgICAgICAgcmVmZXJyZXJwb2xpY3k9InN0cmljdC1vcmlnaW4td2hlbi1jcm9zcy1vcmlnaW4iIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICB2YXIgVGFyZ2V0VXJsID0gIiI7DQogICAgICAgIHZhciBhcmNoaXZlRGF0YSA9IFtdOw0KICAgICAgICBjb25zdCBpZnIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWZyX21haW4nKTsNCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZF9jb250YWluZXInKTsNCiAgICAgICAgY29uc3Qgc3RvcEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fc3RvcCcpOw0KICAgICAgICBjb25zdCBEQVRBX1NPVVJDRSA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2pra2JzYmh6ZGRqd3JqbnpzODBmdS9WaWRlb3MudHh0P3Jsa2V5PXM0dWNoaXA0b3RidG40dzg3dzh4OXpoa2omZGw9MSI7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gTG9hZEFyY2hpdmUoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goREFUQV9TT1VSQ0UpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTE2bGUnKS5kZWNvZGUoYnVmZmVyKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQucmVwbGFjZSgvXlx1RkVGRi8sICcnKS5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCcsJykpOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcGljX3NlbGVjdCcpOw0KICAgICAgICAgICAgICAgIHNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBDaG9vc2UgYSBUb3BpYyAtLTwvb3B0aW9uPic7DQoNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnLCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmdWxsVXJsID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0SWQgPSBmdWxsVXJsLm1hdGNoKC9bPyZdbGlzdD0oW14mXSspLyk/LlsxXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lUb2tlbiA9IGZ1bGxVcmwubWF0Y2goL1s/Jl1zaT0oW14mXSspLyk/LlsxXSB8fCAiVnkzRndVanRTdGZROFg2cCI7DQoNCiAgICAgICAgICAgICAgICAgICAgYXJjaGl2ZURhdGEucHVzaCh7IG5hbWU6IHBhcnRzWzBdLnRyaW0oKSwgaWQ6IGxpc3RJZCwgc2k6IHNpVG9rZW4gfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBpOyBvcHQudGV4dENvbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIHNlbC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZWaWRUaXRsZTEnKS5pbm5lclRleHQgPSAiRGF0YSBMb2FkIEVycm9yIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIFByZXBhcmVWaWRlbygpIHsNCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3BpY19zZWxlY3QnKS52YWx1ZTsNCiAgICAgICAgICAgIGlmIChpZHggPT09ICIiKSB7IFRhcmdldFVybCA9ICIiOyByZXR1cm47IH0NCiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBhcmNoaXZlRGF0YVtpZHhdOw0KICAgICAgICAgICAgVGFyZ2V0VXJsID0gImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL3ZpZGVvc2VyaWVzP3NpPSIgKyBpdGVtLnNpICsgIiZsaXN0PSIgKyBpdGVtLmlkICsgIiZhdXRvcGxheT0xIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZWaWRUaXRsZTEnKS5pbm5lclRleHQgPSBpdGVtLm5hbWU7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBMYXVuY2hJZnJhbWUoKSB7DQogICAgICAgICAgICBpZiAoVGFyZ2V0VXJsID09PSAiIikgeyBhbGVydCgiUGxlYXNlIHNlbGVjdCBhIHRvcGljIik7IHJldHVybjsgfQ0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgc3RvcEJ0bi5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7DQogICAgICAgICAgICBpZnIuc3JjID0gImFib3V0OmJsYW5rIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICJFc3RhYmxpc2hpbmcgQ29ubmVjdGlvbi4uLiI7DQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBpZnIuc3JjID0gVGFyZ2V0VXJsOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICIiOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBTdG9wSWZyYW1lKCkgew0KICAgICAgICAgICAgaWZyLnNyYyA9ICJhYm91dDpibGFuayI7DQogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIHN0b3BCdG4uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICJQbGF5ZXIgU3RvcHBlZC4iOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdEaXZUaW1lcicpLmlubmVyVGV4dCA9ICIiOyB9LCAyMDAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIExvYWRBcmNoaXZlKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8ZGl2IGNsYXNzPSJtbXB0LXVuaWZpZWQtYm94IiBpZD0icGFuY2hhbmdfc2VjdGlvbiIgc3R5bGU9ImJvcmRlci1jb2xvcjogI2ZmOTkzMzsiPg0KICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDI0cHg7IGNvbG9yOiAjODAwMDAwOyBmb250LWZhbWlseTogJ0dlb3JnaWEnLCBzZXJpZjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDIwcHg7Ij4NCiAgICAgICAgICAgIPCflYnvuI8gVG9kYXkncyBQYW5jaGFuZw0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJwYW5jaGFuZ19jb250ZW50Ij4NCiAgICAgICAgICAgIDxkaXYgaWQ9InBhbmNoYW5nX2xvYWRpbmciIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM2NjY7Ij5GZXRjaGluZyBBbG1hbmFjLi4uPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgaWQ9InBhbmNoYW5nX2Rpc3BsYXkiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJkYXRlLXRhYmxlIiBzdHlsZT0ibWFyZ2luOiAwIGF1dG8gMjBweCBhdXRvOyBtYXgtd2lkdGg6IDYwMHB4OyBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOyI+DQogICAgICAgICAgICAgICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggaWQ9InBhbl9oZWFkZXJfZGF0ZSIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICM4MDAwMDA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgZm9udC1zaXplOiAxOHB4OyI+PC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+DQogICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjgwcHgsIDFmcikpOyBnYXA6IDE1cHg7IHRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjEuIFRJVEhJPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgaWQ9InRhYmxlX3RpdGhpIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjIuIE5BS1NIQVRSQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV9uYWtzaGF0cmEiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6IDEzcHg7Ij48L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+My4gWU9HQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV95b2dhIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjQuIEtBUkFOQTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV9rYXJhbmEiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6IDEzcHg7Ij48L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+NS4gVkFSQSAoRGF5KTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZGlzcGxheV92YXJhIiBzdHlsZT0iZm9udC1zaXplOiAxNnB4OyBmb250LXdlaWdodDogYm9sZDsgcGFkZGluZzogNXB4OyI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBFbnN1cmUgdGhpcyBpcyBhdCB0aGUgdG9wIG9mIHlvdXIgc2NyaXB0DQogICAgICAgIGNvbnN0IFBBTkNIQU5HX0JBU0UgPSAnL1BhbmNoYW5nJzsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRGFpbHlQYW5jaGFuZygpIHsNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCB5eXl5ID0gbm93LmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICBjb25zdCBtbSA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCBkZCA9IFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgY29uc3QgdG9kYXlJU08gPSBgJHt5eXl5fS0ke21tfS0ke2RkfWA7DQoNCiAgICAgICAgICAgIGNvbnN0IGRhaWx5UGF0aCA9IGAke1BBTkNIQU5HX0JBU0V9LyR7eXl5eX0vJHttbX0vJHt5eXl5fSR7bW19JHtkZH0uaHRtbGA7DQoNCiAgICAgICAgICAgIGNvbnN0IGthYWxhVGltaW5ncyA9IHsNCiAgICAgICAgICAgICAgICAnU3VuZGF5JzogeyByYWh1OiAnNDozMCBwbSB0byA2OjAwIHBtJywgZ3VsaWthOiAnMzowMCBwbSB0byA0OjMwIHBtJywgeWFtOiAnMTI6MDAgcG0gdG8gMTozMCBwbScgfSwNCiAgICAgICAgICAgICAgICAnTW9uZGF5JzogeyByYWh1OiAnNzozMCBhbSB0byA5OjAwIGFtJywgZ3VsaWthOiAnMTozMCBwbSB0byAzOjAwIHBtJywgeWFtOiAnMTA6MzAgYW0gdG8gMTI6MDAgcG0nIH0sDQogICAgICAgICAgICAgICAgJ1R1ZXNkYXknOiB7IHJhaHU6ICczOjAwIHBtIHRvIDQ6MzAgcG0nLCBndWxpa2E6ICcxMjowMCBwbSB0byAxOjMwIHBtJywgeWFtOiAnOTowMCBhbSB0byAxMDozMCBhbScgfSwNCiAgICAgICAgICAgICAgICAnV2VkbmVzZGF5JzogeyByYWh1OiAnMTI6MDAgcG0gdG8gMTozMCBwbScsIGd1bGlrYTogJzEwOjMwIGFtIHRvIDEyOjAwIHBtJywgeWFtOiAnNzozMCBhbSB0byA5OjAwIGFtJyB9LA0KICAgICAgICAgICAgICAgICdUaHVyc2RheSc6IHsgcmFodTogJzE6MzAgcG0gdG8gMzowMCBwbScsIGd1bGlrYTogJzk6MDAgYW0gdG8gMTA6MzAgYW0nLCB5YW06ICc2OjAwIGFtIHRvIDc6MzAgYW0nIH0sDQogICAgICAgICAgICAgICAgJ0ZyaWRheSc6IHsgcmFodTogJzEwOjMwIGFtIHRvIDEyOjAwIHBtJywgZ3VsaWthOiAnNzozMCBhbSB0byA5OjAwIGFtJywgeWFtOiAnMzowMCBwbSB0byA0OjMwIHBtJyB9LA0KICAgICAgICAgICAgICAgICdTYXR1cmRheSc6IHsgcmFodTogJzk6MDAgYW0gdG8gMTA6MzAgYW0nLCBndWxpa2E6ICc2OjAwIGFtIHRvIDc6MzAgYW0nLCB5YW06ICcxOjMwIHBtIHRvIDM6MDAgcG0nIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggU3VucmlzZS9TdW5zZXQgZm9yIENoZW5uYWkgZnJvbSBPcGVuLU1ldGVvIEFQSQ0KICAgICAgICAgICAgICAgIGxldCBzdW5JbmZvID0gIkxvYWRpbmcgdGltZXMuLi4iOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1blJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5vcGVuLW1ldGVvLmNvbS92MS9mb3JlY2FzdD9sYXRpdHVkZT0xMy4wODI3JmxvbmdpdHVkZT04MC4yNzA3JmRhaWx5PXN1bnJpc2Usc3Vuc2V0JnRpbWV6b25lPWF1dG8mc3RhcnRfZGF0ZT0ke3RvZGF5SVNPfSZlbmRfZGF0ZT0ke3RvZGF5SVNPfWApOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW5EYXRhID0gYXdhaXQgc3VuUmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0VGltZSA9ICh0KSA9PiBuZXcgRGF0ZSh0KS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLUlOJywgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnLCBob3VyMTI6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgICAgIHN1bkluZm8gPSBgU3VucmlzZSBpcyBhdCA8Yj4ke2Zvcm1hdFRpbWUoc3VuRGF0YS5kYWlseS5zdW5yaXNlWzBdKX08L2I+IGFuZCBTdW5zZXQgaXMgYXQgPGI+JHtmb3JtYXRUaW1lKHN1bkRhdGEuZGFpbHkuc3Vuc2V0WzBdKX08L2I+YDsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgc3VuSW5mbyA9ICJTdW5yaXNlIGFuZCBTdW5zZXQgZGF0YSBjdXJyZW50bHkgdW5hdmFpbGFibGUiOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDIuIERyb3Bib3ggRmV0Y2ggTG9naWMNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5SZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogdG9rZW5QYXJhbXMgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdG9rZW5SZXMuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gdG9rZW5EYXRhLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBkYWlseVBhdGggfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKCJTeW5jaW5nLi4uIik7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3RGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHJhd0RhdGEuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSk7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gQ09NUEFDVCBIRUFERVIgKE5PIElDT04pIC0tLQ0KICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5faGVhZGVyX2RhdGUnKTsNCiAgICAgICAgICAgICAgICBjb25zdCB2YXJhTmFtZSA9IHBhcnRzWzFdID8gcGFydHNbMV0uc3BsaXQoJzonKVswXS50cmltKCkgOiAiIjsNCg0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kID0gImxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4MDAwMDAgMCUsICM0YTAwMDAgMTAwJSkiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gIjE1cHgiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiMTBweCAxMHB4IDAgMCI7DQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLnRleHRBbGlnbiA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5ib3JkZXJCb3R0b20gPSAiM3B4IHNvbGlkICNGRkQ3MDAiOw0KDQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGJhc2VsaW5lOyBnYXA6IDE1cHg7IG1hcmdpbi1ib3R0b206IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC1zaXplOiAyNnB4OyBmb250LXdlaWdodDogODAwOyBjb2xvcjogI0ZGRDcwMDsgdGV4dC1zaGFkb3c6IDJweCAycHggNHB4IHJnYmEoMCwwLDAsMC41KTsiPiR7cGFydHNbMF19PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC1zaXplOiAyMHB4OyBmb250LXdlaWdodDogNjAwOyBjb2xvcjogI0ZGRkZGRjsgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjRkZENzAwOyBwYWRkaW5nLWxlZnQ6IDE1cHg7Ij4ke3ZhcmFOYW1lfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDJweCAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBib3JkZXItcmFkaXVzOiAyMHB4OyBmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRDcwMDsgbGV0dGVyLXNwYWNpbmc6IDAuNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRJTUUgU1BFQ0lGSUVEIEFSRSBFTkQgVElNRSBJTiBJU1QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gVEFCTEVTIFBPUFVMQVRJT04gLS0tDQogICAgICAgICAgICAgICAgY29uc3QgZmlsbFRhYmxlID0gKGlkLCBzdGFydCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0YmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghdGJsKSByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIHRibC5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYyA9IHBhcnRzW3N0YXJ0ICsgaV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjICYmIHJlYy5pbmNsdWRlcygnOicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHJlYy5zdWJzdHJpbmcoMCwgcmVjLmluZGV4T2YoJzonKSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSByZWMuc3Vic3RyaW5nKHJlYy5pbmRleE9mKCc6JykgKyAxKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICIiICYmICh0aW1lID09PSAiIiB8fCB0aW1lID09PSAiLS06LS0iKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJvdyA9IHRibC5pbnNlcnRSb3coKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuaW5uZXJIVE1MID0gYDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6NzAwOyBwYWRkaW5nOjZweCA0cHg7IGNvbG9yOiMzMzM7IGZvbnQtc2l6ZToxNHB4OyB3aWR0aDo2NSU7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4ke25hbWV9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBwYWRkaW5nOjZweCA0cHg7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4ke3RpbWV9PC90ZD5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGZpbGxUYWJsZSgndGFibGVfdGl0aGknLCAzKTsNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX25ha3NoYXRyYScsIDcpOw0KICAgICAgICAgICAgICAgIGZpbGxUYWJsZSgndGFibGVfeW9nYScsIDExKTsNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX2thcmFuYScsIDE1KTsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5X3ZhcmEnKS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmZjljNDsgYm9yZGVyOiAycHggc29saWQgI0ZGRDcwMDsgcGFkZGluZzogOHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGNvbG9yOiAjODAwMDAwOyBmb250LXNpemU6IDIycHg7IGZvbnQtd2VpZ2h0OiA5MDA7IHRleHQtYWxpZ246IGNlbnRlcjsiPiR7dmFyYU5hbWV9PC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBISU5EVSBDQUxFTkRBUiAmIEtBQUxBUyAtLS0NCiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFBhcnRzID0gcGFydHMubGVuZ3RoOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbEx1bmFyID0gcGFydHNbdG90YWxQYXJ0cyAtIDJdIHx8ICctLSc7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsU29sYXIgPSBwYXJ0c1t0b3RhbFBhcnRzIC0gM10gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxNYWxheWFsYW0gPSBwYXJ0c1t0b3RhbFBhcnRzIC0gNF0gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxUYW1pbCA9IHBhcnRzW3RvdGFsUGFydHMgLSA1XSB8fCAnLS0nOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5S2FhbGEgPSBrYWFsYVRpbWluZ3NbdmFyYU5hbWVdIHx8IHsgcmFodTogJy0tJywgZ3VsaWthOiAnLS0nLCB5YW06ICctLScgfTsNCg0KICAgICAgICAgICAgICAgIGxldCBjYWxlbmRhckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaW5kdV9jYWxlbmRhcl9zZWN0aW9uJyk7DQogICAgICAgICAgICAgICAgaWYgKCFjYWxlbmRhckRpdikgew0KICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckRpdi5pZCA9ICdoaW5kdV9jYWxlbmRhcl9zZWN0aW9uJzsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbmNoYW5nX2Rpc3BsYXknKS5hcHBlbmRDaGlsZChjYWxlbmRhckRpdik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY2FsZW5kYXJEaXYuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICM4MDAwMDA7IGNvbG9yOiAjRkZENzAwOyBwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTZweDsgbWFyZ2luLXRvcDogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjRkZENzAwOyI+SGluZHUgQ2FsZW5kYXIgZm9yIFRvZGF5PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgYmFja2dyb3VuZDogI2ZmZmRlNzsgYm9yZGVyOiAxcHggc29saWQgI0ZGRDcwMDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+VGFtaWw8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxUYW1pbH08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPk1hbGF5YWxhbTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDo4MDA7Ij4ke3ZhbE1hbGF5YWxhbX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5Tb2xhcjwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDo4MDA7Ij4ke3ZhbFNvbGFyfTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+THVuYXI8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxMdW5hcn08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICM4MDAwMDA7IGNvbG9yOiAjRkZENzAwOyBwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTZweDsgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjRkZENzAwOyI+VG9kYXkncyBLYWFsYXM8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiAjZmZmZGU3OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBtYXJnaW4tYm90dG9tOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SYWh1IEthYWxhPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiNkMzJmMmY7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dG9kYXlLYWFsYS5yYWh1fTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPkd1bGlrYSBLYWFsYTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBmb250LXdlaWdodDo4MDA7Ij4ke3RvZGF5S2FhbGEuZ3VsaWthfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPllhbWFuZ2FkYTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBmb250LXdlaWdodDo4MDA7Ij4ke3RvZGF5S2FhbGEueWFtfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjNGEwMDAwLCAjODAwMDAwLCAjNGEwMDAwKTsgY29sb3I6ICNGRkQ3MDA7IHBhZGRpbmc6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGJvcmRlcjogMXB4IHNvbGlkICNGRkQ3MDA7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMik7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVG9kYXkgaW4gQ2hlbm5haTogJHtzdW5JbmZvfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5jaGFuZ19sb2FkaW5nJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuY2hhbmdfZGlzcGxheScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiU3luYyBGYWlsZWQiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gQ2FsbCBpdCBhdCB0aGUgdmVyeSBib3R0b20gb2YgeW91ciBzY3JpcHQgdGFncw0KICAgICAgICBsb2FkRGFpbHlQYW5jaGFuZygpOw0KDQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5sdW5hci1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci1oZWFkIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAvKiBNYXRjaGVzIHlvdXIgaDMgZm9udC1zaXplIGV4YWN0bHkgKi8NCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAubHVuYXItZmxleCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxMHB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLWl0ZW0gew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIC8qIEJyaWdodCBDb250cmFzdCBUaGVtZTogRGVlcCBOYXZ5IGJhY2tncm91bmQgd2l0aCBHb2xkL1doaXRlIHRleHQgKi8NCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDMzNjY7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMTJweCA0cHg7DQogICAgICAgICAgICBtaW4taGVpZ2h0OiA5MHB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC41KTsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubHVuYXItaXRlbSBiIHsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICAgICAgY29sb3I6ICNmMGFkNGU7IC8qIEJyaWdodCBHb2xkIGZvciBIZWFkZXIgKi8NCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAubHVuYXItdGV4dCB7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOyAvKiBIaWdoIENvbnRyYXN0IFdoaXRlICovDQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLXRpbWUgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgY29sb3I6ICMwMGZmZmY7IC8qIEN5YW4gZm9yIFRpbWluZ3MgdG8gc3RhbmQgb3V0ICovDQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0ibHVuYXItc2VjdGlvbiI+DQogICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWhlYWQiPvCfjJkgSGluZHUgTHVuYXIgQ2FsZW5kYXI8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItZmxleCI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1pdGVtIj4NCiAgICAgICAgICAgICAgICA8Yj5BbWF2YXN5YTwvYj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsbi0wMSIgY2xhc3M9Imx1bmFyLXRleHQiPlN5bmNpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItaXRlbSI+DQogICAgICAgICAgICAgICAgPGI+UGF1cm5pbWE8L2I+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG4tMDIiIGNsYXNzPSJsdW5hci10ZXh0Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWl0ZW0iPg0KICAgICAgICAgICAgICAgIDxiPkdyYWhhbmE8L2I+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG4tMDMiIGNsYXNzPSJsdW5hci10ZXh0Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkSGluZHVMdW5hcigpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgbm93LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0cyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2xuLTAxJywgZmlsZTogJy9QYW5jaGFuZy9IaW5kdUx1bmFyQ2FsZW5kYXIvMC4xLmh0bWwnLCB0eXBlOiAnZG91YmxlJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnbG4tMDInLCBmaWxlOiAnL1BhbmNoYW5nL0hpbmR1THVuYXJDYWxlbmRhci8wLjIuaHRtbCcsIHR5cGU6ICdkb3VibGUnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdsbi0wMycsIGZpbGU6ICcvUGFuY2hhbmcvSGluZHVMdW5hckNhbGVuZGFyLzAuMy5odG1sJywgdHlwZTogJ3NpbmdsZScgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHggb2YgdGFyZ2V0cykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiB4LmZpbGUgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaCA9IGF3YWl0IHJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU3RyaXAgdGFncyBidXQga2VlcCBzdHJ1Y3R1cmFsIHNlcGFyYXRpb24NCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5UZXh0ID0gaC5yZXBsYWNlKC88W14+XSo+L2csICd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBjbGVhblRleHQuc3BsaXQoJ3wnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcyAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBvdXQgPSAiTm8gVXBjb21pbmciOw0KDQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93c1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSByb3cubWF0Y2goLyhcZHsyfSlbLS86XShcZHsyfXxbYS16QS1aXSspWy0vOl0oXGR7NH0pLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR0Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihtWzJdKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdCA9IG5ldyBEYXRlKG1bMV0gKyAiICIgKyBtWzJdICsgIiAiICsgbVszXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHQgPSBuZXcgRGF0ZShgJHttWzNdfS0ke21bMl19LSR7bVsxXX1gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHQgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4LnR5cGUgPT09ICdkb3VibGUnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQgPSBgPHNwYW4+JHtyb3d9PC9zcGFuPjxzcGFuIGNsYXNzPSJsdW5hci10aW1lIj4ke3Jvd3NbaSArIDFdIHx8ICcnfTwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ID0gYDxzcGFuPiR7cm93fTwvc3Bhbj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh4LmlkKS5pbm5lckhUTUwgPSBvdXQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiTHVuYXIgRXJyb3IiLCBlKTsgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWRIaW5kdUx1bmFyKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5uYXYtc2VjdGlvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LW1haW4taGVhZCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4OyAvKiBTbGlnaHRseSBsYXJnZXIgZm9yIHRoZSBpY29uICovDQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggZG91YmxlICM4MDAwMDA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtZ3JpZCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiA4cHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWNvbCB7DQogICAgICAgICAgICBmbGV4OiAxOw0KICAgICAgICAgICAgbWluLXdpZHRoOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1jb2wtdGl0bGUgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7DQogICAgICAgICAgICBoZWlnaHQ6IDQycHg7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctc2h5YW1hbGEgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzRiMDA4MjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5iZy1jaGFpdHJhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNiMjIyMjI7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctYXNhZGhhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDY0MDA7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctc2hhcmFkaGEgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmOGMwMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY5ZjA7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDRweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWJveCAuZC1kYXRlIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzcHg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5uYXYtYm94IC5kLWRheSB7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDAwZmY7DQogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1mb290ZXIgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxMnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuZXZlbnQtcGlsbCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmNGZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzAwMzM2NjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMThweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDgwMHB4KSB7DQogICAgICAgICAgICAubmF2LWdyaWQgew0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOw0KICAgICAgICAgICAgICAgIGdhcDogMTBweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJuYXYtc2VjdGlvbiI+DQogICAgICAgIDxkaXYgaWQ9Im5hdi15ZWFyLXRpdGxlIiBjbGFzcz0ibmF2LW1haW4taGVhZCI+8J+qtyBOYXZhcmF0aHJpPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWdyaWQiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1zaHlhbWFsYSI+U2h5YW1hbGE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1zaHlhbWFsYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wtdGl0bGUgYmctY2hhaXRyYSI+Q2hhaXRyYTxicj5OYXZhcmF0aHJpPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iY29sLWNoYWl0cmEiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sLXRpdGxlIGJnLWFzYWRoYSI+QXNhZGhhPGJyPk5hdmFyYXRocmk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb2wtYXNhZGhhIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1zaGFyYWRoYSI+U2hhcmFkaGE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1zaGFyYWRoYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWZvb3RlciI+DQogICAgICAgICAgICA8ZGl2IGlkPSJldi12YXNhbnRoYSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LWF5dWRoYSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LXZpamF5YSIgY2xhc3M9ImV2ZW50LXBpbGwiPkxvYWRpbmcuLi48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkTmF2YXJhdGhyaSgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjdXJZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdi15ZWFyLXRpdGxlJykuaW5uZXJIVE1MID0gYPCfqrcgTmF2YXJhdGhyaSAtICR7Y3VyWWVhcn1gOw0KDQogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0TmF2TGluZXMocGF0aCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBwYXRoIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eHQucmVwbGFjZSgvPGJyXHMqXC8/Pi9naSwgJ1xuJykucmVwbGFjZSgvPFtePl0qPi9nLCAnJykuc3BsaXQoJ1xuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMubGVuZ3RoID4gNSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgY29uZmlncyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1zaHlhbWFsYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjIuaHRtbCcgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1jaGFpdHJhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpLzAuMy5odG1sJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29sLWFzYWRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjQuaHRtbCcgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1zaGFyYWRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjEuaHRtbCcgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbmYgb2YgY29uZmlncykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGF3YWl0IGdldE5hdkxpbmVzKGNvbmYucGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBodG1sID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1tpXS5pbmNsdWRlcyhjdXJZZWFyKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9Im5hdi1ib3giPjxzcGFuIGNsYXNzPSJkLWRhdGUiPiR7bGluZXNbaV19PC9zcGFuPjxzcGFuIGNsYXNzPSJkLWRheSI+JHtsaW5lc1tpICsgMV0gfHwgJyd9PC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmYuaWQpLmlubmVySFRNTCA9IGh0bWwgfHwgIjxkaXYgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjEwcHg7IGZvbnQtc2l6ZToxMXB4Oyc+Tm8gRGF0YTwvZGl2PiI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZXZGaWxlcyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2V2LXZhc2FudGhhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpL0V2ZW50czIuaHRtbCcsIG1hdGNoOiAnVkFTQU5USEEgUEFOQ0hBTUknIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldi1heXVkaGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvRXZlbnRzMy5odG1sJywgbWF0Y2g6ICdBWVVESEEgUE9PSkEnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldi12aWpheWEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvRXZlbnRzNC5odG1sJywgbWF0Y2g6ICdWSUpBWUEgREFTQU1JJyB9DQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZXYgb2YgZXZGaWxlcykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBldi5wYXRoIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gdHh0LnJlcGxhY2UoL1xuL2csICcnKS5zcGxpdCgnLCcpLm1hcChzID0+IHMudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kRGF0ZSA9ICJOL0EiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydElkeCA9IHBhcnRzLmZpbmRJbmRleChwID0+IHAuaW5jbHVkZXMoZXYubWF0Y2gpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0SWR4ICE9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHN0YXJ0SWR4OyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHNbal0uaW5jbHVkZXMoY3VyWWVhcikpIHsgZm91bmREYXRlID0gcGFydHNbal07IGJyZWFrOyB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXYuaWQpLmlubmVySFRNTCA9IGA8Yj4ke2V2Lm1hdGNofTwvYj4gOiAke2ZvdW5kRGF0ZX1gOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWROYXZhcmF0aHJpKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5ndXJ1LXNlY3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtaGVhZCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7DQogICAgICAgICAgICBtYXJnaW46IDAgMCAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LWxpc3Qgew0KICAgICAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7DQogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOw0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtcm93LWl0ZW0gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMzM2NjsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgcGFkZGluZzogMTJweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQogICAgICAgICAgICBib3JkZXItbGVmdDogNnB4IHNvbGlkICNmMGFkNGU7DQogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtZGF0ZSB7DQogICAgICAgICAgICBjb2xvcjogI2YwYWQ0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzQxNWE3NzsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAzcHg7DQogICAgICAgIH0NCg0KICAgICAgICAuZ3VydS1ldmVudC1saW5lIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4Ow0KICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiA1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTdHlsZSBmb3IgdGhlIGR5bmFtaWMgR3VydSBMaW5rcyAqLw0KICAgICAgICAuZ3VydS1saW5rIHsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb24tY29sb3I6ICNmMGFkNGU7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmd1cnUtbGluazpob3ZlciB7DQogICAgICAgICAgICAgICAgY29sb3I6ICNmMGFkNGU7DQogICAgICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9Imd1cnUtc2VjdGlvbiI+DQogICAgICAgIDxkaXYgY2xhc3M9Imd1cnUtaGVhZCI+8J+Vie+4jyBHdXJ1IEFyYWRoYW5hcyBhbmQgSmF5YW50aGlzPC9kaXY+DQogICAgICAgIDxkaXYgaWQ9Imd1cnUtZXZlbnQtbGlzdCIgY2xhc3M9Imd1cnUtbGlzdCI+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoyMHB4OyBjb2xvcjojNjY2OyI+U3luY2luZy4uLjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBleHRyYWN0IDItZGlnaXQgbnVtYmVyIGFuZCBjcmVhdGUgdGhlIGxpbmsNCiAgICAgICAgZnVuY3Rpb24gd3JhcFdpdGhHdXJ1TGluayh0ZXh0KSB7DQogICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2goL1xkezJ9Lyk7DQogICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBtYXRjaFswXTsNCiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9teWxhaXBlcml5YXZhLmdpdGh1Yi5pby9BY2hhcnlhL0Eke251bX0uaHRtbGA7DQogICAgICAgICAgICAgICAgcmV0dXJuIGA8YSBocmVmPSIke3VybH0iIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iZ3VydS1saW5rIj4ke3RleHR9PC9hPmA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdGV4dDsNCiAgICAgICAgfQ0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRHdXJ1QXJhZGhhbmFzKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogcCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdCA9IGQuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBub3cuc2V0SG91cnMoMCwgMCwgMCwgMCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9QYW5jaGFuZy9HdXJ1L0V2ZW50cy5odG1sJyB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3VGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblRleHQgPSByYXdUZXh0LnJlcGxhY2UoLzxbXj5dKj4vZywgJ1xuJyk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjbGVhblRleHQuc3BsaXQoJ1xuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMubGVuZ3RoID4gMCk7DQoNCiAgICAgICAgICAgICAgICBsZXQgZ3JvdXBlZEV2ZW50cyA9IHt9Ow0KDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TGluZSA9IGxpbmVzW2ldOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gY3VycmVudExpbmUubWF0Y2goLyhcZHsyfSktKFxkezJ9KS0oXGR7NH0pLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKG0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50RGF0ZU9iaiA9IG5ldyBEYXRlKHBhcnNlSW50KG1bM10pLCBwYXJzZUludChtWzJdKSAtIDEsIHBhcnNlSW50KG1bMV0pKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50RGF0ZU9iaiA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gY3VycmVudExpbmU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsID0gbGluZXNbaSArIDFdIHx8ICIiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFncm91cGVkRXZlbnRzW2RhdGVTdHJdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwZWRFdmVudHNbZGF0ZVN0cl0gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBlZEV2ZW50c1tkYXRlU3RyXS5wdXNoKGRldGFpbCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgbGlzdEh0bWwgPSAiIjsNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgaW4gZ3JvdXBlZEV2ZW50cykgew0KICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgbGluayB3cmFwcGVyIHRvIGVhY2ggZXZlbnQgbGluZQ0KICAgICAgICAgICAgICAgICAgICBsZXQgZXZlbnRzSHRtbCA9IGdyb3VwZWRFdmVudHNbZGF0ZV0NCiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZXZ0ID0+IGA8c3BhbiBjbGFzcz0iZ3VydS1ldmVudC1saW5lIj7igKIgJHt3cmFwV2l0aEd1cnVMaW5rKGV2dCl9PC9zcGFuPmApDQogICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGlzdEh0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imd1cnUtcm93LWl0ZW0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZ3VydS1kYXRlIj4ke2RhdGV9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJndXJ1LWRldGFpbCI+JHtldmVudHNIdG1sfTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d1cnUtZXZlbnQtbGlzdCcpLmlubmVySFRNTCA9IGxpc3RIdG1sIHx8ICI8ZGl2IHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoyMHB4Oyc+Tm8gdXBjb21pbmcgZXZlbnRzIGZvdW5kLjwvZGl2PiI7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3VydS1ldmVudC1saXN0JykuaW5uZXJIVE1MID0gIlN5bmMgRXJyb3IuIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkR3VydUFyYWRoYW5hcygpOw0KICAgIDwvc2NyaXB0Pg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KICAgIA0KICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLXRvcDogMzBweDsgbWFyZ2luLWJvdHRvbTogNTBweDsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7Ij4NCiAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjogIzU1NTsgZm9udC1zaXplOiAxOHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyI+SWYgYW55IGlzc3VlcyB3aXRoIHRoZSBhcHBsaWNhdGlvbiBjb250YWN0IEFkbWluPC9oMz4NCg0KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNvbnRhY3RBZG1pbldoYXRzQXBwKCkiIHN0eWxlPSINCiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI1RDM2NjsNCiAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgIHBhZGRpbmc6IDE1cHggMzBweDsNCiAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgYm9yZGVyLXJhZGl1czogNTBweDsNCiAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMzcsIDIxMSwgMTAyLCAwLjMpOw0KICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsNCiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnM7DQogICAgIiBvbm1vdXNlb3Zlcj0idGhpcy5zdHlsZS50cmFuc2Zvcm09J3NjYWxlKDEuMDUpJyIgb25tb3VzZW91dD0idGhpcy5zdHlsZS50cmFuc2Zvcm09J3NjYWxlKDEpJyI+DQogICAgICAgICAgICA8c3BhbiBzdHlsZT0ibWFyZ2luLXJpZ2h0OiAxMHB4OyI+8J+SrDwvc3Bhbj4gTWVzc2FnZSBBZG1pbg0KICAgICAgICA8L2J1dHRvbj4NCiAgICA8L2Rpdj4NCiAgICA8c2NyaXB0Pg0KICAgICAgICBmdW5jdGlvbiBjb250YWN0QWRtaW5XaGF0c0FwcCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHBob25lTnVtYmVyID0gIjkxODA1MDc5NDI1MiI7DQogICAgICAgICAgICAvLyBPcHRpb25hbDogQWRkIGEgcHJlLWZpbGxlZCBtZXNzYWdlIHNvIHlvdSBrbm93IHdoZXJlIHRoZXkgYXJlIGNvbWluZyBmcm9tDQogICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZW5jb2RlVVJJQ29tcG9uZW50KCJIZWxsbyBBZG1pbiwgSSBhbSBmYWNpbmcgYW4gaXNzdWUgd2l0aCB0aGUgQ0cgUmVjZWlwdCBBcHAuIik7DQogICAgICAgICAgICBjb25zdCB3aGF0c2FwcFVybCA9IGBodHRwczovL3dhLm1lLyR7cGhvbmVOdW1iZXJ9P3RleHQ9JHttZXNzYWdlfWA7DQoNCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHdoYXRzYXBwVXJsLCAnX2JsYW5rJyk7DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KDQoNCiAgICANCiAgICA8c2NyaXB0Pg0KICAgICAgICBmdW5jdGlvbiBkb3dubG9hZFNldHRpbmdzRmlsZSgpIHsNCiAgICAgICAgICAgIGxldCBmaWxlQ29udGVudCA9ICIiOw0KICAgICAgICAgICAgZmVhdHVyZXMuZm9yRWFjaChmZWF0ID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGVybV8ke2ZlYXR9YCkudmFsdWU7DQogICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gYCR7ZmVhdH18JHt2YWx9XG5gOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIEZvciBub3csIHdlIHNob3cgaXQgaW4gYW4gYWxlcnQgb3IgbG9nLg0KICAgICAgICAgICAgLy8gWW91IGNhbiBjb3B5IHRoaXMgdGV4dCBhbmQgc2F2ZSBpdCBhcyB1c2VybmFtZS50eHQNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCItLS0gU0VUVElOR1MgRklMRSBDT05URU5UIC0tLSIpOw0KICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZUNvbnRlbnQpOw0KDQogICAgICAgICAgICAvLyBPcHRpb25hbDogVHJpZ2dlciBhbiBhY3R1YWwgZmlsZSBkb3dubG9hZCBmb3IgdGhlIHVzZXINCiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZmlsZUNvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsNCiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgbGluay5kb3dubG9hZCA9ICJ1c2VyX3NldHRpbmdzX3RlbXBsYXRlLnR4dCI7DQogICAgICAgICAgICBsaW5rLmNsaWNrKCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vZnVuY3Rpb24gY29uc2VudEFjdGlvbigpIHsNCiAgICAgICAgLy8gICAgYWxlcnQoIkNvbnNlbnQgR3JhbnRlZCBmb3IgIiArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlKTsNCiAgICAgICAgLy8gICAgLy8gTG9naWMgZm9yIHNhdmVSZWNvcmQoKSB1c3VhbGx5IGZvbGxvd3MgaGVyZQ0KICAgICAgICAvL30NCg0KICAgICAgICAvL2Z1bmN0aW9uIHNhdmVEYXRhKCkgew0KICAgICAgICAvLyAgICBhbGVydCgiUmVjb3JkIFNhdmVkIExvY2FsbHkiKTsNCiAgICAgICAgLy8gICAgLy8gT3JpZ2luYWwgc2F2ZVJlY29yZCgpIGxvZ2ljIHJlbWFpbnMgaGVyZQ0KICAgICAgICAvL30NCg0KDQogICAgICAgIGZ1bmN0aW9uIG1hdGNoUmVjb3JkKGlkeCwgcXVlcnksIGNvbElkeCkgew0KICAgICAgICAgICAgY29uc3QgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpZHhdLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICBpZiAoY29sSWR4ID09PSAtMSkgcmV0dXJuIGxpbmUuaW5jbHVkZXMocXVlcnkpOw0KICAgICAgICAgICAgY29uc3QgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgIHJldHVybiAoY29sc1tjb2xJZHhdIHx8ICIiKS5pbmNsdWRlcyhxdWVyeSk7DQogICAgICAgIH0NCg0KDQogICAgPC9zY3JpcHQ+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBBZGQgdGhpcyB0byBzaG93IHRoZSBTTVMgYnV0dG9uIG9ubHkgb24gbW9iaWxlIGRldmljZXMNCiAgICAgICAgZnVuY3Rpb24gY2hlY2tEZXZpY2VGb3JTTVMoKSB7DQogICAgICAgICAgICBjb25zdCBpc01vYmlsZSA9IC9pUGhvbmV8aVBhZHxpUG9kfEFuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOw0KICAgICAgICAgICAgY29uc3Qgc21zQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1zbXMnKTsNCiAgICAgICAgICAgIGlmIChpc01vYmlsZSAmJiBzbXNCdG4pIHsNCiAgICAgICAgICAgICAgICBzbXNCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzZW5kU01TKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCBhbW91bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgY29uc3QgcmVjTm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCB0b3dhcmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKS52YWx1ZTsNCg0KICAgICAgICAgICAgaWYgKCFwaG9uZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgZW50ZXIgYSBwaG9uZSBudW1iZXIgZmlyc3QuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDb21wb3NlIHRoZSB0ZXh0IG1lc3NhZ2UNCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTU1QVCBSZWNlaXB0OiBOYW1hc2thcmFtICR7bmFtZX0sIFRoYW5rIHlvdSBmb3IgeW91ciBjb250cmlidXRpb24gb2YgUnMuJHthbW91bnR9IHRvd2FyZHMgJHt0b3dhcmRzfS4gUmVjZWlwdCBObzogJHtyZWNOb30uIC0gTXlsYWkgTWFoYXBlcml5YXZhIEFudXNoYW0gVHJ1c3RgOw0KDQogICAgICAgICAgICAvLyBFbmNvZGUgZm9yIFVSTCBzYWZldHkNCiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRNZXNzYWdlID0gZW5jb2RlVVJJQ29tcG9uZW50KG1lc3NhZ2UpOw0KDQogICAgICAgICAgICAvLyBMYXVuY2ggdGhlIFNNUyBhcHANCiAgICAgICAgICAgIC8vIE5vdGU6IEZvciBpT1MgdXNlICcmJywgZm9yIG90aGVycyB1c2UgJz8nIGZvciB0aGUgc2VwYXJhdG9yDQogICAgICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSAvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgPyAnJicgOiAnPyc7DQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGBzbXM6JHtwaG9uZX0ke3NlcGFyYXRvcn1ib2R5PSR7ZW5jb2RlZE1lc3NhZ2V9YDsNCg0KICAgICAgICAgICAgLy8gTG9nIHRoZSBhY3Rpb24gZm9yIHlvdXIgYXVkaXQgdHJhaWwNCiAgICAgICAgICAgIHdyaXRlVXNlckxvZyhgU01TIFRSSUdHRVJFRDogVG8gJHtwaG9uZX0gZm9yIFJlYyAke3JlY05vfWApOw0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQoNCg0KDQo8L2JvZHk+DQo8L2h0bWw+DQo="))));</script>