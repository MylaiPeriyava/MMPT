<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5NTVBUIFJlY2VpcHQgU3lzdGVtIHYzMS44IC0gUmVzdG9yZWQ8L3RpdGxlPg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2h0bWwycGRmLmpzLzAuMTAuMS9odG1sMnBkZi5idW5kbGUubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvaHRtbDJjYW52YXMvMS40LjEvaHRtbDJjYW52YXMubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYvMi41LjEvanNwZGYudW1kLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLWF1dG90YWJsZS8zLjUuMjUvanNwZGYucGx1Z2luLmF1dG90YWJsZS5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzdHlsZT4NCg0KICAgICAgICAubW1wdC11bmlmaWVkLWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAyNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAzMHB4IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQgew0KICAgICAgICAgICAgd2lkdGg6IDE2MHB4OyAvKiBGaXhlZCB3aWR0aCBmb3IgcGVyZmVjdCBhbGlnbm1lbnQgKi8NCiAgICAgICAgICAgIGhlaWdodDogNDVweDsgLyogVW5pZmllZCBoZWlnaHQgKi8NCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuMnM7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQ6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDZweCAxMnB4IHJnYmEoMCwwLDAsMC4xNSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYWRtaW4tdW5pZmllZDphY3RpdmUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgIC8qIFRoZSBNYXN0ZXIgSGlkZSBSdWxlICovDQogICAgICAgIC8qIFRoaXMgcnVsZSBzdGF5cyBhY3RpdmUgZXZlbiBpZiB0aGUgdGFibGUgcmUtcmVuZGVycyAqLw0KICAgICAgICAucGVybS1oaWRkZW4gew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgZGlzYWJsZWQgZWxlbWVudHMgZ2V0IHRoZSBncmV5ZWQtb3V0IGxvb2sgKi8NCiAgICAgICAgYnV0dG9uOmRpc2FibGVkLA0KICAgICAgICBpbnB1dDpkaXNhYmxlZCwNCiAgICAgICAgc2VsZWN0OmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjOTk5OTk5ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjY7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTYXZlIGJ1dHRvbiBzcGVjaWFsIGNvbG9yIHdoZW4gaXQgYmVjb21lcyBhY3RpdmUgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KDQoNCg0KICAgICAgICAvKiBDb250YWluZXIgZm9yIHRoZSAzLWNvbHVtbiB2aWV3ICovDQoNCiAgICAgICAgLyogVXBkYXRlZCBXb3Jrc3BhY2UgdG8gcHJldmVudCBvdmVybGFwcGluZyAqLw0KICAgICAgICAucmVjZWlwdC13b3Jrc3BhY2Ugew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAvKiBMT0NLIHRoZSBoZWlnaHQgaGVyZS4gU2lkZSBwYW5lbHMgd2lsbCBuZXZlciBiZSB0YWxsZXIgdGhhbiB0aGlzICovDQogICAgICAgICAgICBoZWlnaHQ6IDU1MHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnNpZGUtcGFuZWwgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgLyogRm9yY2UgdGhlIHBhbmVsIHRvIG9iZXkgdGhlIHdvcmtzcGFjZSBoZWlnaHQgKi8NCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIC8qIFRoaXMgaGVpZ2h0OiAwIGlzIGEgdHJpY2sgdG8gbWFrZSBmbGV4Ym94IGlnbm9yZSB0aGUgaW1hZ2Uncw0KICAgICAgICBuYXR1cmFsIHNpemUgYW5kIGZvcmNlIGl0IHRvIHN0YXkgd2l0aGluIHRoZSBjb250YWluZXIgKi8NCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIGltZyB7DQogICAgICAgICAgICAgICAgLyogVGhlc2UgbGluZXMgZm9yY2UgdGhlIHNocmluayB3aXRob3V0IGxvc2luZyByYXRpbyAqLw0KICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICNyZWNlaXB0X2Rpc3BsYXlfYXJlYSB7DQogICAgICAgICAgICBmbGV4OiAwIDAgYXV0bzsNCiAgICAgICAgICAgIHdpZHRoOiA0ODBwdDsNCiAgICAgICAgICAgIC8qIFRoZSByZWNlaXB0IHNldHMgdGhlIGhlaWdodCBmb3IgdGhlIHdob2xlIHJvdyAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLmV2ZW50LXBob3RvIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgfQ0KDQoNCg0KDQoNCiAgICAgICAgLmFjdGlvbi1mb290ZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1wZGYgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi13YSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVkMzY2Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIENvbnNlbnQgU3BlY2lmaWMgU3R5bGVzICovDQogICAgICAgIC5idG4tY29uc2VudC1hY3RpdmUgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgb3BhY2l0eTogMTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tY29uc2VudC1kaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICAgICAgb3BhY2l0eTogMC4zOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgb3JpZ2luYWwgc3R5bGVzIHByZXNlcnZlZCBmcm9tIGQ0MyAqLw0KICAgICAgICAucmVjZWlwdC1wcmV2aWV3LXJvdyB7DQogICAgICAgICAgICBncmlkLWNvbHVtbjogc3BhbiAyOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMzBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZTA7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yZWNlaXB0LWNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogNDYwcHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAyLjVweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5oZWFkZXItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY29sIHsNCiAgICAgICAgICAgIHdpZHRoOiA3MHB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFkZHJlc3MtY29sIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC50cnVzdC1uYW1lIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNwdDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRydXN0LWRldGFpbHMgew0KICAgICAgICAgICAgZm9udC1zaXplOiA3LjVwdDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjE7DQogICAgICAgIH0NCg0KICAgICAgICAudmFyaWFibGUtcm93IHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDZwdDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMwMDA7DQogICAgICAgICAgICBwYWRkaW5nOiAzcHQgMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZGl2aWRlciB7DQogICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgIzAwMDsNCiAgICAgICAgICAgIG1hcmdpbjogNnB0IDA7DQogICAgICAgIH0NCg0KICAgICAgICAuZG9ub3ItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxhYmVsLWNvbCB7DQogICAgICAgICAgICB3aWR0aDogODVwdDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHQgMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5kYXRhLWNvbCB7DQogICAgICAgICAgICBmb250LXNpemU6IDkuNXB0Ow0KICAgICAgICAgICAgcGFkZGluZzogMnB0IDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdHJ1c3Qtc2lnbiB7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVwdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdGF4LWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiA4cHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMnB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgOnJvb3Qgew0KICAgICAgICAgICAgLS1zYWZmcm9uOiAjRkY5OTMzOw0KICAgICAgICAgICAgLS1saWdodC1zYWZmcm9uOiAjRkZGNUU2Ow0KICAgICAgICAgICAgLS1kZWVwLXNhZmZyb246ICNGRjhDMDA7DQogICAgICAgICAgICAtLXRleHQtZGFyazogIzMzMzsNCiAgICAgICAgfQ0KDQogICAgICAgICogew0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtc2FmZnJvbik7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZGFyayk7DQogICAgICAgIH0NCg0KICAgICAgICAjYXV0aFNjcmVlbiB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMHZ3Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LXNhZmZyb24pOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB6LWluZGV4OiA5OTk5Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY2lyY2xlIHsNCiAgICAgICAgICAgIGhlaWdodDogNDBweDsNCiAgICAgICAgICAgIHdpZHRoOiA0MHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMik7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sb2dvLWxhcmdlIHsNCiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm1hc3Rlci1oZWFkZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsNCiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjIlIDU2JSAyMiU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zYWZmcm9uKTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmhlYWRlci1zZWN0aW9uIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5oZWFkZXItc2VjdGlvbjpsYXN0LWNoaWxkIHsNCiAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLnNtYWxsLWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmlkLWJhZGdlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29udGFpbmVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYWRkOGU2Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBBREQgVEhFIEZJWCBIRVJFICovDQogICAgICAgIC5lbnRyeS1jb250YWluZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29sdW1uIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBtaW4td2lkdGg6IDMwMHB4Ow0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC5mb3JtLWdyb3VwIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDMzNjY7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCwgLmZvcm0tZ3JvdXAgc2VsZWN0LCAuZm9ybS1ncm91cCB0ZXh0YXJlYSB7DQogICAgICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuc3RhdHVzLWNoZWNrcyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMjBweDsNCiAgICAgICAgICAgIGdyaWQtY29sdW1uOiBzcGFuIDI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFjdGlvbiB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ29uc2VudCBTcGVjaWZpYyBTdHlsZXMgKi8NCiAgICAgICAgLmJ0bi1jb25zZW50LWFjdGl2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1jb25zZW50LWRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmNjY2MgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjNjY2Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDsNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuNjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tc2F2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmU4YjU3Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi11bmxvY2sgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tbG9jayB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2Y4YzhkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1uYXYgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXJuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMjhiMjI7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAjZmllbGRfc2VhcmNoIHsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMyMjhiMjIgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIEFjdGlvbiBCdXR0b24gUm93IFN0eWxpbmcgKi8NCiAgICAgICAgLmJ0bi1hY3Rpb24sIC5idG4tc2F2ZSwgLmJ0bi1sb2NrLCAuYnRuLXVubG9jayB7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIHdpZHRoICovDQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIGhlaWdodCAqLw0KICAgICAgICAgICAgbWFyZ2luOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBISUdIIENPTlRSQVNUIFVOTE9DSzogQnJpZ2h0IEdvbGQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fdW5sb2NrOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkQ3MDAgIWltcG9ydGFudDsgLyogR29sZCAqLw0KICAgICAgICAgICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsgLyogQmxhY2sgdGV4dCBmb3IgY29udHJhc3QgKi8NCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNEQUE1MjA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTQVZFOiBHcmVlbiB3aGVuIGVuYWJsZWQgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzFlN2UzNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIExPQ0s6IE9yYW5nZS9SZWQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fbG9jazpub3QoOmRpc2FibGVkKSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmQ3ZTE0ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNkOTZkMTI7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBESVNBQkxFRCBTVEFURTogVW5pdmVyc2FsIGxvb2sgZm9yIGFsbCBidXR0b25zICovDQogICAgICAgIGJ1dHRvbjpkaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogI2EwYTBhMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYyAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgb3BhY2l0eTogMC41Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ2hlY2tib3ggUm93IENvbnRhaW5lciAqLw0KICAgICAgICAjY2hlY2tib3hfcm93IHsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQWN0aW9uIEJ1dHRvbiBzaXppbmcgKi8NCiAgICAgICAgI2J0bl91bmxvY2ssICNidG5fbG9jaywgI2J0bl9zYXZlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMTBweDsNCiAgICAgICAgICAgIGhlaWdodDogMzhweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC8qIEJpZyBXYWl0IE1lc3NhZ2UgT3ZlcmxheSAqLw0KICAgICAgICAjbG9hZGluZ092ZXJsYXkgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC43KTsNCiAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogMjAlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyNHB0Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KLyoNCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgTWFrZXMgcmVzcG9uaXZlIHNpemUgLSBmb3IgUk4sIFJlY29yZCBhbmQgUmVjZWlwdCBOdW1iZXINCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KICAgICAgICAvKiBBREQgVEhJUyBMSU5FIFRPIEZJWCBUSEUgVE9QIFJPVyAmIFJFQ09SRCBOVU1CRVJTICovDQogICAgICAgIGRpdltzdHlsZSo9ImRpc3BsYXk6IGZsZXgiXSB7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGdhcDogMTBweCAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQoNCiAgICA8ZGl2IGlkPSJsb2FkaW5nT3ZlcmxheSI+QXNzaWduaW5nIE5ldyBSZWNlaXB0IE51bWJlci4uLiBQbGVhc2UgV2FpdDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibG9hZGluZy1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC45KTsgei1pbmRleDogOTk5OTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGRpc3BsYXk6IG5vbmU7Ij4NCiAgICAgICAgPGRpdiBzdHlsZT0iYm9yZGVyOiA1cHggc29saWQgI2YzZjNmMzsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTsiPjwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMzMzM7Ij5QbGVhc2Ugd2FpdCAtIFdvcmtpbmcuLi48L3A+DQogICAgPC9kaXY+DQoNCiAgICA8c3R5bGU+DQogICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQoNCiAgICA8ZGl2IGlkPSJhdXRoU2NyZWVuIj4NCiAgICAgICAgPGRpdiBpZD0ibG9nb0NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgIDxoMiBzdHlsZT0iY29sb3I6IHZhcigtLWRlZXAtc2FmZnJvbik7IG1hcmdpbjogNXB4IDA7Ij5NTVBUIFN5c3RlbTwvaDI+DQogICAgICAgIDxwIGlkPSJzdGF0dXNNc2ciPkNvbm5lY3RpbmcgdG8gQ2xvdWQuLi48L3A+DQogICAgICAgIDxwPkRldmljZSBJRDogPHNwYW4gaWQ9ImRpc3BsYXlEZXZpY2VJRCIgY2xhc3M9ImlkLWJhZGdlIj4uLi48L3NwYW4+PC9wPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibWFpbkFwcENvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KDQoNCiAgICAgICAgPGhlYWRlciBjbGFzcz0ibWFzdGVyLWhlYWRlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItc2VjdGlvbiI+DQogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW46MDsgZm9udC1zaXplOjE0cHg7Ij5Vc2VycyBPbmxpbmU8L2gzPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFjdGl2ZVVzZXJMaXN0IiBjbGFzcz0ic21hbGwtaW5mbyI+LS0tPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZ2FwOjE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibG9nb0hlYWRlckNvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDEgc3R5bGU9Im1hcmdpbjowOyBmb250LXNpemU6MjBweDsiPk15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0PC9oMT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDRweDsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgb3BhY2l0eTogMC45OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWlwdCBHZW5lcmF0aW9uIFNvZnR3YXJlIFZlcnNpb246IDxzcGFuIGlkPSJkaXNwbGF5VmVyc2lvbiI+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGFzaGJvYXJkLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJzdGF0cy10YWJsZSI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsLWluZm8iIHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMnB4IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pkxhc3QgUmVjOiA8c3BhbiBpZD0iZGFzaF9sYXN0X3JlYyI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+QmFuazogPHNwYW4gaWQ9ImRhc2hfYmFua19kYXRlIj4tLS08L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5MYXRlc3Q6IDxzcGFuIGlkPSJkYXNoX2xhdGVzdF9yZWMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkV4cDogPHNwYW4gaWQ9ImRhc2hfZXhwZW5zZXMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlJlYWR5OiA8c3BhbiBpZD0iZGFzaF9yZWFkeV9jb3VudCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+Q2FzaDogPHNwYW4gaWQ9ImRhc2hfY2FzaCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8L2hlYWRlcj4NCg0KDQogICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbnRhaW5lciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbnRyeS1jb2x1bW4iPg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyBiYWNrZ3JvdW5kOiAjMWEyMzdlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBzdHJldGNoOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyI+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOyBwYWRkaW5nLWJvdHRvbTogOHB4OyBtYXJnaW4tYm90dG9tOiAxMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IkFMTCIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IEFMTDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjIxLTIyIiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjEtMjI8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyMi0yMyIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDIyLTIzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjMtMjQiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyMy0yNDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjI0LTI1IiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjQtMjU8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyNS0yNiIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDI1LTI2PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjYtMjciIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyNi0yNzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6ICNGRkVCM0IgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iUlIiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiBSUjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgtMSkiPiYjMTAwOTQ7PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9InJlY19zbGlkZXIiIHN0eWxlPSJmbGV4OiAxOyIgb25pbnB1dD0iY2hlY2tVbnNhdmVkQ2hhbmdlcygoKSA9PiB7IGlmKHZhbGlkYXRlTmF2aWdhdGlvblNlY3VyaXR5KHRoaXMudmFsdWUpKSBuYXZpZ2F0ZURhdGFiYXNlKHRoaXMudmFsdWUpOyB9KSI+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgxKSI+JiMxMDA5NTs8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWxlZnQ6IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRUIzQjsgbWFyZ2luLWJvdHRvbTogMnB4OyI+UkVDRUlQVCBOTzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3JlY25vIiBzdHlsZT0id2lkdGg6IDE0MHB4OyBoZWlnaHQ6IDM4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1zaXplOiAxNnB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlcjogMnB4IHNvbGlkICNGRjk5MzM7IGJhY2tncm91bmQ6ICNmZmY7IGNvbG9yOiAjMDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IG1hcmdpbi1ib3R0b206IDJweDsiPlJlYzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlY29yZE51bWJlckRpc3BsYXkiIHJlYWRvbmx5IHN0eWxlPSJ3aWR0aDogNDVweDsgaGVpZ2h0OiAzOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyOiBub25lOyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2UwZTBlMDsgY29sb3I6ICMxYTIzN2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im5ld19yZWNfYnRuIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iaGVpZ2h0OiAzOHB4OyBtaW4td2lkdGg6IDUwcHg7IGJhY2tncm91bmQ6ICNmNDQzMzY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IiBvbmNsaWNrPSJnZW5lcmF0ZU5ld1JOKCkiPlJOPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5OYW1lPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX25hbWUiIG9uaW5wdXQ9InZhbGlkYXRlQ29uc2VudCgpIj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QWRkcmVzczwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9hZGRyZXNzIiByb3dzPSI0Ij48L3RleHRhcmVhPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGluL0NvdW50cjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBmbGV4OjE7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfcGluY29kZSIgc3R5bGU9IndpZHRoOiA1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfY291bnRyeSIgc3R5bGU9IndpZHRoOiA1MCU7IiB2YWx1ZT0iSU5ESUEiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZW1haWwiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TdGFyPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3N0YXIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Hb3RocmFtPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX2dvdGhyYW0iPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbHVtbiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZGF0ZSI+PC9kaXY+DQogICAgICAgICAgICAgICAgDQoNCg0KICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxMDBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMDAzMzY2OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBwYWRkaW5nLWxlZnQ6IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZWxlcGhvbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IHBhZGRpbmctbGVmdDogMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9waG9uZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJmbGV4OiAxOyBoZWlnaHQ6IDI1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQtY29sb3I6ICNmZmZkZTY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJidG5fZmV0Y2giIGRpc2FibGVkIG9uY2xpY2s9ImZldGNoRG9ub3JEZXRhaWxzKCkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiA1NXB4OyBoZWlnaHQ6IDI3cHg7IGZvbnQtc2l6ZTogMTFweDsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXItcmFkaXVzOiAzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZldGNoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QW1vdW50PC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZmllbGRfYW1vdW50IiBvbmlucHV0PSJ2YWxpZGF0ZUNvbnNlbnQoKSI+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk1vZGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImZpZWxkX21vZGUiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ub3dhcmRzPC9sYWJlbD48c2VsZWN0IGlkPSJmaWVsZF90b3dhcmRzIiBvbmNoYW5nZT0idmFsaWRhdGVDb25zZW50KCkiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5UcmFucy4gUmVmLjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9yZWYiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Db21tZW50czwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9jb21tZW50cyIgcm93cz0iMiI+PC90ZXh0YXJlYT48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+UEFOPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3BhbiI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjaGVja2JveF9yb3ciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmUwOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY2FuY2VsIj4gQ2FuY2VsDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByaW50ZWQiPiBQcmludGVkDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByYXNhZGFtIj4gUHJhc2FkYW0NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY29ycHVzIj4gQ29ycHVzIFNpZ25lZA0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDEwcHg7IG1hcmdpbi10b3A6IDE1cHg7IHBhZGRpbmctdG9wOiAxNXB4OyBib3JkZXItdG9wOiAycHggc29saWQgIzY2NjsiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyI+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fc2F2ZSIgY2xhc3M9ImJ0bi1zYXZlIiBvbmNsaWNrPSJzYXZlUmVjb3JkKCkiIGRpc2FibGVkPlNhdmU8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9jb25zZW50IiBjbGFzcz0iYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCIgZGlzYWJsZWQgb25jbGljaz0iY29uc2VudEFjdGlvbigpIj5Db25zZW50PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fdW5sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0idG9nZ2xlTG9jayhmYWxzZSkiPlVubG9jazwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0iY29uZmlybUxvY2soKSIgZGlzYWJsZWQ+TG9jazwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5TdW1tYXJ5IiBvbmNsaWNrPSJzaG93RG9uYXRpb25TdW1tYXJ5KCkiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1sZWZ0OiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgU3VtbWFyeQ0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJhbmstc3luYy1idG4iIG9uY2xpY2s9InVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHdpbmRvdy5BQ0NFU1NfVE9LRU4pIiBzdHlsZT0iYmFja2dyb3VuZDojMjdhZTYwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo0cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyI+QmFuayBVcGRhdGU8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1hY3Rpb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMTdhMmI4OyBjb2xvcjogd2hpdGU7IiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSI+UmVmcmVzaDwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tYWRtaW4tYWNjZXNzIiBjbGFzcz0iYnRuLWFjdGlvbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMxN2EyYjg7IGNvbG9yOiB3aGl0ZTsiIG9uY2xpY2s9InRvZ2dsZUFkbWluVGFibGUoKSI+QWRtaW48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tZGV2b3RlZS1hY2Nlc3MiIGNsYXNzPSJidG4tYWN0aW9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzE3YTJiODsgY29sb3I6IHdoaXRlOyIgb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHBzOi8vbXlsYWlwZXJpeWF2YS5naXRodWIuaW8vRGV2b3RlZS8nLCAnX2JsYW5rJykiPkRldm90ZWU8L2J1dHRvbj4NCg0KDQogICAgICAgICAgICAgICAgPGJyPjxicj4NCg0KDQoNCg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4LWdyb3c6IDE7Ij48L2Rpdj4NCg0KDQogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9zZWFyY2giIHBsYWNlaG9sZGVyPSJTZWFyY2guLi4iPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNlYXJjaEJ0biIgY2xhc3M9ImJ0bi1ybiIgb25jbGljaz0icGVyZm9ybVNlYXJjaCgpIj5TZWFyY2g8L2J1dHRvbj4NCg0KDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM1NTU7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiA1cHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyI+DQogICAgICAgICAgICAgICAgKiBTZWFyY2ggTG9naWM6IFJldmVyc2Ugc2VhcmNoLiBObyBQcmVmaXg9RnVsbCwgTS09UGhvbmUsIE4tPU5hbWUsIFQtPVRyYW5zIFJlZiwgUC09UEFOLiBOb3QgZm91bmQgcmVzZXRzIHRvIGxhdGVzdCByZWNvcmQuDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0icmVjZWlwdC1wcmV2aWV3LXJvdyI+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlY2VpcHQtd29ya3NwYWNlIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlLXBhbmVsIiBpZD0ibGVmdC1ldmVudHMiPg0KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iZXZlbnQxLmpwZyIgY2xhc3M9ImV2ZW50LXBob3RvIiBhbHQ9IlJlY2VudCBFdmVudCI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJyZWNlaXB0X2Rpc3BsYXlfYXJlYSI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlLXBhbmVsIiBpZD0icmlnaHQtZXZlbnRzIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9ImV2ZW50Mi5qcGciIGNsYXNzPSJldmVudC1waG90byIgYWx0PSJSZWNlbnQgRXZlbnQiPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLWZvb3RlciIgc3R5bGU9ImdyaWQtY29sdW1uOiBzcGFuIDI7Ij4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1wZGYiIG9uY2xpY2s9ImRvd25sb2FkUmVjZWlwdFBERigpIj5Eb3dubG9hZCBQREY8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi13YSIgb25jbGljaz0ic2VuZFdoYXRzQXBwKCkiPldoYXRzQXBwIFJlY2VpcHQ8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bi1zbXMiIGNsYXNzPSJidG4td2EiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmOyBkaXNwbGF5OiBub25lOyIgb25jbGljaz0ic2VuZFNNUygpIj5TTVMgUmVjZWlwdDwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCg0KDQogICAgICAgIDxkaXYgaWQ9InNlY3VyaXR5UG9ydGFsIiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjpmaXhlZDsgdG9wOjEwJTsgbGVmdDoxMCU7IHdpZHRoOjgwJTsgaGVpZ2h0OjgwJTsgYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyOjJweCBzb2xpZCAjMzMzOyB6LWluZGV4Ojk5OTk7IG92ZXJmbG93LXk6YXV0bzsgcGFkZGluZzoyMHB4OyBib3gtc2hhZG93OiAwcHggMHB4IDIwcHggcmdiYSgwLDAsMCwwLjUpOyI+DQogICAgICAgICAgICA8aDM+VXNlciBBY2Nlc3MgQ29udHJvbCBMaXN0PC9oMz4NCiAgICAgICAgICAgIDxwPlRvZ2dsZSBhY2Nlc3MgZm9yIGZlYXR1cmVzLiAiWSIgPSBWaXNpYmxlLCAiTiIgPSBIaWRkZW4uPC9wPg0KICAgICAgICAgICAgPHRhYmxlIGlkPSJwZXJtVGFibGUiIGJvcmRlcj0iMSIgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsiPg0KICAgICAgICAgICAgICAgIDx0aGVhZD48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2VlZTsiPjx0aD5GZWF0dXJlL09iamVjdDwvdGg+PHRoPkFjY2VzcyAoWS9OKTwvdGg+PC90cj48L3RoZWFkPg0KICAgICAgICAgICAgICAgIDx0Ym9keSBpZD0icGVybUJvZHkiPjwvdGJvZHk+DQogICAgICAgICAgICA8L3RhYmxlPg0KICAgICAgICAgICAgPGJyPg0KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb3dubG9hZFNldHRpbmdzRmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDpncmVlbjsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsiPkdlbmVyYXRlIFNldHRpbmdzIEZpbGU8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3VyaXR5UG9ydGFsJykuc3R5bGUuZGlzcGxheT0nbm9uZSciPkNsb3NlPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KDQoNCg0KDQogICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCg0KDQogICAgPGRpdiBpZD0iYWRtaW4tcGFuZWwtY29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTpub25lOyBtYXJnaW4tdG9wOjIwcHg7IG1heC13aWR0aDogODAwcHg7Ij4NCiAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjogIzAwMzM2NjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOiAxMHB4OyI+QWRtaW5pc3RyYXRpdmUgQ29udHJvbCBQYW5lbDwvaDM+DQogICAgICAgIDx0YWJsZSBib3JkZXI9IjAiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlOyBib3JkZXItc3BhY2luZzogMTJweDsiPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLWNvbnRyb2wtbGlzdCIgY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiAjY2NjY2NjOyBjb2xvcjogIzY2NjY2Njsgd2lkdGg6IDEwMCU7IGN1cnNvcjogbm90LWFsbG93ZWQ7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJldHVybiBmYWxzZTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ+DQogICAgICAgICAgICAgICAgICAgICAgICBDb250cm9sIExpc3QNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwJTsiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2YwOTNmYiAwJSwgI2Y1NTc2YyAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkFub255RmlsbCgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEFub255RmlsbA0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM0M2U5N2IgMCUsICMzOGY5ZDcgMTAwJSk7IHdpZHRoOiAxMDAlOyBjb2xvcjogIzAwMzM2NjsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuTU1QVEJhY2t1cCgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEJhY2t1cCBTeXN0ZW0NCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjZmE3MDlhIDAlLCAjZmVlMTQwIDEwMCUpOyB3aWR0aDogMTAwJTsgY29sb3I6ICMwMDMzNjY7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkNvdW50cnlGaWVsZENvcnJlY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IENvdW50cnkgRmllbGQNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNmExMWNiIDAlLCAjMjU3NWZjIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQ2l0eUV4dHJhY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDaXR5IE5hbWVzDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZmMDg0NCAwJSwgI2ZmYjE5OSAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkNpdHlDb3JyZWN0aW9uQXBwbHkoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IENpdHkgTmFtZXMNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMmI1ODc2IDAlLCAjNGU0Mzc2IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuRG9ub3JOYW1lQ2hlY2soKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBEb25vciBOYW1lIENoZWNrDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2E0NDViMiAwJSwgI2Q0MTg3MiAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkRvbm9yTmFtZUNvcnJlY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IERvbm9yIE5hbWUNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMzBjZmQwIDAlLCAjMzMwODY3IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQWRkcmVzc0NoZWNrKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQWRkcmVzcyBDaGVjaw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMwOTIwM2YgMCUsICM1Mzc4OTUgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5BZGRyZXNzQ29ycmVjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgQWRkcmVzcw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM4ZTQ0YWQgMCUsICM3MzJkOTEgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJ0cmlnZ2VyRnVsbEF1ZGl0KCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQXVkaXQgRGF0YWJhc2UNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMmVjYzcxIDAlLCAjMjdhZTYwIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuUEFOQ29ycmVjdGlvbigpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvcnJlY3QgUEFODQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzAwYjA5YiAwJSwgIzk2YzkzZCAxMDAlKTsgd2lkdGg6IDEwMCU7IGNvbG9yOiAjMDAzMzY2OyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJnZW5lcmF0ZUFkZHJlc3NMYWJlbHMoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBBZGRyZXNzIExhYmVscw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ibGFiZWwtY291bnRyeS1maWx0ZXIiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6NDVweDsgYm9yZGVyLXJhZGl1czo4cHg7IHBhZGRpbmc6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsgYm9yZGVyOjJweCBzb2xpZCAjMDBiMDliOyBiYWNrZ3JvdW5kOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUxMIj5BbGwgQ291bnRyaWVzPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMxZTNjNzIgMCUsICMyYTUyOTggMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5VbmlxdWVEb25vckxpc3QoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBEb25vciBMaXN0DQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImRvbm9yLXNlYXJjaC1pbnB1dCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSJTZWFyY2ggKGUuZy4gUHJhc2FkLCBDaGVubmFpIG9yIFByYXNhZCA7IENoZW5uYWkpIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOjEwMCU7IGhlaWdodDo0NXB4OyBib3JkZXItcmFkaXVzOjhweDsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICMyYTUyOTg7Ij4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyIGlkPSJhZG1pbi1waG90by1yb3ciPg0KICAgICAgICAgICAgICAgIDx0ZCBpZD0ic25hcC1ib3gtMSIgc3R5bGU9IndpZHRoOjUwJTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MTVweDsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IGJvcmRlci1yYWRpdXM6IDhweDsiPjwvdGQ+DQogICAgICAgICAgICAgICAgPHRkIGlkPSJzbmFwLWJveC0yIiBzdHlsZT0id2lkdGg6NTAlOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoxNXB4OyBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsgYm9yZGVyLXJhZGl1czogOHB4OyI+PC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgPC90YWJsZT4NCiAgICA8L2Rpdj4NCg0KDQogICAgPGhyIHN0eWxlPSJtYXJnaW4tdG9wOiA0MHB4OyBib3JkZXI6IDA7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyI+DQoNCiAgICA8c2NyaXB0Pg0KDQoNCiAgICAgICAgdmFyIEdMT0JBTF9DSVRZX1JFUE9SVF9EQVRBID0gIiI7DQogICAgICAgIHZhciBHTE9CQUxfRE9OT1JfTkFNRV9EQVRBID0gIiI7DQogICAgICAgIHZhciBHTE9CQUxfQUREUkVTU19DT1JSRUNUSU9OX0RBVEEgPSAiIjsNCg0KICAgICAgICBsZXQgcmVhZHlJbmRpY2VzID0gW107IC8vIEhvbGRzIGluZGljZXMgZm9yIHRoZSBSUiBmaWx0ZXINCg0KICAgICAgICAvLyAtLS0gR0xPQkFMIFNUQUJMRSBJRCBTRVRVUCAtLS0NCiAgICAgICAgbGV0IE1NUFRfR0xPQkFMX0lEID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ01NUFRfU1RBQkxFX0lEJyk7DQoNCiAgICAgICAgLy8gRm9yY2UgYSBuZXcgSUQgaWYgaXQncyBlbXB0eSBPUiBpZiBpdCBkb2Vzbid0IGhhdmUgeW91ciBwcmVmaXgNCiAgICAgICAgaWYgKCFNTVBUX0dMT0JBTF9JRCB8fCAhTU1QVF9HTE9CQUxfSUQuc3RhcnRzV2l0aCgiTU1QVC1ERVYtU1ctIikpIHsNCiAgICAgICAgICAgIGNvbnN0IHJhbmRvbVN1ZmZpeCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA4KS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgTU1QVF9HTE9CQUxfSUQgPSAiTU1QVC1ERVYtU1ctIiArIHJhbmRvbVN1ZmZpeDsNCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdNTVBUX1NUQUJMRV9JRCcsIE1NUFRfR0xPQkFMX0lEKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQoNCiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBbDQogICAgICAgICAgICAvLyBGaXNjYWwgWWVhcnMNCiAgICAgICAgICAgICJGWTIwMjEtMjAyMiIsICJGWTIwMjItMjAyMyIsICJGWTIwMjMtMjAyNCIsICJGWTIwMjQtMjAyNSIsICJGWTIwMjUtMjAyNiIsDQogICAgICAgICAgICAvLyBVSSBFbGVtZW50cyAoUm93cy9TZWN0aW9ucykNCiAgICAgICAgICAgICJBZG1pbl9Sb3ciLCAiRGFzaGJvYXJkX1NlY3Rpb24iLCAiSGlzdG9yeV9UYWIiLA0KICAgICAgICAgICAgLy8gQnV0dG9ucw0KICAgICAgICAgICAgImJ0bl9zYXZlIiwgImJ0bl9kZWxldGUiLCAiYnRuX3ByaW50IiwgImJ0bl9jYW5jZWwiLCAiYnRuX3N5bmMiLCAiYnRuX2V4cG9ydCINCiAgICAgICAgXTsNCg0KDQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Qb3J0YWwgU2VsZWN0aW9uIGZvciBhIHBhcnRpY3VsYXIgdXNlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gb3BlblNlY3VyaXR5UG9ydGFsKHRhcmdldFVzZXIpIHsNCiAgICAgICAgICAgIHVzZXJMaXN0ID0gdGV4dC5zcGxpdA0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt0YXJnZXRVc2VyfS50eHRgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IHt9Ow0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHRleHQuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgc2V0dGluZ3NbcGFydHNbMF0udHJpbSgpXSA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSBbJ2J0bl91bmxvY2snLCAnYnRuX2xvY2snLCAnc2VhcmNoQnRuJywgJ2Jhbmstc3luYy1idG4nLCAnYnRuX2NvbnNlbnQnLCAnYnRuU3VtbWFyeSddOw0KICAgICAgICAgICAgICAgIGxldCByb3dzSHRtbCA9ICIiOw0KDQogICAgICAgICAgICAgICAgLy8gTG9vcCBmb3IgWS9OIGRyb3Bkb3ducw0KICAgICAgICAgICAgICAgIGNvbnRyb2xzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZXR0aW5nc1tpZF0gfHwgIlkiOw0KICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBmb250LWZhbWlseTpBcmlhbDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7aWR9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPjxzZWxlY3QgaWQ9ImlucHV0LSR7aWR9IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzo4cHg7Ij48b3B0aW9uIHZhbHVlPSJZIiAke3ZhbCA9PT0gJ1knID8gJ3NlbGVjdGVkJyA6ICcnfT5ZPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTiIgJHt2YWwgPT09ICdOJyA/ICdzZWxlY3RlZCcgOiAnJ30+Tjwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgLy8gU1RBUlQ6IFRISVMgSVMgVEhFIEZJRUxEIFRIQVQgV0FTIE1JU1NJTkcgRlJPTSBZT1VSIFNDUkVFTg0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9ucyA9IHNldHRpbmdzWydzZWN0aW9ucyddIHx8ICIiOw0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtZmFtaWx5OkFyaWFsOyBmb250LXdlaWdodDpib2xkOyI+c2VjdGlvbnM8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImlucHV0LXNlY3Rpb25zIiB2YWx1ZT0iJHtjdXJyZW50U2VjdGlvbnN9IiBwbGFjZWhvbGRlcj0iRW50ZXIgZGlnaXRzIDEyMzQ1NjciDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgI2U5MWU2MzsgYm94LXNpemluZzpib3JkZXItYm94OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjExcHg7IGNvbG9yOiM2NjY7IG1hcmdpbi10b3A6NXB4OyI+VHlwZSAxLTcgaGVyZSB0byBzaG93L2hpZGUgYXBwIGNvbnRhaW5lcnMuPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmA7DQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoNCiAgICAgICAgICAgICAgICAvLyBUaGUgZXhpc3RpbmcgTWluUmVjb3JkTnVtYmVyIHJvdw0KICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRNaW4gPSBzZXR0aW5nc1snTWluUmVjb3JkTnVtYmVyJ10gfHwgIiI7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0cj48dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgZm9udC1mYW1pbHk6QXJpYWw7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5NaW5SZWNvcmROdW1iZXI8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyI+PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImlucHV0LU1pblJlY29yZE51bWJlciIgdmFsdWU9IiR7Y3VycmVudE1pbn0iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgI2U5MWU2MzsiPjwvdGQ+PC90cj5gOw0KDQogICAgICAgICAgICAgICAgLy8gVGhlIFVJIGNvbnRhaW5lcg0KICAgICAgICAgICAgICAgIGNvbnN0IHBvcnRhbEh0bWwgPSBgPGRpdiBpZD0icG9ydGFsLW92ZXJsYXkiIHN0eWxlPSJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjUpOyB6LWluZGV4OjEwMDAwOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3cteTphdXRvOyI+PGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgd2lkdGg6ODAwcHg7IGFsaWduLXNlbGY6ZmxleC1zdGFydDsiPjx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyI+PHRib2R5PiR7cm93c0h0bWx9PC90Ym9keT48L3RhYmxlPjxkaXYgc3R5bGU9InBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpyaWdodDsiPjxidXR0b24gb25jbGljaz0ic2F2ZVBvcnRhbFNldHRpbmdzKCcke3RhcmdldFVzZXJ9JykiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHggMjBweDsgY3Vyc29yOnBvaW50ZXI7Ij5TQVZFIENIQU5HRVM8L2J1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj5gOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHBvcnRhbEh0bWwpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgiRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Qb3J0YWwgU2VsZWN0aW9uIFNhdmluZyBmb3IgIGEgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzYXZlUG9ydGFsU2V0dGluZ3ModGFyZ2V0VXNlcikgew0KICAgICAgICAgICAgLy8gQ29sbGVjdCBhbGwgZmllbGRzIGluY2x1ZGluZyAnc2VjdGlvbnMnDQogICAgICAgICAgICBjb25zdCBpZHMgPSBbJ2J0bl91bmxvY2snLCAnYnRuX2xvY2snLCAnc2VhcmNoQnRuJywgJ2Jhbmstc3luYy1idG4nLCAnYnRuX2NvbnNlbnQnLCAnYnRuU3VtbWFyeScsICdzZWN0aW9ucycsICdNaW5SZWNvcmROdW1iZXInXTsNCiAgICAgICAgICAgIGxldCBmaWxlTGluZXMgPSBbXTsNCg0KICAgICAgICAgICAgaWRzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGlucHV0LSR7aWR9YCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSBmaWxlTGluZXMucHVzaChgJHtpZH0gfCAke2VsLnZhbHVlLnRyaW0oKX1gKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGZpbGVMaW5lcy5qb2luKCdcbicpOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt0YXJnZXRVc2VyfS50eHRgLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBmaWxlQ29udGVudA0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiVXBkYXRlZCBzdWNjZXNzZnVsbHkhIik7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtb3ZlcmxheScpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0VXNlciA9PT0gTU1QVF9VU0VSX05BTUUpIGFwcGx5VXNlclBlcm1pc3Npb25zKHRhcmdldFVzZXIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIlNhdmUgZXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Db25zdGFudHMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGNvbnN0IHNjcmlwdFVSTCA9ICJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYnp6YmlaQzNfb3lBZFN1QVVnWFI2SUJRbU5aM2ZFUm1oSFVWeENNU3k3RUFZQ1g4alg2RmdlcTRNa3FoLXFiTUFaMC9leGVjIjsNCg0KICAgICAgICBjb25zdCBNTVBUX1ZFUlNJT04gPSAiMzEuOCI7DQogICAgICAgIC8vIEFsbCBvcmlnaW5hbCBBdXRoZW50aWNhdGlvbiBLZXlzIHByZXNlcnZlZCBmcm9tIGQ0Mw0KICAgICAgICBjb25zdCBNTVBUX0FVVEhfS0VZID0gJzJrZ3pkdmVpMTBjM3Jtaic7DQogICAgICAgIGNvbnN0IE1NUFRfQVVUSF9TRUNSRVQgPSAnN3dqbHFrM3Frb3M2a29yJzsNCiAgICAgICAgY29uc3QgTU1QVF9BVVRIX1JFRlJFU0ggPSAnSFdnNmtTVEVHc3NBQUFBQUFBQUFBWTZqWV83T3U3YndTOHBYQjMyY0MtU2dvSGRiVnhpRkQ3MFhpVTQ1elU5Mic7DQoNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0RCID0gJy9EYXRhQmFzZXMvTU1QVDIuS1AnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfVVNFUlMgPSAnL1NldHRpbmdzL1VzZXJzLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9BUFBST1ZFRCA9ICcvU2V0dGluZ3MvQXBwcm92ZWQudHh0JzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0xPR08gPSAnL0ltYWdlcy9Mb2dvLmpwZyc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9EUk9QRE9XTlMgPSAnL1NldHRpbmdzL0Ryb3BEb3duLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9DQVNIID0gJy9TZXR0aW5ncy9DYXNoRGVwb3NpdGVkLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9CQU5LID0gJy9EYXRhQmFzZXMvTU1QVDMuS1AnOw0KICAgICAgICBjb25zdCBNTVBUX1VSTF9FWFBFTlNFUyA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2E1ZTg4dmp6YjZ3MnFtZWwzeXN5eC9FeHBlbnNlcy54bHN4P3Jsa2V5PWptZDhpMGpzMXNreGwydnlhdnM3cG84eXAmZGw9MSI7DQogICAgICAgIGNvbnN0IEJBTktfU1RBVEVNRU5UX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2YyN211eWxvYmRhanZ6bXhjaTg1ZC9CYW5rU3RhdGVtZW50Lnhscz9ybGtleT1yNDNqMHN2bm1saWczcW02aWFpcmJ0b2pkJmRsPTEiOw0KICAgICAgICBjb25zdCBFWEVNUFRfRklMRSA9ICIvU2V0dGluZ3MvRXhlbXB0LnR4dCI7DQogICAgICAgIGNvbnN0IE1NUFRfTE9HX0RJUiA9ICIvTG9ncy8iOyAvLyBUaGUgZm9sZGVyIGZvciB1c2VyIGxvZ3MNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX1NFUSA9ICcvRGF0YUJhc2VzL3NlcXVlbmNlLnR4dCc7DQogICAgICAgIGxldCBNTVBUX1JBRElPX0ZJTEUgPSAnJzsNCg0KICAgICAgICBjb25zdCBNTVBUX0xJTktfQU5PTlkgPSAnaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS8zdDVkNmoyYXExdmF6bmw1aTl6N3gvQW5vbnlGaWxsLnR4dD9ybGtleT1ueGZsOXkyN3BlZXF2MHRzemVqY2kzZmU2JmRsPTEnOw0KDQogICAgICAgIGNvbnN0IE1NUFRfREJfUkFXX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2o2dTNobzE0ZHh5ZHI1djZoNWhiaS9NTVBUMi5LUD9ybGtleT0zZWt1cnJxOHdrejA4YnNwaXh6Z2pqNXpyJnN0PWNwdHlubmJkJnJhdz0xIjsNCg0KICAgICAgICBjb25zdCBDSVRZX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpLzQ3ZmJxdzc5cW9seWNxYjM1czh1Zy9DaXR5Q29ycmVjdGlvbnMudHh0P3Jsa2V5PXp3M3ViN3IzdDJpbzRiZDJxcTNhdXk0NHkmZGw9MSI7DQoNCiAgICAgICAgY29uc3QgQ09VTlRSWV9DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9nbnIxbzJkNHJjYmRiejc1Znhma2IvQ291bnRyeUNvcnJlY3Rpb25zLnR4dD9ybGtleT03NGZsdHJ4eW04ZzBnODhxZWllamoxYnd6JmRsPTEiOw0KDQogICAgICAgIGNvbnN0IE5BTUVfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvYnFieHZ4YjFpMjNzOHJkb2Y3anYyL05hbWVDb3JyZWN0aW9ucy50eHQ/cmxrZXk9aHR4ZTUyZzhleW0wbmVwYXd2ZmlzNTJtaCZkbD0xIjsNCg0KICAgICAgICBjb25zdCBNTVBUX0JBQ0tVUF9ESVIgPSAnL0JhY2t1cC8nOw0KDQogICAgICAgIGNvbnN0IE1NUFRfSU1HX0VWRU5UMSA9ICcvSW1hZ2VzL0V2ZW50MS5qcGcnOw0KICAgICAgICBjb25zdCBNTVBUX0lNR19FVkVOVDIgPSAnL0ltYWdlcy9FdmVudDIuanBnJzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0VWRU5UU19UWFQgPSAnL0ltYWdlcy9FdmVudHNEZXRhaWxzLnR4dCc7DQoNCiAgICAgICAgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPSAwOyAvLyBEZWZhdWx0OiBObyByZXN0cmljdGlvbg0KDQogICAgICAgIGNvbnN0IHBhbmVsQ29udGVudCA9ICh0aXRsZSwgdXJsKSA9PiBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmOTkzMzsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxMHB4OyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBmbGV4LXNocmluazogMDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RpdGxlfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV2ZW50LWltZy1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHt1cmx9IiBhbHQ9IkV2ZW50Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCmA7DQoNCiAgICAgICAgbGV0IGlzRGlydHkgPSBmYWxzZTsgLy8gVHJhY2tzIGlmIHRoZSByZWNvcmQgaGFzIHVuc2F2ZWQgY2hhbmdlcw0KDQogICAgICAgIGxldCBNTVBUX1RFTVAxID0gIiI7DQogICAgICAgIGxldCBNTVBUX1RFTVAzID0gIiI7DQoNCiAgICAgICAgbGV0IE1NUFRfVVNFUl9OQU1FID0gIiI7DQogICAgICAgIGxldCBNTVBUX0RFVklDRV9JRCA9ICIiOw0KDQoNCiAgICAgICAgbGV0IEdMT0JBTF9EQl9MSU5FUyA9IFtdOw0KICAgICAgICBsZXQgY3VycmVudFJlY29yZEluZGV4ID0gMDsNCiAgICAgICAgbGV0IGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gLTE7DQogICAgICAgIGxldCB0ID0gIiI7DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQ29uc2VudCBsZXR0ZXIgZG93bmxvYWQgYnV0dG9uIGVuYWJsZSAvIGRpc2FibGUgbG9naWMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIC0tLSBORVcgQ09OU0VOVCBMT0dJQyAtLS0NCiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVDb25zZW50KCkgew0KICAgICAgICAgICAgY29uc3QgYW10ID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fY29uc2VudCcpOw0KDQogICAgICAgICAgICAvLyBSdWxlOiBFbmFibGVkIChTb2xpZCBSZWQpIGlmIFRvd2FyZHMgaXMgQ29ycHVzIEFORCBBbW91bnQgPj0gMTAsMDAwDQogICAgICAgICAgICAvLyBPdGhlcndpc2U6IERpc2FibGVkIChGYWRlZCBSZWQpDQogICAgICAgICAgICBpZiAodG93YXJkcy5pbmNsdWRlcygiQ09SUFVTIikgJiYgYW10ID49IDEwMDAwKSB7DQogICAgICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJidG4tYWN0aW9uIGJ0bi1jb25zZW50LWFjdGl2ZSI7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJidG4tYWN0aW9uIGJ0bi1jb25zZW50LWRpc2FibGVkIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1BvcHVsYXRlcyB0aGUgMjAgZmllbGRzIG9mIHJlY2VpcHRzIGZyb20gZGIgZm9yIHNlbGVjdGVkIHJlY2VpcHQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlSZWNvcmQoaW5kZXgpIHsNCiAgICAgICAgICAgIGlmICghR0xPQkFMX0RCX0xJTkVTW2luZGV4XSkgcmV0dXJuOw0KDQoNCiAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgIHJlc2V0U2lkZVBhbmVscygpOw0KDQoNCiAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBHTE9CQUxfREJfTElORVNbaW5kZXhdLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgIC8vIEhlbHBlciB0byBzYWZlbHkgc2V0IHZhbHVlcw0KICAgICAgICAgICAgY29uc3Qgc2V0VmFsID0gKGlkLCB2YWwpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLnZhbHVlID0gdmFsID8gdmFsLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgY29uc3Qgc2V0Q2hlY2sgPSAoaWQsIHZhbCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZWwuY2hlY2tlZCA9ICh2YWw/LnRyaW0oKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIik7DQogICAgICAgICAgICB9Ow0KDQoNCiAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgIHdyaXRlVXNlckxvZygidmlld2VkIHJlY2VpcHQgbnVtYmVyOiAiICsgKGNvbHNbMF0gfHwgIkJMQU5LIikpOw0KDQogICAgICAgICAgICAvLyBFWEFDVCBNQVBQSU5HIEZPUiBNTVBUMi5LUCAoVjEuNyBTdGFuZGFyZHMpDQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3JlY25vJywgY29sc1swXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2RhdGUnLCBjb2xzWzFdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfbmFtZScsIGNvbHNbMl0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9waG9uZScsIGNvbHNbM10pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9hZGRyZXNzJywgY29sc1s0XT8ucmVwbGFjZSgvfi9nLCAnXG4nKSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2VtYWlsJywgY29sc1s1XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3BhbicsIGNvbHNbNl0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9zdGFyJywgY29sc1s3XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2dvdGhyYW0nLCBjb2xzWzhdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfYW1vdW50JywgY29sc1s5XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3JlZicsIGNvbHNbMTBdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfbW9kZScsIGNvbHNbMTFdKTsNCg0KICAgICAgICAgICAgLy8gVG93YXJkcyBvZnRlbiBjb250YWlucyBhIHN1ZmZpeCAoZS5nLiwgIkNPUlBVUyAtIDgwRyIpLCB3ZSB0cmltIGl0IGZvciB0aGUgZHJvcGRvd24gbWF0Y2gNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHNSYXcgPSBjb2xzWzEyXSB8fCAiIjsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfdG93YXJkcycsIHRvd2FyZHNSYXcuc3BsaXQoJy0nKVswXS50cmltKCkpOw0KDQogICAgICAgICAgICBzZXRDaGVjaygnZmllbGRfY2FuY2VsJywgY29sc1sxM10pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9jb21tZW50cycsIGNvbHNbMTRdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfcGluY29kZScsIGNvbHNbMTVdKTsNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9wcmludGVkJywgY29sc1sxNl0pOw0KICAgICAgICAgICAgc2V0Q2hlY2soJ2ZpZWxkX3ByYXNhZGFtJywgY29sc1sxN10pOw0KICAgICAgICAgICAgc2V0Q2hlY2soJ2ZpZWxkX2NvcnB1cycsIGNvbHNbMThdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfY291bnRyeScsIGNvbHNbMTldIHx8ICJJTkRJQSIpOw0KDQogICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0ZUNvbnNlbnQgPT09ICJmdW5jdGlvbiIpIHZhbGlkYXRlQ29uc2VudCgpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVSZWNlaXB0UHJldmlldyA9PT0gImZ1bmN0aW9uIikgdXBkYXRlUmVjZWlwdFByZXZpZXcoaW5kZXgpOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlID0gaW5kZXg7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9SZWNlaXB0IFByZXZpZXcNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlY2VpcHRQcmV2aWV3KGluZGV4KSB7DQogICAgICAgICAgICBjb25zdCBmID0gR0xPQkFMX0RCX0xJTkVTW2luZGV4XS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgY29uc3QgbG9nb1NyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluTG9nb0ltZycpPy5zcmMgfHwgIiI7DQoNCiAgICAgICAgICAgIC8vIEV4dHJhY3Qgc3BlY2lhbCB0b3dhcmRzIHticmFja2V0c30NCiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzID0gZlsxNF0gfHwgIiI7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsTWF0Y2ggPSBjb21tZW50cy5tYXRjaCgvXHsuKj9cfS8pOw0KICAgICAgICAgICAgY29uc3Qgc3BlY2lhbFRvd2FyZHMgPSBzcGVjaWFsTWF0Y2ggPyBzcGVjaWFsTWF0Y2hbMF0gOiAiIjsNCg0KICAgICAgICAgICAgLy8gRGF0YSBNYXBwaW5nDQogICAgICAgICAgICBjb25zdCBwaW5jb2RlID0gZlsxNV0gfHwgIiI7DQogICAgICAgICAgICBjb25zdCBjb3VudHJ5ID0gZlsxOV0gfHwgIklORElBIjsNCg0KICAgICAgICAgICAgLy8gLS0tIFdBVEVSTUFSSyBMT0dJQyAtLS0NCiAgICAgICAgICAgIGNvbnN0IGlzQ2FuY2VsbGVkID0gKGZbMTNdPy50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyIpOw0KICAgICAgICAgICAgY29uc3Qgd2F0ZXJtYXJrSFRNTCA9IGlzQ2FuY2VsbGVkID8NCiAgICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB0b3A6IDUwJTsgbGVmdDogNTAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoLTMwZGVnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiA2MHB0OyBjb2xvcjogcmdiYSgyNTUsIDAsIDAsIDAuMjUpOyBmb250LXdlaWdodDogYm9sZDsgYm9yZGVyOiAxMHB4IHNvbGlkIHJnYmEoMjU1LCAwLCAwLCAwLjI1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4OyB6LWluZGV4OiAxMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FOQ0VMTEVEDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YCA6ICIiOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjZWlwdF9kaXNwbGF5X2FyZWEnKS5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVjZWlwdC1jb250YWluZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgcG9zaXRpb246IHJlbGF0aXZlOyBvdmVyZmxvdzogaGlkZGVuOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7d2F0ZXJtYXJrSFRNTH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImhlYWRlci10YWJsZSIgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJsb2dvLWNvbCIgc3R5bGU9IndpZHRoOiA3MHB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke2xvZ29TcmN9IiBzdHlsZT0id2lkdGg6IDcwcHQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iYWRkcmVzcy1jb2wiIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idHJ1c3QtbmFtZSIgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE0cHQ7Ij5NWUxBSSBNQUhBUEVSSVlBVkEgQU5VU0hBTSBUUlVTVCAoUkVHRC4pPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRydXN0LWRldGFpbHMiIHN0eWxlPSJmb250LXNpemU6IDlwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmV3IE5vLiA0LCBPbGQgTm8uIDIzLCBQaXRjaHVwaWxsYWkgU3RyZWV0LCBNeWxhcG9yZSwgQ2hlbm5haS02MDAgMDA0Ljxicj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBob25lOiA2MzgwODk4MjMxLCA4NjEwMjE0MTM4LiBXaGF0c0FwcDogNjM4MDg5ODIzMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ2YXJpYWJsZS1yb3ciIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi10b3A6IDE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPkRhdGU6ICR7ZlsxXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEycHQ7Ij5SRUNFSVBUPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+Tm86ICR7ZlswXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHQ7IGZvbnQtc2l6ZTogMTAuNXB0OyBsaW5lLWhlaWdodDogMS42OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWNlaXZlZCB3aXRoIHRoYW5rcyBScy4gPGI+JHtmWzldfTwvYj4gKDxiPlJ1cGVlcyAke3RvV29yZHMoZls5XSl9IG9ubHk8L2I+KSBmb3IgPGI+JHtmWzEyXX08L2I+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWEgJHtmWzExXX0gPGI+JHtmWzEwXSB8fCAnJ308L2I+IGZyb206DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpdmlkZXIiIHN0eWxlPSJib3JkZXItdG9wOiAxcHggc29saWQgI2NjYzsgbWFyZ2luOiAxMHB4IDA7Ij48L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImRvbm9yLXRhYmxlIiBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGxpbmUtaGVpZ2h0OiAxLjg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAyMCU7IHZlcnRpY2FsLWFsaWduOiB0b3A7Ij5OYW1lPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGI+JHtmWzJdfTwvYj48L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiB0b3A7Ij5QQU48L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7Zls2XSB8fCAnTi9BJ308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsiPiR7c3BlY2lhbFRvd2FyZHN9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPlBob25lPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtmWzNdIHx8ICdOL0EnfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPkFkZHJlc3M8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke2ZbNF19IC0gJHtwaW5jb2RlfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPkNvdW50cnk8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke2NvdW50cnl9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGl2aWRlciIgc3R5bGU9ImJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjOyBtYXJnaW46IDEwcHggMDsiPjwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogN3B0OyBmb250LXN0eWxlOiBpdGFsaWM7Ij4qQ29tcHV0ZXIgR2VuZXJhdGVkIFJlY2VpcHQgLSBObyBzaWduYXR1cmUgUmVxdWlyZWQ8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci10cnVzdC1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDlwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBNWUxBSSBNQUhBUEVSSVlBVkEgQU5VU0hBTSBUUlVTVA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci10YXgtaW5mbyIgc3R5bGU9ImZvbnQtc2l6ZTogOHB0OyBtYXJnaW4tdG9wOiAxNXB4OyBib3JkZXItdG9wOiAxcHggZGFzaGVkICNlZWU7IHBhZGRpbmctdG9wOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlYyAxMi1BIFZhbGlkIHRpbGwgMzEtMDMtMjAyNiB8IFBBTiBBQUVUTTUxNDVKDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KYDsNCg0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vRmV0Y2ggRHJvYm94IFRva2VuIGZyb20gYXBpDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBBbGwgQXV0aC9Ub2tlbi9Mb2FkIGxvZ2ljIHByZXNlcnZlZCBmcm9tIGQ0Mw0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXRNTVBUVG9rZW4oKSB7DQogICAgICAgICAgICBjb25zdCBoID0gYnRvYShNTVBUX0FVVEhfS0VZLnRyaW0oKSArICI6IiArIE1NUFRfQVVUSF9TRUNSRVQudHJpbSgpKTsNCiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vb2F1dGgyL3Rva2VuJywgew0KICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIGgsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9LA0KICAgICAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyAnZ3JhbnRfdHlwZSc6ICdyZWZyZXNoX3Rva2VuJywgJ3JlZnJlc2hfdG9rZW4nOiBNTVBUX0FVVEhfUkVGUkVTSC50cmltKCkgfSkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOyByZXR1cm4gZC5hY2Nlc3NfdG9rZW4gfHwgbnVsbDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0luaXRpYWxpemVzIGRhdGEgYXQgbGF1bmNoLiB2ZXJ5IGNydWNpYWwuIHByb2JsZW1hdGljIGZ1bmN0aW9uLiBub3QgdG8gYmUgZGlzdHVyYmVkLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZU1NUFQoKSB7DQogICAgICAgICAgICAvLyAxLiBIQVJEV0FSRSBJRCAmIFZFUlNJT04gU0VUVVANCiAgICAgICAgICAgIGNvbnN0IGN2cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOw0KICAgICAgICAgICAgY29uc3QgZ2wgPSBjdnMuZ2V0Q29udGV4dCgnd2ViZ2wnKTsNCiAgICAgICAgICAgIGNvbnN0IGRJID0gZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvJyk7DQogICAgICAgICAgICBjb25zdCByZW4gPSBnbC5nZXRQYXJhbWV0ZXIoZEkuVU5NQVNLRURfUkVOREVSRVJfV0VCR0wpOw0KICAgICAgICAgICAgbGV0IGhhc2ggPSAwOw0KICAgICAgICAgICAgY29uc3Qgc3RyID0gbmF2aWdhdG9yLnVzZXJBZ2VudCArIHJlbiArIHNjcmVlbi53aWR0aCArIHNjcmVlbi5oZWlnaHQ7DQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIHN0ci5jaGFyQ29kZUF0KGkpOw0KICAgICAgICAgICAgICAgIGhhc2ggfD0gMDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgZGV2SUQgPSBNTVBUX0dMT0JBTF9JRDsNCiAgICAgICAgICAgIE1NUFRfREVWSUNFX0lEID0gZGV2SUQ7DQoNCiAgICAgICAgICAgIC8vIFJlc3RvcmUgVUkgZGlzcGxheSBvZiBJRCBhbmQgVmVyc2lvbg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlEZXZpY2VJRCcpLmlubmVyVGV4dCA9IGRldklEOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlWZXJzaW9uJykuaW5uZXJUZXh0ID0gTU1QVF9WRVJTSU9OOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHQgPSBhd2FpdCBnZXRNTVBUVG9rZW4oKTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIExPR08gRkVUQ0ggTE9HSUMgKFJlc3RvcmVkKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGxSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0xPR08gfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKGxSLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBhd2FpdCBsUi5ibG9iKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHUgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGIpOw0KICAgICAgICAgICAgICAgICAgICAvLyBUaGlzICd1JyBpcyB0aGUgYmxvYiBVUkwgdXNlZCBieSBkaXNwbGF5UmVjb3JkIGZvciB0aGUgcmVjZWlwdCBsb2dvDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvQ29udGFpbmVyJykuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSIke3V9IiBjbGFzcz0ibG9nby1jaXJjbGUgbG9nby1sYXJnZSI+YDsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29IZWFkZXJDb250YWluZXInKS5pbm5lckhUTUwgPSBgPGltZyBpZD0ibWFpbkxvZ29JbWciIHNyYz0iJHt1fSIgY2xhc3M9ImxvZ28tY2lyY2xlIj5gOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIENyaXRpY2FsOiBFbnN1cmUgdGhlIGdsb2JhbCByZWZlcmVuY2UgZm9yIHRoZSByZWNlaXB0IGltYWdlIGV4aXN0cw0KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuTU1QVF9MT0dPX0JMT0JfVVJMID0gdTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBBQ0NFU1MgQ09OVFJPTCAmIE1VTFRJLVVTRVIgTE9HSUMNCiAgICAgICAgICAgICAgICBjb25zdCBhUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9BUFBST1ZFRCB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgYVQgPSBhd2FpdCBhUi50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCBtYXRjaGluZyB1c2VycyBmb3IgdGhpcyBkZXZpY2UNCiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gYVQuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gbC50cmltKCkgIT09ICIiICYmIGwuaW5jbHVkZXMoTU1QVF9ERVZJQ0VfSUQpKTsNCg0KICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gTVVMVEktVVNFUjogTGV0IHRoZSB1c2VyIHNlbGVjdCB0aGVpciBwcm9maWxlDQogICAgICAgICAgICAgICAgICAgIHNob3dVc2VySWRlbnRpdHlTZWxlY3RvcihtYXRjaGVzLCB0LCBNTVBUX0RFVklDRV9JRCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU0lOR0xFIFVTRVI6IFByb2NlZWQgdG8gc2VjdXJpdHkgZ2F0ZQ0KICAgICAgICAgICAgICAgICAgICBydW5QZXJzb25hbFNlY3VyaXR5R2F0ZShtYXRjaGVzWzBdLCBNTVBUX0RFVklDRV9JRCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZWQ6IExvZyB0aGUgc3VjY2Vzc2Z1bCBsYXVuY2gNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9nTGF1bmNoKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQUNDRVNTIFJFU1RSSUNURUQgKFJlc3RvcmVkIGZ1bGwgVUkgYmxvY2spDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1haW5BdXRoU2NyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhTY3JlZW4nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG1haW5BdXRoU2NyZWVuKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtYWluQXV0aFNjcmVlbi5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGhlaWdodDogMTAwdmg7IGJhY2tncm91bmQ6ICNmNGY0ZjQ7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMjBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiAxNXB4OyBib3JkZXI6IDJweCBzb2xpZCAjZmY0ZDRkOyBib3gtc2hhZG93OiAwIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuMSk7IG1heC13aWR0aDogNDUwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0iY29sb3I6ICNkOTUzNGY7Ij7wn5qrIEFDQ0VTUyBSRVNUUklDVEVEPC9oMj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkRldmljZSBJRDogPGI+JHtNTVBUX0RFVklDRV9JRH08L2I+IGlzIG5vdCByZWdpc3RlcmVkLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibG9jYXRpb24ucmVsb2FkKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZDk1MzRmOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMTJweCAyNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IHdpZHRoOiAxMDAlOyI+UkVUUlkgQ09OTkVDVElPTjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2hlY2tEZXZpY2VGb3JTTVMoKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJNTVBUIEluaXRpYWxpemF0aW9uIENyaXRpY2FsIEZhaWx1cmU6IiwgZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQoNCg0KDQoNCg0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUG9wdWxhdGVzIGRyb3Bkb3duIG1lbnVzIGZvciBUb3dhcmRzIGFuZCBNb2RlIC0gbGlzdCBmcm9tIERyb3BEb3duLnR4dCBpbiBzZXR0aW5ncyBmb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREcm9wZG93bnModG9rZW4pIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZHJSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfRFJPUERPV05TIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghZHJSLm9rKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCBkclIudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdHh0LnNwbGl0KCdcbicpLm1hcChsID0+IGwudHJpbSgpKS5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbVMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKTsNCg0KICAgICAgICAgICAgICAgIC8vIENsZWFyIGV4aXN0aW5nIG9wdGlvbnMNCiAgICAgICAgICAgICAgICBtUy5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICB0Uy5pbm5lckhUTUwgPSAiIjsNCg0KICAgICAgICAgICAgICAgIGxldCBjdXJTZWMgPSAiIjsNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igc2VjdGlvbiBoZWFkZXJzIGxpa2UgW01PREVdIG9yIFtUT1dBUkRTXQ0KICAgICAgICAgICAgICAgICAgICBpZiAobC5zdGFydHNXaXRoKCdbJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1clNlYyA9IGwudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIHZhbHVlIChwYXJ0IGJlZm9yZSB0aGUgaHlwaGVuKQ0KICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gbC5zcGxpdCgnLScpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIG8udmFsdWUgPSB2YWw7DQogICAgICAgICAgICAgICAgICAgIG8udGV4dENvbnRlbnQgPSB2YWw7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNlYyA9PT0gIltNT0RFXSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1TLmFwcGVuZENoaWxkKG8pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1clNlYyA9PT0gIltUT1dBUkRTXSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRTLmFwcGVuZENoaWxkKG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRyb3Bkb3ducyBQb3B1bGF0ZWQiKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkRyb3Bkb3duIGVycm9yOiIsIGVycik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Db252ZXJ0cyBudW1iZXJzIHRvIHdvcmRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b1dvcmRzKG4pIHsNCiAgICAgICAgICAgIGxldCBhID0gWycnLCAnT25lICcsICdUd28gJywgJ1RocmVlICcsICdGb3VyICcsICdGaXZlICcsICdTaXggJywgJ1NldmVuICcsICdFaWdodCAnLCAnTmluZSAnLCAnVGVuICcsICdFbGV2ZW4gJywgJ1R3ZWx2ZSAnLCAnVGhpcnRlZW4gJywgJ0ZvdXJ0ZWVuICcsICdGaWZ0ZWVuICcsICdTaXh0ZWVuICcsICdTZXZlbnRlZW4gJywgJ0VpZ2h0ZWVuICcsICdOaW5ldGVlbiAnXTsNCiAgICAgICAgICAgIGxldCBiID0gWycnLCAnJywgJ1R3ZW50eScsICdUaGlydHknLCAnRm9ydHknLCAnRmlmdHknLCAnU2l4dHknLCAnU2V2ZW50eScsICdFaWdodHknLCAnTmluZXR5J107DQogICAgICAgICAgICBsZXQgbnVtID0gKCcwMDAwMDAwMDAnICsgcGFyc2VJbnQobikpLnN1YnN0cigtOSkubWF0Y2goL14oXGR7Mn0pKFxkezJ9KShcZHsyfSkoXGR7MX0pKFxkezJ9KSQvKTsNCiAgICAgICAgICAgIGlmICghbnVtKSByZXR1cm4gIiI7DQogICAgICAgICAgICBsZXQgc3RyID0gJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVsxXSAhPSAwKSA/IChhW051bWJlcihudW1bMV0pXSB8fCBiW251bVsxXVswXV0gKyAnICcgKyBhW251bVsxXVsxXV0pICsgJ0Nyb3JlICcgOiAnJzsNCiAgICAgICAgICAgIHN0ciArPSAobnVtWzJdICE9IDApID8gKGFbTnVtYmVyKG51bVsyXSldIHx8IGJbbnVtWzJdWzBdXSArICcgJyArIGFbbnVtWzJdWzFdXSkgKyAnTGFraCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVszXSAhPSAwKSA/IChhW051bWJlcihudW1bM10pXSB8fCBiW251bVszXVswXV0gKyAnICcgKyBhW251bVszXVsxXV0pICsgJ1Rob3VzYW5kICcgOiAnJzsNCiAgICAgICAgICAgIHN0ciArPSAobnVtWzRdICE9IDApID8gKGFbTnVtYmVyKG51bVs0XSldIHx8IGJbbnVtWzRdWzBdXSArICcgJyArIGFbbnVtWzRdWzFdXSkgKyAnSHVuZHJlZCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVs1XSAhPSAwKSA/ICgoc3RyICE9ICcnKSA/ICdhbmQgJyA6ICcnKSArIChhW051bWJlcihudW1bNV0pXSB8fCBiW251bVs1XVswXV0gKyAnICcgKyBhW251bVs1XVsxXV0pIDogJyc7DQogICAgICAgICAgICByZXR1cm4gc3RyLnRyaW0oKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIG5hdmlnYXRlRGF0YWJhc2UodikgeyBjdXJyZW50UmVjb3JkSW5kZXggPSB2OyBkaXNwbGF5UmVjb3JkKHYpOyB9DQogICAgICAgIGZ1bmN0aW9uIGNoYW5nZVJlY29yZChkKSB7IGxldCBuID0gcGFyc2VJbnQoY3VycmVudFJlY29yZEluZGV4KSArIGQ7IGlmIChuID49IDAgJiYgbiA8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGgpIHsgY3VycmVudFJlY29yZEluZGV4ID0gbjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKS52YWx1ZSA9IG47IGRpc3BsYXlSZWNvcmQobik7IH0gfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NyZWF0ZXMgYSBOZXcgQ0cgUmVjZWlwdCAtIEFzc2luZ3MgYSBuZXcgdW5zZWQgQ0cgcmVjZWlwdCBudW1iZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlTmV3Uk4oKSB7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tcm4nKTsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTsNCg0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXROZXdSZWNlaXB0Jyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHNjcmlwdFVSTCwgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogZm9ybURhdGEgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlY2VpcHQgJiYgZGF0YS5pbmRleCkgew0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJHRU5FUkFURUQgTkVXIFJFQ0VJUFQ6ICIgKyBkYXRhLnJlY2VpcHQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMTogVXBkYXRlIHRoZSBnbG9iYWwgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gcGFyc2VJbnQoZGF0YS5pbmRleCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCAyOiBGSVggVEhFIE1FTU9SWSBHQVANCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRhdGFiYXNlIGhhcyA1MDAgcmVjb3JkcyAoMC00OTkpLCBhbmQgbmV3IGluZGV4IGlzIDUwMCwNCiAgICAgICAgICAgICAgICAgICAgLy8gd2UgTVVTVCBncm93IHRoZSBhcnJheSBzbyBpbmRleCA1MDAgYWN0dWFsbHkgZXhpc3RzLg0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA8PSBjdXJyZW50UmVjb3JkSW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5wdXNoKCIiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMzogUkVTRVQgU0VBUkNIIFRSQUNLRVINCiAgICAgICAgICAgICAgICAgICAgLy8gWW91ciBzZWFyY2ggZW5naW5lIGxpa2VseSB1c2VzIGEgdmFyaWFibGUgdG8gcmVtZW1iZXIgd2hlcmUgaXQgd2FzLg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXNldHRpbmcgdGhpcyBmb3JjZXMgc2VhcmNoIHRvIHJlLXNjYW4gZnJvbSB0aGUgbmV3IGVuZC4NCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXN0Rm91bmRTZWFyY2hJbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gLTE7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gYCR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtub3cuZ2V0RnVsbFllYXIoKX1gOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIEZpZWxkcw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZSA9IGRhdGEucmVjZWlwdDsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSA9IGZvcm1hdHRlZERhdGU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgZW50cnkgZmllbGRzDQogICAgICAgICAgICAgICAgICAgIFsnZmllbGRfbmFtZScsICdmaWVsZF9waG9uZScsICdmaWVsZF9hZGRyZXNzJywgJ2ZpZWxkX2VtYWlsJywgJ2ZpZWxkX3BhbicsICdmaWVsZF9zdGFyJywgJ2ZpZWxkX2dvdGhyYW0nLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3JlZicsICdmaWVsZF9jb21tZW50cyddLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSAiMDAwMDAwIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSA9ICJJTkRJQSI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUgPSAiQ2FzaCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUgPSAiT1RIRVJTIjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbENoZWNrKSBjYW5jZWxDaGVjay5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3ByaW50ZWQnKS5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmFzYWRhbScpLmNoZWNrZWQgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDQ6IFN5bmMgdGhlIHNwZWNpZmljIGxpbmUgaW4gbWVtb3J5DQogICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdID0gYCR7ZGF0YS5yZWNlaXB0fXwke2Zvcm1hdHRlZERhdGV9fHx8fHx8fHx8fHxDYXNofE9USEVSU3xZRVN8fDAwMDAwMHxOT3xOT3x8SU5ESUFgOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgNTogVXBkYXRlIHRoZSBTbGlkZXINCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7IC8vIC0gMTsgLy8gRXhwbGljaXRseSB1c2UgdGhlIG5ldyBhcnJheSBsZW5ndGgNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KDQogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAoVGhlIHJlc3Qgb2YgeW91ciBldmVudCBsaXN0ZW5lciBsb2dpYyBmb3IgdW5jaGVja2luZyBjYW5jZWwgc3RheXMgZXhhY3RseSB0aGUgc2FtZSkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpZ2dlckZpZWxkcyA9IFsnZmllbGRfbmFtZScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcGhvbmUnLCAnZmllbGRfYWRkcmVzcyddOw0KICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyRmllbGRzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUudHJpbSgpICE9PSAiIiAmJiBjYW5jZWxDaGVjay5jaGVja2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxDaGVjay5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29scyA9IEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPj0gMTQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xzWzEzXSA9ICJOTyI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW2N1cnJlbnRSZWNvcmRJbmRleF0gPSBjb2xzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgICAgICBybkJ0bi5pbm5lclRleHQgPSAiUk4iOw0KICAgICAgICAgICAgICAgIC8vIERvIG5vdCByZS1lbmFibGUgcm5CdG4gaGVyZSwgaXQgc3RheXMgZGlzYWJsZWQgdW50aWwgbG9ja2VkIGFzIHBlciB5b3VyIGxvZ2ljDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRG93bmxvYWRzIGEgUERGIFJlY2VpcHQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkUmVjZWlwdFBERigpIHsNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjZWlwdC1jb250YWluZXInKTsNCiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlOw0KDQogICAgICAgICAgICBjb25zdCBvcHQgPSB7DQogICAgICAgICAgICAgICAgbWFyZ2luOiBbMC4yLCAwLjJdLCAvLyBbdG9wL2JvdHRvbSwgbGVmdC9yaWdodF0NCiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVjTm8gKyAnLnBkZicsDQogICAgICAgICAgICAgICAgaW1hZ2U6IHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAxIH0sDQogICAgICAgICAgICAgICAgaHRtbDJjYW52YXM6IHsNCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDIsDQogICAgICAgICAgICAgICAgICAgIHVzZUNPUlM6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIGxvZ2dpbmc6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAvLyBUaGVzZSB0d28gbGluZXMgYXJlIHRoZSBrZXkgdG8gZml4aW5nIHRoZSAiSGFsZiBQYWdlIiBjdXQtb2ZmOg0KICAgICAgICAgICAgICAgICAgICBzY3JvbGxZOiAwLA0KICAgICAgICAgICAgICAgICAgICB3aW5kb3dIZWlnaHQ6IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBqc1BERjogeyB1bml0OiAnaW4nLCBmb3JtYXQ6ICdhNCcsIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIC8vIE5ldyBsb2dpYzogVXNlICdodG1sMnBkZicgdG8gY2FwdHVyZSB0aGUgZnVsbCBzY3JvbGwgaGVpZ2h0DQogICAgICAgICAgICBodG1sMnBkZigpLmZyb20oZWxlbWVudCkuc2V0KG9wdCkudG9QZGYoKS5nZXQoJ3BkZicpLnRoZW4oZnVuY3Rpb24gKHBkZikgew0KICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgUERGIG9ubHkgaGFzIDEgcGFnZQ0KICAgICAgICAgICAgICAgIHZhciB0b3RhbFBhZ2VzID0gcGRmLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdG90YWxQYWdlczsgaSA+IDE7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBwZGYuZGVsZXRlUGFnZShpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KS5zYXZlKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU2VuZHMgYSB3aGF0c2FwcCB0ZXh0IG1lc3NhZ2UgYWxvbmcgd2l0aCBvcHRpb24gb2YgcGFzdGluZyBhY3R1YWwgcmVjZWlwdCAtIGRpcmVjdCB0byBkb25vciB0ZWxlcGhvbmUgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzZW5kV2hhdHNBcHAoKSB7DQogICAgICAgICAgICBjb25zdCByZWNlaXB0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWNlaXB0LWNvbnRhaW5lcicpOw0KDQogICAgICAgICAgICAvLyAxLiBQRVJGT1JNIENMSVBCT0FSRCBDT1BZIChXYWl0IGZvciBpdCB0byBmaW5pc2gpDQogICAgICAgICAgICBpZiAocmVjZWlwdEVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBhd2FpdCBodG1sMmNhbnZhcyhyZWNlaXB0RWxlbWVudCwgeyBzY2FsZTogMiwgdXNlQ09SUzogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2FudmFzLnRvQmxvYihyZXNvbHZlKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgQ2xpcGJvYXJkSXRlbSh7ICJpbWFnZS9wbmciOiBibG9iIH0pOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtpdGVtXSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDbGlwYm9hcmQgSW1hZ2UgUmVhZHkiKTsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQ2xpcGJvYXJkIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBDT0xMRUNUIERBVEEgRk9SIFRFWFQNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBwaG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLnJlcGxhY2UoL1xEL2csICcnKTsNCg0KICAgICAgICAgICAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29tbWVudHMnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxNYXRjaCA9IGNvbW1lbnRzLm1hdGNoKC9cey4qP1x9Lyk7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsU3RyID0gc3BlY2lhbE1hdGNoID8gYCAoJHtzcGVjaWFsTWF0Y2hbMF19KWAgOiAiIjsNCg0KICAgICAgICAgICAgaWYgKCFwaG9uZSkgeyBhbGVydCgiTm8gcGhvbmUgbnVtYmVyISIpOyByZXR1cm47IH0NCg0KICAgICAgICAgICAgLy8gMy4gQlVJTEQgVEVYVCBVUkwNCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPQ0KICAgICAgICAgICAgICAgIGAqTVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1QqJTBBYCArDQogICAgICAgICAgICAgICAgYC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0lMEFgICsNCiAgICAgICAgICAgICAgICBgKlJlY2VpcHQgTm86KiAke3JlY05vfSUwQWAgKw0KICAgICAgICAgICAgICAgIGAqRGF0ZToqICR7ZGF0ZX0lMEElMEFgICsNCiAgICAgICAgICAgICAgICBgUmVjZWl2ZWQgd2l0aCB0aGFua3MgZnJvbSAqU2hyaS9TbXQuICR7bmFtZX0qJTBBYCArDQogICAgICAgICAgICAgICAgYGEgc3VtIG9mICpScy4gJHthbW91bnR9KiBvbmx5JTBBYCArDQogICAgICAgICAgICAgICAgYHRvd2FyZHMgKiR7dG93YXJkc30ke3NwZWNpYWxTdHJ9KiUwQSUwQWAgKw0KICAgICAgICAgICAgICAgIGBfVHJ1c3QgUmVnaXN0cmF0aW9uIHZhbGlkIHRpbGwgMzEtMDMtMjAyNl9gOw0KDQogICAgICAgICAgICBjb25zdCB3YVVybCA9IGBodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT05MSR7cGhvbmV9JnRleHQ9JHttZXNzYWdlfWA7DQoNCiAgICAgICAgICAgIC8vIDQuIE9QRU4gV0hBVFNBUFANCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHdhVXJsLCAnX2JsYW5rJyk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRG93bmxvYWRzIGEgQ29uc2VudCBsZXR0ZXIgZm9yIGEgRG9ub3IgLSBmb3IgY29ycHVzIGFuZCBhbW91bnQgPj0xMDAwMA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY29uc2VudEFjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcmVmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlIDogIiI7DQoNCiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZEFkZHJlc3MgPSBhZGRyZXNzLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7DQogICAgICAgICAgICBjb25zdCBhbW91bnRJbldvcmRzID0gTnVtYmVyKGFtb3VudCkudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJykgKyAiIE9ubHkiOw0KDQogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAvLyBVc2luZyBhIHNsaWdodGx5IHNtYWxsZXIgcGFkZGluZyB0byBlbnN1cmUgMS1wYWdlIGZpdA0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuNmluIDAuNzVpbic7DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnIlRpbWVzIE5ldyBSb21hbiIsIHNlcmlmJzsNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9ICcxLjQnOyAvLyBTbGlnaHRseSB0aWdodGVyIGxpbmUgaGVpZ2h0DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gJyMwMDAnOw0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9ICcxMnB0JzsNCg0KICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsgbWFyZ2luLWJvdHRvbTogMzBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ3aWR0aDogNTUlOyB0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij48Yj5Gcm9tOjwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij48Yj4ke25hbWV9PC9iPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPiR7Zm9ybWF0dGVkQWRkcmVzc308L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5QaDogJHtwaG9uZX08L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMzVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij48Yj5Ubzo8L2I+PC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij48Yj5NWUxBSSBNQUhBUEVSSVlBVkEgQU5VU0hBTSBUUlVTVDwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPlNocmVlIEdhbmVzaCBGbGF0cyw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPk5ldyBOby4gNTIvMiwgTm9ydGggTWFkYSBTdHJlZXQsPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5NeWxhcG9yZSwgQ2hlbm5haSA2MDAgMDA0LjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAzMHB4OyBmb250LXNpemU6IDEzcHQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3ViOiBEb25hdGlvbiBUb3dhcmRzIENPUlBVUyBvZiB0aGUgVHJ1c3QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlNpciw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+SSBoZXJlYnkgY29uZmlybSB0aGF0IG15IGNvbnRyaWJ1dGlvbiBhcyBwZXIgZGV0YWlscyBnaXZlbiBiZWxvdyBpcyB0b3dhcmRzIDxiPkNPUlBVUzwvYj4gb2YgTXlsYWkgTWFoYXBlcml5YXZhIEFudXNoYW0gVHJ1c3QuPC9wPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luOiAyNXB4IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0id2lkdGg6IDM1JTsgcGFkZGluZzogNHB4IDA7Ij5BbW91bnQ8L3RkPjx0ZD46IFJzLiA8Yj4ke2Ftb3VudH08L2I+PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5BbW91bnQgaW4gV29yZHM8L3RkPjx0ZD46IFJ1cGVlcyAke2Ftb3VudEluV29yZHN9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5QYXltZW50IFJlZmVyZW5jZTwvdGQ+PHRkPjogJHtyZWZ9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5SZWNlaXB0IE51bWJlcjwvdGQ+PHRkPjogPGI+JHtyZWNOb308L2I+PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5EYXRlPC90ZD48dGQ+OiAke2RhdGV9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5QaG9uZSBOdW1iZXI8L3RkPjx0ZD46ICR7cGhvbmV9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5QQU48L3RkPjx0ZD46ICR7cGFufTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91cnMgc2luY2VyZWx5LDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+X19fX19fX19fX19fX19fX19fX19fX19fX188L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7IHBhZGRpbmctdG9wOiA1cHg7Ij4oPGI+JHtuYW1lfTwvYj4pPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCmA7DQoNCiAgICAgICAgICAgIGNvbnN0IG9wdCA9IHsNCiAgICAgICAgICAgICAgICBtYXJnaW46IDAsDQogICAgICAgICAgICAgICAgZmlsZW5hbWU6ICdDb25zZW50IExldHRlciAnICsgcmVjTm8gKyAnLnBkZicsDQogICAgICAgICAgICAgICAgaW1hZ2U6IHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAwLjk4IH0sDQogICAgICAgICAgICAgICAgaHRtbDJjYW52YXM6IHsgc2NhbGU6IDIsIGxvZ2dpbmc6IGZhbHNlIH0sDQogICAgICAgICAgICAgICAganNQREY6IHsgdW5pdDogJ2luJywgZm9ybWF0OiAnYTQnLCBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JyB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBodG1sMnBkZigpLnNldChvcHQpLmZyb20oZWxlbWVudCkuc2F2ZSgpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gTG9hZHMgSW5pdGlhbCBEYXRhIGR1cmluZyBsYXVuY2guICBJbXBvcnRhbnQgbm90IHRvIGRpc3R1cmJlZC4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhKHQpIHsNCiAgICAgICAgICAgIC8vIDEuIEtJTEwgVEhFIFNQTEFTSCBTQ1JFRU4gSU1NRURJQVRFTFkNCiAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyBubyAiU3R1Y2sgYXQgRGV2aWNlIElEIiBzY3JlZW4NCiAgICAgICAgICAgIC8vIFNob3cgb3ZlcmxheQ0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoU2NyZWVuJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQXBwQ29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFwcCB2aXNpYmxlLiBMb2FkaW5nIGRhdGEgd2l0aCB0b2tlbi4uLiIpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gSURFTlRJRlkgVVNFUiAoVGhlIEQyNyBmaXgpDQogICAgICAgICAgICAgICAgLy8gV2UgZmluZCB0aGUgcmVhbCBuYW1lIHNvIHBvbGxpbmcgZG9lc24ndCBqdXN0IHNob3cgIlVzZXIiDQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBwUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9BUFBST1ZFRCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYXBwUi5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBwVHh0ID0gYXdhaXQgYXBwUi50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGFwcFR4dC5zcGxpdCgnXG4nKS5maW5kKGwgPT4gbC5pbmNsdWRlcyhNTVBUX0RFVklDRV9JRCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NTVBUX1VTRVJfTkFNRSA9IG1hdGNoLnNwbGl0KCd8JylbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJXZWxjb21lICIgKyBNTVBUX1VTRVJfTkFNRSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIElOU0VSVCBTRUNVUklUWSBDQUxMIEhFUkUgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwbHlVc2VyUGVybWlzc2lvbnMoTU1QVF9VU0VSX05BTUUpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUkVTVE9SRUQ6IFRyaWdnZXIgdGhlIFNlY3VyaXR5IFBob3RvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1NUFRfUkFESU9fRklMRSA9IGAvU2V0dGluZ3MvJHtNTVBUX1VTRVJfTkFNRX1SYWRpb3MudHh0YDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRSYWRpb3ModCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUud2FybigiSWRlbnRpdHkgbG9va3VwIGZhaWxlZCwgZGVmYXVsdGluZyB0byBVbmtub3duIik7IH0NCg0KICAgICAgICAgICAgICAgIC8vIDMuIEZFVENIIERBVEFCQVNFICYgU0VDT05EQVJZIEZJTEVTDQogICAgICAgICAgICAgICAgY29uc3QgZGJSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJUeHQgPSBhd2FpdCBkYlIudGV4dCgpOw0KICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUyA9IGRiVHh0LnNwbGl0KCdcbicpLm1hcChsID0+IGwudHJpbSgpKS5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDEwKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IFtjYXNoUiwgYmFua1JdID0gYXdhaXQgUHJvbWlzZS5hbGwoWw0KICAgICAgICAgICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9DQVNIIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gKHsgb2s6IGZhbHNlIH0pKSwNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQkFOSyB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+ICh7IG9rOiBmYWxzZSB9KSkNCiAgICAgICAgICAgICAgICBdKTsNCg0KICAgICAgICAgICAgICAgIGxldCBjYXNoQ29udGVudCA9IGNhc2hSLm9rID8gKGF3YWl0IGNhc2hSLnRleHQoKSkudG9VcHBlckNhc2UoKSA6ICIiOw0KICAgICAgICAgICAgICAgIGxldCBiYW5rRGF0ZSA9ICItLS0iOw0KICAgICAgICAgICAgICAgIGlmIChiYW5rUi5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibCA9IChhd2FpdCBiYW5rUi50ZXh0KCkpLnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJ3wnKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChibC5sZW5ndGggPiAwKSBiYW5rRGF0ZSA9IGJsW2JsLmxlbmd0aCAtIDFdLnNwbGl0KCd8JylbMF07DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gTE9BRCBEUk9QRE9XTlMgJiBEQVNIQk9BUkQNCiAgICAgICAgICAgICAgICBhd2FpdCBsb2FkRHJvcGRvd25zKHQpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZURhc2hib2FyZFN0YXRzKGNhc2hDb250ZW50LCBiYW5rRGF0ZSk7DQoNCg0KICAgICAgICAgICAgICAgIGxvYWRFdmVudFBhbmVscyh0KTsgLy8gVHJpZ2dlciB0aGUgZXZlbnQgY29sdW1uIGxvYWRpbmcNCg0KICAgICAgICAgICAgICAgIC8vIDUuIFNFVFVQIFNMSURFUg0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOw0KDQogICAgICAgICAgICAgICAgLy8gU0FGRSBUUklHR0VSOiBPbmx5IHJ1biBpZiB0aGUgZnVuY3Rpb24gZXhpc3RzDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidWlsZEZZSW5kZXggPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICAgICAgYnVpbGRGWUluZGV4KCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdXBkYXRlRGFzaGJvYXJkU3RhdHMoY2FzaENvbnRlbnQsIGJhbmtEYXRlKTsNCg0KICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IHNsaWRlci5tYXg7DQogICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gc2xpZGVyLm1heDsNCiAgICAgICAgICAgICAgICBjb25zdCBmbG9vciA9ICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiAmJiB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IDApID8gd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gOiAxOw0KICAgICAgICAgICAgICAgIHNsaWRlci5taW4gPSBmbG9vcjsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQoNCg0KDQogICAgICAgICAgICAgICAgLy8gNi4gU1RBUlQgQkFDS0dST1VORCBTRVJWSUNFUw0KICAgICAgICAgICAgICAgIGZldGNoRXhwZW5zZURhdGUoKTsgLy8gRXhjZWwgZmlsZQ0KICAgICAgICAgICAgICAgIHN0YXJ0QmFja2dyb3VuZFN5bmModCk7IC8vIFVzZXIgUG9sbGluZyAoVGhlIEQ3MSBTdHlsZSkNCg0KICAgICAgICAgICAgICAgIHdpbmRvdy5BQ0NFU1NfVE9LRU4gPSB0OyAvLyA8LS0tIEFERCBUSElTIExJTkUgT05MWQ0KDQogICAgICAgICAgICAgICAgLy8gSGlkZSBvdmVybGF5IG9uY2UgZXZlcnl0aGluZyBpcyByZW5kZXJlZA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlWZXJzaW9uJykuaW5uZXJUZXh0ID0gTU1QVF9WRVJTSU9OOw0KDQogICAgICAgICAgICAgICAgLy8gQUREIFRISVMgTElORSBGT1IgQVVUTy1CQUNLVVANCiAgICAgICAgICAgICAgICBydW5NTVBUQmFja3VwKHRydWUpOyAvLyBQYXNzaW5nIHRydWUgdG8gaW5kaWNhdGUgYSBzaWxlbnQvYXV0byBydW4NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigibG9hZERhdGEgQ3JpdGljYWwgRXJyb3I6IiwgZXJyKTsNCiAgICAgICAgICAgICAgICBhbGVydCgiTG9hZCBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBVcGRhdGVzIERhc2hib2FyZCBWYWx1ZXMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURhc2hib2FyZFN0YXRzKGNhc2hGaWxlLCBiRGF0ZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgckNvdW50ID0gMCwgckFtdCA9IDAsIGNDb3VudCA9IDAsIGNBbXQgPSAwOw0KDQogICAgICAgICAgICAgICAgcmVhZHlJbmRpY2VzID0gW107IC8vIDwtLS0gSU5TRVJUOiBSZXNldCB0aGUgbGlzdCBldmVyeSB0aW1lIHN0YXRzIHVwZGF0ZQ0KDQogICAgICAgICAgICAgICAgbGV0IGxhdEQgPSAwLCBsYXREaXNwID0gIi0tLSI7DQogICAgICAgICAgICAgICAgY29uc3QgY3V0T2ZmID0gMjAyNjAxMDE7DQogICAgICAgICAgICAgICAgY29uc3Qgc2FmZUNhc2hGaWxlID0gY2FzaEZpbGUgfHwgIiI7IC8vIFNhZmV0eSBhZ2FpbnN0ICd1bmRlZmluZWQnIGluY2x1ZGVzIGVycm9yDQoNCiAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGMubGVuZ3RoIDwgMTUpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCByTm8gPSAoY1swXSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRTdHIgPSAoY1sxXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhbXQgPSBwYXJzZUZsb2F0KGNbOV0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGUgPSAoY1sxMV0gfHwgIiIpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmMgPSAoY1sxM10gfHwgIiIpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZHIgPSAoY1s0XSB8fCAiIikudHJpbSgpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBkU3RyLnJlcGxhY2UoL1wvL2csICctJykuc3BsaXQoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHAubGVuZ3RoID09PSAzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5eXl5ID0gcFsyXS5sZW5ndGggPT09IDIgPyAiMjAiICsgcFsyXSA6IHBbMl07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkQ29tcCA9IHBhcnNlSW50KHl5eXkgKyBwWzFdLnBhZFN0YXJ0KDIsICcwJykgKyBwWzBdLnBhZFN0YXJ0KDIsICcwJykpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZENvbXAgPiBsYXREKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0RCA9IGRDb21wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdERpc3AgPSBjWzBdICsgIiAoIiArIGRTdHIgKyAiKSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkQ29tcCA+PSBjdXRPZmYgJiYgY2FuYyAhPT0gIllFUyIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYXNoIGNoZWNrIHdpdGggc2FmZXR5DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgckNsZWFuID0gck5vLnJlcGxhY2UoIk1QUyIsICIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gIkNBU0giICYmICFzYWZlQ2FzaEZpbGUuaW5jbHVkZXMock5vKSAmJiAhc2FmZUNhc2hGaWxlLmluY2x1ZGVzKHJDbGVhbikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0NvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNBbXQgKz0gYW10Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkeSBjaGVjaw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRyICE9PSAiIiAmJiAhKGNbMTZdID09PSAiWUVTIiAmJiBjWzE3XSA9PT0gIllFUyIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByQW10ICs9IGFtdDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5SW5kaWNlcy5wdXNoKGluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZtdCA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tSU4nLCB7IG1heGltdW1GcmFjdGlvbkRpZ2l0czogMCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Um93ID0gR0xPQkFMX0RCX0xJTkVTW0dMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxXS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfbGFzdF9yZWMnKS5pbm5lclRleHQgPSBsYXN0Um93WzBdICsgIiAoIiArIGxhc3RSb3dbMV0gKyAiKSI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfbGF0ZXN0X3JlYycpLmlubmVyVGV4dCA9IGxhdERpc3A7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfcmVhZHlfY291bnQnKS5pbm5lclRleHQgPSByQ291bnQgKyAiICjigrkiICsgZm10LmZvcm1hdChyQW10KSArICIpIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9jYXNoJykuaW5uZXJUZXh0ID0gY0NvdW50ICsgIiAo4oK5IiArIGZtdC5mb3JtYXQoY0FtdCkgKyAiKSI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfYmFua19kYXRlJykuaW5uZXJUZXh0ID0gYkRhdGUgfHwgIi0tLSI7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiU1RBVFMgRVJST1I6ICIgKyBlLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFVwZGF0ZXMgTGFzdCBleHBlbnNlIGFjY291bnQgZGF0ZSBmb3IgZGFzaGJvYXJkDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBmZXRjaEV4cGVuc2VEYXRlKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRmV0Y2hpbmcgRXhwZW5zZXMgYmFja2dyb3VuZC4uLiIpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGVSZXNwID0gYXdhaXQgZmV0Y2goTU1QVF9VUkxfRVhQRU5TRVMpOw0KICAgICAgICAgICAgICAgIGlmICghZVJlc3Aub2spIHRocm93IG5ldyBFcnJvcigiRmV0Y2ggZmFpbGVkIik7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGVSZXNwLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoYXJyYXlCdWZmZXIsIHsgdHlwZTogJ2FycmF5JyB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBzaGVldCA9IHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzBdXTsNCiAgICAgICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbihzaGVldCwgeyBoZWFkZXI6IDEgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblJvd3MgPSBqc29uRGF0YS5maWx0ZXIocm93ID0+IHJvdyAmJiByb3cubGVuZ3RoID4gMCAmJiByb3dbMF0pOw0KICAgICAgICAgICAgICAgIGlmIChjbGVhblJvd3MubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBEYXRlID0gY2xlYW5Sb3dzW2NsZWFuUm93cy5sZW5ndGggLSAxXVswXSB8fCAiLS0tIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hfZXhwZW5zZXMnKS5pbm5lclRleHQgPSBleHBEYXRlOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXhwZW5zZSBEYXRlIHVwZGF0ZWQ6IiwgZXhwRGF0ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiRXhwZW5zZSBkYXRlIGNvdWxkIG5vdCBiZSBsb2FkZWQgKGxpa2VseSBDT1JTKS4gRGVmYXVsdGluZyB0byAtLS0iKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9leHBlbnNlcycpLmlubmVyVGV4dCA9ICItLS0iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFN5bmNzIHVzZXIgc3RhdHVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBUSEUgU1lOQyBGVU5DVElPTiAoQ29ycmVjdGVkIEQ3MSBsb2dpYykNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc3RhcnRCYWNrZ3JvdW5kU3luYyh0b2tlbikgew0KICAgICAgICAgICAgY29uc3QgcnVuU3luYyA9IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIU1NUFRfVVNFUl9OQU1FIHx8IE1NUFRfVVNFUl9OQU1FID09PSAiVW5rbm93biIpIHJldHVybjsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX1VTRVJTIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZUxpbmVzID0gW107DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlTGluZXMgPSB0eHQuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBsLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCBlbnRyaWVzIGZyb20gbGFzdCAzIG1pbnMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5sZW5ndGggPj0gMyAmJiAobm93IC0gcGFyc2VJbnQocFsyXSkpIDwgMTgwMDAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBhY3RpdmVMaW5lcyA9IGFjdGl2ZUxpbmVzLmZpbHRlcihsID0+ICFsLnN0YXJ0c1dpdGgoTU1QVF9ERVZJQ0VfSUQpKTsNCiAgICAgICAgICAgICAgICAgICAgYWN0aXZlTGluZXMucHVzaChgJHtNTVBUX0RFVklDRV9JRH18JHtNTVBUX1VTRVJfTkFNRX18JHtub3d9YCk7DQoNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX1VTRVJTLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBhY3RpdmVMaW5lcy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlVXNlckxpc3QnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3BsYXkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXkuaW5uZXJUZXh0ID0gYWN0aXZlTGluZXMubWFwKGwgPT4gbC5zcGxpdCgnfCcpWzFdKS5qb2luKCcsICcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGNvbnNvbGUubG9nKCJTeW5jIHNraXBwZWQiKTsgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHJ1blN5bmMoKTsNCiAgICAgICAgICAgIHNldEludGVydmFsKHJ1blN5bmMsIDQ1MDAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1VwZGF0ZXMgRXZlbnRzIGltYWdlcyBpbiBjb2xvdW1uIDEgYW5kIDMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRFdmVudFBhbmVscyh0b2tlbikgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfRVZFTlRTX1RYVCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgdGl0bGUxID0gIlJlY2VudCBFdmVudCIsIHRpdGxlMiA9ICJVcGNvbWluZyBFdmVudCI7DQogICAgICAgICAgICAgICAgaWYgKHIub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgci50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdHh0LnNwbGl0KC9ccj9cbi8pLm1hcChsID0+IGwudHJpbSgpKS5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDApOw0KICAgICAgICAgICAgICAgICAgICB0aXRsZTEgPSBsaW5lc1swXSB8fCB0aXRsZTE7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlMiA9IGxpbmVzWzFdIHx8IHRpdGxlMjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBnZXRJbWdVcmwgPSBhc3luYyAocGF0aCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9nZXRfdGVtcG9yYXJ5X2xpbmsnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBwYXRoIH0pDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubGluazsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgY29uc3QgW3VybDEsIHVybDJdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2dldEltZ1VybChNTVBUX0lNR19FVkVOVDEpLCBnZXRJbWdVcmwoTU1QVF9JTUdfRVZFTlQyKV0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcGFuZWxDb250ZW50ID0gKHRpdGxlLCB1cmwpID0+IGANCjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICNmZjk5MzM7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAxNHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOGMwMDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGl0bGV9DQo8L2Rpdj4NCjxkaXYgY2xhc3M9ImV2ZW50LWltZy1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke3VybH0iPg0KPC9kaXY+DQpgOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MID0gcGFuZWxDb250ZW50KHRpdGxlMSwgdXJsMSk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTCA9IHBhbmVsQ29udGVudCh0aXRsZTIsIHVybDIpOw0KICAgICAgICAgICAgICAgIE1NUFRfVEVNUDEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1ldmVudHMnKS5pbm5lckhUTUw7DQogICAgICAgICAgICAgICAgTU1QVF9URU1QMyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUw7DQoNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKCJFdmVudCBwYW5lbHMgZmFpbGVkOiIsIGUpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9VcGRhdGVzIHRoZSBsYXRlc3QgQmFuayBTdGF0ZW1lbnRzIGZyb20gYW4gRXhjZWwgRmlsZSBTdGF0ZW1lbnRzLnhscyAtIENyZWF0ZXMgbmV3IHJjZWlwdHMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEFkZCB0aGlzIHRvIHlvdXIgZ2xvYmFsIHZhcmlhYmxlcyBhdCB0aGUgdG9wDQogICAgICAgIGxldCBpc0JhbmtVcGRhdGVkID0gZmFsc2U7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQmFua1N0YXRlbWVudHModG9rZW4pIHsNCiAgICAgICAgICAgIGlmICghdG9rZW4pIHsgYWxlcnQoIkVycm9yOiBObyBUb2tlbiBmb3VuZC4iKTsgcmV0dXJuOyB9DQogICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFuay1zeW5jLWJ0bicpOw0KICAgICAgICAgICAgaWYgKGJ0bikgeyBidG4uaW5uZXJUZXh0ID0gIlN5bmNpbmcuLi4iOyBidG4uZGlzYWJsZWQgPSB0cnVlOyB9DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggRXhjZWwgJiBCYW5rIFN0YXRlbWVudCAoTU1QVDMuS1ApDQogICAgICAgICAgICAgICAgY29uc3QgZXhjZWxSZXMgPSBhd2FpdCBmZXRjaCgiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9mMjdtdXlsb2JkYWp2em14Y2k4NWQvQmFua1N0YXRlbWVudC54bHM/cmxrZXk9cjQzajBzdm5tbGlnM3FtNmlhaXJidG9qZCZkbD0xIiwgeyBjYWNoZTogJ25vLXN0b3JlJyB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGV4Y2VsUmVzLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoYXJyYXlCdWZmZXIsIHsgdHlwZTogJ2FycmF5JywgY2VsbERhdGVzOiB0cnVlIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2VsUm93cyA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1swXV0sIHsgaGVhZGVyOiAxIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYmFua0ZpbGVSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9CQU5LIH0pIH0sDQogICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tc3RvcmUnDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbG9jYWxCYW5rQ29udGVudCA9IGJhbmtGaWxlUmVzLm9rID8gKGF3YWl0IGJhbmtGaWxlUmVzLnRleHQoKSkudHJpbSgpIDogIiI7DQogICAgICAgICAgICAgICAgbGV0IGJhbmtMaW5lcyA9IGxvY2FsQmFua0NvbnRlbnQuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gbC5pbmNsdWRlcygnfCcpKTsNCg0KICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QmFsID0gMDsNCiAgICAgICAgICAgICAgICBpZiAoYmFua0xpbmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RMaW5lID0gYmFua0xpbmVzW2JhbmtMaW5lcy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudEJhbCA9IHBhcnNlRmxvYXQobGFzdExpbmUuc3BsaXQoJ3wnKVs1XS5yZXBsYWNlKC9bXlxkLl0vZywgJycpKSB8fCAwOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGxldCBuZXdseUFkZGVkQmFua0xpbmVzID0gW107DQogICAgICAgICAgICAgICAgbGV0IHdvcmtpbmdCYW5rQ29udGVudCA9IGxvY2FsQmFua0NvbnRlbnQ7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBQcm9jZXNzIEV4Y2VsIFJvd3MNCiAgICAgICAgICAgICAgICBmb3IgKGxldCByb3cgb2YgZXhjZWxSb3dzKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBkYXRlVmFsID0gcm93WzBdOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaXNEYXRlID0gZGF0ZVZhbCBpbnN0YW5jZW9mIERhdGU7DQogICAgICAgICAgICAgICAgICAgIGxldCBpc0RhdGVTdHIgPSB0eXBlb2YgZGF0ZVZhbCA9PT0gJ3N0cmluZycgJiYgL15cZHsxLDJ9XC9cZHsxLDJ9XC9cZHs0fS8udGVzdChkYXRlVmFsLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICghaXNEYXRlICYmICFpc0RhdGVTdHIpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBkU3RyID0gaXNEYXRlID8gYCR7U3RyaW5nKGRhdGVWYWwuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfS8ke1N0cmluZyhkYXRlVmFsLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS8ke2RhdGVWYWwuZ2V0RnVsbFllYXIoKX1gIDogZGF0ZVZhbC50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJlZiA9IChyb3dbMV0gfHwgIiIpLnRvU3RyaW5nKCkucmVwbGFjZSgvXHMrL2csICcgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2hxID0gKHJvd1syXSB8fCAiIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBkZWIgPSBwYXJzZUZsb2F0KHJvd1szXSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNyZSA9IHBhcnNlRmxvYXQocm93WzRdKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBsZXQgcm93QmFsID0gcGFyc2VGbG9hdChyb3dbNV0pIHx8IDA7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd1N0cmluZyA9IGAke2RTdHJ9fCR7cmVmfXwke2NocX18JHtkZWIgfHwgIiJ9fCR7Y3JlIHx8ICIifXwke3Jvd0JhbC50b0ZpeGVkKDIpfXxgOw0KICAgICAgICAgICAgICAgICAgICBpZiAod29ya2luZ0JhbmtDb250ZW50LmluY2x1ZGVzKHJvd1N0cmluZy50cmltKCkpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICB3b3JraW5nQmFua0NvbnRlbnQgKz0gKHdvcmtpbmdCYW5rQ29udGVudC5sZW5ndGggPiAwID8gIlxuIiA6ICIiKSArIHJvd1N0cmluZzsNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudEJhbCA9IHJvd0JhbDsNCiAgICAgICAgICAgICAgICAgICAgbmV3bHlBZGRlZEJhbmtMaW5lcy5wdXNoKHJvd1N0cmluZyk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKG5ld2x5QWRkZWRCYW5rTGluZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEE6IFVQREFURSBCQU5LIEZJTEUgKE1NUFQzLktQKQ0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogTU1QVF9GSUxFX0JBTkssICJtb2RlIjogIm92ZXJ3cml0ZSIgfSksICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogd29ya2luZ0JhbmtDb250ZW50DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgQjogRE9XTkxPQUQgTUFJTiBEQiAoTU1QVDIuS1ApDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0sIGNhY2hlOiAnbm8tc3RvcmUnDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudERCQ29udGVudCA9IChhd2FpdCBkYlJlcy50ZXh0KCkpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRiTGluZXMgPSBjdXJyZW50REJDb250ZW50LnNwbGl0KCdcbicpOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBtYXhDRyA9IDA7DQogICAgICAgICAgICAgICAgICAgIGRiTGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Q29sID0gbGluZS5zcGxpdCgnfCcpWzBdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Q29sLnRvVXBwZXJDYXNlKCkuc3RhcnRzV2l0aCgiQ0ciKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuID0gcGFyc2VJbnQoZmlyc3RDb2wucmVwbGFjZSgiQ0ciLCAiIikpIHx8IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPiBtYXhDRykgbWF4Q0cgPSBuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBGZXRjaCBFeGVtcHQgTGlzdA0KICAgICAgICAgICAgICAgICAgICBjb25zdCBleFJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IEVYRU1QVF9GSUxFIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gbnVsbCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBleGVtcHRQaHJhc2VzID0gKGV4UmVzICYmIGV4UmVzLm9rKSA/IChhd2FpdCBleFJlcy50ZXh0KCkpLnNwbGl0KCdcbicpLm1hcChwID0+IHAudHJpbSgpLnRvTG93ZXJDYXNlKCkpLmZpbHRlcihwID0+IHApIDogW107DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCBDOiBHRU5FUkFURSBORVcgUkVDRUlQVFMNCiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1IgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCB0b2RheVN0ciA9IGAke1N0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LSR7bm93LmdldEZ1bGxZZWFyKCl9YDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGltcG9ydENvbW1lbnQgPSAiQXV0byBJbXBvcnRlZDoiICsgdG9kYXlTdHI7DQoNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYkxpbmUgb2YgbmV3bHlBZGRlZEJhbmtMaW5lcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnRzID0gYkxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbXQgPSBwYXJzZUZsb2F0KHBhcnRzWzRdKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZlRleHQgPSBwYXJ0c1sxXTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtdCA8PSAwIHx8IHJlZlRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygiY2FzaCIpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGVtcHRQaHJhc2VzLnNvbWUocCA9PiByZWZUZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocCkpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbWF4Q0crKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByTm8gPSAiQ0ciICsgU3RyaW5nKG1heENHKS5wYWRTdGFydCg2LCAnMCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJEYXRlID0gcGFydHNbMF0ucmVwbGFjZSgvXC8vZywgJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByVG93ID0gKGFtdCA+PSAxMDAwMCkgPyAiQ09SUFVTIiA6ICJPVEhFUlMiOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGUgPSByZWZUZXh0LnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMoIlVQSSIpID8gIlVQSSIgOiAocmVmVGV4dC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCJDSFEiKSB8fCByZWZUZXh0LnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMoIkNIRVFVRSIpID8gIkNIRVFVRSIgOiAiT05MSU5FIik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdSb3cgPSBgJHtyTm99fCR7ckRhdGV9fHx8fHx8fHwke2FtdH18JHtyZWZUZXh0fXwke21vZGV9fCR7clRvd318fCR7aW1wb3J0Q29tbWVudH18MDAwMDAwfHx8fElORElBfGA7DQogICAgICAgICAgICAgICAgICAgICAgICBuZXdSLnB1c2gobmV3Um93KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIChuZXdSLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNURVAgRDogVVBMT0FEIFVQREFURUQgTUFJTiBEQg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZERCID0gY3VycmVudERCQ29udGVudCArICJcbiIgKyBuZXdSLmpvaW4oJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiBNTVBUX0ZJTEVfREIsICJtb2RlIjogIm92ZXJ3cml0ZSIgfSksICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHVwZGF0ZWREQg0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBTVEVQIEU6IENSSVRJQ0FMIEZJWCAtIFVQREFURSBTRVFVRU5DRS5UWFQgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBtdXN0IHVwZGF0ZSB0aGUgQ2xvdWQgU2VxdWVuY2Ugc28gdGhlIG5leHQgIlJOIiBrbm93cyB0aGUgbmV3IHN0YXJ0aW5nIHBvaW50Lg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9ybWF0OiBMYXN0UmVjZWlwdE51bWJlcnxUb3RhbFJlY29yZENvdW50DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUb3RhbENvdW50ID0gZGJMaW5lcy5sZW5ndGggKyBuZXdSLmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RSZWNlaXB0Tm8gPSAiQ0ciICsgU3RyaW5nKG1heENHKS5wYWRTdGFydCg2LCAnMCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VxdWVuY2VDb250ZW50ID0gYCR7bGFzdFJlY2VpcHROb318JHtuZXdUb3RhbENvdW50fWA7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6ICIvc2VxdWVuY2UudHh0IiwgIm1vZGUiOiAib3ZlcndyaXRlIiB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBzZXF1ZW5jZUNvbnRlbnQNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgU1VDQ0VTUyFcbkJhbmsgdXBkYXRlZC5cbiR7bmV3Ui5sZW5ndGh9IFJlY2VpcHRzIGFkZGVkLlxuU2VxdWVuY2UgdXBkYXRlZCB0bzogJHtsYXN0UmVjZWlwdE5vfWApOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkJhbmsgVXBkYXRlZC4gTm8gRG9ub3IgcmVjZWlwdHMgd2VyZSBuZWVkZWQuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpc0JhbmtVcGRhdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkFscmVhZHkgdXAgdG8gZGF0ZS4iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQ1JJVElDQUwgRVJST1I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChidG4pIHsgYnRuLmlubmVyVGV4dCA9ICJCYW5rIFVwZGF0ZSI7IGJ0bi5kaXNhYmxlZCA9IGZhbHNlOyB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IE1haW4gQ2FsbHMgYWxsDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBzaG93RG9uYXRpb25TdW1tYXJ5KCkgew0KICAgICAgICAgICAgLy8gMS4gSW5pdGlhbGl6ZSB0b3RhbHMgYXMgbnVtYmVycw0KICAgICAgICAgICAgbGV0IHRvdGFscyA9IHsgdG9kYXk6IDAsIHdlZWs6IDAsIG1vbnRoOiAwLCB5ZWFyOiAwLCBmaW5ZZWFyOiAwLCBvdmVyYWxsOiAwIH07DQoNCiAgICAgICAgICAgIE1NUFRfVEVNUDEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1ldmVudHMnKS5pbm5lckhUTUw7DQogICAgICAgICAgICBNTVBUX1RFTVAzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTDsNCg0KDQogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgLy8gR2V0IHRpbWVzdGFtcHMgZm9yIG1pZG5pZ2h0IHRvZGF5IGFuZCA3IGRheXMgYWdvIHRvIGVuc3VyZSBhY2N1cmF0ZSAiV2VlayIgY291bnRpbmcNCiAgICAgICAgICAgIGNvbnN0IHRvZGF5TWlkbmlnaHQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkpLmdldFRpbWUoKTsNCiAgICAgICAgICAgIGNvbnN0IHNldmVuRGF5c0FnbyA9IHRvZGF5TWlkbmlnaHQgLSAoNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApOw0KDQogICAgICAgICAgICBjb25zdCBjdXJNID0gbm93LmdldE1vbnRoKCk7IC8vIDAtMTENCiAgICAgICAgICAgIGNvbnN0IGN1clkgPSBub3cuZ2V0RnVsbFllYXIoKTsNCg0KICAgICAgICAgICAgLy8gRmluYW5jaWFsIFllYXIgTG9naWM6IFN0YXJ0cyBBcHJpbCAxc3QNCiAgICAgICAgICAgIC8vIEluIEphbiAyMDI2LCB0aGUgRlkgc3RhcnRlZCBBcHJpbCAxLCAyMDI1DQogICAgICAgICAgICBjb25zdCBmeVN0YXJ0WWVhciA9IChjdXJNID49IDMpID8gY3VyWSA6IGN1clkgLSAxOw0KICAgICAgICAgICAgY29uc3QgZnlTdGFydERhdGUgPSBuZXcgRGF0ZShmeVN0YXJ0WWVhciwgMywgMSkuZ2V0VGltZSgpOw0KDQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIWxpbmUudHJpbSgpIHx8IGluZGV4ID09PSAwKSByZXR1cm47IC8vIFNraXAgZW1wdHkgYW5kIGhlYWRlcg0KDQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIENhbmNlbGxhdGlvbiBDaGVjayAoRmllbGQgMTMgaXMgWUVTIG9yIE5PKQ0KICAgICAgICAgICAgICAgIGlmIChmWzEzXSAmJiBmWzEzXS50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyIpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIEFtb3VudCBDb252ZXJzaW9uIChGaWVsZCA5KQ0KICAgICAgICAgICAgICAgIC8vIFN0cmlwIGNvbW1hcy9zcGFjZXMgYW5kIGZvcmNlIHRvIGZsb2F0DQogICAgICAgICAgICAgICAgbGV0IGFtdCA9IDA7DQogICAgICAgICAgICAgICAgaWYgKGZbOV0pIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuQW10ID0gZls5XS50b1N0cmluZygpLnJlcGxhY2UoL1teXGQuXS9nLCAnJyk7DQogICAgICAgICAgICAgICAgICAgIGFtdCA9IHBhcnNlRmxvYXQoY2xlYW5BbXQpIHx8IDA7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gRGF0ZSBQYXJzaW5nIChGaWVsZCAxKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmWzFdIHx8ICIiOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVN0ci5zcGxpdCgvW1wvXC1dLyk7DQogICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgLy8gREQvTU0vWVlZWQ0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBwYXJzZUludChwYXJ0c1swXSwgMTApOw0KICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBwYXJzZUludChwYXJ0c1sxXSwgMTApIC0gMTsNCiAgICAgICAgICAgICAgICBjb25zdCB5ID0gcGFyc2VJbnQocGFydHNbMl0sIDEwKTsNCiAgICAgICAgICAgICAgICBjb25zdCByZWNEYXRlID0gbmV3IERhdGUoeSwgbSwgZCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVjVGltZSA9IHJlY0RhdGUuZ2V0VGltZSgpOw0KDQogICAgICAgICAgICAgICAgLy8gNS4gQWNjdW11bGF0ZSBUb3RhbHMNCiAgICAgICAgICAgICAgICB0b3RhbHMub3ZlcmFsbCArPSBhbXQ7DQoNCiAgICAgICAgICAgICAgICAvLyBUb2RheQ0KICAgICAgICAgICAgICAgIGlmIChyZWNUaW1lID09PSB0b2RheU1pZG5pZ2h0KSB7DQogICAgICAgICAgICAgICAgICAgIHRvdGFscy50b2RheSArPSBhbXQ7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gVGhpcyBXZWVrICg3IERheXMgaW5jbHVzaXZlIG9mIGN1cnJlbnQgdGltZSkNCiAgICAgICAgICAgICAgICBpZiAocmVjVGltZSA+PSBzZXZlbkRheXNBZ28gJiYgcmVjVGltZSA8PSBub3cuZ2V0VGltZSgpKSB7DQogICAgICAgICAgICAgICAgICAgIHRvdGFscy53ZWVrICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBUaGlzIE1vbnRoIChKYW4gMjAyNikNCiAgICAgICAgICAgICAgICBpZiAobSA9PT0gY3VyTSAmJiB5ID09PSBjdXJZKSB7DQogICAgICAgICAgICAgICAgICAgIHRvdGFscy5tb250aCArPSBhbXQ7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gVGhpcyBZZWFyICgyMDI2KQ0KICAgICAgICAgICAgICAgIGlmICh5ID09PSBjdXJZKSB7DQogICAgICAgICAgICAgICAgICAgIHRvdGFscy55ZWFyICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBGaW5hbmNpYWwgWWVhciAoQXByaWwgdG8gbm93KQ0KICAgICAgICAgICAgICAgIGlmIChyZWNUaW1lID49IGZ5U3RhcnREYXRlICYmIHJlY1RpbWUgPD0gbm93LmdldFRpbWUoKSkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMuZmluWWVhciArPSBhbXQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGRpc3BsYXlTdW1tYXJ5VGFibGUodG90YWxzKTsNCiAgICAgICAgICAgIHNob3dEb25hdGlvblN1bW1hcnkxKCk7DQogICAgICAgICAgICBzaG93RG9uYXRpb25TdW1tYXJ5MygpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU3VtbWFyeSBDb2xvdW0gMiBNaWRkbGUNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlTdW1tYXJ5VGFibGUoZGF0YSkgew0KICAgICAgICAgICAgY29uc3QgdGFibGVIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3VtbWFyeS1jb250YWluZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjVweDsgYm9yZGVyOiAycHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogMTJweDsgbWFyZ2luOiAxMHB4IGF1dG87IG1heC13aWR0aDogNTAwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOiAjZmY5OTMzOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtZmFtaWx5OiAnQXJpYWwgQmxhY2snLCBzYW5zLXNlcmlmOyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2ZmZjhmMDsgcGFkZGluZy1ib3R0b206IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRE9OQVRJT05TIFNVTU1BUlkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gyPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmY5OTMzOyBjb2xvcjogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IHRleHQtYWxpZ246IGxlZnQ7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5DYXRlZ29yeTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyB0ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPkFtb3VudCAo4oK5KTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+VG9kYXk8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS50b2RheS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5UaGlzIFdlZWs8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS53ZWVrLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPlRoaXMgTW9udGg8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS5tb250aC50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5DYWxlbmRhciBZZWFyICgke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0pPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEueWVhci50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2ZmZjhmMDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjZDM1NDAwOyI+RmluYW5jaWFsIFllYXI8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI2QzNTQwMDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEuZmluWWVhci50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBmb250LXdlaWdodDogYm9sZDsiPk9WRVJBTEwgVE9UQUw8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEuMmVtOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS5vdmVyYWxsLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiAxNXB4OyBmb250LXNpemU6IDExcHg7IGNvbG9yOiAjN2Y4YzhkOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGVkIG9uICR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX08YnI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChDYW5jZWxsZWQgcmVjZWlwdHMgZXhjbHVkZWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjZWlwdF9kaXNwbGF5X2FyZWEnKS5pbm5lckhUTUwgPSB0YWJsZUhUTUw7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IENvbG91bSAxDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBzaG93RG9uYXRpb25TdW1tYXJ5MSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjYWxjdWxhdGVCcmVha2Rvd25EYXRhKCkubW9kZVN1bW1hcnk7DQogICAgICAgICAgICBsZXQgdG90YWwgPSAwOw0KICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gIiI7DQoNCiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7DQogICAgICAgICAgICAgICAgdG90YWwgKz0gdmFsdWU7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4ke2tleX08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+JHt2YWx1ZS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX08L3RkPjwvdHI+YDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MID0gZ2VuZXJhdGVTdHlsZWRUYWJsZSgiUGF5bWVudCBNb2RlIiwgcm93c0h0bWwsIHRvdGFsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgQ29sb3VtIDMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHNob3dEb25hdGlvblN1bW1hcnkzKCkgew0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNhbGN1bGF0ZUJyZWFrZG93bkRhdGEoKS50b3dhcmRzU3VtbWFyeTsNCiAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7DQogICAgICAgICAgICBsZXQgcm93c0h0bWwgPSAiIjsNCg0KICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHsNCiAgICAgICAgICAgICAgICB0b3RhbCArPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPiR7a2V5fTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4ke3ZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfTwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MID0gZ2VuZXJhdGVTdHlsZWRUYWJsZSgiQ29udHJpYnV0aW9uIFRvd2FyZHMiLCByb3dzSHRtbCwgdG90YWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUmVzZXRzIHNpZGUgcGFuZWxzIGV2ZW50cyBqcGcgLSBmaXJzdCBhbmQgdGhpcmQgY29sb3VtbiBhZnRlciBzdW1tYXJ5ICBkaXNwbGF5DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiByZXNldFNpZGVQYW5lbHMoKSB7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1ldmVudHMnKS5pbm5lckhUTUwgPSBNTVBUX1RFTVAxOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTCA9IE1NUFRfVEVNUDM7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Gb3IgU3VtbWFyeSAtIEJyZWFrZG93biBjYWxjdWxhdGlvbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlQnJlYWtkb3duRGF0YSgpIHsNCiAgICAgICAgICAgIGNvbnN0IG1vZGVTdW1tYXJ5ID0geyAiQ2FzaCI6IDAsICJDaGVxdWUiOiAwLCAiVVBJIjogMCwgIk9ubGluZSI6IDAsICJPdGhlcnMiOiAwLCAiUE9TIjogMCB9Ow0KICAgICAgICAgICAgY29uc3QgdG93YXJkc1N1bW1hcnkgPSB7DQogICAgICAgICAgICAgICAgIk9USEVSUyI6IDAsICJDT1JQVVMiOiAwLCAiS1VNQkhBQkhJU0hFS0hBTSI6IDAsICJBTk5BREhBQU5BTSI6IDAsDQogICAgICAgICAgICAgICAgIkFOVVNIQSBQT09KQSI6IDAsICJBQVZBSEFOVEhJIEhPTUFNIjogMCwgIllBVEhJIE1BQUxBWUFNIjogMCwNCiAgICAgICAgICAgICAgICAiQlVJTERJTkciOiAwLCAiTklUSFlBUE9PSkFJIjogMA0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPCAxMykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChjb2xzWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgIGNvbnN0IG1vZGUgPSAoY29sc1sxMV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b3dhcmRzID0gKGNvbHNbMTJdIHx8ICIiKS5zcGxpdCgnLScpWzBdLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2FuY2VsbGVkID0gKGNvbHNbMTNdIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyI7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWlzQ2FuY2VsbGVkKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIE1vZGUgRGF0YQ0KICAgICAgICAgICAgICAgICAgICBpZiAobW9kZVN1bW1hcnkuaGFzT3duUHJvcGVydHkobW9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVTdW1tYXJ5W21vZGVdICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVTdW1tYXJ5WyJPdGhlcnMiXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBUb3dhcmRzIERhdGENCiAgICAgICAgICAgICAgICAgICAgaWYgKHRvd2FyZHNTdW1tYXJ5Lmhhc093blByb3BlcnR5KHRvd2FyZHMpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0b3dhcmRzU3VtbWFyeVt0b3dhcmRzXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0b3dhcmRzU3VtbWFyeVsiT1RIRVJTIl0gKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiB7IG1vZGVTdW1tYXJ5LCB0b3dhcmRzU3VtbWFyeSB9Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9NYWluIFRhYmxlIFN0eWxlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBJbnRlcm5hbCBoZWxwZXIgdG8ga2VlcCB0aGUgZXhhY3QgZm9ybWF0IG9mIHlvdXIgQ29weSAoNSkgZmlsZQ0KICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVN0eWxlZFRhYmxlKHRpdGxlLCByb3dzLCB0b3RhbCkgew0KICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGhlaWdodDoxMDAlOyBvdmVyZmxvdy15OmF1dG87IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjMmMzZTUwOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBmb250LXNpemU6IDEuMmVtOyI+JHt0aXRsZX08L2gyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyBmb250LXNpemU6IDEzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZjM5YzEyOyBjb2xvcjogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IGxlZnQ7Ij5DYXRlZ29yeTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsiPkFtb3VudCAo4oK5KTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3Jvd3N9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5UT1RBTDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS4xZW07Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt0b3RhbC50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1Nob3dzIHVzZXJzIG9ubGluIHBob3RvIG9uIHRoZSBtYWluIHBhZ2UNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8qKg0KICAgICAgICAgKiBQSE9UTyBMT0FERVIgRU5HSU5FDQogICAgICAgICAqIFVzZXMgdGhlIHByb3ZlbiBYSFIgbWV0aG9kIGZyb20gdGhlIGxvZ28gbG9naWMNCiAgICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIGxvYWRVc2VyUGhvdG9WaWFYSFIocGF0aCwgdGFyZ2V0SWQpIHsNCiAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOw0KICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCAnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnKTsNCiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgdCk7IC8vIFVzZXMgZ2xvYmFsIHRva2VuICd0Jw0KICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0Ryb3Bib3gtQVBJLUFyZycsIEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiBwYXRoIH0pKTsNCiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7DQoNCiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geGhyLnJlc3BvbnNlOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRJZCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbWcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSB1cmw7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gInRyYW5zcGFyZW50IjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlBob3RvIEVycm9yICIgKyB4aHIuc3RhdHVzICsgIjogIiArIHBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRJZCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbWcpIGltZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIzc3NyI7IC8vIEZhbGxiYWNrIGdyYXkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgeGhyLnNlbmQoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBVSSBXQVRDSEVSICYgUE9MTElORyBIQU5ETEVSDQogICAgICAgICAqIFdhdGNoZXMgJ2FjdGl2ZVVzZXJMaXN0JyBmb3IgY2hhbmdlcyBmcm9tIHlvdXIgNjBzIHBvbGwNCiAgICAgICAgICovDQogICAgICAgIGNvbnN0IHBob3RvV2F0Y2hlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGxpc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZVVzZXJMaXN0Jyk7DQogICAgICAgICAgICBpZiAoIWxpc3RFbGVtZW50KSByZXR1cm47DQoNCiAgICAgICAgICAgIGNvbnN0IHJhd1RleHQgPSBsaXN0RWxlbWVudC5pbm5lclRleHQudHJpbSgpOw0KDQogICAgICAgICAgICAvLyBTYWZldHk6IERvbid0IHJ1biBpZiBlbXB0eSwganVzdCBwb2xsaW5nIHBsYWNlaG9sZGVyLCBvciBpZiBpbWFnZXMgYWxyZWFkeSBleGlzdA0KICAgICAgICAgICAgaWYgKCFyYXdUZXh0IHx8IHJhd1RleHQgPT09ICItLS0iIHx8IGxpc3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpKSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIDEuIFByZXBhcmUgQ29udGFpbmVyIGZvciBNdWx0aXBsZSBVc2Vycw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LnN0eWxlLmZsZXhXcmFwID0gIndyYXAiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAiY2VudGVyIjsNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LnN0eWxlLmdhcCA9ICIxNXB4IjsNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsNCg0KICAgICAgICAgICAgLy8gMi4gQ2xlYXIgdGV4dCBhbmQgYnVpbGQgcGhvdG8gYXJyYXkNCiAgICAgICAgICAgIC8vIFN1cHBvcnRzIHNpbmdsZSBuYW1lIG9yIGNvbW1hLXNlcGFyYXRlZCBuYW1lcyBmcm9tIHlvdXIgcG9sbGVyDQogICAgICAgICAgICBjb25zdCBuYW1lcyA9IHJhd1RleHQuc3BsaXQoJywnKS5tYXAobiA9PiBuLnRyaW0oKSk7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5pbm5lckhUTUwgPSAnJzsNCg0KICAgICAgICAgICAgbmFtZXMuZm9yRWFjaCgobmFtZSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gIiIpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHBJZCA9IGB1c2VyLXBpYy0ke2luZGV4fS0ke25hbWUucmVwbGFjZSgvXHMrL2csICcnKX1gOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBQYXRoID0gIi9JbWFnZXMvIiArIG5hbWUgKyAiLmpwZyI7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB1c2VyV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgIHVzZXJXcmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUuZmxleERpcmVjdGlvbiA9ICJjb2x1bW4iOw0KICAgICAgICAgICAgICAgIHVzZXJXcmFwcGVyLnN0eWxlLmFsaWduSXRlbXMgPSAiY2VudGVyIjsNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5zdHlsZS5taW5XaWR0aCA9ICI2MHB4IjsNCg0KICAgICAgICAgICAgICAgIHVzZXJXcmFwcGVyLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD0iJHtwSWR9IiBzdHlsZT0iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDRweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDRweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjMpOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD0iJHtuYW1lWzBdfSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAzcHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogMXB4IDFweCAycHggYmxhY2s7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7bmFtZX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGxpc3RFbGVtZW50LmFwcGVuZENoaWxkKHVzZXJXcmFwcGVyKTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFRyaWdnZXIgaW5kaXZpZHVhbCBYSFIgbG9hZA0KICAgICAgICAgICAgICAgIGxvYWRVc2VyUGhvdG9WaWFYSFIocFBhdGgsIHBJZCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gSU5JVElBTElaRSBXQVRDSEVSDQogICAgICAgIGNvbnN0IG9ic2VydmVyVGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZVVzZXJMaXN0Jyk7DQogICAgICAgIGlmIChvYnNlcnZlclRhcmdldCkgew0KICAgICAgICAgICAgcGhvdG9XYXRjaGVyLm9ic2VydmUob2JzZXJ2ZXJUYXJnZXQsIHsgY2hpbGRMaXN0OiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOw0KICAgICAgICB9DQoNCg0KICAgICAgICBmdW5jdGlvbiBjaGVja1Vuc2F2ZWRDaGFuZ2VzKGNhbGxiYWNrKSB7DQogICAgICAgICAgICBpZiAoIWlzRGlydHkpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdXNlckNob2ljZSA9IGNvbmZpcm0oIlJlY2VpcHQgTm90IFNhdmVkISBcblxuQ2xpY2sgT0sgdG8gRElTQ0FSRCBjaGFuZ2VzLiBcbkNsaWNrIENBTkNFTCB0byBTVEFZIGFuZCBTYXZlLiIpOw0KDQogICAgICAgICAgICBpZiAodXNlckNob2ljZSkgew0KICAgICAgICAgICAgICAgIGlzRGlydHkgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOyAvLyBUaGlzIHJlLWVuYWJsZXMgc2VhcmNoIGFuZCBuYXYgYXV0b21hdGljYWxseQ0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TYXZlcyBhIG1vZGlmaWVkIG9yIG5ldyByZWNlaXB0IC0gYSBhdWRpdCBvZiByZWNlaXB0IGlzIHByb21wdGVkIGJlZm9yZSBzYXZpbmcuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzYXZlUmVjb3JkKCkgew0KICAgICAgICAgICAgLy8gMS4gUnVuIHRoZSBBdWRpdCBmaXJzdA0KICAgICAgICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgcnVuQXVkaXQoKTsNCiAgICAgICAgICAgIGlmICghY29uZmlybWVkKSByZXR1cm47IC8vIFN0b3AgaWYgdXNlciBjYW5jZWxzDQoNCiAgICAgICAgICAgIGNvbnN0IHJlY29yZElkeFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlOw0KICAgICAgICAgICAgaWYgKHJlY29yZElkeFRleHQgPT09ICItLS0iKSByZXR1cm47DQogICAgICAgICAgICBjb25zdCBpZHggPSBwYXJzZUludChyZWNvcmRJZHhUZXh0KTsNCiAgICAgICAgICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3NhdmUnKTsNCg0KICAgICAgICAgICAgLy8gMi4gR2F0aGVyIGRhdGEgaW4gZXhhY3Qgb3JkZXIgKEluZGljZXMgMC0xOSkNCiAgICAgICAgICAgIGNvbnN0IHJvd0RhdGEgPSBbDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUsICAgICAgICAgICAvLyAwDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSwgICAgICAgICAgICAvLyAxDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZSwgICAgICAgICAgICAvLyAyDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWUsICAgICAgICAgICAvLyAzDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2FkZHJlc3MnKS52YWx1ZS5yZXBsYWNlKC9cbi9nLCAnficpLCAvLyA0DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2VtYWlsJykudmFsdWUsICAgICAgICAgICAvLyA1DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlLCAgICAgICAgICAgICAvLyA2DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3N0YXInKS52YWx1ZSwgICAgICAgICAgICAvLyA3DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2dvdGhyYW0nKS52YWx1ZSwgICAgICAgICAvLyA4DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlLCAgICAgICAgICAvLyA5DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlLCAgICAgICAgICAgICAvLyAxMA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUsICAgICAgICAgICAgLy8gMTENCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlLCAgICAgICAgIC8vIDEyDQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgLy8gMTMNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29tbWVudHMnKS52YWx1ZS5yZXBsYWNlKC9cbi9nLCAnficpLCAvLyAxNA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUsICAgICAgICAgIC8vIDE1DQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmludGVkJykuY2hlY2tlZCA/ICJZRVMiIDogIk5PIiksICAvLyAxNg0KICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcHJhc2FkYW0nKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgLy8gMTcNCiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvcnB1cycpLmNoZWNrZWQgPyAiWUVTIiA6ICJOTyIpLCAgIC8vIDE4DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSAgICAgICAgICAgLy8gMTkNCiAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRMaW5lID0gcm93RGF0YS5qb2luKCd8Jyk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgc2F2ZUJ0bi5pbm5lclRleHQgPSAiU3luY2luZy4uLiI7DQogICAgICAgICAgICAgICAgc2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbaWR4XSA9IHVwZGF0ZWRMaW5lOw0KDQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogTU1QVF9GSUxFX0RCLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIk1PRElGSUVEIFJFQ09SRDogIiArIHVwZGF0ZWRMaW5lKTsNCiAgICAgICAgICAgICAgICBhbGVydCgiUmVjb3JkIFNhdmVkIGFuZCBTeW5jZWQuIik7DQogICAgICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsNCiAgICAgICAgICAgICAgICAvLyAtLS0gQUREIFRIRVNFIFRXTyBMSU5FUyAtLS0NCiAgICAgICAgICAgICAgICAvLyAxLiBTeW5jIHRoZSBnbG9iYWwgaW5kZXggdG8gdGhlIHJlY29yZCB3ZSBhcmUgYWN0dWFsbHkgbG9va2luZyBhdA0KICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmROdW1iZXJEaXNwbGF5JykudmFsdWUpOw0KICAgICAgICAgICAgICAgIC8vIDIuIEZvcmNlIHRoZSByZWNlaXB0IEhUTUwgdG8gcmVkcmF3IHVzaW5nIHRoZSBsYXRlc3QgZGF0YSBpbiBtZW1vcnkNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQogICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJTeW5jIEVycm9yOiAiICsgZXJyb3IubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIHNhdmVCdG4uaW5uZXJUZXh0ID0gIlNhdmUiOw0KICAgICAgICAgICAgICAgIHNhdmVCdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBQcm9tcHQgZm9yIHVzZXIgd2hlbiBoZSBsZWF2ZXMgcmVjZWlwdCB3aXRob3V0IHNhdmluZw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY29uZmlybUxvY2soKSB7DQogICAgICAgICAgICBpZiAoaXNEaXJ0eSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJDaG9pY2UgPSBjb25maXJtKCJSZWNlaXB0IE5vdCBTYXZlZCEgXG5cbkNsaWNrIE9LIHRvIERJU0NBUkQgY2hhbmdlcyBhbmQgTG9jay4gXG5DbGljayBDQU5DRUwgdG8gc3RheSBhbmQgU2F2ZS4iKTsNCiAgICAgICAgICAgICAgICBpZiAoIXVzZXJDaG9pY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBVc2VyIGNsaWNrZWQgQ2FuY2VsLCBzbyBkbyBub3RoaW5nIChzdGF5IGluIGVkaXQgbW9kZSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBJZiBub3QgZGlydHksIG9yIGlmIHVzZXIgY2hvc2UgdG8gZGlzY2FyZCwgcHJvY2VlZCB0byBsb2NrDQogICAgICAgICAgICBpc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFJOIEJ1dHRvbiAtIENyZWF0ZXMgYSBuZXcgcmVjZWlwdCBieSBhc3NpZ25pbmcgbmV3IHJlY2VpcHQgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjcmVhdGVOZXdSZWNlaXB0KCkgew0KICAgICAgICAgICAgY29uc3Qgcm5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3JuJyk7DQoNCiAgICAgICAgICAgIC8vIDEuIERpc2FibGUgYnV0dG9uIHRvIHByZXZlbnQgZG91YmxlLWNsaWNrcw0KICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgcm5CdG4uaW5uZXJUZXh0ID0gIkFzc2lnbmluZy4uLiI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXROZXdSZWNlaXB0Jyk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBDYWxsIHRoZSBHb29nbGUgU2NyaXB0DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzY3JpcHRVUkwsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBQYXJzZSB0aGUgSlNPTiByZXNwb25zZQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocmVzdWx0VGV4dCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZWNlaXB0ICYmIGRhdGEuaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gNC4gVXBkYXRlIHRoZSBoaWRkZW4vZGlzcGxheSByZWNvcmQgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZSA9IGRhdGEuaW5kZXg7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNS4gUG9wdWxhdGUgRmllbGRzIHdpdGggRGVmYXVsdHMNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUgPSBkYXRhLnJlY2VpcHQ7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlID0gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gWW91ciByZXF1ZXN0ZWQgZGVmYXVsdHMNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BpbmNvZGUnKS52YWx1ZSA9ICIwMDAwMDAiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY291bnRyeScpLnZhbHVlID0gIklORElBIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX21vZGUnKS52YWx1ZSA9ICJDQVNIIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKS52YWx1ZSA9ICJPVEhFUlMiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNldCB0byBDYW5jZWxsZWQ9WUVTIGluaXRpYWxseSBhcyBhIHBsYWNlaG9sZGVyDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKS5jaGVja2VkID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA2LiBVbmxvY2sgZm9yIGVudHJ5DQogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA3LiBTeW5jIGxvY2FsIG1lbW9yeSBzbyB0aGUgbmV3IHJvdyBleGlzdHMgaW4gdGhlIGJyb3dzZXIncyBsaXN0DQogICAgICAgICAgICAgICAgICAgIC8vIFdlIGNyZWF0ZSBhIGJsYW5rIHBpcGVzIHN0cmluZyB0byByZXByZXNlbnQgdGhlIG5ldyByb3cgbG9jYWxseQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibGFua1JvdyA9IGAke2RhdGEucmVjZWlwdH18fHx8fHx8fHx8fHx8WUVTfHwwMDAwMDB8fHxPfElORElBYDsNCiAgICAgICAgICAgICAgICAgICAgLy9jb25zdCBibGFua1JvdyA9IGAke2RhdGEucmVjZWlwdH18fHx8fHx8fHx8fHx8WUVTfHwwMDAwMDB8Tk98Tk98Tk98SU5ESUFgOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5wdXNoKGJsYW5rUm93KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJOZXcgUmVjZWlwdCBBc3NpZ25lZDogIiArIGRhdGEucmVjZWlwdCArICJcblJlY29yZCBJbmRleDogIiArIGRhdGEuaW5kZXgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBkYXRhIHJlY2VpdmVkIGZyb20gc2VydmVyIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUk4gRXJyb3I6IiwgZSk7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yIGdldHRpbmcgbmV3IG51bWJlcjogIiArIGUubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBybkJ0bi5pbm5lclRleHQgPSAiUk4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIGJ5IGRlZmF1bHQgYWxsIHJlY2VpcHQgZmllbGRzIGFyZSBsb2NrZWQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b2dnbGVMb2NrKHNob3VsZExvY2spIHsNCiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IFsnZmllbGRfcmVjbm8nLCAnZmllbGRfZGF0ZScsICdmaWVsZF9uYW1lJywgJ2ZpZWxkX3Bob25lJywgJ2ZpZWxkX2FkZHJlc3MnLCAnZmllbGRfZW1haWwnLCAnZmllbGRfcGFuJywgJ2ZpZWxkX3N0YXInLCAnZmllbGRfZ290aHJhbScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcmVmJywgJ2ZpZWxkX21vZGUnLCAnZmllbGRfdG93YXJkcycsICdmaWVsZF9jb21tZW50cycsICdmaWVsZF9waW5jb2RlJywgJ2ZpZWxkX2NvdW50cnknLCAnZmllbGRfY2FuY2VsJywgJ2ZpZWxkX3ByaW50ZWQnLCAnZmllbGRfcHJhc2FkYW0nLCAnZmllbGRfY29ycHVzJ107DQoNCiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94Um93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoZWNrYm94X3JvdycpOw0KICAgICAgICAgICAgY29uc3Qgc0lucCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9zZWFyY2gnKTsNCiAgICAgICAgICAgIGNvbnN0IHNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQnRuJyk7DQogICAgICAgICAgICBjb25zdCBuYXZCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi1uYXYnKTsNCiAgICAgICAgICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3NhdmUnKTsNCiAgICAgICAgICAgIGNvbnN0IHJuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1ybicpOyAvLyBBZGRlZA0KDQogICAgICAgICAgICBmaWVsZHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlbC50eXBlID09PSAiY2hlY2tib3giKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5kaXNhYmxlZCA9IHNob3VsZExvY2s7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5yZWFkT25seSA9IHNob3VsZExvY2s7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kID0gc2hvdWxkTG9jayA/ICIjZmZmZmUwIiA6ICIjZmZmZmZmIjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmICghc2hvdWxkTG9jaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya0RpcnR5ID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlydHkgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYXZlQnRuKSBzYXZlQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNJbnApIHNJbnAuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzQnRuKSBzQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZCdG5zLmZvckVhY2goYiA9PiBiLmRpc2FibGVkID0gdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZWwub25pbnB1dCA9IG1hcmtEaXJ0eTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLm9uY2hhbmdlID0gbWFya0RpcnR5Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGlmIChjaGVja2JveFJvdykgew0KICAgICAgICAgICAgICAgIGNoZWNrYm94Um93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNob3VsZExvY2sgPyAiI2ZmZmZlMCIgOiAiI2ZmZmZmZiI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fdW5sb2NrJykuZGlzYWJsZWQgPSAhc2hvdWxkTG9jazsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fbG9jaycpLmRpc2FibGVkID0gc2hvdWxkTG9jazsNCiAgICAgICAgICAgIGlmIChzYXZlQnRuKSBzYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIGlmIChybkJ0bikgcm5CdG4uZGlzYWJsZWQgPSAhc2hvdWxkTG9jazsgLy8gUk4gYWN0aXZlIG9ubHkgd2hlbiBsb2NrZWQNCg0KICAgICAgICAgICAgaWYgKHNob3VsZExvY2spIHsNCiAgICAgICAgICAgICAgICBpc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKHNJbnApIHNJbnAuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBpZiAoc0J0bikgc0J0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIG5hdkJ0bnMuZm9yRWFjaChiID0+IGIuZGlzYWJsZWQgPSBmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRXNzZW50aWFsIGZpeGVzIC0gbWlzYw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gLS0tIElOSVRJQUxJWkFUSU9OIEFORCBTRUFSQ0ggRklYIC0tLQ0KICAgICAgICAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpOw0KICAgICAgICAgICAgY29uc3QgZmV0Y2hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2ZldGNoJyk7DQogICAgICAgICAgICBjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQnRuJyk7DQoNCiAgICAgICAgICAgIC8vIDEuIFRlbGVwaG9uZSBGZXRjaCBCdXR0b24gQ29sb3IgTG9naWMNCiAgICAgICAgICAgIGlmIChwaG9uZUlucHV0ICYmIGZldGNoQnRuKSB7DQogICAgICAgICAgICAgICAgcGhvbmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZWFkeSA9IHRoaXMudmFsdWUudHJpbSgpLmxlbmd0aCA+PSAxMDsNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2hCdG4uZGlzYWJsZWQgPSAhaXNSZWFkeTsNCiAgICAgICAgICAgICAgICAgICAgLy8gVHVybnMgZ3JlZW4gd2hlbiAxMCBkaWdpdHMgYXJlIGVudGVyZWQNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2hCdG4uc3R5bGUuYmFja2dyb3VuZCA9IGlzUmVhZHkgPyAiIzRDQUY1MCIgOiAiI2UxZTFlMSI7DQogICAgICAgICAgICAgICAgICAgIGZldGNoQnRuLnN0eWxlLmNvbG9yID0gaXNSZWFkeSA/ICJ3aGl0ZSIgOiAiYmxhY2siOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBTRUFSQ0ggQlVUVE9OIEZJWDogUmVzZXQgaW5kZXggaWYgYXQgdGhlIGVuZCBvZiBEQg0KICAgICAgICAgICAgaWYgKHNlYXJjaEJ0bikgew0KICAgICAgICAgICAgICAgIC8vIFdlIG92ZXJyaWRlIHRoZSBjbGljayB0byBlbnN1cmUgaXQgZG9lc24ndCBnZXQgc3R1Y2sgYWZ0ZXIgYSBOZXcgUk4NCiAgICAgICAgICAgICAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFJlY29yZEluZGV4ICE9PSAndW5kZWZpbmVkJyAmJiBjdXJyZW50UmVjb3JkSW5kZXggPj0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGF0IHRoZSB2ZXJ5IGxhc3QgcmVjb3JkLCByZXNldCB0byBzdGFydCBzbyBzZWFyY2ggY2FuIGZpbmQgb2xkZXIgcmVjb3Jkcw0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgcGVyZm9ybVNlYXJjaCgpIGZyb20geW91ciBmaWxlIHdpbGwgbm93IHJ1biBjb3JyZWN0bHkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gQXV0by1VbmNoZWNrICdDYW5jZWwnIGJveCB3aGVuIHVzZXIgc3RhcnRzIHR5cGluZw0KICAgICAgICAgICAgWydmaWVsZF9uYW1lJywgJ2ZpZWxkX2Ftb3VudCcsICdmaWVsZF9waG9uZSddLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgew0KICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbENoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NhbmNlbCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbENoZWNrICYmIGNhbmNlbENoZWNrLmNoZWNrZWQpIGNhbmNlbENoZWNrLmNoZWNrZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pKCk7DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEZldGNoIGRvbm9yIGJhc2ljIGRldGFpbHMgZnJvbSBwYXN0IChsYXRlc3QpIHJlY2VpcHRzIHdpdGggdGhlIGhlbHAgb2YgdGVsZXBvbmUgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gREFUQSBGRVRDSElORyBMT0dJQyAtLS0NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hEb25vckRldGFpbHMoKSB7DQogICAgICAgICAgICBjb25zdCBwaG9uZVRvRmluZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQoNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQoNCiAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBvdmVybGF5IGlzIHZpc2libGUNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG5ld2VzdCB0byBvbGRlc3QgKFJldmVyc2UgTG9vcCkNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2ldOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBUZWxlcGhvbmUgQ29sdW1uIChJbmRleCAzKQ0KICAgICAgICAgICAgICAgICAgICAvLyBXZSBtYXRjaCB0aGUgbGFzdCAxMCBkaWdpdHMgdG8gaWdub3JlICs5MSBvciBsZWFkaW5nIHplcm9zDQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkRiUGhvbmUgPSAoY29sc1szXSB8fCAiIikucmVwbGFjZSgvXEQvZywgIiIpLnNsaWNlKC0xMCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbklucHV0UGhvbmUgPSBwaG9uZVRvRmluZC5yZXBsYWNlKC9cRC9nLCAiIikuc2xpY2UoLTEwKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5EYlBob25lID09PSBjbGVhbklucHV0UGhvbmUgJiYgY2xlYW5EYlBob25lLmxlbmd0aCA+PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIHRoZSBkYXRhIHRvIHlvdXIgZmllbGRzDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlID0gY29sc1syXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hZGRyZXNzJykudmFsdWUgPSAoY29sc1s0XSB8fCAiIikucmVwbGFjZSgvfi9nLCAnXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpLnZhbHVlID0gY29sc1s1XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSA9IGNvbHNbNl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZ290aHJhbScpLnZhbHVlID0gY29sc1s4XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSBjb2xzWzE1XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3VudHJ5JykudmFsdWUgPSBjb2xzWzE5XSB8fCAiSU5ESUEiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBub3RlIGluIGNvbW1lbnRzDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gYCR7U3RyaW5nKGQuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhkLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke2QuZ2V0RnVsbFllYXIoKX1gOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvbW1lbnRzJykudmFsdWUgPSBgQXV0by1GZXRjaGVkIGZyb20gUk46ICR7Y29sc1swXX0gb24gJHt0b2RheX1gOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJOZXcgRG9ub3IgLSBObyBwcmV2aW91cyByZWNvcmRzIGZvdW5kIGZvciB0aGlzIG51bWJlci4iKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAvLyBVbmxvY2sgdGhlIGZvcm0gc28gdGhlIHVzZXIgY2FuIGVkaXQgdGhlIGZldGNoZWQgZGF0YQ0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvZ2dsZUxvY2sgPT09ICJmdW5jdGlvbiIpIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIDMwMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU2VhcmNoIFJlY29yZHMgLSBSb3VuZCBSb2JpbiBNZXRob2QNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIC0tLSBGSU5BTCBTRUFSQ0ggRklYOiBQUkVWRU5UUyBHRVRUSU5HIFNUVUNLIEFUIEVORCAtLS0NCiAgICAgICAgZnVuY3Rpb24gcGVyZm9ybVNlYXJjaCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHJhdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9zZWFyY2gnKS52YWx1ZS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIGlmICghcmF3KSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIC0tLSBTVEVQIDE6IFBJQ0sgVVAgUFJFRklYIExPR0lDIEZST00gQ09NTUVOVEVEIENPREUgLS0tDQogICAgICAgICAgICBsZXQgcXVlcnkgPSByYXc7DQogICAgICAgICAgICBsZXQgY29sSW5kZXggPSAtMTsgLy8gRGVmYXVsdDogRnVsbCBSZWNvcmQgU2VhcmNoDQoNCiAgICAgICAgICAgIGlmIChyYXcuc3RhcnRzV2l0aCgiTS0iKSkgeyBxdWVyeSA9IHJhdy5yZXBsYWNlKCJNLSIsICIiKTsgY29sSW5kZXggPSAzOyB9DQogICAgICAgICAgICBlbHNlIGlmIChyYXcuc3RhcnRzV2l0aCgiTi0iKSkgeyBxdWVyeSA9IHJhdy5yZXBsYWNlKCJOLSIsICIiKTsgY29sSW5kZXggPSAyOyB9DQogICAgICAgICAgICBlbHNlIGlmIChyYXcuc3RhcnRzV2l0aCgiVC0iKSkgeyBxdWVyeSA9IHJhdy5yZXBsYWNlKCJULSIsICIiKTsgY29sSW5kZXggPSAxMDsgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocmF3LnN0YXJ0c1dpdGgoIlAtIikpIHsgcXVlcnkgPSByYXcucmVwbGFjZSgiUC0iLCAiIik7IGNvbEluZGV4ID0gNjsgfQ0KDQogICAgICAgICAgICAvLyAtLS0gU1RFUCAyOiBTRVRVUCBMT09QIC0tLQ0KICAgICAgICAgICAgLy8gRk9SQ0UgU1RFUC1CQUNLOiBTdGFydCBsb29raW5nIGZyb20gdGhlIHJlY29yZCBCRUZPUkUgdGhlIGN1cnJlbnQgb25lLg0KICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoY3VycmVudFJlY29yZEluZGV4ID4gMCkgPyBjdXJyZW50UmVjb3JkSW5kZXggLSAxIDogR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7DQoNCiAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgbGV0IGkgPSBzdGFydEluZGV4Ow0KICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsNCg0KICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSB3aG9sZSBkYXRhYmFzZSBvbmNlDQogICAgICAgICAgICB3aGlsZSAoY291bnQgPCBHTE9CQUxfREJfTElORVMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpXS50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHdoYXQgd2UgYXJlIHNlYXJjaGluZyBhZ2FpbnN0IGJhc2VkIG9uIHRoZSBwcmVmaXgNCiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAoY29sSW5kZXggPT09IC0xKSA/IGxpbmUgOiAobGluZS5zcGxpdCgnfCcpW2NvbEluZGV4XSB8fCAiIik7DQoNCiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmluY2x1ZGVzKHF1ZXJ5KSkgew0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkSW5kZXggPSBpOw0KICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGktLTsNCiAgICAgICAgICAgICAgICBpZiAoaSA8IDApIGkgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsgLy8gV3JhcCBhcm91bmQgdG8gZW5kDQogICAgICAgICAgICAgICAgY291bnQrKzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gLS0tIFNURVAgMzogRElTUExBWSBSRVNVTFRTIC0tLQ0KICAgICAgICAgICAgaWYgKGZvdW5kKSB7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgc2xpZGVyLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KICAgICAgICAgICAgICAgIGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gY3VycmVudFJlY29yZEluZGV4Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTm8gb3RoZXIgbWF0Y2hlcyBmb3VuZCBmb3I6ICIgKyByYXcpOw0KICAgICAgICAgICAgICAgIC8vIFJlc2V0IGxvZ2ljIGlmIG5vdGhpbmcgZm91bmQNCiAgICAgICAgICAgICAgICBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IC0xOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gRW5zdXJlIHlvdXIgaGVscGVyIGlzIHN0cmljdGx5IGNoZWNraW5nIGRhdGENCiAgICAgICAgZnVuY3Rpb24gY2hlY2tTZWFyY2hNYXRjaChpZHgsIHF1ZXJ5KSB7DQogICAgICAgICAgICBjb25zdCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2lkeF07DQogICAgICAgICAgICBpZiAoIWxpbmUpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIHJldHVybiBsaW5lLnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFVzZXIgbmFtZSByZWdpc3RlcmVkIGFzIGxvZ2dlZCBpbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gd3JpdGVVc2VyTG9nKGFjdGlvbikgew0KICAgICAgICAgICAgaWYgKCFNTVBUX1VTRVJfTkFNRSkgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtNTVBUX0xPR19ESVJ9JHtNTVBUX1VTRVJfTkFNRX0udHh0YDsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTsNCiAgICAgICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0gYFske3RpbWVzdGFtcH1dICR7YWN0aW9ufVxuYDsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgZXhpc3RpbmdDb250ZW50ID0gIiI7DQogICAgICAgICAgICAgICAgLy8gVXNlICd0JyBhcyBwZXIgeW91ciBCYXNlIGZpbGUNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZmlsZU5hbWUgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIGV4aXN0aW5nQ29udGVudCA9IGF3YWl0IHJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGV4aXN0aW5nQ29udGVudCArIGxvZ0VudHJ5Ow0KICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlTmFtZSwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogdXBkYXRlZENvbnRlbnQNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKCJMb2dnaW5nIGZhaWxlZDoiLCBlcnIpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9yZW1vdmUgdXNlciBmcm9tIGxpc3QgaWYgbm90IHBvbGxlZCBmb3IgMiBtaW51dGVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB5b3UgYXNrZWQgZm9yIC0gcGxhY2UgaXQgd2l0aCB5b3VyIG90aGVyIHVzZXItaGFuZGxpbmcgZnVuY3Rpb25zDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJlbW92ZVVzZXJGcm9tUG9sbGluZyh1c2VyTmFtZSkgew0KICAgICAgICAgICAgLy8gMS4gTG9nIHRoZSBldmVudCBiZWZvcmUgdGhleSBhcmUgcmVtb3ZlZA0KICAgICAgICAgICAgYXdhaXQgd3JpdGVVc2VyTG9nKGBTRVNTSU9OIEVORDogVXNlciAke3VzZXJOYW1lfSBkaXNjb25uZWN0ZWQvcmVtb3ZlZCBmcm9tIHBvbGxpbmcuYCk7DQoNCiAgICAgICAgICAgIC8vIDIuIFlvdXIgZXhpc3RpbmcgbG9naWMgdG8gYWN0dWFsbHkgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgVUkgb3IgbGlzdA0KICAgICAgICAgICAgY29uc29sZS5sb2coYFVzZXIgJHt1c2VyTmFtZX0gaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGFjdGl2ZSBwb2xsaW5nLmApOw0KDQogICAgICAgICAgICAvLyBJZiB5b3UgaGF2ZSBhIHNwZWNpZmljIFVJIGVsZW1lbnQgZm9yIHRoZSB1c2VyIGxpc3QsIHVwZGF0ZSBpdCBoZXJlDQogICAgICAgICAgICAvLyB1cGRhdGVBY3RpdmVVc2VyTGlzdCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gTG9jYXRlIHRoaXMgaW4geW91ciA8c2NyaXB0PiBzZWN0aW9uDQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnYnV0dG9uJyk7DQogICAgICAgICAgICBpZiAodGFyZ2V0KSB7DQogICAgICAgICAgICAgICAgLy8gUFJPQkU6IEFkZCB0aGlzIGxpbmUgdG8gaWdub3JlIHRoZSBzYXZlIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmlkID09PSAnYnRuX3NhdmUnIHx8IHRhcmdldC5pZCA9PT0gJ2Jhbmstc3luYy1idG4nKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBidG5UZXh0ID0gdGFyZ2V0LmlubmVyVGV4dCB8fCB0YXJnZXQudmFsdWUgfHwgIkljb24gQnV0dG9uIjsNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coYENMSUNLRUQgQlVUVE9OOiBbJHtidG5UZXh0fV1gKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCg0KICAgICAgICAvLyAyLiBMQVVOQ0ggTE9HIChJbnNpZGUgeW91ciBleGlzdGluZyBpbml0aWFsaXplTU1QVCBvciByaWdodCBhZnRlcikNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9nTGF1bmNoKCkgew0KICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gRGl2aWRlciB3aXRoIFZlcnNpb24gTnVtYmVyDQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBWRVI6ICIgKyBNTVBUX1ZFUlNJT04pOw0KICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiTEFVTkNIRUQ6IFNlc3Npb24gU3RhcnRlZCBmb3IgIiArIE1NUFRfVVNFUl9OQU1FKTsNCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgY29uZmlybXMgdGhlIHRleHQgbG9nIHN0YXJ0ZWQuIA0KICAgICAgICAgICAgICAgIC8vIFRoZSBzbmFwc2hvdCBsb2cgd2lsbCBmb2xsb3cgYXMgc29vbiBhcyB0aGUgY2FtZXJhIGZpbmlzaGVzLg0KICAgICAgICAgICAgfSwgMjAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBUaGlzIHJ1bnMgNSBzZWNvbmRzIGFmdGVyIGxhdW5jaCBhcyBhIHNlcGFyYXRlICJIZWFsdGggQ2hlY2siDQogICAgICAgIC8vIEJ1bGxldHByb29mIEludGVncml0eSBDaGVjaw0KICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgPT09ICd1bmRlZmluZWQnIHx8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPT09IDApIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIC8vIDEuIEdldCBBY3R1YWwgREIgRGF0YQ0KICAgICAgICAgICAgICAgIGNvbnN0IGxhc3REQkxpbmUgPSBHTE9CQUxfREJfTElORVNbR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbFJOID0gbGFzdERCTGluZS5zcGxpdCgnfCcpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxDb3VudCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCBTZXF1ZW5jZSB3aXRoIENBQ0hFIEJVU1RFUg0KICAgICAgICAgICAgICAgIC8vIEFkZGluZyBhIHRpbWVzdGFtcCBlbnN1cmVzIERyb3Bib3gvQnJvd3NlciBjYW5ub3Qgc2VydmUgYW4gb2xkIHZlcnNpb24NCiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUJ1c3RlciA9IERhdGUubm93KCk7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VxUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9EYXRhQmFzZXMvc2VxdWVuY2UudHh0JyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDdXN0b20tQnVzdGVyJzogY2FjaGVCdXN0ZXIgLy8gU29tZSBicm93c2VycyBuZWVkIHRoaXMgaW4gaGVhZGVyDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChzZXFSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VxVGV4dCA9IChhd2FpdCBzZXFSZXMudGV4dCgpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtmaWxlUk4sIGZpbGVDb3VudF0gPSBzZXFUZXh0LnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkludGVncml0eSBDaGVjayAtPiBEQjoiLCBhY3R1YWxSTiwgIkZpbGU6IiwgZmlsZVJOKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAzLiBDb21wYXJlDQogICAgICAgICAgICAgICAgICAgIGlmIChhY3R1YWxSTiAhPT0gZmlsZVJOKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBhaXIgPSBjb25maXJtKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBNSVNNQVRDSCBERVRFQ1RFRCFcblxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYERhdGFiYXNlOiAke2FjdHVhbFJOfVxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNlcXVlbmNlIEZpbGU6ICR7ZmlsZVJOfVxuXG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgVGhlIHNlcXVlbmNlIGZpbGUgaXMgb3V0ZGF0ZWQuIFN5bmMgaXQgbm93P2ANCiAgICAgICAgICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBhaXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJmb3JtU2VxdWVuY2VGaXgoYWN0dWFsUk4sIGFjdHVhbENvdW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJJbnRlZ3JpdHkgY2hlY2sgZXJyb3I6IiwgZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sIDQwMDApOyAvLyBTaG9ydGVyIHdhaXQgdGltZQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEFkbWluIFBhbmVsDQogICAgICAgIC8vIFVwZGF0ZXMgY29udHJvbC1saXN0IC0gc2VsZWN0IGFsbG93ZWQgY29udHJvbHMgZm9yIGEgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAxLiBVUERBVEVEIEZFQVRVUkVTIExJU1QNCiAgICAgICAgY29uc3QgcHJvamVjdEZlYXR1cmVzID0gWw0KICAgICAgICAgICAgImJ0bi1hZG1pbi1hY2Nlc3MiLCAiYnRuLWRldm90ZWUtYWNjZXNzIiwgIm1hc3Rlci1oZWFkZXIiLCAiZGFzaGJvYXJkLWNvbnRhaW5lciIsICJlbnRyeS1jb250YWluZXIiLCAicmVjZWlwdC1wcmV2aWV3LXJvdyIsDQogICAgICAgICAgICAiYnRuX3NhdmUiLCAibmV3X3JlY19idG4iLCAiYnRuX3VubG9jayIsICJidG5fbG9jayIsICJzZWFyY2hCdG4iLCAiYmFuay1zeW5jLWJ0biIsICJidG5fY29uc2VudCIsICJidG5TdW1tYXJ5IiwNCiAgICAgICAgICAgICJzZWN0aW9ucyIsICJNaW5SZWNvcmROdW1iZXIiDQogICAgICAgIF07DQoNCiAgICAgICAgLy8gMi4gT1BFTiBQT1JUQUwgKENvcnJlY3RseSBwYXJzaW5nIERldmljZSBJRCB8IFVzZXJuYW1lIHwgUGFzc3dvcmQpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIG9wZW5TZWN1cml0eVBvcnRhbCgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdXNlclJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL1NldHRpbmdzL0FwcHJvdmVkLnR4dCcgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHVzZXJMaXN0ID0gW107DQogICAgICAgICAgICAgICAgaWYgKHVzZXJSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHVzZXJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGVtcHR5IGxpbmVzLCBjb21tZW50cyBzdGFydGluZyB3aXRoICMsIGFuZCBsaW5lcyB3aXRob3V0IHBpcGVzDQogICAgICAgICAgICAgICAgICAgIHVzZXJMaXN0ID0gdGV4dC5zcGxpdCgnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCh1ID0+IHUudHJpbSgpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih1ID0+IHUgIT09ICIiICYmICF1LnN0YXJ0c1dpdGgoJyMnKSAmJiB1LmluY2x1ZGVzKCd8JykpDQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHRha2UgdGhlIG1pZGRsZSBwYXJ0IChVc2VybmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMubGVuZ3RoID49IDIgPyBwYXJ0c1sxXS50cmltKCkgOiBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodSA9PiB1ICE9PSBudWxsKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgaHRtbEhlYWRlciA9IGANCjxkaXYgaWQ9InBvcnRhbC1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246Zml4ZWQ7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTsgei1pbmRleDoxMDAwMDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyB3aWR0aDo4MDBweDsgYWxpZ24tc2VsZjpmbGV4LXN0YXJ0OyBib3gtc2hhZG93OjAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC40KTsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtZmFtaWx5OkFyaWFsOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nOjIwcHg7IGJhY2tncm91bmQ6IzgwMDAwMDsgY29sb3I6d2hpdGU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0ibWFyZ2luOjA7Ij5TZWN1cml0eSBQb3J0YWw8L2gyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5TZWxlY3QgVXNlcjogPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icG9ydGFsLXVzZXItc2VsZWN0b3IiIG9uY2hhbmdlPSJsb2FkVXNlclNldHRpbmdzKHRoaXMudmFsdWUpIiBzdHlsZT0icGFkZGluZzo1cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBVc2VyIC0tPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3VzZXJMaXN0Lm1hcCh1ID0+IGA8b3B0aW9uIHZhbHVlPSIke3V9Ij4ke3V9PC9vcHRpb24+YCkuam9pbignJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwb3J0YWwtY29udGVudC1hcmVhIiBzdHlsZT0ibWluLWhlaWdodDoyMDBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJwYWRkaW5nOjQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjojNjY2OyI+U2VsZWN0IGEgdXNlcm5hbWUgdG8gbG9hZCB0aGUgc2VjdXJpdHkgZmlsZS48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpyaWdodDsgYm9yZGVyLXRvcDoxcHggc29saWQgI2VlZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ic2F2ZVNlY3VyaXR5RmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojODAwMDAwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMnB4IDMwcHg7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjRweDsgY3Vyc29yOnBvaW50ZXI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5TQVZFIENIQU5HRVM8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtb3ZlcmxheScpLnJlbW92ZSgpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsgcGFkZGluZzoxMnB4IDI1cHg7IGJvcmRlcjoxcHggc29saWQgI2NjYzsgYmFja2dyb3VuZDpub25lOyBjdXJzb3I6cG9pbnRlcjsiPkNBTkNFTDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KPC9kaXY+YDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaHRtbEhlYWRlcik7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJFcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIDMuIExPQUQgREFUQSAoUGF0aCBpcyBub3cgY29ycmVjdGx5IC9TZXR0aW5ncy9Vc2VybmFtZS50eHQpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRVc2VyU2V0dGluZ3ModGFyZ2V0VXNlcikgew0KICAgICAgICAgICAgaWYgKCF0YXJnZXRVc2VyKSByZXR1cm47DQogICAgICAgICAgICBjb25zdCBjb250ZW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtY29udGVudC1hcmVhJyk7DQogICAgICAgICAgICBjb250ZW50QXJlYS5pbm5lckhUTUwgPSAnPHAgc3R5bGU9InBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5Mb2FkaW5nICcgKyB0YXJnZXRVc2VyICsgJy50eHQuLi48L3A+JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt0YXJnZXRVc2VyfS50eHRgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IHt9Ow0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHRleHQuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgc2V0dGluZ3NbcGFydHNbMF0udHJpbSgpXSA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gYDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyI+PHRib2R5PmA7DQoNCiAgICAgICAgICAgICAgICBwcm9qZWN0RmVhdHVyZXMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNldHRpbmdzW2lkXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAiTWluUmVjb3JkTnVtYmVyIiB8fCBpZCA9PT0gInNlY3Rpb25zIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke2lkfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImlucHV0LSR7aWR9IiB2YWx1ZT0iJHt2YWx9IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNlOTFlNjM7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFkgPSAodmFsID09PSAnWScgfHwgdmFsID09PSAnJykgPyAnc2VsZWN0ZWQnIDogJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE4gPSAodmFsID09PSAnTicpID8gJ3NlbGVjdGVkJyA6ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke2lkfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpbnB1dC0ke2lkfSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6OHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iWSIgJHtzZWxlY3RlZFl9Plk8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJOIiAke3NlbGVjdGVkTn0+Tjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPC90Ym9keT48L3RhYmxlPmA7DQogICAgICAgICAgICAgICAgY29udGVudEFyZWEuaW5uZXJIVE1MID0gcm93c0h0bWw7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnRlbnRBcmVhLmlubmVySFRNTCA9ICI8cCBzdHlsZT0ncGFkZGluZzoyMHB4Oyc+RXJyb3IgbG9hZGluZyBzZXR0aW5ncy48L3A+IjsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gNC4gU0FWRSAoUGF0aCBmaXhlZCB0byAvU2V0dGluZ3MvVXNlcm5hbWUudHh0KQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzYXZlU2VjdXJpdHlGaWxlKCkgew0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0VXNlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtdXNlci1zZWxlY3RvcicpLnZhbHVlOw0KICAgICAgICAgICAgaWYgKCF0YXJnZXRVc2VyKSByZXR1cm4gYWxlcnQoIlNlbGVjdCB1c2VyISIpOw0KDQogICAgICAgICAgICBsZXQgZmlsZUxpbmVzID0gW107DQogICAgICAgICAgICBwcm9qZWN0RmVhdHVyZXMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgaW5wdXQtJHtpZH1gKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGZpbGVMaW5lcy5wdXNoKGAke2lkfSB8ICR7ZWwudmFsdWUudHJpbSgpfWApOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gZmlsZUxpbmVzLmpvaW4oJ1xuJyk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZpbGVDb250ZW50DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJTYXZlZDogIiArIHRhcmdldFVzZXIgKyAiLnR4dCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9ydGFsLW92ZXJsYXknKS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJTYXZlIEVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIENoZWNrcyBpZiBvdXIgbWFpbiBEQiBpcyByZWFkeSBmb3IgdXNlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBzdGFydEludGVncml0eVByb2JlKGF0dGVtcHRzKSB7DQogICAgICAgICAgICBpZiAoYXR0ZW1wdHMgPD0gMCkgcmV0dXJuOyAvLyBTdG9wIHRyeWluZyBhZnRlciAxMCBhdHRlbXB0cw0KDQogICAgICAgICAgICAvLyAxLiBDaGVjayBpZiBZT1VSIGNvcmUgZGF0YSBpcyByZWFkeQ0KICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgIT09ICd1bmRlZmluZWQnICYmIEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPiAwICYmIHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgew0KDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlN5c3RlbSBSZWFkeS4gUHJvYmluZyBTZXF1ZW5jZS4uLiIpOw0KICAgICAgICAgICAgICAgIHBlcmZvcm1TZXF1ZW5jZUNoZWNrKCk7DQoNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gMi4gTm90IHJlYWR5IHlldD8gV2FpdCAyIHNlY29uZHMgYW5kIHRyeSBhZ2Fpbg0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTeXN0ZW0gYnVzeS4uLiByZXRyeWluZyBwcm9iZSBpbiAycyIpOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc3RhcnRJbnRlZ3JpdHlQcm9iZShhdHRlbXB0cyAtIDEpLCAyMDAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBMb29rcyBmb3Igc2VxdWVuY2UudHh0IGFuZCBjaGVja3MgbGFzdCByZWNvcmQgYW5kIHJlY2VpcHQgQ0cgbnVtYmVyIC0gaWYgbm90IG9rIC0gcHJvbXB0cyBmb3IgYXV0byBjb3JyZWN0aW9uDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBwZXJmb3JtU2VxdWVuY2VDaGVjaygpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gR2V0IHRoZSB0b3RhbCBjb3VudCAoaXJyZXNwZWN0aXZlIG9mIHByZWZpeCkNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvdW50ID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZpbmQgdGhlIGxhdGVzdCBDRyByZWNlaXB0IGJ5IHNlYXJjaGluZyBiYWNrd2FyZCBmcm9tIHRoZSBlbmQNCiAgICAgICAgICAgICAgICBsZXQgZGJSTiA9ICIiOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWlwdE51bWJlciA9IEdMT0JBTF9EQl9MSU5FU1tpXS5zcGxpdCgnfCcpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY2VpcHROdW1iZXIuc3RhcnRzV2l0aCgiQ0ciKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGJSTiA9IHJlY2VpcHROdW1iZXI7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gRm91bmQgdGhlIGhpZ2hlc3QvbGF0ZXN0IENHIG51bWJlciwgc3RvcCBzZWFyY2hpbmcNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBJZiBubyBDRyBmb3VuZCBhdCBhbGwsIHVzZSB0aGUgbGFzdCBsaW5lJ3MgbnVtYmVyDQogICAgICAgICAgICAgICAgaWYgKCFkYlJOICYmIEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGRiUk4gPSBHTE9CQUxfREJfTElORVNbR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDFdLnNwbGl0KCd8JylbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvRGF0YUJhc2VzL3NlcXVlbmNlLnR4dCcgfSkNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICduby1zdG9yZScNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IChhd2FpdCByZXMudGV4dCgpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtmaWxlUk4sIGZpbGVDb3VudF0gPSB0ZXh0LnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSBmb3VuZCBDRyBudW1iZXIgd2l0aCB3aGF0IGlzIGluIHNlcXVlbmNlLnR4dA0KICAgICAgICAgICAgICAgICAgICBpZiAoZGJSTiAhPT0gZmlsZVJOKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBhaXIgPSBjb25maXJtKGBTRVFVRU5DRSBNSVNNQVRDSCFcblxuTGF0ZXN0IENHIGluIERCOiAke2RiUk59XG5GaWxlIHNheXM6ICR7ZmlsZVJOfVxuVG90YWwgUmVjb3JkczogJHtkYkNvdW50fVxuXG5VcGRhdGUgc2VxdWVuY2UgZmlsZT9gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBhaXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9EYXRhQmFzZXMvc2VxdWVuY2UudHh0JywgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGJSTiArICJ8IiArIGRiQ291bnQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIlByb2JlIGZldGNoIGZhaWxlZC4gTmV0d29yayBtaWdodCBiZSBidXN5LiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIExvb2tzIGZvciBVc2VyTmFtZS50eHQgYW5kIGNoZWNrcyB3aGF0IGFyZSB0aGUgY29udHJvbHMgdG8gYmUgYWxsb3dlZCAtIGZ1bGwgYWNjZXNzIGlmIGZpbGUgbm90IGZvdW5kLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU3RhcnQgdGhlIHByb2JlICh0cnkgMTAgdGltZXMsIGV2ZXJ5IDIgc2Vjb25kcykNCiAgICAgICAgc3RhcnRJbnRlZ3JpdHlQcm9iZSgxMCk7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEFuZEFwcGx5U2VjdXJpdHkodXNlck5hbWUpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt1c2VyTmFtZX0udHh0YCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuOyAvLyBJZiBubyBmaWxlIGV4aXN0cywgdXNlciBoYXMgZnVsbCBhY2Nlc3MNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIC8vY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcbicpOw0KDQoNCiAgICAgICAgICAgICAgICAvLyBTa2lwIGNvbW1lbnRzIGFuZCBmb3JtYXR0aW5nIGxpbmVzDQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcbicpLmZpbHRlcihsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IGxpbmUudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbCAhPT0gIiIgJiYgIWwuc3RhcnRzV2l0aCgnIycpICYmIGwuaW5jbHVkZXMoJ3wnKTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtpZCwgYWNjZXNzXSA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkICYmIGFjY2VzcyAmJiBhY2Nlc3MudHJpbSgpID09PSAiTiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZC50cmltKCkpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaWQudHJpbSgpKVswXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOyAvLyBESVNBUFBFQVINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgU2VjdXJpdHk6IEhpZGRlbiAke2lkfWApOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJTZWN1cml0eSBmaWxlIG5vdCBmb3VuZCBmb3IgdXNlciwgZ3JhbnRpbmcgZGVmYXVsdCBhY2Nlc3MuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gaWYgbWlucmVjb3JkIG51bWJlciBzcGVjaWZpZWQgaW4gdXNlcm5hbWUudHh0IHRoZW4gYmxvY2tzIHVzZXIgdG8gdmlldyBwcmV2aW91cyByZWNvcmRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvKioNCiogU2VjdXJpdHkgR2F0ZSBmb3IgTmF2aWdhdGlvbg0KKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0SW5kZXggLSBUaGUgaW5kZXggdGhlIHVzZXIgaXMgdHJ5aW5nIHRvIG1vdmUgdG8NCiovDQogICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlTmF2aWdhdGlvblNlY3VyaXR5KHRhcmdldEluZGV4KSB7DQogICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IGluZGV4IGlzIGFjdHVhbGx5IGEgcmVjb3JkIG51bWJlciAoMS1iYXNlZCksDQogICAgICAgICAgICAvLyB3ZSB1c2UgaXQgZGlyZWN0bHkuIE90aGVyd2lzZSwgd2UgYXNzdW1lIGl0J3MgYSAwLWJhc2VkIGFycmF5IGluZGV4Lg0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0Uk4gPSB0YXJnZXRJbmRleCArIDE7DQoNCiAgICAgICAgICAgIGlmICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IDAgJiYgdGFyZ2V0Uk4gPCB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCLwn5uRIFNFQ1VSSVRZIEJMT0NLXG5cbllvdXIgYWNjZXNzIGxldmVsIGRvZXMgbm90IHBlcm1pdCB2aWV3aW5nIHJlY29yZHMgYmVmb3JlOiAiICsgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4pOw0KDQogICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHNsaWRlciB2aXN1YWwgaWYgaXQgbW92ZWQNCiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHNsaWRlci52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCg0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gRGVueSBuYXZpZ2F0aW9uDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQWxsb3cgbmF2aWdhdGlvbg0KICAgICAgICB9DQoNCiAgICAgICAgLy8gSWYgYSBmbG9vciBpcyBzZXQsIGFuZCB3ZSBhcmUgY3VycmVudGx5IGF0IGEgbG93ZXIgcmVjb3JkLCBqdW1wIHRvIHRoZSBmbG9vcg0KICAgICAgICBpZiAod2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPiAwKSB7DQogICAgICAgICAgICAvLyBJZiBjdXJyZW50IGluZGV4IGlzIDAgb3IgbGVzcyB0aGFuIHRoZSBmbG9vciwgbG9hZCB0aGUgZmxvb3IgcmVjb3JkDQogICAgICAgICAgICBpZiAoKGN1cnJlbnRSZWNvcmRJbmRleCArIDEpIDwgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4pIHsNCiAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkSW5kZXggPSB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiAtIDE7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZVNsaWRlcigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIGxvb2tzIGZvciBhcHByb3ZlZC50eHQgYW5kIGFsbG93cyB1c2VyIHRvIGVudGVyIHN3IC0gYmFzZWQgb24gZGV2aWNlIGlkIGFuZCBwYXNzd29yZA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuUGVyc29uYWxTZWN1cml0eUdhdGUoc2VsZWN0ZWRSb3csIGN1cnJlbnREZXZJRCkgew0KICAgICAgICAgICAgY29uc3QgcGFydHMgPSBzZWxlY3RlZFJvdy5zcGxpdCgnfCcpLm1hcChwID0+IHAudHJpbSgpKTsNCiAgICAgICAgICAgIGNvbnN0IHVOYW1lID0gcGFydHNbMV07DQogICAgICAgICAgICBjb25zdCB1UGFzcyA9IHBhcnRzWzJdIHx8ICIwIjsNCg0KICAgICAgICAgICAgLy8gLS0tIENSSVRJQ0FMOiBTZXQgR2xvYmFsIElkZW50aXR5IGltbWVkaWF0ZWx5IC0tLQ0KICAgICAgICAgICAgTU1QVF9VU0VSX05BTUUgPSB1TmFtZTsNCg0KICAgICAgICAgICAgLy8gSGFuZGxlIFBJTiA9IDAgKEltbWVkaWF0ZSBBdXRvLUxvZ2luKQ0KICAgICAgICAgICAgaWYgKHVQYXNzID09PSAiMCIpIHsNCiAgICAgICAgICAgICAgICBsb2NrQW5kUmVmcmVzaFVzZXIodU5hbWUpOw0KICAgICAgICAgICAgICAgIGF3YWl0IGZpbmlzaE1NUFRMYXVuY2godCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBCdWlsZCBQSU4gVUkgaWYgUElOIGlzIG5vdCAwDQogICAgICAgICAgICBjb25zdCBnYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICBnYXRlLmlkID0gInNlY3VyaXR5X2hpamFjayI7DQogICAgICAgICAgICBnYXRlLnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDI1NSwyNTAsMjQwLDAuOTgpOyB6LWluZGV4Ojk5OTk5OTsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZm9udC1mYW1pbHk6c2Fucy1zZXJpZjsiOw0KDQogICAgICAgICAgICBnYXRlLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6NDBweDsgYm9yZGVyLXJhZGl1czoxNXB4OyBib3JkZXI6M3B4IHNvbGlkICNGRjk5MzM7IHRleHQtYWxpZ246Y2VudGVyOyBib3gtc2hhZG93OjAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC4xKTsgd2lkdGg6MzIwcHg7Ij4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJnYXRlX3Bob3RvX2NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjojMzMzOyBtYXJnaW46MTBweCAwOyI+JHt1TmFtZX08L2gyPg0KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgaWQ9ImdhdGVfaW5wdXQiIHBsYWNlaG9sZGVyPSJFbnRlciBQSU4iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjE1cHg7IGJvcmRlcjoycHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czo4cHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXNpemU6MjJweDsgb3V0bGluZTpub25lOyBtYXJnaW4tYm90dG9tOjE1cHg7Ij4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJnYXRlX3ZlcmlmeSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTJweDsgYmFja2dyb3VuZDojMjhhNzQ1OyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6OHB4OyBmb250LXdlaWdodDpib2xkOyBjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjE2cHg7Ij5VTkxPQ0sgQVBQPC9idXR0b24+DQogICAgICAgICAgICAgICAgPHAgaWQ9ImdhdGVfZXJyIiBzdHlsZT0iY29sb3I6cmVkOyBtYXJnaW4tdG9wOjEwcHg7IGRpc3BsYXk6bm9uZTsiPkludmFsaWQgUGFzc3dvcmQ8L3A+DQogICAgICAgICAgICA8L2Rpdj5gOw0KDQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGdhdGUpOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS5mb2N1cygpOw0KDQogICAgICAgICAgICAvLyBVc2VyIFBob3RvIEZldGNoDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHBob3RvUGF0aCA9IGAvSW1hZ2VzLyR7dU5hbWV9LmpwZ2A7DQogICAgICAgICAgICAgICAgY29uc3QgcFIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogcGhvdG9QYXRoIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAocFIub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IGF3YWl0IHBSLmJsb2IoKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfcGhvdG9fY29udGFpbmVyJykuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSIke1VSTC5jcmVhdGVPYmplY3RVUkwoYil9IiBzdHlsZT0id2lkdGg6MTIwcHg7IGhlaWdodDoxMjBweDsgYm9yZGVyLXJhZGl1czo1MCU7IGJvcmRlcjozcHggc29saWQgI0ZGOTkzMzsgb2JqZWN0LWZpdDpjb3ZlcjsgbWFyZ2luLWJvdHRvbToxMHB4OyI+YDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCJEZWZhdWx0aW5nIHRvIG5vIHBob3RvIik7IH0NCg0KICAgICAgICAgICAgY29uc3QgdmVyaWZ5ID0gYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9pbnB1dCcpLnZhbHVlID09PSB1UGFzcykgew0KICAgICAgICAgICAgICAgICAgICBnYXRlLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICBsb2NrQW5kUmVmcmVzaFVzZXIodU5hbWUpOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmaW5pc2hNTVBUTGF1bmNoKHQpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2VycicpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9pbnB1dCcpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfdmVyaWZ5Jykub25jbGljayA9IHZlcmlmeTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2lucHV0Jykub25rZXlwcmVzcyA9IChlKSA9PiB7IGlmIChlLmtleSA9PT0gJ0VudGVyJykgdmVyaWZ5KCk7IH07DQogICAgICAgIH0NCg0KDQoNCg0KICAgICAgICBmdW5jdGlvbiBzaG93VXNlcklkZW50aXR5U2VsZWN0b3IobWF0Y2hlcywgdG9rZW4sIGRldklEKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICBvdmVybGF5LmlkID0gInVzZXJfaWRlbnRpdHlfb3ZlcmxheSI7DQogICAgICAgICAgICBvdmVybGF5LnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDojRkRGQ0ZCOyB6LWluZGV4OjIxNDc0ODM2NDc7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7IjsNCg0KICAgICAgICAgICAgbGV0IGJ1dHRvbnNIdG1sID0gbWF0Y2hlcy5tYXAoKGxpbmUsIGlkeCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBsaW5lLnNwbGl0KCd8JylbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgIHJldHVybiBgPGJ1dHRvbiBpZD0iaWRlbnRpdHlfYnRuXyR7aWR4fSIgc3R5bGU9IndpZHRoOjMwMHB4OyBwYWRkaW5nOjIwcHg7IG1hcmdpbjoxMHB4OyBiYWNrZ3JvdW5kOndoaXRlOyBib3JkZXI6M3B4IHNvbGlkICNGRjk5MzM7IGJvcmRlci1yYWRpdXM6MTJweDsgZm9udC1zaXplOjIwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGN1cnNvcjpwb2ludGVyOyBjb2xvcjojMzMzOyI+JHtuYW1lfTwvYnV0dG9uPmA7DQogICAgICAgICAgICB9KS5qb2luKCcnKTsNCg0KICAgICAgICAgICAgb3ZlcmxheS5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgPGgxIHN0eWxlPSJjb2xvcjojRkY5OTMzOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij5TRUxFQ1QgUFJPRklMRTwvaDE+DQogICAgICAgICAgICAgICAgPHAgc3R5bGU9ImNvbG9yOiM2NjY7IG1hcmdpbi1ib3R0b206MzBweDsiPk11bHRpcGxlIHVzZXJzIGZvdW5kIGZvciB0aGlzIGRldmljZTo8L3A+DQogICAgICAgICAgICAgICAgJHtidXR0b25zSHRtbH0NCiAgICAgICAgICAgIGA7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOw0KDQogICAgICAgICAgICBtYXRjaGVzLmZvckVhY2goKGxpbmUsIGlkeCkgPT4gew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpZGVudGl0eV9idG5fJHtpZHh9YCkub25jbGljayA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzZW5kcyB0aGUgc3BlY2lmaWMgc2VsZWN0ZWQgdXNlciByb3cgdG8gdGhlIEdhdGUNCiAgICAgICAgICAgICAgICAgICAgcnVuUGVyc29uYWxTZWN1cml0eUdhdGUobGluZSwgZGV2SUQpOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmluaXNoTU1QVExhdW5jaCh0b2tlbikgew0KICAgICAgICAgICAgLy8gMS4gU3dpdGNoIFVJIFZpc2liaWxpdHkNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoU2NyZWVuJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQXBwQ29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoNCiAgICAgICAgICAgIC8vIDIuIFN0YXJ0IHRoZSBhY3R1YWwgYXBwIGRhdGEgbG9hZGluZw0KICAgICAgICAgICAgLy8gVGhpcyB3aWxsIG5vdyB1c2UgdGhlIGdsb2JhbGx5IHNldCBNTVBUX1VTRVJfTkFNRQ0KICAgICAgICAgICAgbG9hZERhdGEodG9rZW4pOw0KDQogICAgICAgICAgICAvLyAzLiBMb2cgdGhlIHN0YXJ0DQogICAgICAgICAgICAvLyBEaXZpZGVyIHdpdGggVmVyc2lvbiBOdW1iZXINCiAgICAgICAgICAgIHdyaXRlVXNlckxvZygiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gVkVSOiAiICsgTU1QVF9WRVJTSU9OKTsNCiAgICAgICAgICAgIGF3YWl0IHdyaXRlVXNlckxvZyhgTEFVTkNIRUQ6IFNlc3Npb24gU3RhcnRlZCBmb3IgJHtNTVBUX1VTRVJfTkFNRX1gKTsNCiAgICAgICAgfQ0KDQoNCg0KDQoNCg0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBUaGUgIkhhbW1lciIgLSBmb3JjZXMgdGhlIGFwcCB0byBhY2tub3dsZWRnZSBUSElTIHVzZXIgYW5kIG5vIG9uZSBlbHNlLg0KICAgICAgICAgKi8NCiAgICAgICAgZnVuY3Rpb24gbG9ja0FuZFJlZnJlc2hVc2VyKGZpbmFsTmFtZSkgew0KICAgICAgICAgICAgd2luZG93Lk1NUFRfVVNFUl9OQU1FID0gZmluYWxOYW1lOw0KDQogICAgICAgICAgICAvLyBGb3JjZSBoZWFkZXIvc2lkZWJhciB1cGRhdGUNCiAgICAgICAgICAgIGNvbnN0IHVzZXJMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5VXNlcicpOw0KICAgICAgICAgICAgaWYgKHVzZXJMYWJlbCkgdXNlckxhYmVsLmlubmVyVGV4dCA9IGZpbmFsTmFtZTsNCg0KICAgICAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmVVc2VyTGlzdCcpOw0KICAgICAgICAgICAgaWYgKGFjdGl2ZUxpc3QpIGFjdGl2ZUxpc3QuaW5uZXJUZXh0ID0gZmluYWxOYW1lOw0KDQogICAgICAgICAgICAvLyBSZS1ydW4gcGVybWlzc2lvbiBsb2dpYyBmb3IgVEhJUyB1c2VyIHNwZWNpZmljYWxseQ0KICAgICAgICAgICAgaWYgKHR5cGVvZiBhcHBseVVzZXJQZXJtaXNzaW9ucyA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICAgICAgICAgIGFwcGx5VXNlclBlcm1pc3Npb25zKGZpbmFsTmFtZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIGhpZGUgbG9naWMgcnVucyBBRlRFUiB0aGUgcGFnZSBhbmQgYWxsIGRhdGEgKGltYWdlcy9zdGF0cykgYXJlIHJlYWR5DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgLy8gMS1zZWNvbmQgZGVsYXkgdG8gZW5zdXJlIGFueSBpbnRlcm5hbCAnbG9hZFJlY29yZCcgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQgcmVuZGVyaW5nIHJvd3MNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgJ2N1cnJlbnRVc2VyJyB3aXRoIHdoYXRldmVyIHZhcmlhYmxlIHN0b3JlcyB5b3VyIGxvZ2dlZC1pbiBuYW1lDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50VXNlciAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgYXBwbHlVc2VyUGVybWlzc2lvbnMoY3VycmVudFVzZXIpOw0KICAgICAgICAgICAgICAgICAgICBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIDEwMDApOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gbG9va3MgZm9yIHVzZXJuYW1lLnR4dCBhbmQgZW5hYmxlcyAvIGRpc2FibGVzIGNvbnRyb2xzIGZvciB0aGF0IHBhcnRpY3VsYXIgdXNlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gYXBwbHlVc2VyUGVybWlzc2lvbnModXNlck5hbWUpIHsNCiAgICAgICAgICAgIC8vIDEuIEluaXRpYWwgZGVidWcgYWxlcnQNCiAgICAgICAgICAgIC8vYWxlcnQoIkZ1bmN0aW9uIFN0YXJ0ZWQgZm9yOiAiICsgdXNlck5hbWUpOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9ICIvU2V0dGluZ3MvIiArIHVzZXJOYW1lLnRyaW0oKSArICIudHh0IjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IGZpbGVQYXRoIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJyk7DQoNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBbaWQsIGFjY2Vzc10gPSBsaW5lLnNwbGl0KCd8JykubWFwKHMgPT4gcy50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlkKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEEuIE1pbiBSZWNvcmQgTG9naWMgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gIk1pblJlY29yZE51bWJlciIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsb29yVmFsdWUgPSBwYXJzZUludChhY2Nlc3MpIHx8IDE7DQogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA9IGZsb29yVmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkU2xpZGVyJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnNldEF0dHJpYnV0ZSgnbWluJywgZmxvb3JWYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHNsaWRlci52YWx1ZSkgPCBmbG9vclZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IGZsb29yVmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbG9hZFJlY29yZEJ5SW5kZXggPT09ICJmdW5jdGlvbiIpIGxvYWRSZWNvcmRCeUluZGV4KGZsb29yVmFsdWUgLSAxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQi4gU2VjdGlvbnMgTG9naWMgKDEtNykgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gInNlY3Rpb25zIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgiU2VjdGlvbnMgcmVhZDogWyIgKyBhY2Nlc3MgKyAiXSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlTZWN0aW9uQWNjZXNzKGFjY2Vzcyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQy4gU3RhbmRhcmQgVUkgVG9nZ2xlcyAoTiA9IEhpZGUpIC0tLQ0KDQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEMuIFN0YW5kYXJkIFVJIFRvZ2dsZXMgKE4gPSBIaWRlL0Rpc2FibGUpIC0tLQ0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQy4gU3RhbmRhcmQgVUkgVG9nZ2xlcyAoQWdncmVzc2l2ZSBNb2RlKSAtLS0NCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHtpZH0sIC4ke2lkfWApOw0KDQogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2VzcyA9PT0gIk4iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMS4gSW5pdGlhbCBIaWRlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnbm9uZScsICdpbXBvcnRhbnQnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBUaGUgIlNlY3VyaXR5IEd1YXJkIiAoT2JzZXJ2ZXIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYW55IG90aGVyIHNjcmlwdCB0cmllcyB0byBzaG93IHRoaXMgYnV0dG9uLCB0aGlzIHNuYXBzIGl0IGJhY2sgdG8gaGlkZGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICJhdHRyaWJ1dGVzIiAmJiBlbC5zdHlsZS5kaXNwbGF5ICE9PSAibm9uZSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZWwsIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ3N0eWxlJywgJ2NsYXNzJ10gfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4cGxpY2l0bHkgU2hvdyBpZiAnWScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJFcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGFwcGx5U2VjdGlvbkFjY2VzcyhhbGxvd2VkU3RyaW5nKSB7DQogICAgICAgICAgICAvLyBXZSB0YXJnZXQgdGhlIGNvbnRhaW5lcnMgZXhhY3RseSBhcyB5b3UgZGVmaW5lZCB0aGVtDQogICAgICAgICAgICBjb25zdCBzZWN0aW9uTWFwID0gew0KICAgICAgICAgICAgICAgICcwJzogJyNyYWRpby1kb2NrJywgLy9JbnRlcm5ldCBSYWRpbw0KICAgICAgICAgICAgICAgICcxJzogJy5wYW5jaGFuZy1vdXRlcicsDQogICAgICAgICAgICAgICAgJzInOiAnLmZsYXNoYmFjay1jb250YWluZXInLA0KICAgICAgICAgICAgICAgICczJzogJy5jaGl0cmFtLWNvbnRhaW5lcicsDQogICAgICAgICAgICAgICAgJzQnOiAnLm1tcHQtYXJjaGl2ZS1ib3gnLA0KICAgICAgICAgICAgICAgICc1JzogJyNhdWRpb19hcmNoaXZlX3NlY3Rpb24nLA0KICAgICAgICAgICAgICAgICc2JzogJyN2aWRlby1hcmNoaXZlLWJveCcsIC8vIFRhcmdldGVkIHZpYSB0aGUgSUQgd2UgYWRkZWQgaW4gU3RlcCAxDQogICAgICAgICAgICAgICAgJzcnOiAnI3BhbmNoYW5nX3NlY3Rpb24nLA0KICAgICAgICAgICAgICAgICc4JzogJy5sdW5hci1zZWN0aW9uJywNCiAgICAgICAgICAgICAgICAnOSc6ICcubmF2LXNlY3Rpb24nLA0KICAgICAgICAgICAgICAgICdHJzogJy5ndXJ1LXNlY3Rpb24nDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBPYmplY3Qua2V5cyhzZWN0aW9uTWFwKS5mb3JFYWNoKG51bSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBzZWN0aW9uTWFwW251bV07DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsNCg0KICAgICAgICAgICAgICAgIGlmIChlbCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBJRiB0aGUgbnVtYmVyIGlzIGluIHRoZSBzdHJpbmcgKGUuZy4gJzEyMycpLCBrZWVwL3Nob3cgaXQuDQogICAgICAgICAgICAgICAgICAgIC8vIElGIE5PVCAoZS5nLiAnNicgaXMgbWlzc2luZyksIGhpZGUgaXQgaW1tZWRpYXRlbHkuDQogICAgICAgICAgICAgICAgICAgIGlmIChhbGxvd2VkU3RyaW5nLmluY2x1ZGVzKG51bSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVGFrZXMgYSBzbmFwIG9mIHVzZXIgd2hpbGUgbGF1bmNoIGFuZCBwdXRzIGluIGxvZyBmb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIElOREVQRU5ERU5UIFNFQ1VSSVRZIFNOQVBTSE9UDQogICAgICAgIGxldCBNTVBUX1BIT1RPX0NBUFRVUkVEID0gZmFsc2U7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY2FwdHVyZVNlY3VyaXR5U25hcHNob3QoKSB7DQogICAgICAgICAgICBpZiAoTU1QVF9QSE9UT19DQVBUVVJFRCB8fCAhTU1QVF9VU0VSX05BTUUpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gRElBR05PU1RJQyAxOiBDaGVjayBpZiB0aGUgYnJvd3NlciBldmVuIGFsbG93cyBjYW1lcmEgYWNjZXNzIChTZWN1cmUgQ29udGV4dCBjaGVjaykNCiAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyB8fCAhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHsNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIlNFQ1VSSVRZIFNUQVRVUzogQnJvd3NlciBibG9ja2VkIGNhbWVyYSBhY2Nlc3MgKEluc2VjdXJlIENvbnRleHQvTm8gSFRUUFMpIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWN1cml0eS12aWRlbycpOw0KICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3VyaXR5LWNhbnZhcycpOw0KDQogICAgICAgICAgICBpZiAoIXZpZGVvIHx8ICFjYW52YXMpIHsNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIlNFQ1VSSVRZIEVSUk9SOiBIVE1MIFZpZGVvL0NhbnZhcyBlbGVtZW50cyBtaXNzaW5nIGZyb20gYm9keSIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgc3RyZWFtOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFRyeSBmb3IgZnJvbnQgY2FtZXJhDQogICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiB7IGZhY2luZ01vZGU6ICJ1c2VyIiB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgZm9yIFBDL0xhcHRvcA0KICAgICAgICAgICAgICAgICAgICBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IHZpZGVvOiB0cnVlLCBhdWRpbzogZmFsc2UgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtOw0KICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxNTAwKSk7IC8vIFNlbnNvciB3YXJtLXVwDQoNCiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSB2aWRlby52aWRlb1dpZHRoOw0KICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodDsNCiAgICAgICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UodmlkZW8sIDAsIDApOw0KDQogICAgICAgICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTsNCg0KICAgICAgICAgICAgICAgIGNhbnZhcy50b0Jsb2IoYXN5bmMgKGJsb2IpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtNTVBUX0xPR19ESVJ9JHtNTVBUX1VTRVJfTkFNRX1fJHt0aW1lc3RhbXB9LmpwZ2A7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlTmFtZSwgbW9kZTogJ2FkZCcgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogYmxvYg0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBNTVBUX1BIT1RPX0NBUFRVUkVEID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZyhgU0VDVVJJVFkgU05BUFNIT1QgVEFLRU46ICR7ZmlsZU5hbWV9YCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coYFNFQ1VSSVRZIFNOQVBTSE9UIFVQTE9BRCBGQUlMRUQ6IFNlcnZlciBFcnJvcmApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwgJ2ltYWdlL2pwZWcnLCAwLjcpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAvLyBEZXRhaWxlZCBTdGF0dXMgTG9nZ2luZw0KICAgICAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicgfHwgZXJyLm5hbWUgPT09ICdQZXJtaXNzaW9uRGVuaWVkRXJyb3InKSB7DQogICAgICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiU0VDVVJJVFkgU1RBVFVTOiBDYW1lcmEgUGVybWlzc2lvbiBEZW5pZWQgYnkgVXNlciIpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIE1vYmlsZSBHZXN0dXJlIEZpeA0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTU1QVF9QSE9UT19DQVBUVVJFRCkgY2FwdHVyZVNlY3VyaXR5U25hcHNob3QoKTsNCiAgICAgICAgICAgICAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyLm5hbWUgPT09ICdOb3RGb3VuZEVycm9yJyB8fCBlcnIubmFtZSA9PT0gJ0RldmljZXNOb3RGb3VuZEVycm9yJykgew0KICAgICAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIlNFQ1VSSVRZIFNUQVRVUzogTm8gQ2FtZXJhIEhhcmR3YXJlIEZvdW5kIik7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKGBTRUNVUklUWSBTVEFUVVM6IENhbWVyYSBFcnJvciAoJHtlcnIubmFtZX0pYCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FkbWluIFBhbmVsDQogICAgICAgIC8vIFNob3dzIGxhdGVzdCB0d28gcGhvdG9zIG9mIHVzZXJzIGxvZ2dlZCBpbiBhZG1pbiBwYW5lbA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEFkbWluU25hcHMoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHRoZSBsaXN0IG9mIGZpbGVzDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvbGlzdF9mb2xkZXInLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfTE9HX0RJUiB9KQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gU29ydCBieSBkYXRlIGFuZCB0YWtlIGxhdGVzdCAyDQogICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBkYXRhLmVudHJpZXMNCiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmID0+IGYubmFtZS5lbmRzV2l0aCgnLmpwZycpKQ0KICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jbGllbnRfbW9kaWZpZWQpIC0gbmV3IERhdGUoYS5jbGllbnRfbW9kaWZpZWQpKQ0KICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMik7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBQb3B1bGF0ZSB0aGUgY2VsbHMNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNuYXAtYm94LSR7aSArIDF9YCk7DQogICAgICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gIiI7IC8vIENsZWFyIGV4aXN0aW5nDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVzW2ldKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZ2V0X3RlbXBvcmFyeV9saW5rJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlc1tpXS5wYXRoX2xvd2VyIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtEYXRhID0gYXdhaXQgbGlua1Jlcy5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGltZSBmcm9tIGZpbGVuYW1lIFVzZXJfWVlZWS1NTS1ERF9ISC1NTS5qcGcNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBmaWxlc1tpXS5uYW1lLnNwbGl0KCdfJylbMl0/LnJlcGxhY2UoJy5qcGcnLCAnJykgfHwgIkxvZyI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojNjY2OyBtYXJnaW4tYm90dG9tOjJweDsiPiR7dGltZX08L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtsaW5rRGF0YS5saW5rfSIgc3R5bGU9IndpZHRoOjcwcHg7IGhlaWdodDo3MHB4OyBvYmplY3QtZml0OmNvdmVyOyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6NHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiQ291bGQgbm90IGxvYWQgc2VjdXJpdHkgc25hcHNob3RzLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEF1ZGl0cyB0aGUgZW50cmllcyBvZiBSZWNlaXB0IGZpbGxlZCBqdXN0IGJlZm9yZSBzYXZpbmcgYW5kIHBvaW50cyBvdXQgcG9zc2libGUgZXJyb3JzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBydW5BdWRpdCgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IChpZCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmNoZWNrZWQ7DQogICAgICAgICAgICAgICAgY29uc3QgZ2V0VmFsID0gKGlkKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkudmFsdWUudHJpbSgpOw0KDQogICAgICAgICAgICAgICAgLy8gMS4gREFUQSBWQUxJREFUSU9ODQogICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBnZXRWYWwoJ2ZpZWxkX3Bob25lJykucmVwbGFjZSgvXEQvZywgJycpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhbiA9IGdldFZhbCgnZmllbGRfcGFuJykudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9IGdldFZhbCgnZmllbGRfZW1haWwnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGdldFZhbCgnZmllbGRfYW1vdW50JykpIHx8IDA7DQogICAgICAgICAgICAgICAgY29uc3QgaXNDYW5jZWxsZWQgPSBpc0NoZWNrZWQoJ2ZpZWxkX2NhbmNlbCcpOw0KDQogICAgICAgICAgICAgICAgbGV0IGVycm9ycyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBibGFua3MgPSBbXTsNCg0KICAgICAgICAgICAgICAgIC8vIENvbXByZWhlbnNpdmUgQmxhbmsgQ2hlY2sgKEFsbCB0ZXh0L3RleHRhcmVhIGZpZWxkcykNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0RmllbGRzID0gew0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfcmVjbm8nOiAnUmVjZWlwdCBObycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9kYXRlJzogJ0RhdGUnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfbmFtZSc6ICdOYW1lJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3Bob25lJzogJ1Bob25lJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2FkZHJlc3MnOiAnQWRkcmVzcycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9lbWFpbCc6ICdFbWFpbCcsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9wYW4nOiAnUEFOJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3N0YXInOiAnU3RhcicsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9nb3RocmFtJzogJ0dvdGhyYW0nLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfYW1vdW50JzogJ0Ftb3VudCcsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9yZWYnOiAnUmVmZXJlbmNlL0NocSBObycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9jb21tZW50cyc6ICdDb21tZW50cycsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9waW5jb2RlJzogJ1BpbmNvZGUnDQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGZvciAobGV0IGlkIGluIHRleHRGaWVsZHMpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRWYWwoaWQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBibGFua3MucHVzaCh0ZXh0RmllbGRzW2lkXSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBGb3JtYXQgJiBMb2dpY2FsIFZhbGlkYXRpb25zDQogICAgICAgICAgICAgICAgaWYgKHBob25lLmxlbmd0aCA+IDAgJiYgcGhvbmUubGVuZ3RoICE9PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIFBob25lIG51bWJlciBtdXN0IGJlIGV4YWN0bHkgMTAgZGlnaXRzLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChwYW4ubGVuZ3RoID4gMCAmJiAhL1tBLVpdezV9WzAtOV17NH1bQS1aXXsxfS8udGVzdChwYW4pKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gUEFOIGZvcm1hdCBpcyBpbnZhbGlkIChFeHBlY3RlZDogQUFBQUExMTExQSkuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gLS0tIE5FVyBFTUFJTCBWQUxJREFUSU9OIC0tLQ0KICAgICAgICAgICAgICAgIGlmIChlbWFpbC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsUmVnZXggPSAvXlteXHNAXStAW15cc0BdK1wuW15cc0BdKyQvOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChlbWFpbCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gRW1haWwgZm9ybWF0IGlzIGludmFsaWQgKEV4cGVjdGVkOiBuYW1lQGRvbWFpbi5jb20pLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gWmVybyBBbW91bnQgSGlnaGxpZ2h0IExvZ2ljDQogICAgICAgICAgICAgICAgbGV0IGFtb3VudFdhcm5pbmcgPSAiIjsNCiAgICAgICAgICAgICAgICBpZiAoIWlzQ2FuY2VsbGVkICYmIGFtb3VudCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbW91bnRXYXJuaW5nID0gYDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjJmMjsgY29sb3I6I2Q5MzAyNTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNkOTMwMjU7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IHRleHQtYWxpZ246Y2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDimqDvuI8gQ1JJVElDQUw6IEFtb3VudCBpcyAwLiBQbGVhc2UgdmVyaWZ5IGlmIHRoaXMgaXMgaW50ZW50aW9uYWwuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gQW1vdW50IGlzIHplcm8uIik7DQogICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICAvLyAyLiBCVUlMRCBUSEUgQVVESVQgVUkNCiAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxIZWFkZXIgPSBpc0NhbmNlbGxlZCA/DQogICAgICAgICAgICAgICAgICAgIGA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOnJlZDsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxLjJlbTsgYm9yZGVyLXJhZGl1czo1cHg7IG1hcmdpbi1ib3R0b206MTVweDsiPiEhISBSRUNFSVBUIElTIENBTkNFTExFRCAhISE8L2Rpdj5gIDogIiI7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXNHcmlkID0gYA0KPGRpdiBzdHlsZT0iZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6IDEwcHg7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDVweDsiPg0KPGRpdj5DYW5jZWxsZWQ6ICR7aXNDYW5jZWxsZWQgPyAnPGIgc3R5bGU9ImNvbG9yOnJlZDsiPllFUzwvYj4nIDogJ05PJ308L2Rpdj4NCjxkaXY+UHJpbnRlZDogJHtpc0NoZWNrZWQoJ2ZpZWxkX3ByaW50ZWQnKSA/ICc8YiBzdHlsZT0iY29sb3I6Z3JlZW47Ij5ZRVM8L2I+JyA6ICdOTyd9PC9kaXY+DQo8ZGl2PlByYXNhZGFtOiAke2lzQ2hlY2tlZCgnZmllbGRfcHJhc2FkYW0nKSA/ICc8YiBzdHlsZT0iY29sb3I6Z3JlZW47Ij5ZRVM8L2I+JyA6ICdOTyd9PC9kaXY+DQo8ZGl2PkNvcnB1cyBTaWduZWQ6ICR7aXNDaGVja2VkKCdmaWVsZF9jb3JwdXMnKSA/ICc8YiBzdHlsZT0iY29sb3I6Z3JlZW47Ij5ZRVM8L2I+JyA6ICdOTyd9PC9kaXY+DQo8L2Rpdj5gOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUgPSAicG9zaXRpb246Zml4ZWQ7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC44NSk7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyB6LWluZGV4OjEwMDAxOyBmb250LWZhbWlseTpzYW5zLXNlcmlmOyI7DQoNCg0KICAgICAgICAgICAgICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gYA0KPGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgcGFkZGluZzoyNXB4OyBib3JkZXItcmFkaXVzOjEycHg7IHdpZHRoOjU4MHB4OyBib3gtc2hhZG93OiAwIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuNSk7IG1heC1oZWlnaHQ6IDkwdmg7IG92ZXJmbG93LXk6IGF1dG87Ij4NCiR7Y2FuY2VsSGVhZGVyfQ0KJHthbW91bnRXYXJuaW5nfQ0KDQo8aDIgc3R5bGU9Im1hcmdpbi10b3A6MDsgYm9yZGVyLWJvdHRvbToycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206MTBweDsiPlJlY2VpcHQgQXVkaXQgUmVwb3J0PC9oMj4NCg0KPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNXB4OyBsaW5lLWhlaWdodDoxLjU7Ij4NCjxiPlJlY2VpcHQ6PC9iPiAke2dldFZhbCgnZmllbGRfcmVjbm8nKX0gfCA8Yj5EYXRlOjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX2RhdGUnKX08YnI+DQo8Yj5OYW1lOjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX25hbWUnKX08YnI+DQo8Yj5BbW91bnQ6PC9iPiA8c3BhbiBzdHlsZT0iJHthbW91bnQgPT09IDAgPyAnY29sb3I6cmVkOyBmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MS4yZW07JyA6ICcnfSI+4oK5JHthbW91bnR9PC9zcGFuPiB8IDxiPlRvd2FyZHM6PC9iPiAke2dldFZhbCgnZmllbGRfdG93YXJkcycpfQ0KPC9kaXY+DQoNCjxoNCBzdHlsZT0ibWFyZ2luOiAxNXB4IDAgNXB4IDA7IGNvbG9yOiM1NTU7Ij5EYXRhYmFzZSBTdGF0dXMgRmxhZ3M6PC9oND4NCiR7c3RhdHVzR3JpZH0NCg0KJHtibGFua3MubGVuZ3RoID4gMCA/IGANCjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTVweDsgYmFja2dyb3VuZDojZThmNGZkOyBwYWRkaW5nOjEwcHg7IGJvcmRlci1sZWZ0OjVweCBzb2xpZCAjMjE5NkYzOyI+DQo8YiBzdHlsZT0iY29sb3I6IzBkNDdhMTsiPlRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBibGFuazo8L2I+PGJyPg0KPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjllbTsgY29sb3I6IzMzMzsiPiR7YmxhbmtzLmpvaW4oJywgJyl9PC9zcGFuPg0KPC9kaXY+DQpgIDogIiJ9DQoNCiR7ZXJyb3JzLmxlbmd0aCA+IDAgPyBgDQo8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGJhY2tncm91bmQ6I2ZmZjNjZDsgcGFkZGluZzoxMHB4OyBib3JkZXItbGVmdDo1cHggc29saWQgI2ZmYzEwNzsiPg0KPGIgc3R5bGU9ImNvbG9yOiM4NTY0MDQ7Ij5WYWxpZGF0aW9uIEFsZXJ0czo8L2I+PGJyPg0KJHtlcnJvcnMuam9pbignPGJyPicpfQ0KPC9kaXY+DQpgIDogIiJ9DQoNCjxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IG1hcmdpbi10b3A6MjVweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7IHBhZGRpbmctdG9wOiAxNXB4OyI+DQo8YnV0dG9uIGlkPSJhdWRpdF9iYWNrIiBzdHlsZT0icGFkZGluZzoxMHB4IDIwcHg7IG1hcmdpbi1yaWdodDoxMHB4OyBjdXJzb3I6cG9pbnRlcjsgYm9yZGVyLXJhZGl1czo1cHg7IGJvcmRlcjoxcHggc29saWQgI2NjYzsgYmFja2dyb3VuZDogd2hpdGU7Ij5HbyBCYWNrICYgRWRpdDwvYnV0dG9uPg0KPGJ1dHRvbiBpZD0iYXVkaXRfY29uZmlybSIgc3R5bGU9InBhZGRpbmc6MTBweCAzMHB4OyBiYWNrZ3JvdW5kOiMyOGE3NDU7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo1cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6IDEuMWVtOyI+Q09ORklSTSAmIFNZTkM8L2J1dHRvbj4NCjwvZGl2Pg0KPC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaXRfYmFjaycpLm9uY2xpY2sgPSAoKSA9PiB7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7IHJlc29sdmUoZmFsc2UpOyB9Ow0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpdF9jb25maXJtJykub25jbGljayA9ICgpID0+IHsgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTsgcmVzb2x2ZSh0cnVlKTsgfTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBFbnN1cmUgaXQgcnVucyBhZnRlciB0aGUgcGFnZSBoYXMgZmluaXNoZWQgYWxsIGl0cyBpbnRlcm5hbCBkYXRhLWxvYWRpbmcNCiAgICAgICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFVzZXIgIT09ICd1bmRlZmluZWQnKSBhcHBseVVzZXJQZXJtaXNzaW9ucyhjdXJyZW50VXNlcik7DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBBbm9ueSBSZWNlaXB0cyBBdXRvZmlsbCBmcm9tIGtub3duIHJlY2VpcHQgdG8gYW5vbnkgLSBpbnB1dCBmcm9tIE1NUFRfTElOS19BTk9OWSBBbm9ueUZpbGwudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQW5vbnlGaWxsKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nT3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChNTVBUX0xJTktfQU5PTlkpOw0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcigiTGluayB1bnJlYWNoYWJsZSIpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbWFwcGluZ1RleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gbWFwcGluZ1RleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGxpbmUgPT4gbGluZS5pbmNsdWRlcygnfCcpKTsNCg0KICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VNYWRlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgbGV0IHVwZGF0ZUNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIGluc3RydWN0aW9ucy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBbdGFyZ2V0Uk4sIHNvdXJjZVJOXSA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAocCA9PiBwLnRyaW0oKSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlUm93ID0gR0xPQkFMX0RCX0xJTkVTLmZpbmQociA9PiByLnN0YXJ0c1dpdGgoc291cmNlUk4gKyAifCIpKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SW5kZXggPSBHTE9CQUxfREJfTElORVMuZmluZEluZGV4KHIgPT4gci5zdGFydHNXaXRoKHRhcmdldFJOICsgInwiKSk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVJvdyAmJiB0YXJnZXRJbmRleCAhPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBzb3VyY2VSb3cuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ID0gR0xPQkFMX0RCX0xJTkVTW3RhcmdldEluZGV4XS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gMS4gRElSRUNUIFJFUExJQ0FUSU9OIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFsyXSA9IHNbMl07ICAvLyBOYW1lDQogICAgICAgICAgICAgICAgICAgICAgICB0WzNdID0gc1szXTsgIC8vIFBob25lDQogICAgICAgICAgICAgICAgICAgICAgICB0WzRdID0gc1s0XTsgIC8vIEFkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgICAgIHRbNV0gPSBzWzVdOyAgLy8gRW1haWwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRbNl0gPSBzWzZdOyAgLy8gUEFODQogICAgICAgICAgICAgICAgICAgICAgICB0WzddID0gc1s3XTsgIC8vIFN0YXINCiAgICAgICAgICAgICAgICAgICAgICAgIHRbOF0gPSBzWzhdOyAgLy8gR290aHJhbQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFsxNV0gPSBzWzE1XTsgLy8gUGluIENvZGUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMTldID0gc1sxOV07IC8vIENvdW50cnkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDIuIERJUkVDVCBDT01NRU5UIEFQUEVORCAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGNoZWNrcywgbm8gImlmIiBibG9ja3MuIEp1c3QgYXBwZW5kIHRvIGluZGV4IDE0Lg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90ZSA9ICJEZXRhaWxzIEltcG9ydGVkIGZyb20gIiArIHNvdXJjZVJOOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkQ29tbWVudCA9ICh0WzE0XSB8fCAiIikudHJpbSgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGFuIG9sZCBjb21tZW50LCBhZGQgcGlwZTsgb3RoZXJ3aXNlIGp1c3QgdGhlIG5vdGUuDQogICAgICAgICAgICAgICAgICAgICAgICB0WzE0XSA9IG9sZENvbW1lbnQgPyAob2xkQ29tbWVudCArICIgOiAiICsgbm90ZSkgOiBub3RlOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gMy4gUkUtSk9JTiAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1t0YXJnZXRJbmRleF0gPSB0LmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZU1hZGUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKGNoYW5nZU1hZGUpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQVVUSEVOVElDQVRJT04NCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5QYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5SZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB0b2tlblBhcmFtcw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdG9rZW5SZXMuanNvbigpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFVQTE9BRA0KICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGxvYWRSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogR0xPQkFMX0RCX0xJTkVTLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHVwbG9hZFJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkFub255RmlsbDogRG9uZS4gIiArIHVwZGF0ZUNvdW50ICsgIiByZWNvcmRzIHVwZGF0ZWQuIik7DQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJBbm9ueUZpbGwgRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIEJhY2t1cHMgQ29tcGxldGUgQXBwIEZvbGRlciB3aXRoIGFsbCBmaWxlcyBhbmQgcHV0cyBpbiBCYWNrdXAgRm9sZGVyIHdpdGggVGltZXN0YW1wDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5NTVBUQmFja3VwKGlzQXV0byA9IGZhbHNlKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gR2VuZXJhdGUgVGltZXN0YW1wIGZvciBGb2xkZXIgTmFtZQ0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbm93LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSArICJfIiArDQogICAgICAgICAgICAgICAgICAgIG5vdy5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArICItIiArDQogICAgICAgICAgICAgICAgICAgIG5vdy5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RGlyID0gTU1QVF9CQUNLVVBfRElSICsgdGltZXN0YW1wOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gR2V0IEFjY2VzcyBUb2tlbiB1c2luZyB5b3VyIGNyZWRlbnRpYWxzDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5QYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHRva2VuUGFyYW1zDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdG9rZW5SZXMuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gdG9rZW5EYXRhLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGxldCBjb3B5RW50cmllcyA9IFtdOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gU1RFUCBBOiBDb3B5IENvcmUgSW5kaXZpZHVhbCBGaWxlcyAoUmVhZC1vbmx5IGxpbmtzKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcmVGaWxlcyA9IFsNCiAgICAgICAgICAgICAgICAgICAgTU1QVF9GSUxFX0RCLCBNTVBUX0ZJTEVfVVNFUlMsIE1NUFRfRklMRV9BUFBST1ZFRCwNCiAgICAgICAgICAgICAgICAgICAgTU1QVF9GSUxFX0xPR08sIE1NUFRfRklMRV9EUk9QRE9XTlMsIE1NUFRfRklMRV9DQVNILA0KICAgICAgICAgICAgICAgICAgICBNTVBUX0ZJTEVfQkFOSywgRVhFTVBUX0ZJTEUsIE1NUFRfRklMRV9TRVENCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgY29yZUZpbGVzLmZvckVhY2gocGF0aCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvcHlFbnRyaWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9wYXRoOiBwYXRoLA0KICAgICAgICAgICAgICAgICAgICAgICAgdG9fcGF0aDogdGFyZ2V0RGlyICsgIi8iICsgcGF0aC5zcGxpdCgnLycpLnBvcCgpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gNC4gU1RFUCBCOiBEeW5hbWljIEZvbGRlciBDb3B5IChFeGNsdWRpbmcgUGFuY2hhbmcpDQogICAgICAgICAgICAgICAgLy8gU2NhbnMgdGhlIHJvb3Qgb2YgeW91ciBBcHAgZm9sZGVyDQogICAgICAgICAgICAgICAgY29uc3QgbGlzdFJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2xpc3RfZm9sZGVyJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogIiIgfSkNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChsaXN0UmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3REYXRhID0gYXdhaXQgbGlzdFJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLmVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lTG93ZXIgPSBlbnRyeS5uYW1lLnRvTG93ZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgYWxsIGZvbGRlcnMgRVhDRVBUICdwYW5jaGFuZycNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeVsiLnRhZyJdID09PSAiZm9sZGVyIiAmJiBuYW1lTG93ZXIgIT09ICJwYW5jaGFuZyIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5RW50cmllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9wYXRoOiBlbnRyeS5wYXRoX2xvd2VyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b19wYXRoOiB0YXJnZXREaXIgKyAiLyIgKyBlbnRyeS5uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBbHNvIGNhdGNoIGFueSBsb29zZSBmaWxlcyBpbiByb290IChsaWtlIHZpZGVvcy50eHQpIG5vdCBhbHJlYWR5IGluIGNvcmVGaWxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZW50cnlbIi50YWciXSA9PT0gImZpbGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBbHJlYWR5TGlzdGVkID0gY29yZUZpbGVzLnNvbWUoY2YgPT4gY2YudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhuYW1lTG93ZXIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQWxyZWFkeUxpc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5RW50cmllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fcGF0aDogZW50cnkucGF0aF9sb3dlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvX3BhdGg6IHRhcmdldERpciArICIvIiArIGVudHJ5Lm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIEJhdGNoIENvcHkNCiAgICAgICAgICAgICAgICBpZiAoY29weUVudHJpZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vMi9maWxlcy9jb3B5X2JhdGNoX3YyJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4sICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZW50cmllczogY29weUVudHJpZXMgfSkNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNS4gU1RFUCBDOiBQcm9jZXNzIEV4dGVybmFsIE9ubGluZSBMaW5rcyAoRG93bmxvYWQvVXBsb2FkKQ0KICAgICAgICAgICAgICAgIGNvbnN0IG9ubGluZUxpbmtzID0gWw0KICAgICAgICAgICAgICAgICAgICB7IHVybDogTU1QVF9VUkxfRVhQRU5TRVMsIG5hbWU6ICJFeHBlbnNlcy54bHN4IiB9LA0KICAgICAgICAgICAgICAgICAgICB7IHVybDogQkFOS19TVEFURU1FTlRfVVJMLCBuYW1lOiAiQmFua1N0YXRlbWVudC54bHMiIH0sDQogICAgICAgICAgICAgICAgICAgIHsgdXJsOiBNTVBUX0xJTktfQU5PTlksIG5hbWU6ICJBbm9ueUZpbGwudHh0IiB9DQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvbmxpbmVMaW5rcykgew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZVJlcyA9IGF3YWl0IGZldGNoKGl0ZW0udXJsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBmaWxlUmVzLmJsb2IoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiB0YXJnZXREaXIgKyAiLyIgKyBpdGVtLm5hbWUsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGJsb2INCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoIkxpbmsgYmFja3VwIGZhaWxlZDogIiArIGl0ZW0ubmFtZSk7IH0NCiAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgIC8vIEF0IHRoZSBlbmQgb2YgdGhlIGZ1bmN0aW9uOg0KICAgICAgICAgICAgICAgIGlmICghaXNBdXRvKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJCYWNrdXAgU3VjY2Vzc2Z1bCEiKTsgLy8gT25seSBzaG93cyBpZiBZT1UgY2xpY2tlZCB0aGUgYnV0dG9uDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIk1NUFQ6IEJhY2tncm91bmQgYmFja3VwIGNvbXBsZXRlLiIpOyAvLyBTaWxlbnQgbG9nIGZvciBkZXZlbG9wZXJzDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy9hbGVydCgiQmFja3VwIFN1Y2Nlc3MhXG5BbGwgZm9sZGVycyAoZXhjZXB0IFBhbmNoYW5nKSBzYXZlZCB0bzogIiArIHRhcmdldERpcik7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJCYWNrdXAgRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBUZXh0IERvd25sb2FkIEZ1bmN0aW9uIGZvciB0aGUgYWRtaW4gcGFuZWwgZnVuY3Rpb25zDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkb3dubG9hZFR4dCh0ZXh0LCBmaWxlbmFtZSkgew0KICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt0ZXh0XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7DQogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7DQogICAgICAgICAgICBhLmNsaWNrKCk7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOw0KICAgICAgICB9DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENpdHkgTmFtZSBFcnJvciBhbmQgU3VnZ2VzdGlvbnMgZm9yIENvcnJlY3Rpb25zIGRvd25sb2FkcyA2IHRleHQgZmlsZXMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkNpdHlFeHRyYWN0aW9uKG1vZGUgPSAnbm9ybWFsJykgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChNTVBUX0RCX1JBV19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd0NvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSByYXdDb250ZW50LnNwbGl0KC9ccj9cbnxcci8pOw0KDQogICAgICAgICAgICAgICAgbGV0IGxpc3QxX0FsbCA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBsaXN0M19NYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDZfTWFwID0ge307DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZWZDaXRpZXMgPSBbIk11bWJhaSIsICJEZWxoaSIsICJCZW5nYWx1cnUiLCAiQmFuZ2Fsb3JlIiwgIkh5ZGVyYWJhZCIsICJBaG1lZGFiYWQiLCAiQ2hlbm5haSIsICJLb2xrYXRhIiwgIlN1cmF0IiwgIlB1bmUiLCAiSmFpcHVyIiwgIkx1Y2tub3ciLCAiS2FucHVyIiwgIk5hZ3B1ciIsICJJbmRvcmUiLCAiVGhhbmUiLCAiQmhvcGFsIiwgIlZpc2FraGFwYXRuYW0iLCAiUGF0bmEiLCAiVmFkb2RhcmEiLCAiR2hhemlhYmFkIiwgIkx1ZGhpYW5hIiwgIkFncmEiLCAiTmFzaGlrIiwgIkZhcmlkYWJhZCIsICJNZWVydXQiLCAiUmFqa290IiwgIlZhcmFuYXNpIiwgIlNyaW5hZ2FyIiwgIkF1cmFuZ2FiYWQiLCAiQW1yaXRzYXIiLCAiUmFuY2hpIiwgIkd3YWxpb3IiLCAiSmFiYWxwdXIiLCAiQ29pbWJhdG9yZSIsICJWaWpheWF3YWRhIiwgIk1hZHVyYWkiLCAiUmFpcHVyIiwgIktvdGEiLCAiQ2hhbmRpZ2FyaCIsICJHdXdhaGF0aSIsICJTb2xhcHVyIiwgIkthbmNoaXB1cmFtIiwgIk15c29yZSIsICJUaXJ1Y2hpcmFwcGFsbGkiLCAiVHJpY2h5IiwgIlNhbGVtIiwgIlRpcnVwcHVyIiwgIlNyaXJhbmdhbSIsICJTZWN1bmRlcmFiYWQiLCAiVGhpcnV2ZWRhZ2FtIiwgIkNhbGlmb3JuaWEiLCAiVGFtaWxuYWR1IiwgIkJldGhsZWhlbSIsICJEb2hhIl07DQogICAgICAgICAgICAgICAgY29uc3QgcmVmQ291bnRyaWVzID0gWyJVQUUiLCAiVUsiLCAiVVNBIiwgIlNpbmdhcG9yZSIsICJNYWxheXNpYSIsICJBdXN0cmFsaWEiLCAiQ2FuYWRhIiwgIkdlcm1hbnkiLCAiRnJhbmNlIiwgIkphcGFuIiwgIkR1YmFpIiwgIlFhdGFyIiwgIkt1d2FpdCIsICJPbWFuIiwgIkJhaHJhaW4iLCAiU2F1ZGkgQXJhYmlhIiwgIlVuaXRlZCBLaW5nZG9tIiwgIlVuaXRlZCBBcmFiIEVtaXJhdGVzIiwgIlVuaXRlZCBTdGF0ZXMiLCAiU3dpdHplcmxhbmQiLCAiTmV0aGVybGFuZHMiXTsNCg0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNpbWlsYXJpdHkoczEsIHMyKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsb25nZXIgPSBzMS50b0xvd2VyQ2FzZSgpLCBzaG9ydGVyID0gczIudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHMxLmxlbmd0aCA8IHMyLmxlbmd0aCkgeyBsb25nZXIgPSBzMi50b0xvd2VyQ2FzZSgpOyBzaG9ydGVyID0gczEudG9Mb3dlckNhc2UoKTsgfQ0KICAgICAgICAgICAgICAgICAgICBsZXQgbG9uZ2VyTGVuZ3RoID0gbG9uZ2VyLmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxvbmdlckxlbmd0aCA9PSAwKSByZXR1cm4gMS4wOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGl0RGlzdGFuY2UgPSAoczEsIHMyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29zdHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHMxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RWYWx1ZSA9IGk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gczIubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkgY29zdHNbal0gPSBqOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChqID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gY29zdHNbaiAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMxLmNoYXJBdChpIC0gMSkgIT0gczIuY2hhckF0KGogLSAxKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IE1hdGgubWluKE1hdGgubWluKG5ld1ZhbHVlLCBsYXN0VmFsdWUpLCBjb3N0c1tqXSkgKyAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zdHNbaiAtIDFdID0gbGFzdFZhbHVlOyBsYXN0VmFsdWUgPSBuZXdWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApIGNvc3RzW3MyLmxlbmd0aF0gPSBsYXN0VmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29zdHNbczIubGVuZ3RoXTsNCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChsb25nZXJMZW5ndGggLSBlZGl0RGlzdGFuY2Uoc2hvcnRlciwgbG9uZ2VyKSkgLyBwYXJzZUZsb2F0KGxvbmdlckxlbmd0aCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRMaW5lID0gbGluZXNbMF0uaW5jbHVkZXMoJ3wnKSAmJiBsaW5lc1swXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJyZWNlaXB0IikgPyAxIDogMDsNCg0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydExpbmU7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lICYmIGkgPT09IGxpbmVzLmxlbmd0aCAtIDEpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkc1sxM10gPT09ICJZRVMiKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXB0Tm8gPSBmaWVsZHNbMF0gfHwgIlVOS05PV04iOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2l0eSA9ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZHNbNF0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIHRpbGRlcyB0byBzcGFjZSBjb252ZXJzaW9uDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5BZGRyZXNzID0gZmllbGRzWzRdLnJlcGxhY2UoL34vZywgIiAiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgd29yZHMgPSBjbGVhbkFkZHJlc3Muc3BsaXQoL1xzKy8pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIHJhdyBsYXN0IHdvcmQgKHdoaWNoIG1pZ2h0IGNvbnRhaW4gY29sb25zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHkgPSB3b3Jkc1t3b3Jkcy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGxpc3QxX0FsbC5wdXNoKGAke2NpdHl9LCAke3JlY2VpcHROb31gKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoY2l0eSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZWRDb3VudHJ5ID0gcmVmQ291bnRyaWVzLmZpbmQoYyA9PiBjLnRvTG93ZXJDYXNlKCkgPT09IGNpdHkudG9Mb3dlckNhc2UoKSB8fCBnZXRTaW1pbGFyaXR5KGNpdHksIGMpID4gMC44NSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZENvdW50cnkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3Q2X01hcFttYXRjaGVkQ291bnRyeV0pIGxpc3Q2X01hcFttYXRjaGVkQ291bnRyeV0gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0Nl9NYXBbbWF0Y2hlZENvdW50cnldLnB1c2gocmVjZWlwdE5vKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaXN0M19NYXBbY2l0eV0pIGxpc3QzX01hcFtjaXR5XSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QzX01hcFtjaXR5XS5wdXNoKHJlY2VpcHRObyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBsaXN0Ml9VbmlxdWUgPSBPYmplY3Qua2V5cyhsaXN0M19NYXApLnNvcnQoKTsNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDNfU3RyaW5ncyA9IGxpc3QyX1VuaXF1ZS5tYXAoYyA9PiBgJHtjfSwgJHtsaXN0M19NYXBbY10uam9pbignLCAnKX1gKTsNCg0KICAgICAgICAgICAgICAgIGxldCBsaXN0NF9BbGxTdWdnZXN0aW9ucyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBsaXN0NV9BY3Rpb25zT25seSA9IFtdOw0KDQogICAgICAgICAgICAgICAgbGlzdDJfVW5pcXVlLmZvckVhY2gob3JpZ2luYWwgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgc3VnZ2VzdGlvbiA9ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBORVcgQ09MT04gTE9HSUMgLS0tDQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSAib3JpZ2luYWwiIGhhcyBhIGNvbG9uLCB3ZSBzdWdnZXN0IHJlcGxhY2luZyBjb2xvbiB3aXRoIGNvbW1hK3NwYWNlDQogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbC5pbmNsdWRlcygnOicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gb3JpZ2luYWwuc3BsaXQoJzonKS5tYXAocGFydCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FwaXRhbGl6ZSBlYWNoIHBhcnQgZm9yIGEgY2xlYW4gc3VnZ2VzdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zbGljZSgxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJywgJyk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGFuZGFyZCBTaW1pbGFyaXR5IExvZ2ljIGZvciBzaW5nbGUgd29yZHMNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiZXN0U2NvcmUgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcmVmIG9mIHJlZkNpdGllcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IGdldFNpbWlsYXJpdHkob3JpZ2luYWwsIHJlZik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gMC43NSAmJiBzY29yZSA+IGJlc3RTY29yZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0U2NvcmUgPSBzY29yZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9IHJlZjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3VnZ2VzdGlvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZFJlZiA9IFsuLi5yZWZDaXRpZXNdLnNvcnQoKGEsIGIpID0+IGIubGVuZ3RoIC0gYS5sZW5ndGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJlZiBvZiBzb3J0ZWRSZWYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgKC4rPykoJHtyZWZ9KSRgLCAnaScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXgudGVzdChvcmlnaW5hbCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IG9yaWdpbmFsLm1hdGNoKHJlZ2V4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcmVmaXggPSBtYXRjaFsxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1hdGNoWzFdLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXpBLVpdL2csICIiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSBgJHtwcmVmaXh9LCAke3JlZn1gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBsZXQgaXNKdXN0Q2FzaW5nID0gc3VnZ2VzdGlvbi50b0xvd2VyQ2FzZSgpID09PSBvcmlnaW5hbC50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxPdXQgPSAoaXNKdXN0Q2FzaW5nIHx8ICFzdWdnZXN0aW9uIHx8IG9yaWdpbmFsLmxlbmd0aCA8IDQpID8gIiIgOiBzdWdnZXN0aW9uOw0KDQogICAgICAgICAgICAgICAgICAgIGxpc3Q0X0FsbFN1Z2dlc3Rpb25zLnB1c2gob3JpZ2luYWwucGFkRW5kKDMwLCAnICcpICsgIiB8ICIgKyBmaW5hbE91dCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dCAhPT0gIiIpIGxpc3Q1X0FjdGlvbnNPbmx5LnB1c2gob3JpZ2luYWwucGFkRW5kKDMwLCAnICcpICsgIiB8ICIgKyBmaW5hbE91dCk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDZfU3RyaW5ncyA9IE9iamVjdC5rZXlzKGxpc3Q2X01hcCkuc29ydCgpLm1hcChjb3VudHJ5ID0+IGAke2NvdW50cnl9LCAke2xpc3Q2X01hcFtjb3VudHJ5XS5qb2luKCcsICcpfWApOw0KDQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdDVfQWN0aW9uc09ubHkpKSB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5HTE9CQUxfQ0lUWV9BVURJVF9EQVRBID0gbGlzdDVfQWN0aW9uc09ubHkuam9pbignXG4nKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuR0xPQkFMX0NJVFlfQVVESVRfREFUQSA9IGxpc3Q1X0FjdGlvbnNPbmx5Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnYXVkaXQnKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXIgPSAiT1JJR0lOQUwgTkFNRSIucGFkRW5kKDMwLCAnICcpICsgIiB8IFNVR0dFU1RFRCBDT1JSRUNUSU9OXG4iICsgIi0iLnJlcGVhdCg2MCkgKyAiXG4iOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGxpc3QxX0FsbC5qb2luKCdcbicpLCAiMV9DaXRpZXNfUmVjb3Jkcy50eHQiKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRvd25sb2FkVHh0KGxpc3QyX1VuaXF1ZS5qb2luKCdcbicpLCAiMl9DaXRpZXNfVW5pcXVlX0xpc3QudHh0IiksIDYwMCk7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb3dubG9hZFR4dChsaXN0M19TdHJpbmdzLmpvaW4oJ1xuJyksICIzX0NpdGllc19Db3JyZWN0aW9uX01hcC50eHQiKSwgMTIwMCk7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb3dubG9hZFR4dChoZWFkZXIgKyBsaXN0NF9BbGxTdWdnZXN0aW9ucy5qb2luKCdcbicpLCAiNF9DaXRpZXNfRnVsbF9BdWRpdC50eHQiKSwgMTgwMCk7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb3dubG9hZFR4dChoZWFkZXIgKyBsaXN0NV9BY3Rpb25zT25seS5qb2luKCdcbicpLCAiNV9DaXRpZXNfQWN0aW9uc19Pbmx5LnR4dCIpLCAyNDAwKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUeHQobGlzdDZfU3RyaW5ncy5qb2luKCdcbicpLCAiNl9Db3VudHJpZXNfTWFwLnR4dCIpOw0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiQXVkaXQgQ29tcGxldGUhXG5cbkNvbG9ucyBkZXRlY3RlZDogU3VnZ2VzdGlvbnMgbm93IGNvcnJlY3RseSB1c2UgY29tbWFzLiIpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgIH0sIDMwMDApOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENvdW50cnkgY29ycmVjdGlvbiBpbiB0aGUgREIgYmFzZWQgb24gaW5wdXQgQ0lUWV9DT1JSRUNUSU9OU19VUkwgQ2l0eUNvcnJlY3Rpb25zLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkNpdHlDb3JyZWN0aW9uQXBwbHkoaXNBdWRpdCA9IGZhbHNlKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCB5b3VyIGFwcHJvdmVkIGNvcnJlY3Rpb25zIGZpbGUNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyUmVzID0gYXdhaXQgZmV0Y2goQ0lUWV9DT1JSRUNUSU9OU19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJUZXh0ID0gYXdhaXQgY29yclJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBQYXJzZSBpbnRvIGEgTWFwIHsgInNvY2lldHk6QXVuZGg6UHVuZSI6ICJTb2NpZXR5LCBBdW5kaCwgUHVuZSIgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJlY3Rpb25NYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBjb3JyVGV4dC5zcGxpdCgvXHI/XG4vKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5pbmNsdWRlcygnfCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbanVuaywgY29ycmVjdF0gPSBsaW5lLnNwbGl0KCd8JykubWFwKHMgPT4gcy50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGp1bmspIGNvcnJlY3Rpb25NYXBbanVua10gPSBjb3JyZWN0Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCB0aGUgbGl2ZSBkYXRhYmFzZSAodXNpbmcgdGhlIEF1dGhlbnRpY2F0ZWQgbG9naWMpDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBsZXQgZGJMaW5lcyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBQcm9jZXNzIGV2ZXJ5IGxpbmUgaW4gdGhlIERCDQogICAgICAgICAgICAgICAgY29uc3QgY2xlYW5lZExpbmVzID0gZGJMaW5lcy5tYXAobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghbGluZS50cmltKCkpIHJldHVybiBsaW5lOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFkZHJlc3MgaXMgaW5kZXggNA0KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkcmVzcyA9IGZpZWxkc1s0XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHJlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFkZHJlc3MgYnkgc3BhY2Ugb3IgdGlsZGUgdG8gaXNvbGF0ZSB0aGUgbGFzdCAiY2h1bmsiDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgd29yZHMgPSBhZGRyZXNzLnRyaW0oKS5zcGxpdCgvW1xzfl0rLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBUSEUgRklYOiBQcmVzZXJ2ZSBjb2xvbnMgZHVyaW5nIGxvb2t1cCAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5vIGxvbmdlciBzdHJpcCBjb2xvbnMgaGVyZSwgc28gb3JpZ2luYWxDaXR5ID0gInNvY2lldHk6QXVuZGg6UHVuZSINCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmlnaW5hbENpdHkgPSB3b3Jkc1t3b3Jkcy5sZW5ndGggLSAxXTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyByYXcgY2h1bmsgKHdpdGggY29sb25zKSBpcyBpbiBvdXIgY29ycmVjdGlvbiBsaXN0DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ycmVjdGlvbk1hcC5oYXNPd25Qcm9wZXJ0eShvcmlnaW5hbENpdHkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcGxhY2VtZW50ID0gY29ycmVjdGlvbk1hcFtvcmlnaW5hbENpdHldOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGVscGVyIHRvIGVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgZm9yIFJlZ2V4DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNjYXBlZEp1bmsgPSBvcmlnaW5hbENpdHkucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xdXFxdL2csICdcXCQmJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09ICIiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0cmlwIHRoZSBqdW5rIHdvcmQgZnJvbSB0aGUgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s0XSA9IGFkZHJlc3MucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZWRKdW5rICsgIiQiKSwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTd2FwIHRoZSBqdW5rICh3aXRoIGNvbG9ucykgd2l0aCB0aGUgY29ycmVjdCBzdHJpbmcgKHdpdGggY29tbWFzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNF0gPSBhZGRyZXNzLnJlcGxhY2UobmV3IFJlZ0V4cChlc2NhcGVkSnVuayArICIkIiksIHJlcGxhY2VtZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDQuIElmIGNoYW5nZXMgb2NjdXJyZWQsIHVwbG9hZCBiYWNrIHRvIERyb3Bib3gNCiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBjbGVhbmVkTGluZXMuam9pbignXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IG5ld0NvbnRlbnQNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTdWNjZXNzISBBcHBsaWVkICR7Y2hhbmdlQ291bnR9IGNvcnJlY3Rpb25zIHRvIHRoZSBkYXRhYmFzZS5cblxuQ29sb25zIHdlcmUgY29ycmVjdGx5IGlkZW50aWZpZWQgYW5kIHJlcGxhY2VkLmApOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gbWF0Y2hpbmcgZW50cmllcyAoaW5jbHVkaW5nIHRob3NlIHdpdGggY29sb25zKSBmb3VuZCB0byBjb3JyZWN0LiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkNvcnJlY3Rpb24gRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDb3VudHJ5IGNvcnJlY3Rpb24gaW4gdGhlIERCIGJhc2VkIG9uIGlucHV0IENvdW50cnlDb3JyZWN0aW9ucy50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5Db3VudHJ5RmllbGRDb3JyZWN0aW9uKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIGNvbnN0IENPVU5UUllfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZ25yMW8yZDRyY2JkYno3NWZ4ZmtiL0NvdW50cnlDb3JyZWN0aW9ucy50eHQ/cmxrZXk9NzRmbHRyeHltOGcwZzg4cWVpZWpqMWJ3eiZkbD0xIjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyUmVzID0gYXdhaXQgZmV0Y2goQ09VTlRSWV9DT1JSRUNUSU9OU19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJUZXh0ID0gYXdhaXQgY29yclJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25MaW5lcyA9IGNvcnJUZXh0LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihsID0+IGwudHJpbSgpICE9PSAiIik7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBsZXQgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgbGV0IG1vdmVDb3VudCA9IDA7DQogICAgICAgICAgICAgICAgbGV0IGdsb2JhbFVwcGVyQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gLS0tIFNURVAgMTogU3VyZ2ljYWwgTW92ZS9DbGVhbiAtLS0NCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbkxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDIpIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q291bnRyeSA9IHBhcnRzWzBdLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldElEcyA9IHBhcnRzLnNsaWNlKDEpOw0KDQogICAgICAgICAgICAgICAgICAgIHRhcmdldElEcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlYXJjaEFuY2hvciA9IGlkLnRvVXBwZXJDYXNlKCkgKyAifCI7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiUm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYlJvd3NbaV0udHJpbSgpLnRvVXBwZXJDYXNlKCkuc3RhcnRzV2l0aChzZWFyY2hBbmNob3IpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBkYlJvd3NbaV0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGZpZWxkcy5sZW5ndGggPCAyMCkgZmllbGRzLnB1c2goIiIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhZGRyID0gZmllbGRzWzRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhblJlZ2V4ID0gbmV3IFJlZ0V4cCh0YXJnZXRDb3VudHJ5LCAnZ2knKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5SZWdleC50ZXN0KGFkZHIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNF0gPSBhZGRyLnJlcGxhY2UoY2xlYW5SZWdleCwgIiIpLnJlcGxhY2UoL1t+LDogXSskLywgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1sxOV0gPSB0YXJnZXRDb3VudHJ5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGJSb3dzW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gU1RFUCAyOiBUaGUgRGVlcC1DbGVhbiBHbG9iYWwgU3dlZXAgLS0tDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYlJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYlJvd3NbaV0udHJpbSgpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGRiUm93c1tpXS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSBoYXZlIDIwIGZpZWxkcyBmb3IgZXZlcnkgcm93DQogICAgICAgICAgICAgICAgICAgIHdoaWxlIChmaWVsZHMubGVuZ3RoIDwgMjApIGZpZWxkcy5wdXNoKCIiKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBUaGUgRklYOiBTdHJpcCBBTEwgaGlkZGVuIGNoYXJhY3RlcnMgdXNpbmcgcmVnZXggXHMrDQogICAgICAgICAgICAgICAgICAgIGxldCByYXdWYWx1ZSA9IGZpZWxkc1sxOV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhblZhbHVlID0gcmF3VmFsdWUucmVwbGFjZSgvW1xyXG5cdF0rL2csICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCB1cHBlclZhbHVlID0gY2xlYW5WYWx1ZS50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmaWVsZCBpc24ndCBlbXB0eSBhbmQgZG9lc24ndCBtYXRjaCB0aGUgY2xlYW4gVXBwZXJjYXNlIHZlcnNpb24NCiAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFuVmFsdWUgIT09ICIiICYmIGNsZWFuVmFsdWUgIT09IHVwcGVyVmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1sxOV0gPSB1cHBlclZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGJSb3dzW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFVwcGVyQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBGSU5BTCBTQVZFIC0tLQ0KICAgICAgICAgICAgICAgIGlmIChtb3ZlQ291bnQgPiAwIHx8IGdsb2JhbFVwcGVyQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJvd3Muam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYERBVEFCQVNFIFNZTkNFRFxuXG4xLiBBZGRyZXNzIENsZWFudXBzOiAke21vdmVDb3VudH1cbjIuIEhpZGRlbi1DaGFyICYgVXBwZXJjYXNlIEZpeGVzOiAke2dsb2JhbFVwcGVyQ291bnR9YCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJTdWNjZXNzOiBEYXRhYmFzZSBpcyAxMDAlIHN0YW5kYXJkaXplZC4gTm8gbWl4ZWQtY2FzZSBvciBoaWRkZW4gY2hhcmFjdGVycyByZW1haW4uIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDaGVja3MgTmFtZXMgb2YgYWxsIGRvbm9ycyBhbmQgcHJlcGFyZXMgbGlzdCBhbmQgc3VnZ2VzdGlvbnMgZm9yIGNvcnJlY3Rpb25zLiBEb3dubG9hZHMgNCB0ZXh0IGZpbGVzLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuRG9ub3JOYW1lQ2hlY2sobW9kZSA9ICdub3JtYWwnKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKHJvdyA9PiByb3cudHJpbSgpICE9PSAiIik7DQoNCiAgICAgICAgICAgICAgICBsZXQgYWxsTmFtZXMgPSBkYlJvd3MubWFwKHJvdyA9PiAocm93LnNwbGl0KCd8JylbMl0gfHwgIiIpLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgbGV0IHVuaXF1ZU5hbWVzID0gWy4uLm5ldyBTZXQoYWxsTmFtZXMpXS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0SW5kaWFuTmFtZSA9IChuYW1lKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghbmFtZSkgcmV0dXJuICIiOw0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKCcoJykpIHJldHVybiBuYW1lOyAvLyBTa2lwIG9yZ3MNCg0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5pbmNsdWRlcygnJicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5zcGxpdCgnJicpLm1hcChuID0+IGZvcm1hdEluZGlhbk5hbWUobi50cmltKCkpKS5qb2luKCcgJiAnKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGxldCBwYXJ0cyA9IG5hbWUuc3BsaXQoL1xzKy8pLmZpbHRlcihwID0+IHAubGVuZ3RoID4gMCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbml0aWFscyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbWFpbk5hbWVzID0gW107DQoNCiAgICAgICAgICAgICAgICAgICAgcGFydHMuZm9yRWFjaChwYXJ0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaXRpYWxzOiAxLTMgY2hhcnMsIG5vIGRvdWJsZSB2b3dlbHMNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0Lmxlbmd0aCA8PSAzICYmICEvW2FlaW91eV17Mix9L2kudGVzdChwYXJ0KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxzLnB1c2gocGFydC50b1VwcGVyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbk5hbWVzLnB1c2gocGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4ubWFpbk5hbWVzLCAuLi5pbml0aWFsc10uam9pbignICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgLy8gQXJyYXlzIGZvciBGaWxlIDMgYW5kIEZpbGUgNA0KICAgICAgICAgICAgICAgIGxldCBhbGxDb21wYXJpc29ucyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0aW9uc09ubHkgPSBbXTsNCg0KICAgICAgICAgICAgICAgIHVuaXF1ZU5hbWVzLmZvckVhY2gob3JpZ2luYWwgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgc3VnZ2VzdGVkID0gZm9ybWF0SW5kaWFuTmFtZShvcmlnaW5hbCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gYCR7b3JpZ2luYWwucGFkRW5kKDQwKX0gfCAke3N1Z2dlc3RlZH1gOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEZpbGUgMyBnZXRzIGV2ZXJ5dGhpbmcNCiAgICAgICAgICAgICAgICAgICAgYWxsQ29tcGFyaXNvbnMucHVzaChsaW5lKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBGaWxlIDQgZ2V0cyBvbmx5IHRoZSBvbmVzIHRoYXQgY2hhbmdlZA0KICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgIT09IHN1Z2dlc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbnNPbmx5LnB1c2gobGluZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRvd25sb2FkVHh0ID0gKGNvbnRlbnQsIGZpbGVOYW1lKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgLy8gVEhFIEJSSURHRTogQ29udmVydCBhcnJheSB0byBzdHJpbmcgYW5kIHN0b3JlIGdsb2JhbGx5DQogICAgICAgICAgICAgICAgd2luZG93LkdMT0JBTF9ET05PUl9OQU1FX0RBVEEgPSBBcnJheS5pc0FycmF5KGNvcnJlY3Rpb25zT25seSkgPyBjb3JyZWN0aW9uc09ubHkuam9pbignXG4nKSA6IGNvcnJlY3Rpb25zT25seTsNCg0KICAgICAgICAgICAgICAgIC8vIFRIRSBFWElUOiBCeXBhc3MgZG93bmxvYWRzIGlmIGluIGF1ZGl0IG1vZGUNCiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2F1ZGl0Jykgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRG9ub3IgTmFtZSBkYXRhIGNhcHR1cmVkLiBTa2lwcGluZyBGaWxlIDQgZG93bmxvYWQuIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBTZXF1ZW5jZSBvZiA0IGZpbGVzDQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoYWxsTmFtZXMuc29ydCgpLmpvaW4oJ1xuJyksICIxLiBDR19BbGxfRG9ub3JfTmFtZXMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQodW5pcXVlTmFtZXMuam9pbignXG4nKSwgIjIuIENHX1VuaXF1ZV9Eb25vcl9OYW1lcy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChhbGxDb21wYXJpc29ucy5qb2luKCdcbicpLCAiMy4gQ0dfTmFtZV9Gb3JtYXRfU3VnZ2VzdGlvbnMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoY29ycmVjdGlvbnNPbmx5LmpvaW4oJ1xuJyksICI0LiBDR19Db3JyZWN0aW9uc19Pbmx5LnR4dCIpOw0KDQogICAgICAgICAgICAgICAgYWxlcnQoYEF1ZGl0IENvbXBsZXRlIVxuXG5VbmlxdWUgTmFtZXM6ICR7dW5pcXVlTmFtZXMubGVuZ3RofVxuUmVjb3JkcyBOZWVkaW5nIENvcnJlY3Rpb246ICR7Y29ycmVjdGlvbnNPbmx5Lmxlbmd0aH1cblxuQ2hlY2sgRmlsZSA0IGZvciB0aGUgYWN0aW9uIGl0ZW1zLmApOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBOYW1lIGNvcnJlY3Rpb24gaW4gdGhlIERCIGJhc2VkIG9uIGlucHV0IE5BTUVfQ09SUkVDVElPTlNfVVJMIE5hbWVDb3JyZWN0aW9ucy50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5Eb25vck5hbWVDb3JyZWN0aW9uKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggdGhlIENvcnJlY3Rpb24gTWFwDQogICAgICAgICAgICAgICAgY29uc3QgY29yclJlcyA9IGF3YWl0IGZldGNoKE5BTUVfQ09SUkVDVElPTlNfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyVGV4dCA9IGF3YWl0IGNvcnJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJMaW5lcyA9IGNvcnJUZXh0LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICAvLyBCdWlsZCBhIGxvb2t1cCBvYmplY3Q6IHsgIk9yaWdpbmFsIE5hbWUiOiAiU3VnZ2VzdGVkIE5hbWUiIH0NCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyZWN0aW9uTWFwID0ge307DQogICAgICAgICAgICAgICAgY29yckxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtvcmlnaW5hbCwgc3VnZ2VzdGVkXSA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAoaXRlbSA9PiBpdGVtLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbCAmJiBzdWdnZXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25NYXBbb3JpZ2luYWxdID0gc3VnZ2VzdGVkOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCB0aGUgRGF0YWJhc2UNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBsZXQgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgbGV0IGNvcnJlY3Rpb25Db3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBTd2VlcCBhbmQgUmVwbGFjZQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGJSb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZGJSb3dzW2ldLnRyaW0oKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGRiUm93c1tpXS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudE5hbWUgPSAoZmllbGRzWzJdIHx8ICIiKS50cmltKCk7IC8vIE5hbWUgaXMgRmllbGQgMg0KDQogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBuYW1lIGV4aXN0cyBpbiBvdXIgY29ycmVjdGlvbiBtYXAgKFBlcmZlY3QgTWF0Y2gpDQogICAgICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0aW9uTWFwLmhhc093blByb3BlcnR5KGN1cnJlbnROYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzJdID0gY29ycmVjdGlvbk1hcFtjdXJyZW50TmFtZV07DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJvd3NbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbkNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBTYXZlIGJhY2sgdG8gRHJvcGJveCBpZiBjaGFuZ2VzIHdlcmUgbWFkZQ0KICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0aW9uQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJvd3Muam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFNVQ0NFU1M6IERhdGFiYXNlIHVwZGF0ZWQuXG5cblRvdGFsIERvbm9yIE5hbWVzIGNvcnJlY3RlZDogJHtjb3JyZWN0aW9uQ291bnR9YCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBtYXRjaGluZyBuYW1lcyBmb3VuZCBmb3IgY29ycmVjdGlvbi4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJOYW1lIENvcnJlY3Rpb24gRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDaGVja3MgQWRkcmVzcyBvZiBhbGwgZG9ub3JzIGFuZCBwcmVwYXJlcyBsaXN0IGFuZCBzdWdnZXN0aW9ucyBmb3IgY29ycmVjdGlvbnMuIERvd25sb2FkcyA0IHRleHQgZmlsZXMuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5BZGRyZXNzQ2hlY2sobW9kZSA9ICdub3JtYWwnKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKHJvdyA9PiByb3cudHJpbSgpICE9PSAiIik7DQoNCiAgICAgICAgICAgICAgICBsZXQgYWxsQWRkcmVzc2VzID0gZGJSb3dzLm1hcChyb3cgPT4gKHJvdy5zcGxpdCgnfCcpWzRdIHx8ICIiKS50cmltKCkpOw0KICAgICAgICAgICAgICAgIGxldCB1bmlxdWVBZGRyZXNzZXMgPSBbLi4ubmV3IFNldChhbGxBZGRyZXNzZXMpXS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0QWRkcmVzcyA9IChhZGRyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghYWRkcikgcmV0dXJuICIiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDEuIEZsYXR0ZW4gbGluZSBicmVha3Mgd2l0aCB+DQogICAgICAgICAgICAgICAgICAgIGxldCBmbGF0dGVuZWQgPSBhZGRyLnJlcGxhY2UoL1tcclxuXSsvZywgJyB+ICcpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDIuIFNwbGl0IGludG8gd29yZHMNCiAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRzID0gZmxhdHRlbmVkLnNwbGl0KC9ccysvKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm1hdHRlZFdvcmRzID0gd29yZHMubWFwKHdvcmQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3b3JkKSByZXR1cm4gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNQRUNJQUwgVFdFQUs6IFdvcmRzIHN0YXJ0aW5nIHdpdGggJA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQuc3RhcnRzV2l0aCgnJCcpICYmIHdvcmQubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYWluUGFydCA9IHdvcmQuc2xpY2UoMSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICckJyArIG1haW5QYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbWFpblBhcnQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUnVsZSAxOiBBbHdheXMgVVBQRVJDQVNFIGZvciAzIGNoYXJzIG9yIGxlc3MNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkLmxlbmd0aCA8PSAzKSByZXR1cm4gd29yZC50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBSdWxlIDI6IFNlbnRlbmNlIENhc2UgZm9yIGV2ZXJ5dGhpbmcgZWxzZSAoaW5jbHVkaW5nIEFwYXJ0bWVudDoyNykNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkV29yZHMuam9pbignICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgbGV0IGFsbENvbXBhcmlzb25zID0gW107DQogICAgICAgICAgICAgICAgbGV0IGNvcnJlY3Rpb25zT25seSA9IFtdOw0KDQogICAgICAgICAgICAgICAgdW5pcXVlQWRkcmVzc2VzLmZvckVhY2gob3JpZ2luYWwgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgc3VnZ2VzdGVkID0gZm9ybWF0QWRkcmVzcyhvcmlnaW5hbCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBkaXNwbGF5TGluZSA9IGAke29yaWdpbmFsLnBhZEVuZCgxMjApfSB8ICR7c3VnZ2VzdGVkfWA7DQoNCiAgICAgICAgICAgICAgICAgICAgYWxsQ29tcGFyaXNvbnMucHVzaChkaXNwbGF5TGluZSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbCAhPT0gc3VnZ2VzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uc09ubHkucHVzaChkaXNwbGF5TGluZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRvd25sb2FkVHh0ID0gKGNvbnRlbnQsIGZpbGVOYW1lKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgLy8gVEhFIEJSSURHRTogVXNlIHRoZSBjb3JyZWN0IHZhcmlhYmxlIG5hbWUgd2UganVzdCBpZGVudGlmaWVkDQogICAgICAgICAgICAgICAgd2luZG93LkdMT0JBTF9BRERSRVNTX0NPUlJFQ1RJT05fREFUQSA9IEFycmF5LmlzQXJyYXkoY29ycmVjdGlvbnNPbmx5KSA/IGNvcnJlY3Rpb25zT25seS5qb2luKCdcbicpIDogY29ycmVjdGlvbnNPbmx5Ow0KDQogICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdhdWRpdCcpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFkZHJlc3MgZGF0YSBjYXB0dXJlZCBzdWNjZXNzZnVsbHkgdmlhIGNvcnJlY3Rpb25zT25seS4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgLy8gRmlsZSBTZXF1ZW5jZQ0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGFsbEFkZHJlc3Nlcy5zb3J0KCkuam9pbignXG4nKSwgIjEuIENHX0FsbF9BZGRyZXNzZXMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQodW5pcXVlQWRkcmVzc2VzLmpvaW4oJ1xuJyksICIyLiBDR19VbmlxdWVfQWRkcmVzc2VzLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGFsbENvbXBhcmlzb25zLmpvaW4oJ1xuJyksICIzLiBDR19BZGRyZXNzX0Zvcm1hdF9TdWdnZXN0aW9ucy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChjb3JyZWN0aW9uc09ubHkuam9pbignXG4nKSwgIjQuIENHX0FkZHJlc3NfQ29ycmVjdGlvbnNfT25seS50eHQiKTsNCg0KICAgICAgICAgICAgICAgIGFsZXJ0KGBBdWRpdCBDb21wbGV0ZSFcblxuUmV2aWV3IEZpbGUgNCBmb3IgdGhlICR7Y29ycmVjdGlvbnNPbmx5Lmxlbmd0aH0gaXRlbXMgbmVlZGluZyBjaGFuZ2VzLmApOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBBRERSRVNTIGNvcnJlY3Rpb24gaW4gdGhlIERCIGJhc2VkIG9uIGlucHV0IEFkZHJlc3NDb3JyZWN0aW9ucy50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBHbG9iYWwgQ29uc3RhbnQgZm9yIEFkZHJlc3MgQ29ycmVjdGlvbnMNCiAgICAgICAgY29uc3QgQUREUkVTU19DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9kY2w3djYwcWJ1aHV1Z3MxZjdtN3AvQWRkcmVzc0NvcnJlY3Rpb25zLnR4dD9ybGtleT1qYnd3NGxmZ2Q5MHJqa3Qxa3NzbDE2bDhkJmRsPTEiOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkFkZHJlc3NDb3JyZWN0aW9uKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggdGhlIENvcnJlY3Rpb24gTWFwIGZyb20gRHJvcGJveA0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJSZXMgPSBhd2FpdCBmZXRjaChBRERSRVNTX0NPUlJFQ1RJT05TX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclRleHQgPSBhd2FpdCBjb3JyUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyTGluZXMgPSBjb3JyVGV4dC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobGluZSA9PiBsaW5lLmluY2x1ZGVzKCd8JykpOw0KDQogICAgICAgICAgICAgICAgLy8gQnVpbGQgbG9va3VwOiB7ICJPcmlnaW5hbCBBZGRyZXNzIjogIlN1Z2dlc3RlZCBBZGRyZXNzIiB9DQogICAgICAgICAgICAgICAgY29uc3QgYWRkcmVzc01hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGNvcnJMaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHBhcnRzWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3RlZCA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbCAmJiBzdWdnZXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzTWFwW29yaWdpbmFsXSA9IHN1Z2dlc3RlZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmV0Y2ggdGhlIE1haW4gRGF0YWJhc2UNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBsZXQgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgbGV0IHVwZGF0ZUNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFN3ZWVwIERhdGFiYXNlIGFuZCBBcHBseSBDb3JyZWN0aW9ucw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGJSb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZGJSb3dzW2ldLnRyaW0oKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGRiUm93c1tpXS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudEFkZHJlc3MgPSAoZmllbGRzWzRdIHx8ICIiKS50cmltKCk7IC8vIEFkZHJlc3MgaXMgRmllbGQgNA0KDQogICAgICAgICAgICAgICAgICAgIC8vIFBlcmZlY3QgTWF0Y2ggQ2hlY2sNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHJlc3NNYXAuaGFzT3duUHJvcGVydHkoY3VycmVudEFkZHJlc3MpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNF0gPSBhZGRyZXNzTWFwW2N1cnJlbnRBZGRyZXNzXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRiUm93c1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gU2F2ZSB0byBEcm9wYm94IGlmIHVwZGF0ZXMgd2VyZSBmb3VuZA0KICAgICAgICAgICAgICAgIGlmICh1cGRhdGVDb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGRiUm93cy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBhbGVydChgU1VDQ0VTUzogRGF0YWJhc2UgdXBkYXRlZC5cblxuVG90YWwgQWRkcmVzc2VzIGNvcnJlY3RlZDogJHt1cGRhdGVDb3VudH1gKTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIG1hdGNoaW5nIGFkZHJlc3NlcyBmb3VuZCB0byBjb3JyZWN0LiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkFkZHJlc3MgQ29ycmVjdGlvbiBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFBBTkVMIFNIT1cgQU5EIEhJREUgdG9nZ2xlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b2dnbGVBZG1pblRhYmxlKCkgew0KICAgICAgICAgICAgaW5pdENvdW50cnlEcm9wZG93bigpOw0KICAgICAgICAgICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRtaW4tcGFuZWwtY29udGFpbmVyJyk7DQogICAgICAgICAgICBjb25zdCBpc09wZW5pbmcgPSAocGFuZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKTsNCiAgICAgICAgICAgIHBhbmVsLnN0eWxlLmRpc3BsYXkgPSBpc09wZW5pbmcgPyAnYmxvY2snIDogJ25vbmUnOw0KDQogICAgICAgICAgICBpZiAoaXNPcGVuaW5nKSB7DQogICAgICAgICAgICAgICAgbG9hZEFkbWluU25hcHMoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENvdW50cnkgU2VsZWN0aW9uIGZvciBMYWJlbCBDcmVhdGlvbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gMS4gUG9wdWxhdGUgRHJvcGRvd24gaW1tZWRpYXRlbHkNCiAgICAgICAgZnVuY3Rpb24gaW5pdENvdW50cnlEcm9wZG93bigpIHsNCiAgICAgICAgICAgIGNvbnN0IGNvdW50cmllcyA9IFsiSU5ESUEiLCAiVVNBIiwgIlVBRSIsICJVSyIsICJTSU5HQVBPUkUiLCAiQVVTVFJBTElBIiwgIkNBTkFEQSIsICJVTklURUQgQVJBQiBFTUlSQVRFUyIsICJNQUxBWVNJQSIsICJPTUFOIiwgIktVV0FJVCJdOw0KICAgICAgICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWNvdW50cnktZmlsdGVyJyk7DQogICAgICAgICAgICBzZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+QWxsIENvdW50cmllczwvb3B0aW9uPic7DQogICAgICAgICAgICBjb3VudHJpZXMuZm9yRWFjaChjID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gYzsNCiAgICAgICAgICAgICAgICBvcHQudGV4dENvbnRlbnQgPSBjOw0KICAgICAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBQREYgR2VuZXJhdGlvbiBmb3IgQWxsIFVuaXF1ZSBEb25vcnMgTGFiZWxzLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gMi4gVGhlIFBERiBHZW5lcmF0aW9uIExvZ2ljDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQWRkcmVzc0xhYmVscygpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHsganNQREYgfSA9IHdpbmRvdy5qc3BkZjsNCiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENvdW50cnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtY291bnRyeS1maWx0ZXInKS52YWx1ZTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBSZXZlcnNlIHRvIGdldCBMQVRFU1QgcmVjb3JkcyBmaXJzdA0KICAgICAgICAgICAgICAgIGxldCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKHJvdyA9PiByb3cudHJpbSgpICE9PSAiIikucmV2ZXJzZSgpOw0KDQogICAgICAgICAgICAgICAgbGV0IGxhYmVsc1RvQ3JlYXRlID0gW107DQogICAgICAgICAgICAgICAgbGV0IHByb2Nlc3NlZFBob25lcyA9IG5ldyBTZXQoKTsNCg0KICAgICAgICAgICAgICAgIC8vIExJTUlUIFJFTU9WRUQ6IFByb2Nlc3NpbmcgdGhlIGVudGlyZSBkYXRhYmFzZQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IHJvdyBvZiBkYlJvd3MpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGYgPSByb3cuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHBob25lID0gKGZbM10gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWUgPSAoZlsyXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkciA9IChmWzRdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBpc0NhbmNlbGxlZCA9IChmWzEzXSB8fCAiIikudG9VcHBlckNhc2UoKSA9PT0gIllFUyI7DQogICAgICAgICAgICAgICAgICAgIGxldCBjb3VudHJ5ID0gKGZbMTldIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNDYW5jZWxsZWQgfHwgIW5hbWUgfHwgIWFkZHIpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRDb3VudHJ5ICE9PSAiQUxMIiAmJiBjb3VudHJ5ICE9PSBzZWxlY3RlZENvdW50cnkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGhvbmUgJiYgcHJvY2Vzc2VkUGhvbmVzLmhhcyhwaG9uZSkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGxhYmVsc1RvQ3JlYXRlLnB1c2goZik7DQogICAgICAgICAgICAgICAgICAgIGlmIChwaG9uZSkgcHJvY2Vzc2VkUGhvbmVzLmFkZChwaG9uZSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGxhYmVsc1RvQ3JlYXRlLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gcmVjb3JkcyBmb3VuZCBmb3IgdGhlIHNlbGVjdGlvbi4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsV2lkdGggPSAxMDU7DQogICAgICAgICAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSA3NC4yNTsNCg0KICAgICAgICAgICAgICAgIGxhYmVsc1RvQ3JlYXRlLmZvckVhY2goKGYsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IDAgJiYgaW5kZXggJSA4ID09PSAwKSBkb2MuYWRkUGFnZSgpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcyA9IGluZGV4ICUgODsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IChwb3MgJSAyKSAqIGxhYmVsV2lkdGg7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKHBvcyAvIDIpICogbGFiZWxIZWlnaHQ7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ3V0dGluZyBndWlkZXMNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldERyYXdDb2xvcigyMDApOw0KICAgICAgICAgICAgICAgICAgICBkb2MucmVjdCh4LCB5LCBsYWJlbFdpZHRoLCBsYWJlbEhlaWdodCk7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clkgPSB5ICsgODsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFkWCA9IHggKyAxMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHRQYWRYID0geCArIGxhYmVsV2lkdGggLSAxMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSBsYWJlbFdpZHRoIC0gMjA7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gUkVGRVJFTkNFIChSaWdodCBBbGlnbmVkKQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDgpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgUmVmIDogJHtmWzBdIHx8ICIifWAsIHJpZ2h0UGFkWCwgY3VyWSwgeyBhbGlnbjogInJpZ2h0IiB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9IDY7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMi4gTkFNRSAoMTRwdCBCb2xkLCBXcmFwcGVkKQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDE0KTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZ1bGxOYW1lID0gYFNtdC5TaHJpLiAke2ZbMl19YDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHdyYXBwZWROYW1lID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShmdWxsTmFtZSwgYXZhaWxhYmxlV2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCh3cmFwcGVkTmFtZSwgcGFkWCwgY3VyWSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSAod3JhcHBlZE5hbWUubGVuZ3RoICogNikgKyAyOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDMuIEFERFJFU1MgJiBDSVRZIEVYVFJBQ1RJT04NCiAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuRnVsbEFkZHIgPSAoZls0XSB8fCAiIikucmVwbGFjZSgvfi9nLCAnICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHJXb3JkcyA9IGNsZWFuRnVsbEFkZHIuc3BsaXQoL1xzKy8pOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2l0eSA9IGFkZHJXb3Jkcy5sZW5ndGggPiAwID8gYWRkcldvcmRzLnBvcCgpIDogIiI7DQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRyQm9keSA9IGFkZHJXb3Jkcy5qb2luKCIgIik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNC4gQUREUkVTUyBCT0RZICgxMXB0IE5vcm1hbCwgV3JhcHBlZCkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHdyYXBwZWRBZGRyID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShhZGRyQm9keSwgYXZhaWxhYmxlV2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCh3cmFwcGVkQWRkciwgcGFkWCwgY3VyWSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSAod3JhcHBlZEFkZHIubGVuZ3RoICogNSkgKyAxOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDUuIENJVFkgLSBQSU5DT0RFICgxMXB0IEJvbGQpDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgJHtjaXR5LnRvVXBwZXJDYXNlKCl9IC0gJHsoZlsxNV0gfHwgIiIpLnRyaW0oKX1gLCBwYWRYLCBjdXJZKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA2LiBDT1VOVFJZICgxMXB0IE5vcm1hbCkNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSA2Ow0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCgoZlsxOV0gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpLCBwYWRYLCBjdXJZKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA3LiBQSE9ORSAoMTFwdCBCb2xkKQ0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9IDk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgUGhvbmUgOiAkeyhmWzNdIHx8ICIiKS50cmltKCl9YCwgcGFkWCwgY3VyWSk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyBEWU5BTUlDIEZJTEVOQU1FDQogICAgICAgICAgICAgICAgY29uc3QgY291bnRyeU5hbWUgPSBzZWxlY3RlZENvdW50cnkgPT09ICJBTEwiID8gIkFsbCBDb3VudHJpZXMiIDogc2VsZWN0ZWRDb3VudHJ5Ow0KICAgICAgICAgICAgICAgIGRvYy5zYXZlKGBNTVBUIERvbm9yIEFkZHJlc3MgTGFiZWxzLSAke2NvdW50cnlOYW1lfS5wZGZgKTsNCg0KICAgICAgICAgICAgICAgIGFsZXJ0KGBTdWNjZXNzISBHZW5lcmF0ZWQgJHtsYWJlbHNUb0NyZWF0ZS5sZW5ndGh9IHVuaXF1ZSBsYWJlbHMgZm9yICR7Y291bnRyeU5hbWV9LmApOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBGVUxMIEZsZWdlZCBBdWRpdCBvZiBUaGUgRGF0YWJhc2UNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkRhdGFiYXNlQXVkaXRQREYoKSB7DQogICAgICAgICAgICBsZXQgc3RhdHMgPSB7DQogICAgICAgICAgICAgICAgdG90YWw6IDAsIGNhbmNlbGxlZDogMCwgbm9OYW1lOiAwLCBub1Bob25lOiAwLCBub0FkZHI6IDAsDQogICAgICAgICAgICAgICAgbm9QaW46IDAsIG5vRW1haWw6IDAsIG5vUGFuOiAwLCBub1JlZjogMCwgbm9Db21tOiAwLA0KICAgICAgICAgICAgICAgIG5vQW10OiAwLCBub1ByYXNhZGFtOiAwLCBub1ByaW50OiAwLCBwZW5kaW5nQ29uc2VudDogMA0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgY29uc3QgY2xlYW5TdHIgPSAoc3RyKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFzdHIpIHJldHVybiAiIjsNCiAgICAgICAgICAgICAgICByZXR1cm4gc3RyLnRvU3RyaW5nKCkubm9ybWFsaXplKCJORkQiKS5yZXBsYWNlKC9bXlx4MjAtXHg3RV0vZywgIiIpOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgLy8gMS4gREFUQSBQUk9DRVNTSU5HIChMb2NrZWQgQ29yZSBMb2dpYyAtIElnbm9yZXMgQ0FOQ0VMTEVEKQ0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZbMTNdID09PSAiWUVTIikgc3RhdHMuY2FuY2VsbGVkKys7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3RhdHMudG90YWwrKzsNCiAgICAgICAgICAgICAgICBjb25zdCBhbXQgPSBwYXJzZUZsb2F0KGZbOV0pIHx8IDA7DQogICAgICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IChmWzEyXSB8fCAiIikudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBwaW4gPSAoZlsxNV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdQaG9uZSA9IChmWzNdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgY2xlYW5QaG9uZSA9IHJhd1Bob25lLnJlcGxhY2UoL1xEL2csICcnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpc1BsYWNlaG9sZGVyID0gY2xlYW5QaG9uZS5zdGFydHNXaXRoKCI4ODg4OCIpIHx8IGNsZWFuUGhvbmUuc3RhcnRzV2l0aCgiOTk5OTkiKTsNCg0KICAgICAgICAgICAgICAgIGlmICghZlsyXSB8fCBmWzJdLnRyaW0oKSA9PT0gIiIpIHN0YXRzLm5vTmFtZSsrOw0KICAgICAgICAgICAgICAgIGlmICghcmF3UGhvbmUgfHwgaXNQbGFjZWhvbGRlcikgc3RhdHMubm9QaG9uZSsrOw0KICAgICAgICAgICAgICAgIGlmICghZls0XSB8fCBmWzRdLnRyaW0oKSA9PT0gIiIgfHwgZls0XSA9PT0gIn4iKSBzdGF0cy5ub0FkZHIrKzsNCiAgICAgICAgICAgICAgICBpZiAoIXBpbiB8fCBwaW4gPT09ICIwMDAwMDAiIHx8IHBpbi5sZW5ndGggIT09IDYgfHwgIS9eWzEtOV1bMC05XXs1fSQvLnRlc3QocGluKSkgc3RhdHMubm9QaW4rKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbNV0gfHwgZls1XS50cmltKCkgPT09ICIiKSBzdGF0cy5ub0VtYWlsKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzZdIHx8IGZbNl0udHJpbSgpID09PSAiIikgc3RhdHMubm9QYW4rKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbMTBdIHx8IGZbMTBdLnRyaW0oKSA9PT0gIiIpIHN0YXRzLm5vUmVmKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzE0XSB8fCBmWzE0XS50cmltKCkgPT09ICIiIHx8IGZbMTRdID09PSAifiIpIHN0YXRzLm5vQ29tbSsrOw0KICAgICAgICAgICAgICAgIGlmIChhbXQgPCAxKSBzdGF0cy5ub0FtdCsrOw0KICAgICAgICAgICAgICAgIGlmIChmWzE3XSA9PT0gIk5PIikgc3RhdHMubm9QcmFzYWRhbSsrOw0KICAgICAgICAgICAgICAgIGlmIChmWzE2XSA9PT0gIk5PIikgc3RhdHMubm9QcmludCsrOw0KICAgICAgICAgICAgICAgIGlmIChhbXQgPj0gMTAwMDAgJiYgdG93YXJkcy5pbmNsdWRlcygiQ09SUFVTIikgJiYgZlsxOF0gPT09ICJOTyIpIHN0YXRzLnBlbmRpbmdDb25zZW50Kys7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOw0KICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKHsNCiAgICAgICAgICAgICAgICBwdXRPbmx5VXNlZEZvbnRzOiB0cnVlLA0KICAgICAgICAgICAgICAgIGNvbXByZXNzOiB0cnVlDQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gSWYgdGhlIGVuY3J5cHRpb24gcGx1Z2luIGlzIGxvYWRlZCwgdGhpcyB3aWxsIG5vdyB3b3JrDQogICAgICAgICAgICBpZiAodHlwZW9mIGRvYy5zZXRFbmNyeXB0aW9uID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgZG9jLnNldEVuY3J5cHRpb24oew0KICAgICAgICAgICAgICAgICAgICB1c2VyUGFzc3dvcmQ6ICJNTVBUIiwNCiAgICAgICAgICAgICAgICAgICAgb3duZXJQYXNzd29yZDogIk1NUFQiLA0KICAgICAgICAgICAgICAgICAgICB1c2VyUGVybWlzc2lvbnM6IFsicHJpbnQiLCAibW9kaWZ5IiwgImNvcHkiLCAiYW5ub3QtZm9ybXMiXQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFbmNyeXB0aW9uIHBsdWdpbiBtaXNzaW5nIGZyb20gdGhlIGxvYWRlZCBqc1BERiBsaWJyYXJ5LiIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB0b3RhbFBhZ2VzRXhwID0gInt0b3RhbF9wYWdlc19jb3VudF9zdHJpbmd9IjsNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gbm93LnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tSU4nLCB7IGRheTogJzItZGlnaXQnLCBtb250aDogJ3Nob3J0JywgeWVhcjogJ251bWVyaWMnIH0pOw0KICAgICAgICAgICAgY29uc3QgdGltZVN0YW1wID0gbm93LnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpLnNsaWNlKDAsIDE2KTsNCiAgICAgICAgICAgIGxldCBwTWFwID0geyBzdW1tYXJ5OiAwLCBwYW46IDAsIGNvdW50cnk6IDAsIHBob25lOiAwLCBwaW5jb2RlOiAwLCBkb2xsYXI6IDAsIGNpdHk6IDAsIGRvbm9yTmFtZXM6IDAsIGFkZHJDb3JyOiAwIH07DQoNCiAgICAgICAgICAgIGNvbnN0IGRyYXdCcmFuZGluZyA9IChwYWdlVGl0bGUsIGlzSW5kZXggPSBmYWxzZSkgPT4gew0KICAgICAgICAgICAgICAgIC8vIFNMQVRFIEJMVUUgSEVBREVSDQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcig3MCwgMTMwLCAxODApOyBkb2MucmVjdCgwLCAwLCAyMTAsIDQwLCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyBkb2Muc2V0Rm9udFNpemUoMjIpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKHBhZ2VUaXRsZSksIDEwNSwgMTgsIHsgYWxpZ246ICJjZW50ZXIiIH0pOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIoYE1NUFQgSW50ZXJuYWwgQXVkaXQgfCBHZW5lcmF0ZWQ6ICR7ZGF0ZVN0cn0gJHtub3cudG9Mb2NhbGVUaW1lU3RyaW5nKCl9YCksIDEwNSwgMjgsIHsgYWxpZ246ICJjZW50ZXIiIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gQ09PTCBHUkVZIEZPT1RFUg0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoMTQ5LCAxNjUsIDE2Nik7IGRvYy5yZWN0KDAsIDI4MiwgMjEwLCAxNSwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAyNTUpOyBkb2Muc2V0Rm9udFNpemUoOC41KTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dCgiSU5URVJOQUwgU0VDVVJJVFkgRE9DVU1FTlQgLSBNTVBUIEFETUlOSVNUUkFUSU9OIiwgMTUsIDI5Mik7DQoNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAwKTsgLy8gWWVsbG93IGZvciB2aXNpYmlsaXR5DQogICAgICAgICAgICAgICAgZG9jLnRleHQoZG9jLmludGVybmFsLmdldEN1cnJlbnRQYWdlSW5mbygpLnBhZ2VOdW1iZXIgKyAiIC8gIiArIHRvdGFsUGFnZXNFeHAsIDIwMCwgMjkyLCB7IGFsaWduOiAicmlnaHQiIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFpc0luZGV4KSB7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJCYWNrIHRvIEluZGV4IiwgMTMwLCAyOTIsIHsgYWxpZ246ICJjZW50ZXIiIH0pOw0KICAgICAgICAgICAgICAgICAgICBkb2MubGluaygxMjAsIDI4NSwgMjAsIDEwLCB7IHBhZ2VOdW1iZXI6IDEgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgLy8gUEFHRSAxOiBJTkRFWA0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJBVURJVCBOQVZJR0FUSU9OIElOREVYIiwgdHJ1ZSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgMjogU1VNTUFSWQ0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5zdW1tYXJ5ID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiRVhFQ1VUSVZFIEFVRElUIFNVTU1BUlkiKTsNCiAgICAgICAgICAgIGxldCBzeSA9IDU1Ow0KICAgICAgICAgICAgY29uc3QgZGF0YVJvd3MgPSBbDQogICAgICAgICAgICAgICAgWyJUb3RhbCBBY3RpdmUgUmVjZWlwdHMgKEV4Y2wuIENhbmNlbGxlZCkiLCBzdGF0cy50b3RhbCwgIiMyYzNlNTAiXSwNCiAgICAgICAgICAgICAgICBbIlRvdGFsIENhbmNlbGxlZCAoSWdub3JlZCkiLCBzdGF0cy5jYW5jZWxsZWQsICIjZTc0YzNjIl0sDQogICAgICAgICAgICAgICAgWyJObyBOYW1lIEZvdW5kIiwgc3RhdHMubm9OYW1lLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gVGVsZXBob25lIC8gUGxhY2Vob2xkZXIiLCBzdGF0cy5ub1Bob25lLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gQWRkcmVzcyAvIEVtcHR5Iiwgc3RhdHMubm9BZGRyLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiSW52YWxpZCBQaW5jb2RlIiwgc3RhdHMubm9QaW4sICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBFbWFpbCBJRCIsIHN0YXRzLm5vRW1haWwsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBQQU4gTnVtYmVyIiwgc3RhdHMubm9QYW4sICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBSZWZlcmVuY2UgRGV0YWlscyIsIHN0YXRzLm5vUmVmLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gQ29tbWVudHMgUHJvdmlkZWQiLCBzdGF0cy5ub0NvbW0sICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBBbW91bnQgRm91bmQiLCBzdGF0cy5ub0FtdCwgIiNjMDM5MmIiXSwNCiAgICAgICAgICAgICAgICBbIlByYXNhZGFtIFN0YXR1cyAoTk8pIiwgc3RhdHMubm9QcmFzYWRhbSwgIiNkMzU0MDAiXSwNCiAgICAgICAgICAgICAgICBbIk5vdCBQcmludGVkIChOTykiLCBzdGF0cy5ub1ByaW50LCAiI2QzNTQwMCJdLA0KICAgICAgICAgICAgICAgIFsiUGVuZGluZyBDb25zZW50IExldHRlcnMqIiwgc3RhdHMucGVuZGluZ0NvbnNlbnQsICIjZmYwMDAwIl0NCiAgICAgICAgICAgIF07DQogICAgICAgICAgICBkYXRhUm93cy5mb3JFYWNoKChyLCBpKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGkgJSAyID09PSAwKSB7IGRvYy5zZXRGaWxsQ29sb3IoMjQ1KTsgZG9jLnJlY3QoMTUsIHN5IC0gOCwgMTgwLCAxMiwgJ0YnKTsgfQ0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoclsyXSk7IGRvYy5zZXRGb250U2l6ZSgxMSk7IGRvYy50ZXh0KGNsZWFuU3RyKHJbMF0pLCAyNSwgc3kpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KHJbMV0udG9TdHJpbmcoKSwgMTg1LCBzeSwgeyBhbGlnbjogInJpZ2h0IiB9KTsgc3kgKz0gMTI7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSAzOiBQQU4NCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAucGFuID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiRGVmZWN0aXZlIFBBTiBOdW1iZXJzIik7DQogICAgICAgICAgICBsZXQgcG55ID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMTU1LCA4OSwgMTgyKTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiSW52YWxpZCBQQU4gVmFsdWUiLCAxMDAsIDU5KTsNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7IGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhbiA9IChmWzZdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgaWYgKHBhbiAmJiAhL15bQS1aXXs1fVswLTldezR9W0EtWl17MX0kLy50ZXN0KHBhbikpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBueSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIlBBTiAoQ29udC4pIik7IHBueSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgcG55KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQocGFuLCAxMDAsIHBueSk7IHBueSArPSA5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDQ6IENPVU5UUklFUyAoVXNpbmcgUmV2ZXJzZSBTZWFyY2gpDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmNvdW50cnkgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJDb3VudHJpZXMgaW4gQWRkcmVzcyBGaWVsZCIpOw0KICAgICAgICAgICAgbGV0IGN5WSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDM5LCAxNzQsIDk2KTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiQWRkcmVzcyBFbnRyeSIsIDgwLCA1OSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGNvdW50cmllcyA9IFsiVVNBIiwgIlVLIiwgIlVOSVRFRCBLSU5HRE9NIiwgIlVBRSIsICJDQU5BREEiLCAiQVVTVFJBTElBIiwgIlNJTkdBUE9SRSJdOw0KDQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgIC8vIEZpZWxkIDEzIGlzIENhbmNlbGxlZC4gSmFuIDI2IGluc3RydWN0aW9uOiBJZ25vcmUgQ0FOQ0VMTEVEIHJlY2VpcHRzLg0KICAgICAgICAgICAgICAgIGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYWRyID0gKGZbNF0gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGlmICghYWRyKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyBSRVZFUlNFIFNFQVJDSCBMT0dJQzoNCiAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSBjb21tb24gZGVsaW1pdGVycyBhbmQgbG9vayBhdCB0aGUgdmVyeSBsYXN0IHNlZ21lbnQNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGFkci5zcGxpdCgvW1xzLF0rLyk7DQogICAgICAgICAgICAgICAgY29uc3QgbGFzdFNlZ21lbnQgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsgLy8gR2V0IHRoZSBsYXN0IHdvcmQNCiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRMYXN0U2VnbWVudCA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0c1twYXJ0cy5sZW5ndGggLSAyXSA6ICIiOw0KDQogICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGxhc3Qgc2VnbWVudCAob3IgbGFzdCB0d28gZm9yICJVTklURUQgS0lOR0RPTSIpIG1hdGNoZXMgb3VyIGxpc3QNCiAgICAgICAgICAgICAgICBjb25zdCBpc0ZvcmVpZ24gPSBjb3VudHJpZXMuc29tZShjID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09ICJVTklURUQgS0lOR0RPTSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhZHIuZW5kc1dpdGgoIlVOSVRFRCBLSU5HRE9NIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RTZWdtZW50ID09PSBjOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKGlzRm9yZWlnbikgew0KICAgICAgICAgICAgICAgICAgICBpZiAoY3lZID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiQ291bnRyaWVzIChDb250LikiKTsgY3lZID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCBjeVkpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoOSk7DQogICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXlpbmcgb25seSB0aGUgZW5kIG9mIHRoZSBhZGRyZXNzIHRvIGhpZ2hsaWdodCB0aGUgY291bnRyeQ0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihmWzRdLnNsaWNlKC01NSkpLCA4MCwgY3lZKTsNCiAgICAgICAgICAgICAgICAgICAgY3lZICs9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCg0KICAgICAgICAgICAgLy8gUEFHRSA1OiBQSE9ORVMNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAucGhvbmUgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJJbmNvcnJlY3QgVGVsZXBob25lIE51bWJlcnMiKTsNCiAgICAgICAgICAgIGxldCB0eSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDUyLCA3MywgOTQpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJJbnZhbGlkIFBob25lIFZhbHVlIiwgMTAwLCA1OSk7DQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOyBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBwaCA9IChmWzNdIHx8ICIiKS50cmltKCk7IGNvbnN0IGNwID0gcGgucmVwbGFjZSgvXEQvZywgJycpOw0KICAgICAgICAgICAgICAgIGlmIChwaCAmJiAhY3Auc3RhcnRzV2l0aCgiODg4ODgiKSAmJiAhY3Auc3RhcnRzV2l0aCgiOTk5OTkiKSAmJiBjcC5sZW5ndGggIT09IDEwKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIlBob25lcyAoQ29udC4pIik7IHR5ID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCB0eSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KHBoLCAxMDAsIHR5KTsgdHkgKz0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSA2OiBQSU5DT0RFDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLnBpbmNvZGUgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJJbnZhbGlkIFBJTkNPREUgUmVjb3JkcyIpOw0KICAgICAgICAgICAgbGV0IHBjeSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDI0MywgMTU2LCAxOCk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkludmFsaWQgUGluY29kZSIsIDEwMCwgNTkpOw0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKChmWzE5XSB8fCAiSU5ESUEiKS50cmltKCkudG9VcHBlckNhc2UoKSAhPT0gIklORElBIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBpbiA9IChmWzE1XSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGlmICghZls0XSB8fCBmWzRdID09PSAifiIgfHwgIWZbMl0pIHJldHVybjsNCiAgICAgICAgICAgICAgICBpZiAoIS9eWzEtOV1bMC05XXs1fSQvLnRlc3QocGluKSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocGN5ID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiUGluY29kZSAoQ29udC4pIik7IHBjeSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgcGN5KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQocGluIHx8ICJbRU1QVFldIiwgMTAwLCBwY3kpOyBwY3kgKz0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSA3OiBET0xMQVIgU0lHTiAoJCkNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuZG9sbGFyID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiSW52YWxpZCBOYW1lcyBvciBBZGRyZXNzICgkKSIpOw0KICAgICAgICAgICAgbGV0IGR5ID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMjMxLCA3NiwgNjApOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJEZXRhaWxzIiwgNzAsIDU5KTsNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7IGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGlmICgoKGZbMl0gfHwgIiIpICsgKGZbNF0gfHwgIiIpKS5pbmNsdWRlcygiJCIpKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBbYE5hbWU6ICR7ZlsyXX1gLCBgQWRkcjogJHtmWzRdfWBdOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdFR4dCA9IGRvYy5zcGxpdFRleHRUb1NpemUoaW5mby5qb2luKCJcbiIpLCAxMTUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZHkgKyAxNSA+IDI3NSkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIkRvbGxhciBDaGVjayAoQ29udC4pIik7IGR5ID0gNjU7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCBkeSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy5zZXRGb250U2l6ZSg5KTsgZG9jLnRleHQoc3BsaXRUeHQsIDcwLCBkeSk7IGR5ICs9IDE1Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDg6IENJVFkgQ09SUkVDVElPTg0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5jaXR5ID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiQ2l0eSBOYW1lIFZhbGlkYXRpb24iKTsNCiAgICAgICAgICAgIGxldCBjdHlZID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMTQyLCA2OCwgMTczKTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2MudGV4dCgiT3JpZ2luYWwiLCAyNSwgNTkpOyBkb2MudGV4dCgiU3VnZ2VzdGVkIiwgMTEwLCA1OSk7DQogICAgICAgICAgICBsZXQgY2l0eVJhdyA9IHdpbmRvdy5HTE9CQUxfQ0lUWV9BVURJVF9EQVRBIHx8ICIiOw0KICAgICAgICAgICAgaWYgKGNpdHlSYXcpIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcoY2l0eVJhdykuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocHRzLmxlbmd0aCA+PSAyICYmICFsaW5lLmluY2x1ZGVzKCdPUklHSU5BTCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R5WSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIkNpdHkgKENvbnQuKSIpOyBjdHlZID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSg5KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihwdHNbMF0udHJpbSgpKSwgMjUsIGN0eVkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQoY2xlYW5TdHIocHRzWzFdLnRyaW0oKSksIDExMCwgY3R5WSk7IGN0eVkgKz0gNzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBQQUdFIDk6IERPTk9SIE5BTUVTDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmRvbm9yTmFtZXMgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJEb25vciBOYW1lIENvcnJlY3Rpb25zIik7DQogICAgICAgICAgICBsZXQgZG55WSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDQxLCAxMjgsIDE4NSk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnRleHQoIk9yaWdpbmFsIiwgMjUsIDU5KTsgZG9jLnRleHQoIkNvcnJlY3RlZCIsIDExMCwgNTkpOw0KICAgICAgICAgICAgbGV0IGRvbm9yUmF3ID0gd2luZG93LkdMT0JBTF9ET05PUl9OQU1FX0RBVEEgfHwgIiI7DQogICAgICAgICAgICBpZiAoZG9ub3JSYXcpIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcoZG9ub3JSYXcpLnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHB0cy5sZW5ndGggPj0gMiAmJiAhbGluZS5pbmNsdWRlcygnT1JJR0lOQUwnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRueVkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJOYW1lcyAoQ29udC4pIik7IGRueVkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDkpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKHB0c1swXS50cmltKCkpLCAyNSwgZG55WSk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChjbGVhblN0cihwdHNbMV0udHJpbSgpKSwgMTEwLCBkbnlZKTsgZG55WSArPSA3Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFBBR0UgMTA6IEFERFJFU1MgQ09SUkVDVElPTlMNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuYWRkckNvcnIgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJBZGRyZXNzIENvcnJlY3Rpb25zIik7DQogICAgICAgICAgICBsZXQgYWR5WSA9IDcwOw0KICAgICAgICAgICAgY29uc3QgY29sV2lkdGggPSA3NTsNCiAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoMjIsIDE2MCwgMTMzKTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2MudGV4dCgiT3JpZ2luYWwgQWRkcmVzcyIsIDI1LCA1OSk7IGRvYy50ZXh0KCJDb3JyZWN0ZWQgQWRkcmVzcyIsIDExNSwgNTkpOw0KICAgICAgICAgICAgbGV0IGFkZHJSYXcgPSB3aW5kb3cuR0xPQkFMX0FERFJFU1NfQ09SUkVDVElPTl9EQVRBIHx8ICIiOw0KICAgICAgICAgICAgaWYgKGFkZHJSYXcpIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcoYWRkclJhdykuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocHRzLmxlbmd0aCA+PSAyICYmICFsaW5lLmluY2x1ZGVzKCdPUklHSU5BTCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnVyA9IGRvYy5zcGxpdFRleHRUb1NpemUoY2xlYW5TdHIocHRzWzBdLnRyaW0oKSksIGNvbFdpZHRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJXID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShjbGVhblN0cihwdHNbMV0udHJpbSgpKSwgY29sV2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93SCA9IE1hdGgubWF4KG9yaWdXLmxlbmd0aCwgY29yclcubGVuZ3RoKSAqIDU7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWR5WSArIHJvd0ggPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJBZGRyZXNzIChDb250LikiKTsgYWR5WSA9IDcwOyB9DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoOCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQob3JpZ1csIDI1LCBhZHlZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KGNvcnJXLCAxMTUsIGFkeVkpOyBhZHlZICs9IHJvd0ggKyA2Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldERyYXdDb2xvcigyMzApOyBkb2MubGluZSgyMCwgYWR5WSAtIDMsIDE5MCwgYWR5WSAtIDMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFVQREFURSBJTkRFWCBMSU5LUw0KICAgICAgICAgICAgZG9jLnNldFBhZ2UoMSk7DQogICAgICAgICAgICBjb25zdCBuYXYgPSBbDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkV4ZWN1dGl2ZSBBdWRpdCBTdW1tYXJ5IiwgdGFyZ2V0OiBwTWFwLnN1bW1hcnksIGNvbG9yOiBbNDQsIDYyLCA4MF0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiRGVmZWN0aXZlIFBBTiBOdW1iZXJzIiwgdGFyZ2V0OiBwTWFwLnBhbiwgY29sb3I6IFsxNTUsIDg5LCAxODJdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkNvdW50cmllcyBpbiBBZGRyZXNzIEZpZWxkIiwgdGFyZ2V0OiBwTWFwLmNvdW50cnksIGNvbG9yOiBbMzksIDE3NCwgOTZdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkluY29ycmVjdCBUZWxlcGhvbmUgTnVtYmVycyIsIHRhcmdldDogcE1hcC5waG9uZSwgY29sb3I6IFs1MiwgNzMsIDk0XSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJJbnZhbGlkIFBJTkNPREUgUmVjb3JkcyIsIHRhcmdldDogcE1hcC5waW5jb2RlLCBjb2xvcjogWzI0MywgMTU2LCAxOF0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiSW52YWxpZCBOYW1lcyBvciBBZGRyZXNzICgkKSIsIHRhcmdldDogcE1hcC5kb2xsYXIsIGNvbG9yOiBbMjMxLCA3NiwgNjBdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkNpdHkgTmFtZSBWYWxpZGF0aW9uIiwgdGFyZ2V0OiBwTWFwLmNpdHksIGNvbG9yOiBbMTQyLCA2OCwgMTczXSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJEb25vciBOYW1lIENvcnJlY3Rpb25zIiwgdGFyZ2V0OiBwTWFwLmRvbm9yTmFtZXMsIGNvbG9yOiBbNDEsIDEyOCwgMTg1XSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJBZGRyZXNzIENvcnJlY3Rpb25zIiwgdGFyZ2V0OiBwTWFwLmFkZHJDb3JyLCBjb2xvcjogWzIyLCAxNjAsIDEzM10gfQ0KICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIGxldCBpeSA9IDY1Ow0KICAgICAgICAgICAgbmF2LmZvckVhY2goaXQgPT4gew0KICAgICAgICAgICAgICAgIGlmICghaXQudGFyZ2V0KSByZXR1cm47DQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcigyNDgpOyBkb2MucmVjdCgyMCwgaXksIDE3MCwgMTQsICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcihpdC5jb2xvclswXSwgaXQuY29sb3JbMV0sIGl0LmNvbG9yWzJdKTsgZG9jLnJlY3QoMjAsIGl5LCA0LCAxNCwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKGl0LmNvbG9yWzBdLCBpdC5jb2xvclsxXSwgaXQuY29sb3JbMl0pOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnNldEZvbnRTaXplKDEyKTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChpdC5sYWJlbCwgMzIsIGl5ICsgOS41KTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKGl0LmNvbG9yWzBdLCBpdC5jb2xvclsxXSwgaXQuY29sb3JbMl0pOyBkb2MucmVjdCgxNzIsIGl5ICsgMi41LCAxMiwgOSwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy50ZXh0KGl0LnRhcmdldC50b1N0cmluZygpLCAxNzgsIGl5ICsgOC41LCB7IGFsaWduOiAiY2VudGVyIiB9KTsNCiAgICAgICAgICAgICAgICBkb2MubGluaygyMCwgaXksIDE3MCwgMTQsIHsgcGFnZU51bWJlcjogaXQudGFyZ2V0IH0pOyBpeSArPSAxODsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBpZiAodHlwZW9mIGRvYy5wdXRUb3RhbFBhZ2VzID09PSAnZnVuY3Rpb24nKSBkb2MucHV0VG90YWxQYWdlcyh0b3RhbFBhZ2VzRXhwKTsNCiAgICAgICAgICAgIGRvYy5zYXZlKGBNTVBUX0RhdGFiYXNlX0F1ZGl0XyR7dGltZVN0YW1wfS5wZGZgKTsNCiAgICAgICAgICAgIGNvbnN0IGxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIH0NCg0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHRyaWdnZXJGdWxsQXVkaXQoKSB7DQogICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBhd2FpdCBydW5DaXR5RXh0cmFjdGlvbignYXVkaXQnKTsNCiAgICAgICAgICAgICAgICBhd2FpdCBydW5Eb25vck5hbWVDaGVjaygnYXVkaXQnKTsNCiAgICAgICAgICAgICAgICBhd2FpdCBydW5BZGRyZXNzQ2hlY2soJ2F1ZGl0Jyk7IC8vIEFkZGVkDQoNCiAgICAgICAgICAgICAgICBhd2FpdCBydW5EYXRhYmFzZUF1ZGl0UERGKCk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJBdWRpdCBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFBBTiBOdW1iZXJzIEF1dG8gQ29ycmVjdCAtIChVcHBlcmNhc2UgZm9yIGFsbCBQQU4gRklFTERTKQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5QQU5Db3JyZWN0aW9uKCkgew0KICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSB0aGUgb3ZlcmxheSByZW5kZXJzIGJlZm9yZSB0aGUgQ1BVIHdvcmtzDQogICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgY29ycmVjdGlvbkNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIC8vIDEuIFByb2Nlc3MgdGhlIGdsb2JhbCBhcnJheSBkaXJlY3RseQ0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBHTE9CQUxfREJfTElORVNbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBQQU4gaXMgSW5kZXggNiAoN3RoIGNvbHVtbikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZHMubGVuZ3RoID4gNikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBmaWVsZHNbNl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVwcGVyVmFsID0gdmFsLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsICE9PSB1cHBlclZhbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNl0gPSB1cHBlclZhbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbkNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMi4gU3luYyB0byBDbG91ZCBpZiBjaGFuZ2VzIHdlcmUgbWFkZQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY29ycmVjdGlvbkNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQVVUSEVOVElDQVRJT046IFVzaW5nIHlvdXIgTU1QVF9BVVRIIHN5c3RlbSB0byBnZXQgYSBmcmVzaCB0b2tlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5QYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlblJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogdG9rZW5QYXJhbXMNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gYXdhaXQgdG9rZW5SZXMuanNvbigpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBVUExPQUQ6IFNhdmluZyB0aGUgbW9kaWZpZWQgR0xPQkFMX0RCX0xJTkVTDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGxvYWRSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwbG9hZFJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHNjcmVlbiBkaXNwbGF5DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzaG93UmVjb3JkID09PSAnZnVuY3Rpb24nKSBzaG93UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFBBTiBDb3JyZWN0aW9uIFN1Y2Nlc3MhXG5Ub3RhbCBSZWNvcmRzIFVwZGF0ZWQ6ICR7Y29ycmVjdGlvbkNvdW50fWApOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNsb3VkIFN5bmMgRmFpbGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlNjYW4gQ29tcGxldGU6IE5vIGxvd2VyY2FzZSBQQU4gZW50cmllcyBmb3VuZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlBBTiBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMTAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFVuaXF1ZSBEb25vciBMaXN0IENyZWF0aW9uIExvZ2ljDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5VbmlxdWVEb25vckxpc3QoKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb25vci1zZWFyY2gtaW5wdXQnKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU1QVF9EQl9SQVdfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdDb250ZW50ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gcmF3Q29udGVudC5zcGxpdCgvXHI/XG58XHIvKTsNCg0KICAgICAgICAgICAgICAgIC8vIFVzZSBhIE1hcCB0byBzdG9yZSBhZ2dyZWdhdGVkIGRhdGENCiAgICAgICAgICAgICAgICBsZXQgZG9ub3JNYXAgPSBuZXcgTWFwKCk7DQoNCiAgICAgICAgICAgICAgICAvLyBTY2FuIEFMTCByZWNvcmRzIChub3QganVzdCByZXZlcnNlKSB0byBlbnN1cmUgd2UgbWlzcyBub3RoaW5nDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBoZWFkZXIgb3IgZW1wdHkgbGluZXMNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lIHx8IGxpbmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygicmVjZWlwdHxkYXRlIikpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWlwdE5vID0gZmllbGRzWzBdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gZmllbGRzWzJdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9IGZpZWxkc1szXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkcmVzcyA9IGZpZWxkc1s0XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChmaWVsZHNbOV0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbCA9IGZpZWxkc1sxM10gfHwgIk5PIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGluID0gZmllbGRzWzE1XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnRyeSA9IGZpZWxkc1sxOV0gfHwgIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFNUUklDVCBJR05PUkUgTE9HSUMgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWwgPT09ICJZRVMiKSBjb250aW51ZTsgLy8gSWdub3JlIEFMTCBjYW5jZWxsZWQgcmVjb3Jkcw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXBob25lLnRyaW0oKSB8fCBwaG9uZS5zdGFydHNXaXRoKCI4ODg4OCIpIHx8IHBob25lLnN0YXJ0c1dpdGgoIjk5OTk5IikpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5pbmNsdWRlcygiJCIpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYW1lLnRyaW0oKSAmJiBhbW91bnQgPD0gMCkgY29udGludWU7IC8vIFNraXAgZ2hvc3QgcmVjb3Jkcw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBTRUFSQ0ggRklMVEVSIChpZiBhcHBsaWNhYmxlKSAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvd2VyTGluZSA9IGxpbmUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtLmluY2x1ZGVzKCc7JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtcyA9IHNlYXJjaFRlcm0uc3BsaXQoJzsnKS5tYXAodCA9PiB0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1zLnNvbWUodCA9PiBsb3dlckxpbmUuaW5jbHVkZXModCkpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VhcmNoVGVybS5pbmNsdWRlcygnLCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybXMgPSBzZWFyY2hUZXJtLnNwbGl0KCcsJykubWFwKHQgPT4gdC50cmltKCkudG9Mb3dlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtcy5ldmVyeSh0ID0+IGxvd2VyTGluZS5pbmNsdWRlcyh0KSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvd2VyTGluZS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBBR0dSRUdBVElPTiBMT0dJQyAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb25vck1hcC5oYXMocGhvbmUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb25vck1hcC5zZXQocGhvbmUsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLCBwaG9uZSwgYWRkcmVzcywgcGluLCBjb3VudHJ5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGVzdFJlY2VpcHQ6IHJlY2VpcHRObywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbEFtb3VudDogYW1vdW50LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAxDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleGlzdGluZyA9IGRvbm9yTWFwLmdldChwaG9uZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy50b3RhbEFtb3VudCArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5jb3VudCArPSAxOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIHJlY2VpcHQgbnVtYmVyIGlzIGhpZ2hlciB0aGFuIHdoYXQgd2UgaGF2ZSwgdXBkYXRlIHRoZSAiTGF0ZXN0IiBkZXRhaWxzDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgd2UgaGF2ZSB0aGUgbW9zdCByZWNlbnQgTmFtZS9BZGRyZXNzIGV2ZW4gaWYgd2UgcHJvY2VzcyBvdXQgb2Ygb3JkZXINCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChyZWNlaXB0Tm8ucmVwbGFjZSgvXEQvZywgJycpKSA+IHBhcnNlSW50KGV4aXN0aW5nLmxhdGVzdFJlY2VpcHQucmVwbGFjZSgvXEQvZywgJycpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLm5hbWUgPSBuYW1lOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmFkZHJlc3MgPSBhZGRyZXNzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnBpbiA9IHBpbjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5jb3VudHJ5ID0gY291bnRyeTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5sYXRlc3RSZWNlaXB0ID0gcmVjZWlwdE5vOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlRG9ub3JzID0gQXJyYXkuZnJvbShkb25vck1hcC52YWx1ZXMoKSk7DQoNCiAgICAgICAgICAgICAgICBpZiAodW5pcXVlRG9ub3JzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gZG9ub3JzIGZvdW5kIG1hdGNoaW5nIHRoZSBjcml0ZXJpYS4iKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0ZVVuaXF1ZURvbm9yUERGKHVuaXF1ZURvbm9ycywgc2VhcmNoVGVybSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiRG9ub3IgTGlzdCBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBQREYgZmlsZSBHZW5lcmF0aW9uIGZvciBVbmlxdWUgRG9ub3IgTGlzdA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVEb25vclBERihkb25vcnMsIHNlYXJjaFRlcm0pIHsNCiAgICAgICAgICAgIGNvbnN0IHsganNQREYgfSA9IHdpbmRvdy5qc3BkZjsNCiAgICAgICAgICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERigncCcsICdtbScsICdhNCcpOw0KICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpOw0KDQogICAgICAgICAgICAvLyAxLiBTb3J0IGJ5IFRvdGFsIEFtb3VudCAoSGlnaGVzdCBvbiB0b3ApDQogICAgICAgICAgICBkb25vcnMuc29ydCgoYSwgYikgPT4gYi50b3RhbEFtb3VudCAtIGEudG90YWxBbW91bnQpOw0KDQogICAgICAgICAgICBsZXQgdGl0bGUzID0gIiI7DQogICAgICAgICAgICBpZiAoc2VhcmNoVGVybSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBzZWFyY2hUZXJtLmluY2x1ZGVzKCc7JykgPyAiT1IiIDogIkFORCI7DQogICAgICAgICAgICAgICAgdGl0bGUzID0gYFNlYXJjaCBSZXN1bHRzIGZvcjogJHtzZWFyY2hUZXJtLnJlcGxhY2UoL1s7LF0vZywgIiAiICsgdHlwZSArICIgIil9YDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdGFibGVEYXRhID0gZG9ub3JzLm1hcChkID0+IHsNCiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlZCBBZGRyZXNzIExvZ2ljOiBTcGxpdCBieSBzcGFjZSwgdGlsZGUsIG9yIGNvbG9uIHRvIGZpbmQgdGhlIGNpdHkNCiAgICAgICAgICAgICAgICBjb25zdCBhZGRyUGFydHMgPSBkLmFkZHJlc3MudHJpbSgpLnNwbGl0KC9bXHN+Ol0rLyk7DQogICAgICAgICAgICAgICAgY29uc3QgY2l0eSA9IGFkZHJQYXJ0cy5sZW5ndGggPiAwID8gYWRkclBhcnRzW2FkZHJQYXJ0cy5sZW5ndGggLSAxXSA6ICIiOw0KICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSByZW1haW5pbmcgYWRkcmVzcyBmb3IgZGlzcGxheQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0FkZHIgPSBkLmFkZHJlc3MucmVwbGFjZSgvWzp+XS9nLCAnLCAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgbWFpbkFkZHIgPSByZW1haW5pbmdBZGRyLnNwbGl0KCcsICcpLnNsaWNlKDAsIC0xKS5qb2luKCcsICcpOw0KDQogICAgICAgICAgICAgICAgcmV0dXJuIFsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29sdW1uIDE6IE5hbWUgJiBDb250YWN0DQogICAgICAgICAgICAgICAgICAgIC8veyBjb250ZW50OiBgJHtkLm5hbWV9XG4ke2QucGhvbmV9XG4ke2QucmVjZWlwdE5vfWAsIHN0eWxlczogeyBmb250U3R5bGU6ICdib2xkJyB9IH0sDQogICAgICAgICAgICAgICAgICAgIHsgY29udGVudDogYCR7ZC5uYW1lfVxuJHtkLnBob25lfVxuJHtkLmxhdGVzdFJlY2VpcHR9YCwgc3R5bGVzOiB7IGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29sdW1uIDI6IENvbnRyaWJ1dGlvbg0KICAgICAgICAgICAgICAgICAgICB7IGNvbnRlbnQ6IGBScy4gJHtkLnRvdGFsQW1vdW50LnRvTG9jYWxlU3RyaW5nKCdlbi1JTicsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLCBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSl9XG4ke2QuY291bnR9IFRpbWVzYCwgc3R5bGVzOiB7IGhhbGlnbjogJ2NlbnRlcicsIGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgLy97IGNvbnRlbnQ6IGBScy4gJHtkLnRvdGFsQW1vdW50LnRvTG9jYWxlU3RyaW5nKCl9XG4ke2QuY291bnR9IFRpbWVzYCwgc3R5bGVzOiB7IGhhbGlnbjogJ2NlbnRlcicsIGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29sdW1uIDM6IEFkZHJlc3MgRGV0YWlscyAoQ2l0eSAtIFBpbmNvZGUgLSBDb3VudHJ5IG9uIGxhc3QgbGluZSkNCiAgICAgICAgICAgICAgICAgICAgeyBjb250ZW50OiBgJHttYWluQWRkcn1cbiR7Y2l0eS50b1VwcGVyQ2FzZSgpfSAtICR7ZC5waW59IC0gJHtkLmNvdW50cnkudG9VcHBlckNhc2UoKX1gLCBzdHlsZXM6IHsgZm9udFN0eWxlOiAnYm9sZCcgfSB9DQogICAgICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsNCiAgICAgICAgICAgICAgICBoZWFkOiBbWydOYW1lICYgQ29udGFjdCcsICdDb250cmlidXRpb24nLCAnQWRkcmVzcyBEZXRhaWxzJ11dLA0KICAgICAgICAgICAgICAgIGJvZHk6IHRhYmxlRGF0YSwNCiAgICAgICAgICAgICAgICBzdGFydFk6IDUwLCAvLyBQdXNoZWQgZG93biBzaWduaWZpY2FudGx5IHRvIHByZXZlbnQgYW55IG92ZXJsYXANCiAgICAgICAgICAgICAgICBtYXJnaW46IHsgdG9wOiA1MCB9LCAvLyBFbnN1cmVzIHN1YnNlcXVlbnQgcGFnZXMgZG9uJ3Qgb3ZlcmxhcCBoZWFkZXINCiAgICAgICAgICAgICAgICB0aGVtZTogJ2dyaWQnLA0KICAgICAgICAgICAgICAgIGhlYWRTdHlsZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiBbMCwgNTEsIDEwMl0sDQogICAgICAgICAgICAgICAgICAgIHRleHRDb2xvcjogMjU1LA0KICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTEsDQogICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJ2JvbGQnLA0KICAgICAgICAgICAgICAgICAgICBjZWxsUGFkZGluZzogNCwNCiAgICAgICAgICAgICAgICAgICAgaGFsaWduOiAnY2VudGVyJw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgYm9keVN0eWxlczogew0KICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTAsDQogICAgICAgICAgICAgICAgICAgIGNlbGxQYWRkaW5nOiA0LA0KICAgICAgICAgICAgICAgICAgICBsaW5lQ29sb3I6IFsxODAsIDE4MCwgMTgwXSwNCiAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiBbMCwgMCwgMF0gLy8gU2hhcnAgYmxhY2sgdGV4dA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgY29sdW1uU3R5bGVzOiB7DQogICAgICAgICAgICAgICAgICAgIDA6IHsgY2VsbFdpZHRoOiA1NSB9LA0KICAgICAgICAgICAgICAgICAgICAxOiB7IGNlbGxXaWR0aDogNDAgfSwNCiAgICAgICAgICAgICAgICAgICAgMjogeyBjZWxsV2lkdGg6ICdhdXRvJyB9DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBkaWREcmF3UGFnZTogZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gUGVybWFuZW50IEhlYWRlciBmb3IgQWxsIFBhZ2VzDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxOCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCwgNTEsIDEwMik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KHVuZGVmaW5lZCwgJ2JvbGQnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoIk15bGFpIE1haGEgUGVyaWF5YXZhIEFudXNoYW0gVHJ1c3QiLCAxMDUsIDE1LCB7IGFsaWduOiAnY2VudGVyJyB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTdGF0cyAmIFRpbWVzdGFtcA0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTApOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDEwMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KHVuZGVmaW5lZCwgJ2JvbGQnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFVuaXF1ZSBEb25vciBMaXN0IENyZWF0ZWQgb246ICR7dGltZXN0YW1wfWAsIDE0LCAyNSk7DQoNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEzKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwLCAxMDIsIDApOyAvLyBEYXJrIEdyZWVuIGZvciB0b3RhbCBjb3VudA0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgVG90YWwgVW5pcXVlIERvbm9yczogJHtkb25vcnMubGVuZ3RofWAsIDE0LCAzMyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRpdGxlMykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMTUwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHRpdGxlMywgMTQsIDQwKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIFN0eWxpc2ggRGl2aWRlciBMaW5lDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXREcmF3Q29sb3IoMCwgNTEsIDEwMik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRMaW5lV2lkdGgoMSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5saW5lKDE0LCA0MywgMTk2LCA0Myk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRm9vdGVyDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VTaXplID0gZG9jLmludGVybmFsLnBhZ2VTaXplOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSGVpZ2h0ID0gcGFnZVNpemUuaGVpZ2h0ID8gcGFnZVNpemUuaGVpZ2h0IDogcGFnZVNpemUuZ2V0SGVpZ2h0KCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMTUwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQodW5kZWZpbmVkLCAnYm9sZCcpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCgiSW50ZXJuYWwgRG9jdW1lbnQiLCAxNCwgcGFnZUhlaWdodCAtIDEwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFBhZ2UgJHtkYXRhLnBhZ2VOdW1iZXJ9YCwgMTk2LCBwYWdlSGVpZ2h0IC0gMTAsIHsgYWxpZ246ICdyaWdodCcgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGZpbGVTdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJykuc2xpY2UoMCwgMTkpOw0KICAgICAgICAgICAgZG9jLnNhdmUoYE1NUFRfRG9ub3JfTGlzdF8ke2ZpbGVTdGFtcH0ucGRmYCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIHdpbmRvdy5vbmxvYWQgPSBpbml0aWFsaXplTU1QVDsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzY3JpcHQ+DQogICAgICAgIGZ1bmN0aW9uIGJ1aWxkRllJbmRleCgpIHsNCiAgICAgICAgICAgIC8vIDEuIEluaXRpYWwgRGF0YSBDaGVjaw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgPT09ICd1bmRlZmluZWQnIHx8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPD0gMSkgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyAyLiBTRUNVUklUWSBDSEVDSzogT25seSBkaXNhYmxlIGlmIHJlc3RyaWN0ZWQgYWJvdmUgcmVjb3JkIDENCiAgICAgICAgICAgIC8vIElmIE1pblJlY29yZE51bWJlciBpcyAxLCBpdCBtZWFucyAic3RhcnQgZnJvbSBiZWdpbm5pbmciLCBzbyB0aGV5IGFyZSBOT1QgcmVzdHJpY3RlZC4NCiAgICAgICAgICAgIGNvbnN0IG1pbkFsbG93ZWQgPSB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiB8fCAwOw0KICAgICAgICAgICAgY29uc3QgcmFkaW9zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2Z5X2ZpbHRlcicpOw0KDQogICAgICAgICAgICBpZiAobWluQWxsb3dlZCA+IDEpIHsgLy8gPC0tLSBGSVhFRDogT25seSBsb2NrIGlmIG51bWJlciBpcyBncmVhdGVyIHRoYW4gMQ0KICAgICAgICAgICAgICAgIHJhZGlvcy5mb3JFYWNoKHIgPT4gew0KICAgICAgICAgICAgICAgICAgICByLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgci5wYXJlbnRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAiMC41IjsNCiAgICAgICAgICAgICAgICAgICAgci5wYXJlbnRFbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAibm9uZSI7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlNlY3VyaXR5OiBGWSBGaWx0ZXIgZGlzYWJsZWQgKFJlc3RyaWN0ZWQgVXNlciBsb2NrZWQgdG8gaW5kZXg6ICIgKyBtaW5BbGxvd2VkICsgIikiKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBidXR0b25zIGFyZSBFTkFCTEVEIGlmIHRoZXkgYXJlbid0IHJlc3RyaWN0ZWQNCiAgICAgICAgICAgICAgICByYWRpb3MuZm9yRWFjaChyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgci5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICByLnBhcmVudEVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICIxIjsNCiAgICAgICAgICAgICAgICAgICAgci5wYXJlbnRFbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAiYXV0byI7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIDMuIEluaXRpYWxpemUgUmFuZ2VzIGZvciBmdWxsIGFjY2VzcyB1c2Vycw0KICAgICAgICAgICAgZnlSYW5nZXMgPSB7ICJBTEwiOiB7IG1pbjogMSwgbWF4OiBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMSB9IH07DQoNCiAgICAgICAgICAgIC8vIDQuIEJ1aWxkIHRoZSBZZWFyIE1hcA0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2goKGxpbmUsIGlkeCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChpZHggPT09IDApIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2xzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBjb2xzWzFdID8gY29sc1sxXS50cmltKCkgOiAiIjsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRlU3RyLmluY2x1ZGVzKCctJykpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlU3RyLnNwbGl0KCctJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbSA9IHBhcnNlSW50KHBhcnRzWzFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwYXJzZUludChwYXJ0c1syXSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydFkgPSAobSA8PSAzKSA/IHkgLSAxIDogeTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ5S2V5ID0gc3RhcnRZLnRvU3RyaW5nKCkuc2xpY2UoLTIpICsgIi0iICsgKHN0YXJ0WSArIDEpLnRvU3RyaW5nKCkuc2xpY2UoLTIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZ5UmFuZ2VzW2Z5S2V5XSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ5UmFuZ2VzW2Z5S2V5XSA9IHsgbWluOiBpZHgsIG1heDogaWR4IH07DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ5UmFuZ2VzW2Z5S2V5XS5tYXggPSBpZHg7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gNS4gQVVUTy1TRUxFQ1QgQ1VSUkVOVCBGWSAoSmFuIDIwMjYgaXMgRlkgMjUtMjYpDQogICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBjdXJNb250aCA9IHRvZGF5LmdldE1vbnRoKCkgKyAxOw0KICAgICAgICAgICAgY29uc3QgY3VyWWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICBjb25zdCBzdGFydFkgPSAoY3VyTW9udGggPD0gMykgPyBjdXJZZWFyIC0gMSA6IGN1clllYXI7DQogICAgICAgICAgICBjb25zdCBjdXJyZW50RllLZXkgPSBzdGFydFkudG9TdHJpbmcoKS5zbGljZSgtMikgKyAiLSIgKyAoc3RhcnRZICsgMSkudG9TdHJpbmcoKS5zbGljZSgtMik7DQoNCiAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgcmFkaW9zLmZvckVhY2gociA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHIudmFsdWUgPT09IGN1cnJlbnRGWUtleSkgew0KICAgICAgICAgICAgICAgICAgICByLmNoZWNrZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBhcHBseUZZRmlsdGVyKGN1cnJlbnRGWUtleSk7DQogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gRmFsbGJhY2sgaWYgY3VycmVudCB5ZWFyIGlzIGVtcHR5DQogICAgICAgICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWxsUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJmeV9maWx0ZXIiXVt2YWx1ZT0iQUxMIl0nKTsNCiAgICAgICAgICAgICAgICBpZiAoYWxsUmFkaW8pIHsNCiAgICAgICAgICAgICAgICAgICAgYWxsUmFkaW8uY2hlY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGFwcGx5RllGaWx0ZXIoIkFMTCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGFwcGx5RllGaWx0ZXIodmFsKSB7DQogICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgY29uc3Qgcm5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3X3JlY19idG4nKTsNCiAgICAgICAgICAgIGlmICghc2xpZGVyKSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIDEuIENBTENVTEFURSBDVVJSRU5UIEZZIChKYW4gMjAyNiBpcyBGWSAyNS0yNikNCiAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGNvbnN0IGN1ck1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7DQogICAgICAgICAgICBjb25zdCBjdXJZZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WSA9IChjdXJNb250aCA8PSAzKSA/IGN1clllYXIgLSAxIDogY3VyWWVhcjsNCiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGWUtleSA9IHN0YXJ0WS50b1N0cmluZygpLnNsaWNlKC0yKSArICItIiArIChzdGFydFkgKyAxKS50b1N0cmluZygpLnNsaWNlKC0yKTsNCg0KICAgICAgICAgICAgLy8gMi4gUk4gQlVUVE9OIFNBRkVUWQ0KICAgICAgICAgICAgaWYgKHJuQnRuKSB7DQogICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gIkFMTCIgfHwgdmFsID09PSBjdXJyZW50RllLZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uc3R5bGUub3BhY2l0eSA9ICIxIjsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uc3R5bGUub3BhY2l0eSA9ICIwLjMiOw0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5zdHlsZS5jdXJzb3IgPSAibm90LWFsbG93ZWQiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gRklMVEVSIExPR0lDDQogICAgICAgICAgICBpZiAodmFsID09PSAiUlIiKSB7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWFkeUluZGljZXMgPT09ICd1bmRlZmluZWQnIHx8IHJlYWR5SW5kaWNlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIFJlYWR5IFJlY2VpcHRzIGZvdW5kISIpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImZ5X2ZpbHRlciJdW3ZhbHVlPSJBTEwiXScpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYWxsUmFkaW8pIGFsbFJhZGlvLmNoZWNrZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBhcHBseUZZRmlsdGVyKCJBTEwiKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBDSEFOR0UgSEVSRTogRElTQUJMRSBJTlNURUFEIE9GIEhJREUgLS0tDQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7IC8vIEtlZXAgaXQgdmlzaWJsZQ0KICAgICAgICAgICAgICAgIHNsaWRlci5kaXNhYmxlZCA9IHRydWU7ICAgICAgICAgICAgICAvLyBNYWtlIGl0IHVuY2xpY2thYmxlDQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLm9wYWNpdHkgPSAiMC40IjsgICAgICAgIC8vIEdyYXkgaXQgb3V0IHZpc3VhbGx5DQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLmN1cnNvciA9ICJub3QtYWxsb3dlZCI7DQoNCiAgICAgICAgICAgICAgICBzbGlkZXIubWluID0gMDsNCiAgICAgICAgICAgICAgICBzbGlkZXIubWF4ID0gcmVhZHlJbmRpY2VzLmxlbmd0aCAtIDE7DQogICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gMDsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKHJlYWR5SW5kaWNlc1swXSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyAtLS0gUkVTVE9SRSBTTElERVIgRk9SIE5PUk1BTCBWSUVXUyAtLS0NCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIjsNCiAgICAgICAgICAgICAgICBzbGlkZXIuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUub3BhY2l0eSA9ICIxIjsNCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUuY3Vyc29yID0gInBvaW50ZXIiOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSAoZnlSYW5nZXMgJiYgZnlSYW5nZXNbdmFsXSkgPyBmeVJhbmdlc1t2YWxdIDogKGZ5UmFuZ2VzID8gZnlSYW5nZXNbIkFMTCJdIDogbnVsbCk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxvb3IgPSAod2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gJiYgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPiByYW5nZS5taW4pDQogICAgICAgICAgICAgICAgICAgICAgICA/IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JODQogICAgICAgICAgICAgICAgICAgICAgICA6IHJhbmdlLm1pbjsNCg0KICAgICAgICAgICAgICAgICAgICBzbGlkZXIubWluID0gZmxvb3I7DQogICAgICAgICAgICAgICAgICAgIHNsaWRlci5tYXggPSByYW5nZS5tYXg7DQogICAgICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IHJhbmdlLm1heDsNCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChzbGlkZXIudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEZpeGVkIEFycm93IE5hdmlnYXRpb24gZm9yIFJSIE1vZGUNCiAgICAgICAgZnVuY3Rpb24gbW92ZUZZUmVjb3JkKGRpcmVjdGlvbikgew0KICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgIGNvbnN0IHJhZGlvQ2hlY2tlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImZ5X2ZpbHRlciJdOmNoZWNrZWQnKTsNCiAgICAgICAgICAgIGlmICghc2xpZGVyIHx8ICFyYWRpb0NoZWNrZWQpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRNb2RlID0gcmFkaW9DaGVja2VkLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgbmV3VmFsID0gcGFyc2VJbnQoc2xpZGVyLnZhbHVlKSArIGRpcmVjdGlvbjsNCg0KICAgICAgICAgICAgaWYgKG5ld1ZhbCA+PSBwYXJzZUludChzbGlkZXIubWluKSAmJiBuZXdWYWwgPD0gcGFyc2VJbnQoc2xpZGVyLm1heCkpIHsNCiAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSBuZXdWYWw7DQogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkTW9kZSA9PT0gIlJSIikgew0KICAgICAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKHJlYWR5SW5kaWNlc1tuZXdWYWxdKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKG5ld1ZhbCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC8qIENvbXByZXNzZWQgcGFkZGluZyBmb3IgdGhlIG1haW4gd29ya3NwYWNlICovDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDYwcHggIWltcG9ydGFudDsNCiAgICAgICAgfQ0KDQogICAgICAgICNyYWRpby1kb2NrIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIGJvdHRvbTogMDsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzAwMjI0NCwgIzAwNDQ4OCk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMjBweDsgLyogUmVkdWNlZCB2ZXJ0aWNhbCBwYWRkaW5nICovDQogICAgICAgICAgICBib3gtc2hhZG93OiAwIC0ycHggMTBweCByZ2JhKDAsMCwwLDAuMyk7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdzsgLyogUm93IGluc3RlYWQgb2YgQ29sdW1uICovDQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyAvKiBUaXRsZSBsZWZ0LCBDb250cm9scyByaWdodCAqLw0KICAgICAgICAgICAgei1pbmRleDogMTAwMDA7DQogICAgICAgICAgICBoZWlnaHQ6IDQ1cHg7IC8qIEZpeGVkIHNtYWxsIGhlaWdodCAqLw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yYWRpby10aXRsZSB7DQogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmY5OTMzOw0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yYWRpby1jb250cm9scyB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgI3JhZGlvU2VsZWN0IHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDRweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICAgIHdpZHRoOiAxODBweDsNCiAgICAgICAgICAgIGhlaWdodDogMjhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yYWRpby1idG4gew0KICAgICAgICAgICAgcGFkZGluZzogMCAxMnB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAyOHB4Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1wbGF5IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyOGE3NDU7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXN0b3Agew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2Q5NTM0ZjsNCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGlkPSJyYWRpby1kb2NrIj4NCiAgICAgICAgPGRpdiBjbGFzcz0icmFkaW8tdGl0bGUiPkhpbmR1IERldm90aW9uYWwgUmFkaW88L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJyYWRpby1jb250cm9scyI+DQogICAgICAgICAgICA8c2VsZWN0IGlkPSJyYWRpb1NlbGVjdCI+DQogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBMb2FkaW5nIC0tPC9vcHRpb24+DQogICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InJhZGlvLWJ0biBidG4tcGxheSIgb25jbGljaz0icGxheVJhZGlvKCkiPlBMQVk8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InJhZGlvLWJ0biBidG4tc3RvcCIgb25jbGljaz0ic3RvcFJhZGlvKCkiPlNUT1A8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgDQogICAgICAgIDxhdWRpbyBpZD0icmFkaW9QbGF5ZXIiIGNyb3Nzb3JpZ2luPSJhbm9ueW1vdXMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2F1ZGlvPg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCg0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRSYWRpb3ModG9rZW4pIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX1JBRElPX0ZJTEUgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IElmIHBlcnNvbmFsaXplZCBmaWxlIGlzIG1pc3NpbmcsIGZldGNoIHRoZSBkZWZhdWx0IG9uZQ0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJQZXJzb25hbGl6ZWQgcmFkaW8gbm90IGZvdW5kLCBsb2FkaW5nIGRlZmF1bHQuLi4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL1NldHRpbmdzL1JhZGlvcy50eHQnIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoIk5vIFJhZGlvIEZpbGUiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRpb25zID0gdGV4dC5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiBsLmluY2x1ZGVzKCcsJykpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhZGlvRHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1NlbGVjdCcpOw0KDQogICAgICAgICAgICAgICAgcmFkaW9Ecm9wLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBTdGF0aW9uIC0tPC9vcHRpb24+JyArDQogICAgICAgICAgICAgICAgICAgIHN0YXRpb25zLm1hcChzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtuYW1lLCB1cmxdID0gcy5zcGxpdCgnLCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8b3B0aW9uIHZhbHVlPSIke3VybC50cmltKCl9Ij4ke25hbWUudHJpbSgpfTwvb3B0aW9uPmA7DQogICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJycpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvU2VsZWN0JykuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+UmFkaW8gVW5hdmFpbGFibGU8L29wdGlvbj4nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICBmdW5jdGlvbiBwbGF5UmFkaW8oKSB7DQogICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9QbGF5ZXInKTsNCiAgICAgICAgICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1NlbGVjdCcpOw0KICAgICAgICAgICAgY29uc3QgdXJsID0gc2VsLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNlbC5vcHRpb25zW3NlbC5zZWxlY3RlZEluZGV4XS50ZXh0Ow0KDQogICAgICAgICAgICBpZiAoIXVybCkgcmV0dXJuOw0KDQogICAgICAgICAgICBwbGF5ZXIuc3JjID0gdXJsOw0KICAgICAgICAgICAgcGxheWVyLnBsYXkoKQ0KICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gT3B0aW9uYWw6IFVwZGF0ZSB5b3VyIGFwcCdzIG1haW4gc3RhdHVzIHRleHQgaWYgeW91IGhhdmUgb25lDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJQbGF5aW5nOiAiICsgbmFtZSk7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiBhbGVydCgiU3RhdGlvbiBvZmZsaW5lLiBUcnkgYW5vdGhlci4iKSk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzdG9wUmFkaW8oKSB7DQogICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9QbGF5ZXInKTsNCiAgICAgICAgICAgIHBsYXllci5wYXVzZSgpOw0KICAgICAgICAgICAgcGxheWVyLnNyYyA9ICIiOw0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5wYW5jaGFuZy1vdXRlciB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxNXB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wYW5jaGFuZy1oYWxmIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wYW5jaGFuZy1tYWluLXRpdGxlIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4Ow0KICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wLXN1Yi1oZWFkIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAzMzY2Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBtYXJnaW46IDE1cHggMCA4cHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnAtZXZlbnQtYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY5ZjA7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTBweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICAvKiBEYXRhIHNwZWNpZmljIHN0eWxpbmcgKi8NCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wLWNlbnRlci1ib3ggew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjRmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDMzNjY7DQogICAgICAgIH0NCiAgICAgICAgLyogQm9sZCBDb2xvciBDb2RpbmcgZm9yIERhdGEgKi8NCiAgICAgICAgLmMtZGF0ZSB7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmMtbmFtZSB7DQogICAgICAgICAgICBjb2xvcjogIzAwMDBmZjsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmMtZXh0cmEgew0KICAgICAgICAgICAgY29sb3I6ICMyZTdkMzI7DQogICAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7DQogICAgICAgIH0NCg0KICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsNCiAgICAgICAgICAgIC5wYW5jaGFuZy1vdXRlciB7DQogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLnAtZXZlbnQtYm94IHsNCiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsOw0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1vdXRlciI+DQogICAgICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLWhhbGYiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuY2hhbmctbWFpbi10aXRsZSI+VXBjb21pbmcgQW51c2hhbSBEYXRlczwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGlzcC1hbnVzaGFtIj48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtc3ViLWhlYWQiPvCflYnvuI8gUGVyaXlhdmEgSmF5YW50aGk8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3AtamF5YW50aGkiPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icC1zdWItaGVhZCI+8J+Vie+4jyBQZXJpeWF2YSBBcmFkaGFuYTwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGlzcC1hcmFkaGFuYSI+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLWhhbGYiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuY2hhbmctbWFpbi10aXRsZSI+VXBjb21pbmcgRWthZGFzaGkgRGF0ZXM8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3AtZWthZGFzaGkiPjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRQYW5jaGFuZ1N1aXRlKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgbm93LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KDQogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0TGluZXMocGF0aCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBwYXRoIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eHQucmVwbGFjZSgvPGJyXHMqXC8/Pi9naSwgJ1xuJykucmVwbGFjZSgvPFtePl0qPi9nLCAnJykuc3BsaXQoJ1xuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMubGVuZ3RoID4gMCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gMS4gQU5VU0hBTQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MxID0gYXdhaXQgZ2V0TGluZXMoJy9QYW5jaGFuZy9BbnVzaGFtLzAuMS5odG1sJyk7DQogICAgICAgICAgICAgICAgbGV0IGgxID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzMS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAocm93czFbaV0ubWF0Y2goL1xkezEsMn0tXHcrLVxkezR9LykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShyb3dzMVtpXSkgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDEgKz0gYDxkaXYgY2xhc3M9InAtZXZlbnQtYm94Ij48c3BhbiBjbGFzcz0iYy1kYXRlIj4ke3Jvd3MxW2ldfTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImMtZXh0cmEiPiR7cm93czFbaSArIDFdIHx8ICcnfTwvc3Bhbj48L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWFudXNoYW0nKS5pbm5lckhUTUwgPSBoMSB8fCAiTm8gVXBjb21pbmciOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gSkFZQU5USEkNCiAgICAgICAgICAgICAgICBjb25zdCByb3dzMyA9IGF3YWl0IGdldExpbmVzKCcvUGFuY2hhbmcvQW51c2hhbS8wLjMuaHRtbCcpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93czMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MzW2ldLm1hdGNoKC9cZHsxLDJ9LVx3Ky1cZHs0fS8pICYmIG5ldyBEYXRlKHJvd3MzW2ldKSA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gKHJvd3MzW2kgKyAxXSB8fCAiIikucmVwbGFjZSgvXC9cZHsyfVwvXGR7NH0vZywgJycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3AtamF5YW50aGknKS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0icC1ldmVudC1ib3ggcC1jZW50ZXItYm94Ij48c3BhbiBjbGFzcz0iYy1kYXRlIj4ke3Jvd3MzW2ldfSAoU2F0KTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImMtZXh0cmEiPlRpbWluZzogJHt0aW1lfTwvc3Bhbj48L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBBUkFESEFOQQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJvd3M0ID0gYXdhaXQgZ2V0TGluZXMoJy9QYW5jaGFuZy9BbnVzaGFtLzAuNC5odG1sJyk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzNC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAocm93czRbaV0ubWF0Y2goL1xkezEsMn0tXHcrLVxkezR9LykgJiYgbmV3IERhdGUocm93czRbaV0pID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3AtYXJhZGhhbmEnKS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0icC1ldmVudC1ib3ggcC1jZW50ZXItYm94Ij48c3BhbiBjbGFzcz0iYy1kYXRlIj4ke3Jvd3M0W2ldfSAoTW9uKTwvc3Bhbj48L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBFS0FEQVNISQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJvd3NFID0gYXdhaXQgZ2V0TGluZXMoJy9QYW5jaGFuZy9Fa2FkYXNoaS8wLjEuaHRtbCcpOw0KICAgICAgICAgICAgICAgIGxldCBoRSA9ICIiOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93c0UubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSByb3dzRVtpXS5tYXRjaCgvKFxkezEsMn0pLShcZHsyfXxbYS16QS1aXSspLShcZHs0fSkvKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkUGFydHMgPSByb3dzRVtpXS5zcGxpdCgnICcpWzBdLnNwbGl0KCctJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkdCA9IG5ldyBEYXRlKGRQYXJ0c1syXSwgbmV3IERhdGUoRGF0ZS5wYXJzZShkUGFydHNbMV0gKyAiIDEsIDIwMTIiKSkuZ2V0TW9udGgoKSwgZFBhcnRzWzBdKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR0ID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhFICs9IGA8ZGl2IGNsYXNzPSJwLWV2ZW50LWJveCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzRVtpXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImMtbmFtZSI+JHtyb3dzRVtpICsgMV0gfHwgJyd9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjLWV4dHJhIj4ke3Jvd3NFW2kgKyAyXSB8fCAnJ308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAyOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWVrYWRhc2hpJykuaW5uZXJIVE1MID0gaEUgfHwgIk5vIFVwY29taW5nIjsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiTG9hZCBGYWlsIiwgZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkUGFuY2hhbmdTdWl0ZSgpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAuZmxhc2hiYWNrLWNvbnRhaW5lciB7DQogICAgICAgICAgICBtYXJnaW46IDIwcHggYXV0bzsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmYWZhOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDk1JTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2staGVhZGVyLXdyYXBwZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2staGVhZGVyIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdHZW9yZ2lhJywgc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDI2cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBKdW1wIHRvIERhdGUgU3R5bGluZyAqLw0KICAgICAgICAuanVtcC1ib3ggew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBnYXA6IDhweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgICAgICAgICBwYWRkaW5nOiA1cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5qdW1wLWJveCBzZWxlY3Qgew0KICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgICAgICBvdXRsaW5lOiBub25lOw0KICAgICAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAudmlldy10b2dnbGUgew0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmRmMmYyOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4IDE1cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDE1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLnZpZXctdG9nZ2xlIGxhYmVsIHsNCiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgICAgIGdhcDogNXB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtYnRuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM4MDAwMDA7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMzVweDsNCiAgICAgICAgICAgIGhlaWdodDogMzVweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWJ0bjpob3ZlciB7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmOTkzMzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWdyaWQgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgICAgIGdhcDogMjVweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2stY2FyZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA4NTBweDsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDIwcHggcmdiYSgwLDAsMCwwLjEpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mbGFzaGJhY2stY2FyZCBoNCB7DQogICAgICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDEycHggMDsNCiAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4Ow0KICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1pbWctd3JhcHBlciB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1pbWcgew0KICAgICAgICAgICAgd2lkdGg6IDE5MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxNTBweDsNCiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IDAuM3M7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmZsYXNoYmFjay1pbWc6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7DQogICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZmY5OTMzOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgew0KICAgICAgICAgICAgLmZsYXNoYmFjay1oZWFkZXIgew0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLmZsYXNoYmFjay1pbWcgew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxNDBweDsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDExMHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWNvbnRyb2xzIHsNCiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9ImZsYXNoYmFjay1jb250YWluZXIiIGlkPSJmbGFzaGJhY2tTZWN0aW9uIiBzdHlsZT0iZGlzcGxheTpub25lOyI+DQogICAgICAgIDxkaXYgY2xhc3M9ImZsYXNoYmFjay1oZWFkZXItd3JhcHBlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29udHJvbHMiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9ImNoYW5nZUZsYXNoYmFja0RhdGUoLTEpIj7il4A8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJmbGFzaGJhY2tUaXRsZSIgY2xhc3M9ImZsYXNoYmFjay1oZWFkZXIiPvCfjp7vuI8gVHJ1c3QgTWVtb3JpZXM6IE9uIFRoaXMgRGF5PC9kaXY+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgb25jbGljaz0iY2hhbmdlRmxhc2hiYWNrRGF0ZSgxKSI+4pa2PC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBmbGV4LXdyYXA6IHdyYXA7IGp1c3RpZnktY29udGVudDogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ianVtcC1ib3giPg0KICAgICAgICAgICAgICAgICAgICDwn5OFIEp1bXAgdG86DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imp1bXBEYXkiPjwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJqdW1wTW9udGgiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMCI+SmFuPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxIj5GZWI8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPk1hcjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMyI+QXByPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI0Ij5NYXk8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjUiPkp1bjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNiI+SnVsPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI3Ij5BdWc8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjgiPlNlcDwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iOSI+T2N0PC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMCI+Tm92PC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMSI+RGVjPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InRlbGVwb3J0VG9EYXRlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czoxMHB4OyBwYWRkaW5nOjJweCA4cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MTJweDsiPkdPPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ2aWV3LXRvZ2dsZSI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InZpZXdNb2RlIiB2YWx1ZT0iMyIgY2hlY2tlZCBvbmNsaWNrPSJzZXRWaWV3TW9kZSgzKSI+IFN1bW1hcnk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJ2aWV3TW9kZSIgdmFsdWU9ImFsbCIgb25jbGljaz0ic2V0Vmlld01vZGUoJ2FsbCcpIj4gQWxsPC9sYWJlbD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBpZD0iZmxhc2hiYWNrR3JpZCIgY2xhc3M9ImZsYXNoYmFjay1ncmlkIj48L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGxldCBmbGFzaGJhY2tPZmZzZXQgPSAwOw0KICAgICAgICBsZXQgY3VycmVudFZpZXdMaW1pdCA9IDM7DQoNCiAgICAgICAgLy8gSW5pdGlhbGl6ZSBEYXkgZHJvcGRvd24gKDEtMzEpDQogICAgICAgIGNvbnN0IGRheVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wRGF5Jyk7DQogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDMxOyBpKyspIHsNCiAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgIG9wdC52YWx1ZSA9IGk7IG9wdC5pbm5lckhUTUwgPSBpOw0KICAgICAgICAgICAgZGF5U2VsZWN0LmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzZXRWaWV3TW9kZShtb2RlKSB7DQogICAgICAgICAgICBjdXJyZW50Vmlld0xpbWl0ID0gbW9kZTsNCiAgICAgICAgICAgIGxvYWREeW5hbWljRmxhc2hiYWNrcygpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gY2hhbmdlRmxhc2hiYWNrRGF0ZShvZmZzZXQpIHsNCiAgICAgICAgICAgIGZsYXNoYmFja09mZnNldCArPSBvZmZzZXQ7DQogICAgICAgICAgICBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHRlbGVwb3J0VG9EYXRlKCkgew0KICAgICAgICAgICAgY29uc3QgZCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wRGF5JykudmFsdWUpOw0KICAgICAgICAgICAgY29uc3QgbSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wTW9udGgnKS52YWx1ZSk7DQogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG0sIGQpOw0KDQogICAgICAgICAgICAvLyBDYWxjdWxhdGUgZGlmZmVyZW5jZSBpbiBkYXlzIHRvIHNldCB0aGUgb2Zmc2V0DQogICAgICAgICAgICBjb25zdCBkaWZmVGltZSA9IHRhcmdldC5nZXRUaW1lKCkgLSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkpLmdldFRpbWUoKTsNCiAgICAgICAgICAgIGZsYXNoYmFja09mZnNldCA9IE1hdGgucm91bmQoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpOw0KICAgICAgICAgICAgbG9hZER5bmFtaWNGbGFzaGJhY2tzKCk7DQogICAgICAgIH0NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKSB7DQogICAgICAgICAgICBjb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYXNoYmFja0dyaWQnKTsNCiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2hiYWNrU2VjdGlvbicpOw0KICAgICAgICAgICAgY29uc3QgdGl0bGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2hiYWNrVGl0bGUnKTsNCiAgICAgICAgICAgIGNvbnN0IGRvbWFpbiA9ICJodHRwczovL3d3dy5nYW5lc2FzYXJtYS5jb20iOw0KICAgICAgICAgICAgY29uc3QgVGltZWxpbmVVUkxfRmxhc2ggPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9yZjg1ZWxrejVmYzNjbDFoOGtjY2MvVGltZUxpbmUudHh0P3Jsa2V5PXVta2gwcjd3dGY3dWx1M3J6cXpjZ2IxeWMmZGw9MSI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICB0YXJnZXREYXRlLnNldERhdGUodGFyZ2V0RGF0ZS5nZXREYXRlKCkgKyBmbGFzaGJhY2tPZmZzZXQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbW0gPSBTdHJpbmcodGFyZ2V0RGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkZCA9IFN0cmluZyh0YXJnZXREYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkb3RQYXR0ZXJuID0gYC4ke21tfS4ke2RkfWA7DQogICAgICAgICAgICAgICAgY29uc3QgZGFzaFBhdHRlcm4gPSBgLSR7bW19LSR7ZGR9YDsNCg0KICAgICAgICAgICAgICAgIC8vIFN5bmMgRHJvcGRvd25zIHdpdGggY3VycmVudCB2aWV3aW5nIGRhdGUNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcERheScpLnZhbHVlID0gdGFyZ2V0RGF0ZS5nZXREYXRlKCk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBNb250aCcpLnZhbHVlID0gdGFyZ2V0RGF0ZS5nZXRNb250aCgpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgaXNUb2RheSA9ICh0YXJnZXREYXRlLmdldE1vbnRoKCkgPT09IG5vdy5nZXRNb250aCgpICYmIHRhcmdldERhdGUuZ2V0RGF0ZSgpID09PSBub3cuZ2V0RGF0ZSgpKTsNCiAgICAgICAgICAgICAgICB0aXRsZURpdi5pbm5lclRleHQgPSBpc1RvZGF5ID8gYPCfjp7vuI8gVHJ1c3QgTWVtb3JpZXM6IE9uIFRoaXMgRGF5YCA6IGDwn46e77iPIE1lbW9yaWVzOiAke3RhcmdldERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1JTicsIHsgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycgfSl9YDsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVGltZWxpbmVVUkxfRmxhc2gpOw0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gZGF0YS5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGdyaWQuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzTWFwID0ge307DQogICAgICAgICAgICAgICAgbGV0IGZvdW5kTWF0Y2ggPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICgobGluZS5pbmNsdWRlcyhkb3RQYXR0ZXJuKSB8fCBsaW5lLmluY2x1ZGVzKGRhc2hQYXR0ZXJuKSkgJiYgbGluZS5tYXRjaCgvXC4oanBnfGpwZWd8cG5nKSQvaSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdlYlBhdGggPSBsaW5lLnRyaW0oKS5yZXBsYWNlKC9cXC9nLCAnLycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbFVybCA9IGRvbWFpbiArIGVuY29kZVVSSSh3ZWJQYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gd2ViUGF0aC5zcGxpdCgnLycpLnBvcCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IGZpbGVuYW1lLm1hdGNoKC9eKFxkezR9KS8pID8gZmlsZW5hbWUubWF0Y2goL14oXGR7NH0pLylbMV0gOiAiUGFzdCI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBldmVudE5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKC9eXGR7NH1bLi1dXGR7Mn1bLi1dXGR7Mn0tLywgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xzKlxkKlxzKlwuKGpwZ3xqcGVnfHBuZykkL2ksICcnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9eXGQrXHMrLywgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnROYW1lKSBldmVudE5hbWUgPSAiVHJ1c3QgQWN0aXZpdHkiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cEtleSA9IGAke3llYXJ9fCR7ZXZlbnROYW1lfWA7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50c01hcFtncm91cEtleV0pIGV2ZW50c01hcFtncm91cEtleV0gPSB7IHllYXIsIGV2ZW50TmFtZSwgcGhvdG9zOiBbXSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzTWFwW2dyb3VwS2V5XS5waG90b3MucHVzaChmdWxsVXJsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kTWF0Y2ggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kTWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0icGFkZGluZzo0MHB4OyB3aWR0aDoxMDAlOyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDpib2xkOyBiYWNrZ3JvdW5kOndoaXRlOyBib3JkZXItcmFkaXVzOjEwcHg7Ij5ObyByZWNvcmRzIGZvdW5kIGZvciAke3RhcmdldERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1JTicsIHsgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycgfSl9LjwvZGl2PmA7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXZlbnRzTWFwKS5zb3J0KChhLCBiKSA9PiBiLnNwbGl0KCd8JylbMF0gLSBhLnNwbGl0KCd8JylbMF0pLmZvckVhY2goa2V5ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gZXZlbnRzTWFwW2tleV07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXJkLmNsYXNzTmFtZSA9ICdmbGFzaGJhY2stY2FyZCc7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5UGhvdG9zID0gY3VycmVudFZpZXdMaW1pdCA9PT0gJ2FsbCcgPyBncm91cC5waG90b3MgOiBncm91cC5waG90b3Muc2xpY2UoMCwgMyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND4ke2dyb3VwLmV2ZW50TmFtZX0gJHtpc1RvZGF5ID8gYCgke2dyb3VwLnllYXJ9KWAgOiBgLSAke2dyb3VwLnllYXJ9YH08L2g0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsYXNoYmFjay1pbWctd3JhcHBlciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGlzcGxheVBob3Rvcy5tYXAoc3JjID0+IGA8aW1nIHNyYz0iJHtzcmN9IiBjbGFzcz0iZmxhc2hiYWNrLWltZyIgb25jbGljaz0id2luZG93Lm9wZW4odGhpcy5zcmMpIiBvbmVycm9yPSJ0aGlzLnN0eWxlLmRpc3BsYXk9J25vbmUnIj5gKS5qb2luKCcnKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5hcHBlbmRDaGlsZChjYXJkKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWREeW5hbWljRmxhc2hiYWNrcyk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCg0KICAgIDxzdHlsZT4NCiAgICAgICAgLmNoaXRyYW0tY29udGFpbmVyIHsNCiAgICAgICAgICAgIG1hcmdpbjogMjBweCBhdXRvOw0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZhZmE7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIG1heC13aWR0aDogOTUlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0taGVhZGVyIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdHZW9yZ2lhJywgc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDI2cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0tZ3JpZCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0tYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsMCwwLDAuMSk7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuOHMgZWFzZS1pbi1vdXQ7DQogICAgICAgIH0NCg0KICAgICAgICAubGFuZHNjYXBlLWJveCB7DQogICAgICAgICAgICB3aWR0aDogNDUwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAucG9ydHJhaXQtYm94IHsNCiAgICAgICAgICAgIHdpZHRoOiAzMjBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jaGl0cmFtLWltZyB7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDQwMHB4Ow0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jaGl0cmFtLWxhYmVsIHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDgwMHB4KSB7DQogICAgICAgICAgICAubGFuZHNjYXBlLWJveCwgLnBvcnRyYWl0LWJveCB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA0MDBweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWNvbnRhaW5lciI+DQogICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0taGVhZGVyIj7wn5WJ77iPIENoaXRyYSBQdXJhbmFtPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tZ3JpZCI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWJveCBsYW5kc2NhcGUtYm94Ij4NCiAgICAgICAgICAgICAgICA8aW1nIGlkPSJpbWdfbGFuZHNjYXBlIiBzcmM9IiIgY2xhc3M9ImNoaXRyYW0taW1nIiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLnNyYykiIHRpdGxlPSJWaWV3IEZ1bGwgSW1hZ2UiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tbGFiZWwiIGlkPSJsYmxfbGFuZHNjYXBlIj5Db25uZWN0aW5nIHRvIERpdmluZSBHYWxsZXJ5Li4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tYm94IHBvcnRyYWl0LWJveCI+DQogICAgICAgICAgICAgICAgPGltZyBpZD0iaW1nX3BvcnRyYWl0IiBzcmM9IiIgY2xhc3M9ImNoaXRyYW0taW1nIiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLnNyYykiIHRpdGxlPSJWaWV3IEZ1bGwgSW1hZ2UiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tbGFiZWwiIGlkPSJsYmxfcG9ydHJhaXQiPkNvbm5lY3RpbmcgdG8gRGl2aW5lIEdhbGxlcnkuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGNvbnN0IENISVRSQU1fQ09ORklHID0gew0KICAgICAgICAgICAgZm9sZGVyOiAiL1BhbmNoYW5nL0NoaXRocmFQdXJhbmFtLyIsDQogICAgICAgICAgICBsYW5kc2NhcGVDb3VudDogNDEsDQogICAgICAgICAgICBwb3J0cmFpdENvdW50OiA4MCwNCiAgICAgICAgICAgIGludGVydmFsOiA3MDAwDQogICAgICAgIH07DQoNCiAgICAgICAgbGV0IGN1cnJlbnRMID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQ0hJVFJBTV9DT05GSUcubGFuZHNjYXBlQ291bnQpICsgMTsNCiAgICAgICAgbGV0IGN1cnJlbnRQID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQ0hJVFJBTV9DT05GSUcucG9ydHJhaXRDb3VudCkgKyAxOw0KICAgICAgICBsZXQgZHJvcGJveFRva2VuID0gIiI7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0RHJvcGJveExpbmsoZmlsZU5hbWUpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9nZXRfdGVtcG9yYXJ5X2xpbmsnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGRyb3Bib3hUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBDSElUUkFNX0NPTkZJRy5mb2xkZXIgKyBmaWxlTmFtZSB9KQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubGluazsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJMaW5rIEZldGNoIEZhaWw6IiwgZmlsZU5hbWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiAiIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNoaXRyYW0oKSB7DQogICAgICAgICAgICAvLyAxLiBHZXQgQWNjZXNzIFRva2VuICh1c2luZyB5b3VyIGdsb2JhbCBNTVBUIGNvbnN0YW50cykNCiAgICAgICAgICAgIGlmICghZHJvcGJveFRva2VuKSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBkcm9wYm94VG9rZW4gPSBkLmFjY2Vzc190b2tlbjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMi4gUHJlcGFyZSBGaWxlIE5hbWVzDQogICAgICAgICAgICBjb25zdCBsTnVtID0gU3RyaW5nKGN1cnJlbnRMKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgY29uc3QgcE51bSA9IFN0cmluZyhjdXJyZW50UCkucGFkU3RhcnQoMiwgJzAnKTsNCg0KICAgICAgICAgICAgLy8gMy4gRmV0Y2ggVGVtcCBMaW5rcyBmcm9tIERyb3Bib3gNCiAgICAgICAgICAgIGNvbnN0IFtsVXJsLCBwVXJsXSA9IGF3YWl0IFByb21pc2UuYWxsKFsNCiAgICAgICAgICAgICAgICBnZXREcm9wYm94TGluayhgTCR7bE51bX0uanBnYCksDQogICAgICAgICAgICAgICAgZ2V0RHJvcGJveExpbmsoYFAke3BOdW19LmpwZ2ApDQogICAgICAgICAgICBdKTsNCg0KICAgICAgICAgICAgLy8gNC4gVXBkYXRlIFVJIChMYW5kc2NhcGUpDQogICAgICAgICAgICBjb25zdCBsSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19sYW5kc2NhcGUnKTsNCiAgICAgICAgICAgIGNvbnN0IGxCb3ggPSBsSW1nLnBhcmVudEVsZW1lbnQ7DQogICAgICAgICAgICBsQm94LnN0eWxlLm9wYWNpdHkgPSAwLjM7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAobFVybCkgbEltZy5zcmMgPSBsVXJsOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYmxfbGFuZHNjYXBlJykuaW5uZXJUZXh0ID0gYEthbmNoaSBNYWhhcGVyaXlhdmFgOw0KICAgICAgICAgICAgICAgIGxCb3guc3R5bGUub3BhY2l0eSA9IDE7DQogICAgICAgICAgICB9LCA4MDApOw0KDQogICAgICAgICAgICAvLyA1LiBVcGRhdGUgVUkgKFBvcnRyYWl0KQ0KICAgICAgICAgICAgY29uc3QgcEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdfcG9ydHJhaXQnKTsNCiAgICAgICAgICAgIGNvbnN0IHBCb3ggPSBwSW1nLnBhcmVudEVsZW1lbnQ7DQogICAgICAgICAgICBwQm94LnN0eWxlLm9wYWNpdHkgPSAwLjM7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocFVybCkgcEltZy5zcmMgPSBwVXJsOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYmxfcG9ydHJhaXQnKS5pbm5lclRleHQgPSBgS2FuY2hpIE1haGFwZXJpeWF2YWA7DQogICAgICAgICAgICAgICAgcEJveC5zdHlsZS5vcGFjaXR5ID0gMTsNCiAgICAgICAgICAgIH0sIDgwMCk7DQoNCiAgICAgICAgICAgIC8vIDYuIEluY3JlbWVudCBvciBSZXNldA0KICAgICAgICAgICAgY3VycmVudEwgPSBjdXJyZW50TCA+PSBDSElUUkFNX0NPTkZJRy5sYW5kc2NhcGVDb3VudCA/IDEgOiBjdXJyZW50TCArIDE7DQogICAgICAgICAgICBjdXJyZW50UCA9IGN1cnJlbnRQID49IENISVRSQU1fQ09ORklHLnBvcnRyYWl0Q291bnQgPyAxIDogY3VycmVudFAgKyAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gSW5pdGlhbGl6ZQ0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsNCiAgICAgICAgICAgIHVwZGF0ZUNoaXRyYW0oKTsNCiAgICAgICAgICAgIHNldEludGVydmFsKHVwZGF0ZUNoaXRyYW0sIENISVRSQU1fQ09ORklHLmludGVydmFsKTsNCiAgICAgICAgfSk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5tbXB0LWFyY2hpdmUtYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDI1cHg7DQogICAgICAgICAgICBtYXJnaW46IDMwcHggMTBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgwLDAsMCwwLjEpOw0KICAgICAgICB9DQoNCiAgICAgICAgLmFyY2hpdmUtaGVhZGVyIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmZmY1ZTY7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5hcmNoaXZlLWNvbnRyb2xzIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDE1cHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgIH0NCg0KICAgICAgICAjc2NyaXB0dXJlX2Ryb3Bkb3duIHsNCiAgICAgICAgICAgIHdpZHRoOiAzODBweDsNCiAgICAgICAgICAgIGhlaWdodDogNDVweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNGRjk5MzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmFmMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tYXJjaGl2ZS1kb3dubG9hZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjODAwMDAwIDAlLCAjNGEwMDAwIDEwMCUpOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgcGFkZGluZzogMTJweCAzMHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yczsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuYnRuLWFyY2hpdmUtZG93bmxvYWQ6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wMyk7DQogICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwwLDAsMC4yKTsNCiAgICAgICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0ibW1wdC1hcmNoaXZlLWJveCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImFyY2hpdmUtaGVhZGVyIj7wn5OcIFNjcmlwdHVyZXMgZnJvbSBNTVBUIEFyY2hpdmVzPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImFyY2hpdmUtY29udHJvbHMiPg0KICAgICAgICAgICAgPHNlbGVjdCBpZD0ic2NyaXB0dXJlX2Ryb3Bkb3duIj4NCiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIExvYWRpbmcgVGl0bGVzIGZyb20gRHJpdmUuLi4gLS08L29wdGlvbj4NCiAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFyY2hpdmUtZG93bmxvYWQiIG9uY2xpY2s9ImhhbmRsZUFyY2hpdmVEb3dubG9hZCgpIj7wn5OlIERvd25sb2FkIFBERjwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IG1hcmdpbi10b3A6IDE1cHg7Ij5Ob3RlOiBTY2FubmVkIHZlcnNpb25zIGFyZSBwcm92aWRlZCBmb3IgcGVyc29uYWwgc3Bpcml0dWFsIHN0dWR5LjwvcD4NCiAgICA8L2Rpdj4NCg0KDQogICAgPHNjcmlwdD4NCg0KICAgICAgICAvLyAtLS0gR09PR0xFIERSSVZFIEFSQ0hJVkUgTE9HSUMgLS0tDQogICAgICAgIC8vIFJFUExBQ0UgJ1lPVVJfQVBQU19TQ1JJUFRfVVJMJyB3aXRoIHRoZSBvbmUgeW91IGdldCBmcm9tIEdvb2dsZSBTY3JpcHQgRGVwbG95bWVudA0KICAgICAgICBjb25zdCBBUkNISVZFX0JSSURHRV9VUkwgPSAiaHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J3cTF3Tkw3eGZSS1pxU3AxYzVVR0doZW5iX0lsMlhZQ3NjR1BzcGtOMEF6eFFyX2xXeUlnakpILUdmY0k3THVWakpmQS9leGVjIjsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBpbml0TU1QVEFyY2hpdmUoKSB7DQogICAgICAgICAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JpcHR1cmVfZHJvcGRvd24nKTsNCiAgICAgICAgICAgIGlmICghZHJvcGRvd24pIHJldHVybjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAncmVkaXJlY3Q6IGZvbGxvdycgaXMgcmVxdWlyZWQgZm9yIEdvb2dsZSBBcHBzIFNjcmlwdCBXZWIgQXBwcw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goQVJDSElWRV9CUklER0VfVVJMLCB7IHJlZGlyZWN0OiAiZm9sbG93IiB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBhIFNjcmlwdHVyZSAtLTwvb3B0aW9uPic7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj5ObyBmaWxlcyBmb3VuZCBpbiBmb2xkZXI8L29wdGlvbj4nOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICAvL29wdC52YWx1ZSA9IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/ZXhwb3J0PWRvd25sb2FkJmlkPSR7ZmlsZS5pZH1gOw0KICAgICAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL3UvMC91Yz9pZD0ke2ZpbGUuaWR9JmV4cG9ydD1kb3dubG9hZGA7DQogICAgICAgICAgICAgICAgICAgIG9wdC50ZXh0Q29udGVudCA9IGZpbGUubmFtZTsNCiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkFyY2hpdmUgRXJyb3I6IiwgZXJyKTsNCiAgICAgICAgICAgICAgICBkcm9wZG93bi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj5BcmNoaXZlIE9mZmxpbmUgKENoZWNrIFVSTCk8L29wdGlvbj4nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICBmdW5jdGlvbiBoYW5kbGVBcmNoaXZlRG93bmxvYWQoKSB7DQogICAgICAgICAgICBjb25zdCB1cmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyaXB0dXJlX2Ryb3Bkb3duJykudmFsdWU7DQogICAgICAgICAgICBpZiAoIXVybCkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJQbGVhc2Ugc2VsZWN0IGEgc2NyaXB0dXJlIHRpdGxlIGZpcnN0LiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgRmlsZSBJRCBmcm9tIHRoZSBVUkwNCiAgICAgICAgICAgIGNvbnN0IGZpbGVJZCA9IHVybC5zcGxpdCgnaWQ9JylbMV07DQoNCiAgICAgICAgICAgIC8vIFdlIHVzZSBhICJieXBhc3MiIFVSTCBzdHJ1Y3R1cmUuDQogICAgICAgICAgICAvLyBUaGlzIHRlbGxzIEdvb2dsZSB0byBza2lwIHRoZSBjb25maXJtYXRpb24gcGFnZSBieSBwcmUtY29uZmlybWluZyB0aGUgZG93bmxvYWQuDQogICAgICAgICAgICBjb25zdCBmb3JjZURvd25sb2FkVXJsID0gYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9leHBvcnQ9ZG93bmxvYWQmaWQ9JHtmaWxlSWR9JmNvbmZpcm09dGA7DQoNCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGZvcmNlRG93bmxvYWRVcmwsICdfYmxhbmsnKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gQWRkIHRoaXMgdG8geW91ciBleGlzdGluZyB3aW5kb3cubG9hZCBsaXN0ZW5lciBvciBjcmVhdGUgYSBuZXcgb25lOg0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGluaXRNTVBUQXJjaGl2ZSk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8ZGl2IGNsYXNzPSJtbXB0LXVuaWZpZWQtYm94IiBpZD0iYXVkaW9fYXJjaGl2ZV9zZWN0aW9uIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2ZS1oZWFkZXIiPg0KICAgICAgICAgICAg8J+OpyBBdWRpbyBCb29rcyBGcm9tIE1NUFQgQXJjaGl2ZXMNCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogMTVweDsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbjogMjBweCAwOyI+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDVweDsiPkJvb2s8L2xhYmVsPg0KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImF1ZGlvX2Jvb2tfZHJvcGRvd24iIG9uY2hhbmdlPSJsb2FkQXVkaW9DaGFwdGVycygpIiBzdHlsZT0ibWluLXdpZHRoOiAyMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA0cHg7IHBhZGRpbmc6IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJhY2tncm91bmQ6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IEJvb2sgLS08L29wdGlvbj4NCiAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDVweDsiPkNoYXB0ZXI8L2xhYmVsPg0KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImF1ZGlvX2NoYXB0ZXJfZHJvcGRvd24iIGRpc2FibGVkIG9uY2hhbmdlPSJ1cGRhdGVBdWRpb1VJKCkiIHN0eWxlPSJtaW4td2lkdGg6IDMwMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogNXB4OyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQ2hhcHRlciAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuX2F1ZGlvX3BsYXkiIGRpc2FibGVkIG9uY2xpY2s9InBsYXlBdWRpb0Jvb2soKSIgY2xhc3M9ImJ0bi1ybiIgc3R5bGU9ImJhY2tncm91bmQ6ICMyOGE3NDU7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAwIDIwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyI+4pa2IFBsYXk8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fYXVkaW9fc3RvcCIgZGlzYWJsZWQgb25jbGljaz0ic3RvcEF1ZGlvQm9vaygpIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iYmFja2dyb3VuZDogI2QzMmYyZjsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDAgMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7Ij7ilqAgU3RvcDwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9ImF1ZGlvX3BsYXllcl9jb250YWluZXIiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogcmVsYXRpdmU7IG1hcmdpbjogMTBweCBhdXRvOyBib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJhY2tncm91bmQ6ICMwMDA7IGhlaWdodDogODVweDsgbWF4LXdpZHRoOiA5MDBweDsiPg0KICAgICAgICAgICAgPGRpdiBpZD0icGxheV9pbnN0cnVjdGlvbiIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICNmZjk5MzM7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE0cHg7IHRvcDogMTBweDsgei1pbmRleDogNTsgcG9pbnRlci1ldmVudHM6IG5vbmU7Ij4NCiAgICAgICAgICAgICAgICBDbGljayBQbGF5IG9uIHRoZSBwbGF5ZXIgYmVsb3cgdG8gc3RhcnQNCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGlmcmFtZSBpZD0iZ29vZ2xlX2F1ZGlvX2lmcmFtZSIgc3JjPSIiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjE2MCIgZnJhbWVib3JkZXI9IjAiIHN0eWxlPSJtYXJnaW4tdG9wOiAtMzVweDsiPjwvaWZyYW1lPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJhdWRpb19zdGF0dXMiIHN0eWxlPSJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjODAwMDAwOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLXRvcDogMTBweDsiPkNvbm5lY3RpbmcgdG8gQXJjaGl2ZS4uLjwvZGl2Pg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBTY3JpcHQgbG9naWMgcmVtYWlucyB0aGUgc2FtZSAocmVzdG9yZXMgdGhlIGNvbm5lY3RpbmcgbWVzc2FnZSkNCiAgICAgICAgY29uc3QgR09PR0xFX0FVRElPX1VSTCA9ICJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYnhHSTJBZ3dkc2dxWi1xRlhFeG1NTVlFeU80S19hRm0tN0gzQVNubGRLZkFUeFQ4Ry1HX3NidUhvSzQwdHF1X2JjLS9leGVjIjsNCiAgICAgICAgbGV0IGF1ZGlvTGliRGF0YSA9IFtdOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRBdWRpb0FyY2hpdmUoKSB7DQogICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fc3RhdHVzJyk7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goR09PR0xFX0FVRElPX1VSTCk7DQogICAgICAgICAgICAgICAgYXVkaW9MaWJEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tTZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fYm9va19kcm9wZG93bicpOw0KICAgICAgICAgICAgICAgIGJvb2tTZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IEJvb2sgLS08L29wdGlvbj4nOw0KICAgICAgICAgICAgICAgIGF1ZGlvTGliRGF0YS5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBpZHg7DQogICAgICAgICAgICAgICAgICAgIG9wdC50ZXh0Q29udGVudCA9IGl0ZW0uYm9va05hbWU7DQogICAgICAgICAgICAgICAgICAgIGJvb2tTZWwuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBzdGF0dXMuaW5uZXJUZXh0ID0gIkFyY2hpdmUgUmVhZHkuIjsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBzdGF0dXMuaW5uZXJUZXh0ID0gIkFyY2hpdmUgY29ubmVjdGlvbiBlcnJvci4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaW5pdEF1ZGlvQXJjaGl2ZSgpOw0KDQogICAgICAgIGZ1bmN0aW9uIGxvYWRBdWRpb0NoYXB0ZXJzKCkgew0KICAgICAgICAgICAgY29uc3QgaWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2Jvb2tfZHJvcGRvd24nKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGNoYXBTZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpOw0KICAgICAgICAgICAgc3RvcEF1ZGlvQm9vaygpOw0KICAgICAgICAgICAgY2hhcFNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQ2hhcHRlciAtLTwvb3B0aW9uPic7DQogICAgICAgICAgICBpZiAoaWR4ID09PSAiIikgeyBjaGFwU2VsLmRpc2FibGVkID0gdHJ1ZTsgcmV0dXJuOyB9DQogICAgICAgICAgICBhdWRpb0xpYkRhdGFbaWR4XS5jaGFwdGVycy5mb3JFYWNoKGZpbGUgPT4gew0KICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBmaWxlLmlkOw0KICAgICAgICAgICAgICAgIG9wdC50ZXh0Q29udGVudCA9IGZpbGUubmFtZS5yZXBsYWNlKC9cLlteLy5dKyQvLCAiIik7DQogICAgICAgICAgICAgICAgY2hhcFNlbC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBjaGFwU2VsLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVBdWRpb1VJKCkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9hdWRpb19wbGF5JykuZGlzYWJsZWQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2NoYXB0ZXJfZHJvcGRvd24nKS52YWx1ZSA9PT0gIiIpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gcGxheUF1ZGlvQm9vaygpIHsNCiAgICAgICAgICAgIGNvbnN0IGZpbGVJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19jaGFwdGVyX2Ryb3Bkb3duJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fcGxheWVyX2NvbnRhaW5lcicpOw0KICAgICAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dvb2dsZV9hdWRpb19pZnJhbWUnKTsNCiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19zdGF0dXMnKTsNCiAgICAgICAgICAgIGlmICghZmlsZUlkKSByZXR1cm47DQogICAgICAgICAgICBpZnJhbWUuc3JjID0gYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS9maWxlL2QvJHtmaWxlSWR9L3ByZXZpZXdgOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9hdWRpb19wbGF5JykuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9hdWRpb19zdG9wJykuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIHN0YXR1cy5pbm5lclRleHQgPSAiU3RyZWFtaW5nOiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2NoYXB0ZXJfZHJvcGRvd24nKS5zZWxlY3RlZE9wdGlvbnNbMF0udGV4dDsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHN0b3BBdWRpb0Jvb2soKSB7DQogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fcGxheWVyX2NvbnRhaW5lcicpOw0KICAgICAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dvb2dsZV9hdWRpb19pZnJhbWUnKTsNCiAgICAgICAgICAgIGlmcmFtZS5zcmMgPSAiIjsNCiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9hdWRpb19zdG9wJykuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX3N0YXR1cycpLmlubmVyVGV4dCA9ICJBcmNoaXZlIFJlYWR5LiI7DQogICAgICAgICAgICB1cGRhdGVBdWRpb1VJKCk7DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxkaXYgaWQ9InZpZGVvLWFyY2hpdmUtYm94IiBjbGFzcz0ibW1wdC11bmlmaWVkLWJveCIgc3R5bGU9ImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgd2lkdGg6IDEwMCU7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7IHBhZGRpbmc6IDI1cHg7IGJvcmRlci1yYWRpdXM6IDEycHg7IGJhY2tncm91bmQ6ICNmZmY7IG1hcmdpbjogMTVweCAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsiPg0KDQogICAgICAgIDxoMiBzdHlsZT0iY29sb3I6ICM4MDAwMDA7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAyNHB4OyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAxNXB4OyI+DQogICAgICAgICAgICDwn46sIFZpZGVvcyBGcm9tIE1NUFQgQXJjaGl2ZXMNCiAgICAgICAgPC9oMj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbTogMTVweDsgbGluZS1oZWlnaHQ6IDEuNjsiPg0KICAgICAgICAgICAgPHN0cm9uZyBzdHlsZT0iY29sb3I6ICM4MDAwMDA7IGZvbnQtc2l6ZTogMTdweDsiPk5vdGU6PC9zdHJvbmc+DQogICAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1zaXplOiAxNnB4OyI+U2VsZWN0IHRoZSByZXF1aXJlZCBlcGlzb2RlIGZyb20gdGhlIHBsYXlsaXN0IGljb24gYXQgdGhlIHRvcC1yaWdodCBjb3JuZXIgb2YgdGhlIHZpZGVvIHdpbmRvdy48L3N0cm9uZz4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxNXB4OyBmbGV4LXdyYXA6IHdyYXA7Ij4NCiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBmb250LXNpemU6IDE2cHg7Ij5Ub3BpYzo8L2xhYmVsPg0KICAgICAgICAgICAgPHNlbGVjdCBpZD0idG9waWNfc2VsZWN0IiBvbmNoYW5nZT0iUHJlcGFyZVZpZGVvKCkiIHN0eWxlPSJ3aWR0aDogMzIwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyOiAxcHggc29saWQgIzgwMDAwMDsgYm9yZGVyLXJhZGl1czogNXB4OyBwYWRkaW5nOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiAjZmZmOyI+DQogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBMb2FkaW5nIEFyY2hpdmUgLS08L29wdGlvbj4NCiAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJMYXVuY2hJZnJhbWUoKSIgc3R5bGU9ImJhY2tncm91bmQ6ICMyOGE3NDU7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMHB4IDMwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNXB4OyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOyI+4pa2IFBsYXk8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9zdG9wIiBvbmNsaWNrPSJTdG9wSWZyYW1lKCkiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBiYWNrZ3JvdW5kOiAjZGMzNTQ1OyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMTBweCAzMHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTVweDsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTsiPuKcliBTdG9wPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9IkRpdlZpZFRpdGxlMSIgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDIwcHg7IG1hcmdpbi1ib3R0b206IDVweDsgbWluLWhlaWdodDogMjZweDsiPlJlYWR5LjwvZGl2Pg0KICAgICAgICA8ZGl2IGlkPSJEaXZUaW1lciIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgY29sb3I6IGJsdWU7IHRleHQtYWxpZ246IGNlbnRlcjsgaGVpZ2h0OiAyMHB4OyBmb250LXdlaWdodDogYm9sZDsiPjwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9InZpZF9jb250YWluZXIiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW46IDIwcHggYXV0byAwIGF1dG87IHdpZHRoOiAxMDAlOyBtYXgtd2lkdGg6IDU2MHB4OyBhc3BlY3QtcmF0aW86IDE2Lzk7IGJhY2tncm91bmQ6ICMwMDA7IGJvcmRlcjogNHB4IHNvbGlkICM4MDAwMDA7IGJvcmRlci1yYWRpdXM6IDhweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYm94LXNoYWRvdzogMCA2cHggMThweCByZ2JhKDAsMCwwLDAuMyk7Ij4NCiAgICAgICAgICAgIDxpZnJhbWUgaWQ9Imlmcl9tYWluIiBuYW1lPSJpZnJfbWFpbiIgc3JjPSJhYm91dDpibGFuayIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZnJhbWVib3JkZXI9IjAiDQogICAgICAgICAgICAgICAgICAgIGFsbG93PSJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgY2xpcGJvYXJkLXdyaXRlOyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlOyB3ZWItc2hhcmUiDQogICAgICAgICAgICAgICAgICAgIHJlZmVycmVycG9saWN5PSJzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgdmFyIFRhcmdldFVybCA9ICIiOw0KICAgICAgICB2YXIgYXJjaGl2ZURhdGEgPSBbXTsNCiAgICAgICAgY29uc3QgaWZyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lmcl9tYWluJyk7DQogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRfY29udGFpbmVyJyk7DQogICAgICAgIGNvbnN0IHN0b3BCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3N0b3AnKTsNCiAgICAgICAgY29uc3QgREFUQV9TT1VSQ0UgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9qa2tic2JoemRkandyam56czgwZnUvVmlkZW9zLnR4dD9ybGtleT1zNHVjaGlwNG90YnRuNHc4N3c4eDl6aGtqJmRsPTEiOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIExvYWRBcmNoaXZlKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKERBVEFfU09VUkNFKTsNCiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi0xNmxlJykuZGVjb2RlKGJ1ZmZlcik7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnJlcGxhY2UoL15cdUZFRkYvLCAnJykuc3BsaXQoL1xyP1xuLykuZmlsdGVyKGwgPT4gbC5pbmNsdWRlcygnLCcpKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3BpY19zZWxlY3QnKTsNCiAgICAgICAgICAgICAgICBzZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvb3NlIGEgVG9waWMgLS08L29wdGlvbj4nOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaCgobGluZSwgaSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJywnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDIpIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbFVybCA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdElkID0gZnVsbFVybC5tYXRjaCgvWz8mXWxpc3Q9KFteJl0rKS8pPy5bMV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpVG9rZW4gPSBmdWxsVXJsLm1hdGNoKC9bPyZdc2k9KFteJl0rKS8pPy5bMV0gfHwgIlZ5M0Z3VWp0U3RmUThYNnAiOw0KDQogICAgICAgICAgICAgICAgICAgIGFyY2hpdmVEYXRhLnB1c2goeyBuYW1lOiBwYXJ0c1swXS50cmltKCksIGlkOiBsaXN0SWQsIHNpOiBzaVRva2VuIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gaTsgb3B0LnRleHRDb250ZW50ID0gcGFydHNbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBzZWwuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VmlkVGl0bGUxJykuaW5uZXJUZXh0ID0gIkRhdGEgTG9hZCBFcnJvciI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBQcmVwYXJlVmlkZW8oKSB7DQogICAgICAgICAgICBjb25zdCBpZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9waWNfc2VsZWN0JykudmFsdWU7DQogICAgICAgICAgICBpZiAoaWR4ID09PSAiIikgeyBUYXJnZXRVcmwgPSAiIjsgcmV0dXJuOyB9DQogICAgICAgICAgICBjb25zdCBpdGVtID0gYXJjaGl2ZURhdGFbaWR4XTsNCiAgICAgICAgICAgIFRhcmdldFVybCA9ICJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC92aWRlb3Nlcmllcz9zaT0iICsgaXRlbS5zaSArICImbGlzdD0iICsgaXRlbS5pZCArICImYXV0b3BsYXk9MSI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VmlkVGl0bGUxJykuaW5uZXJUZXh0ID0gaXRlbS5uYW1lOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gTGF1bmNoSWZyYW1lKCkgew0KICAgICAgICAgICAgaWYgKFRhcmdldFVybCA9PT0gIiIpIHsgYWxlcnQoIlBsZWFzZSBzZWxlY3QgYSB0b3BpYyIpOyByZXR1cm47IH0NCiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIHN0b3BCdG4uc3R5bGUuZGlzcGxheSA9ICJpbmxpbmUtYmxvY2siOw0KICAgICAgICAgICAgaWZyLnNyYyA9ICJhYm91dDpibGFuayI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VGltZXInKS5pbm5lclRleHQgPSAiRXN0YWJsaXNoaW5nIENvbm5lY3Rpb24uLi4iOw0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgaWZyLnNyYyA9IFRhcmdldFVybDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VGltZXInKS5pbm5lclRleHQgPSAiIjsNCiAgICAgICAgICAgIH0sIDEwMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gU3RvcElmcmFtZSgpIHsNCiAgICAgICAgICAgIGlmci5zcmMgPSAiYWJvdXQ6YmxhbmsiOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBzdG9wQnRuLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VGltZXInKS5pbm5lclRleHQgPSAiUGxheWVyIFN0b3BwZWQuIjsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VGltZXInKS5pbm5lclRleHQgPSAiIjsgfSwgMjAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICBMb2FkQXJjaGl2ZSgpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPGRpdiBjbGFzcz0ibW1wdC11bmlmaWVkLWJveCIgaWQ9InBhbmNoYW5nX3NlY3Rpb24iIHN0eWxlPSJib3JkZXItY29sb3I6ICNmZjk5MzM7Ij4NCiAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiAyNHB4OyBjb2xvcjogIzgwMDAwMDsgZm9udC1mYW1pbHk6ICdHZW9yZ2lhJywgc2VyaWY7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAyMHB4OyI+DQogICAgICAgICAgICDwn5WJ77iPIFRvZGF5J3MgUGFuY2hhbmcNCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0icGFuY2hhbmdfY29udGVudCI+DQogICAgICAgICAgICA8ZGl2IGlkPSJwYW5jaGFuZ19sb2FkaW5nIiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjNjY2OyI+RmV0Y2hpbmcgQWxtYW5hYy4uLjwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGlkPSJwYW5jaGFuZ19kaXNwbGF5IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPg0KICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iZGF0ZS10YWJsZSIgc3R5bGU9Im1hcmdpbjogMCBhdXRvIDIwcHggYXV0bzsgbWF4LXdpZHRoOiA2MDBweDsgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsiPg0KICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGlkPSJwYW5faGVhZGVyX2RhdGUiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjODAwMDAwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGZvbnQtc2l6ZTogMThweDsiPjwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDI4MHB4LCAxZnIpKTsgZ2FwOiAxNXB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbi1jYXJkIiBzdHlsZT0iYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmZGU2OyBwYWRkaW5nOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY5OTMzOyBtYXJnaW4tYm90dG9tOiA4cHg7Ij4xLiBUSVRISTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV90aXRoaSIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTogMTNweDsiPjwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbi1jYXJkIiBzdHlsZT0iYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmZGU2OyBwYWRkaW5nOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY5OTMzOyBtYXJnaW4tYm90dG9tOiA4cHg7Ij4yLiBOQUtTSEFUUkE8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBpZD0idGFibGVfbmFrc2hhdHJhIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjMuIFlPR0E8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBpZD0idGFibGVfeW9nYSIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTogMTNweDsiPjwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbi1jYXJkIiBzdHlsZT0iYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmZGU2OyBwYWRkaW5nOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY5OTMzOyBtYXJnaW4tYm90dG9tOiA4cHg7Ij40LiBLQVJBTkE8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBpZD0idGFibGVfa2FyYW5hIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjUuIFZBUkEgKERheSk8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3BsYXlfdmFyYSIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHBhZGRpbmc6IDVweDsiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgLy8gRW5zdXJlIHRoaXMgaXMgYXQgdGhlIHRvcCBvZiB5b3VyIHNjcmlwdA0KICAgICAgICBjb25zdCBQQU5DSEFOR19CQVNFID0gJy9QYW5jaGFuZyc7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZERhaWx5UGFuY2hhbmcoKSB7DQogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgeXl5eSA9IG5vdy5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgY29uc3QgbW0gPSBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgY29uc3QgZGQgPSBTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgIGNvbnN0IHRvZGF5SVNPID0gYCR7eXl5eX0tJHttbX0tJHtkZH1gOw0KDQogICAgICAgICAgICBjb25zdCBkYWlseVBhdGggPSBgJHtQQU5DSEFOR19CQVNFfS8ke3l5eXl9LyR7bW19LyR7eXl5eX0ke21tfSR7ZGR9Lmh0bWxgOw0KDQogICAgICAgICAgICBjb25zdCBrYWFsYVRpbWluZ3MgPSB7DQogICAgICAgICAgICAgICAgJ1N1bmRheSc6IHsgcmFodTogJzQ6MzAgcG0gdG8gNjowMCBwbScsIGd1bGlrYTogJzM6MDAgcG0gdG8gNDozMCBwbScsIHlhbTogJzEyOjAwIHBtIHRvIDE6MzAgcG0nIH0sDQogICAgICAgICAgICAgICAgJ01vbmRheSc6IHsgcmFodTogJzc6MzAgYW0gdG8gOTowMCBhbScsIGd1bGlrYTogJzE6MzAgcG0gdG8gMzowMCBwbScsIHlhbTogJzEwOjMwIGFtIHRvIDEyOjAwIHBtJyB9LA0KICAgICAgICAgICAgICAgICdUdWVzZGF5JzogeyByYWh1OiAnMzowMCBwbSB0byA0OjMwIHBtJywgZ3VsaWthOiAnMTI6MDAgcG0gdG8gMTozMCBwbScsIHlhbTogJzk6MDAgYW0gdG8gMTA6MzAgYW0nIH0sDQogICAgICAgICAgICAgICAgJ1dlZG5lc2RheSc6IHsgcmFodTogJzEyOjAwIHBtIHRvIDE6MzAgcG0nLCBndWxpa2E6ICcxMDozMCBhbSB0byAxMjowMCBwbScsIHlhbTogJzc6MzAgYW0gdG8gOTowMCBhbScgfSwNCiAgICAgICAgICAgICAgICAnVGh1cnNkYXknOiB7IHJhaHU6ICcxOjMwIHBtIHRvIDM6MDAgcG0nLCBndWxpa2E6ICc5OjAwIGFtIHRvIDEwOjMwIGFtJywgeWFtOiAnNjowMCBhbSB0byA3OjMwIGFtJyB9LA0KICAgICAgICAgICAgICAgICdGcmlkYXknOiB7IHJhaHU6ICcxMDozMCBhbSB0byAxMjowMCBwbScsIGd1bGlrYTogJzc6MzAgYW0gdG8gOTowMCBhbScsIHlhbTogJzM6MDAgcG0gdG8gNDozMCBwbScgfSwNCiAgICAgICAgICAgICAgICAnU2F0dXJkYXknOiB7IHJhaHU6ICc5OjAwIGFtIHRvIDEwOjMwIGFtJywgZ3VsaWthOiAnNjowMCBhbSB0byA3OjMwIGFtJywgeWFtOiAnMTozMCBwbSB0byAzOjAwIHBtJyB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIFN1bnJpc2UvU3Vuc2V0IGZvciBDaGVubmFpIGZyb20gT3Blbi1NZXRlbyBBUEkNCiAgICAgICAgICAgICAgICBsZXQgc3VuSW5mbyA9ICJMb2FkaW5nIHRpbWVzLi4uIjsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW5SZXMgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkub3Blbi1tZXRlby5jb20vdjEvZm9yZWNhc3Q/bGF0aXR1ZGU9MTMuMDgyNyZsb25naXR1ZGU9ODAuMjcwNyZkYWlseT1zdW5yaXNlLHN1bnNldCZ0aW1lem9uZT1hdXRvJnN0YXJ0X2RhdGU9JHt0b2RheUlTT30mZW5kX2RhdGU9JHt0b2RheUlTT31gKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VuRGF0YSA9IGF3YWl0IHN1blJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdFRpbWUgPSAodCkgPT4gbmV3IERhdGUodCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdlbi1JTicsIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JywgaG91cjEyOiB0cnVlIH0pOw0KICAgICAgICAgICAgICAgICAgICBzdW5JbmZvID0gYFN1bnJpc2UgaXMgYXQgPGI+JHtmb3JtYXRUaW1lKHN1bkRhdGEuZGFpbHkuc3VucmlzZVswXSl9PC9iPiBhbmQgU3Vuc2V0IGlzIGF0IDxiPiR7Zm9ybWF0VGltZShzdW5EYXRhLmRhaWx5LnN1bnNldFswXSl9PC9iPmA7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgIHN1bkluZm8gPSAiU3VucmlzZSBhbmQgU3Vuc2V0IGRhdGEgY3VycmVudGx5IHVuYXZhaWxhYmxlIjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBEcm9wYm94IEZldGNoIExvZ2ljDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5QYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHRva2VuUGFyYW1zIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9IHRva2VuRGF0YS5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZGFpbHlQYXRoIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcigiU3luY2luZy4uLiIpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd0RhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSByYXdEYXRhLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpOw0KDQogICAgICAgICAgICAgICAgLy8gLS0tIENPTVBBQ1QgSEVBREVSIChOTyBJQ09OKSAtLS0NCiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuX2hlYWRlcl9kYXRlJyk7DQogICAgICAgICAgICAgICAgY29uc3QgdmFyYU5hbWUgPSBwYXJ0c1sxXSA/IHBhcnRzWzFdLnNwbGl0KCc6JylbMF0udHJpbSgpIDogIiI7DQoNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZCA9ICJsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjODAwMDAwIDAlLCAjNGEwMDAwIDEwMCUpIjsNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICIxNXB4IjsNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjEwcHggMTBweCAwIDAiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSAiY2VudGVyIjsNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuYm9yZGVyQm90dG9tID0gIjNweCBzb2xpZCAjRkZENzAwIjsNCg0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogYmFzZWxpbmU7IGdhcDogMTVweDsgbWFyZ2luLWJvdHRvbTogNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC1zaXplOiAyNnB4OyBmb250LXdlaWdodDogODAwOyBjb2xvcjogI0ZGRDcwMDsgdGV4dC1zaGFkb3c6IDJweCAycHggNHB4IHJnYmEoMCwwLDAsMC41KTsiPiR7cGFydHNbMF19PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMjBweDsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICNGRkZGRkY7IGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0ZGRDcwMDsgcGFkZGluZy1sZWZ0OiAxNXB4OyI+JHt2YXJhTmFtZX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDJweCAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBib3JkZXItcmFkaXVzOiAyMHB4OyBmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRDcwMDsgbGV0dGVyLXNwYWNpbmc6IDAuNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUSU1FIFNQRUNJRklFRCBBUkUgRU5EIFRJTUUgSU4gSVNUDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gVEFCTEVTIFBPUFVMQVRJT04gLS0tDQogICAgICAgICAgICAgICAgY29uc3QgZmlsbFRhYmxlID0gKGlkLCBzdGFydCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0YmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghdGJsKSByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIHRibC5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYyA9IHBhcnRzW3N0YXJ0ICsgaV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjICYmIHJlYy5pbmNsdWRlcygnOicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHJlYy5zdWJzdHJpbmcoMCwgcmVjLmluZGV4T2YoJzonKSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSByZWMuc3Vic3RyaW5nKHJlYy5pbmRleE9mKCc6JykgKyAxKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICIiICYmICh0aW1lID09PSAiIiB8fCB0aW1lID09PSAiLS06LS0iKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJvdyA9IHRibC5pbnNlcnRSb3coKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuaW5uZXJIVE1MID0gYDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6NzAwOyBwYWRkaW5nOjZweCA0cHg7IGNvbG9yOiMzMzM7IGZvbnQtc2l6ZToxNHB4OyB3aWR0aDo2NSU7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4ke25hbWV9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgY29sb3I6I2QzMmYyZjsgcGFkZGluZzo2cHggNHB4OyBmb250LWZhbWlseTptb25vc3BhY2U7IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+JHt0aW1lfTwvdGQ+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX3RpdGhpJywgMyk7DQogICAgICAgICAgICAgICAgZmlsbFRhYmxlKCd0YWJsZV9uYWtzaGF0cmEnLCA3KTsNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX3lvZ2EnLCAxMSk7DQogICAgICAgICAgICAgICAgZmlsbFRhYmxlKCd0YWJsZV9rYXJhbmEnLCAxNSk7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheV92YXJhJykuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICNmZmY5YzQ7IGJvcmRlcjogMnB4IHNvbGlkICNGRkQ3MDA7IHBhZGRpbmc6IDhweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjb2xvcjogIzgwMDAwMDsgZm9udC1zaXplOiAyMnB4OyBmb250LXdlaWdodDogOTAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4ke3ZhcmFOYW1lfTwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gSElORFUgQ0FMRU5EQVIgJiBLQUFMQVMgLS0tDQogICAgICAgICAgICAgICAgY29uc3QgdG90YWxQYXJ0cyA9IHBhcnRzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxMdW5hciA9IHBhcnRzW3RvdGFsUGFydHMgLSAyXSB8fCAnLS0nOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbFNvbGFyID0gcGFydHNbdG90YWxQYXJ0cyAtIDNdIHx8ICctLSc7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsTWFsYXlhbGFtID0gcGFydHNbdG90YWxQYXJ0cyAtIDRdIHx8ICctLSc7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsVGFtaWwgPSBwYXJ0c1t0b3RhbFBhcnRzIC0gNV0gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB0b2RheUthYWxhID0ga2FhbGFUaW1pbmdzW3ZhcmFOYW1lXSB8fCB7IHJhaHU6ICctLScsIGd1bGlrYTogJy0tJywgeWFtOiAnLS0nIH07DQoNCiAgICAgICAgICAgICAgICBsZXQgY2FsZW5kYXJEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGluZHVfY2FsZW5kYXJfc2VjdGlvbicpOw0KICAgICAgICAgICAgICAgIGlmICghY2FsZW5kYXJEaXYpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJEaXYuaWQgPSAnaGluZHVfY2FsZW5kYXJfc2VjdGlvbic7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5jaGFuZ19kaXNwbGF5JykuYXBwZW5kQ2hpbGQoY2FsZW5kYXJEaXYpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNhbGVuZGFyRGl2LmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogIzgwMDAwMDsgY29sb3I6ICNGRkQ3MDA7IHBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNnB4OyBtYXJnaW4tdG9wOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNGRkQ3MDA7Ij5IaW5kdSBDYWxlbmRhciBmb3IgVG9kYXk8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgYmFja2dyb3VuZDogI2ZmZmRlNzsgYm9yZGVyOiAxcHggc29saWQgI0ZGRDcwMDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRhbWlsPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dmFsVGFtaWx9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5NYWxheWFsYW08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxNYWxheWFsYW19PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlNvbGFyPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dmFsU29sYXJ9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5MdW5hcjwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDo4MDA7Ij4ke3ZhbEx1bmFyfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjODAwMDAwOyBjb2xvcjogI0ZGRDcwMDsgcGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE2cHg7IGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOyBib3JkZXItYm90dG9tOiAycHggc29saWQgI0ZGRDcwMDsiPlRvZGF5J3MgS2FhbGFzPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGJhY2tncm91bmQ6ICNmZmZkZTc7IGJvcmRlcjogMXB4IHNvbGlkICNGRkQ3MDA7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SYWh1IEthYWxhPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiNkMzJmMmY7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dG9kYXlLYWFsYS5yYWh1fTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5HdWxpa2EgS2FhbGE8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6I2QzMmYyZjsgZm9udC13ZWlnaHQ6ODAwOyI+JHt0b2RheUthYWxhLmd1bGlrYX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+WWFtYW5nYWRhPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiNkMzJmMmY7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dG9kYXlLYWFsYS55YW19PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzRhMDAwMCwgIzgwMDAwMCwgIzRhMDAwMCk7IGNvbG9yOiAjRkZENzAwOyBwYWRkaW5nOiAxMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjIpOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUb2RheSBpbiBDaGVubmFpOiAke3N1bkluZm99DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuY2hhbmdfbG9hZGluZycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbmNoYW5nX2Rpc3BsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlN5bmMgRmFpbGVkIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIENhbGwgaXQgYXQgdGhlIHZlcnkgYm90dG9tIG9mIHlvdXIgc2NyaXB0IHRhZ3MNCiAgICAgICAgbG9hZERhaWx5UGFuY2hhbmcoKTsNCg0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAubHVuYXItc2VjdGlvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAubHVuYXItaGVhZCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgLyogTWF0Y2hlcyB5b3VyIGgzIGZvbnQtc2l6ZSBleGFjdGx5ICovDQogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2VlZTsNCiAgICAgICAgICAgIG1hcmdpbjogMCAwIDE1cHg7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLWZsZXggew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTBweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci1pdGVtIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICAvKiBCcmlnaHQgQ29udHJhc3QgVGhlbWU6IERlZXAgTmF2eSBiYWNrZ3JvdW5kIHdpdGggR29sZC9XaGl0ZSB0ZXh0ICovDQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDAzMzY2Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggNHB4Ow0KICAgICAgICAgICAgbWluLWhlaWdodDogOTBweDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMTBweCByZ2JhKDAsMCwwLDAuNSk7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmx1bmFyLWl0ZW0gYiB7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgICAgIGNvbG9yOiAjZjBhZDRlOyAvKiBCcmlnaHQgR29sZCBmb3IgSGVhZGVyICovDQogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4Ow0KICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLXRleHQgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsgLyogSGlnaCBDb250cmFzdCBXaGl0ZSAqLw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci10aW1lIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMDBmZmZmOyAvKiBDeWFuIGZvciBUaW1pbmdzIHRvIHN0YW5kIG91dCAqLw0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9Imx1bmFyLXNlY3Rpb24iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1oZWFkIj7wn4yZIEhpbmR1IEx1bmFyIENhbGVuZGFyPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWZsZXgiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItaXRlbSI+DQogICAgICAgICAgICAgICAgPGI+QW1hdmFzeWE8L2I+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG4tMDEiIGNsYXNzPSJsdW5hci10ZXh0Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWl0ZW0iPg0KICAgICAgICAgICAgICAgIDxiPlBhdXJuaW1hPC9iPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImxuLTAyIiBjbGFzcz0ibHVuYXItdGV4dCI+U3luY2luZy4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1pdGVtIj4NCiAgICAgICAgICAgICAgICA8Yj5HcmFoYW5hPC9iPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImxuLTAzIiBjbGFzcz0ibHVuYXItdGV4dCI+U3luY2luZy4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEhpbmR1THVuYXIoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIG5vdy5zZXRIb3VycygwLCAwLCAwLCAwKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldHMgPSBbDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdsbi0wMScsIGZpbGU6ICcvUGFuY2hhbmcvSGluZHVMdW5hckNhbGVuZGFyLzAuMS5odG1sJywgdHlwZTogJ2RvdWJsZScgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2xuLTAyJywgZmlsZTogJy9QYW5jaGFuZy9IaW5kdUx1bmFyQ2FsZW5kYXIvMC4yLmh0bWwnLCB0eXBlOiAnZG91YmxlJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnbG4tMDMnLCBmaWxlOiAnL1BhbmNoYW5nL0hpbmR1THVuYXJDYWxlbmRhci8wLjMuaHRtbCcsIHR5cGU6ICdzaW5nbGUnIH0NCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgZm9yIChjb25zdCB4IG9mIHRhcmdldHMpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogeC5maWxlIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGggPSBhd2FpdCByZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFN0cmlwIHRhZ3MgYnV0IGtlZXAgc3RydWN0dXJhbCBzZXBhcmF0aW9uDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVGV4dCA9IGgucmVwbGFjZSgvPFtePl0qPi9nLCAnfCcpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gY2xlYW5UZXh0LnNwbGl0KCd8JykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgb3V0ID0gIk5vIFVwY29taW5nIjsNCg0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3NbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gcm93Lm1hdGNoKC8oXGR7Mn0pWy0vOl0oXGR7Mn18W2EtekEtWl0rKVstLzpdKFxkezR9KS8pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4obVsyXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHQgPSBuZXcgRGF0ZShtWzFdICsgIiAiICsgbVsyXSArICIgIiArIG1bM10pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0ID0gbmV3IERhdGUoYCR7bVszXX0tJHttWzJdfS0ke21bMV19YCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR0ID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC50eXBlID09PSAnZG91YmxlJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ID0gYDxzcGFuPiR7cm93fTwvc3Bhbj48c3BhbiBjbGFzcz0ibHVuYXItdGltZSI+JHtyb3dzW2kgKyAxXSB8fCAnJ308L3NwYW4+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dCA9IGA8c3Bhbj4ke3Jvd308L3NwYW4+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoeC5pZCkuaW5uZXJIVE1MID0gb3V0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5sb2coIkx1bmFyIEVycm9yIiwgZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkSGluZHVMdW5hcigpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAubmF2LXNlY3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1tYWluLWhlYWQgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjJweDsgLyogU2xpZ2h0bHkgbGFyZ2VyIGZvciB0aGUgaWNvbiAqLw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IGRvdWJsZSAjODAwMDAwOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWdyaWQgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogOHB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1jb2wgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIG1pbi13aWR0aDogMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtY29sLXRpdGxlIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS4yOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiA0MnB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJnLXNoeWFtYWxhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0YjAwODI7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctY2hhaXRyYSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYjIyMjIyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJnLWFzYWRoYSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDA2NDAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJnLXNoYXJhZGhhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZjhjMDA7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOWYwOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCA0cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLm5hdi1ib3ggLmQtZGF0ZSB7DQogICAgICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7DQogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogM3B4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWJveCAuZC1kYXkgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjMDAwMGZmOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtZm9vdGVyIHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDE1cHg7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogMTJweDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgICAgIGdhcDogMTJweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmV2ZW50LXBpbGwgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjRmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMDMzNjY7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDE4cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBmb250LXNpemU6IDE1cHg7DQogICAgICAgICAgICBjb2xvcjogIzAwMDsNCiAgICAgICAgfQ0KDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA4MDBweCkgew0KICAgICAgICAgICAgLm5hdi1ncmlkIHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBncmlkOw0KICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsNCiAgICAgICAgICAgICAgICBnYXA6IDEwcHg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0ibmF2LXNlY3Rpb24iPg0KICAgICAgICA8ZGl2IGlkPSJuYXYteWVhci10aXRsZSIgY2xhc3M9Im5hdi1tYWluLWhlYWQiPvCfqrcgTmF2YXJhdGhyaTwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9Im5hdi1ncmlkIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wtdGl0bGUgYmctc2h5YW1hbGEiPlNoeWFtYWxhPGJyPk5hdmFyYXRocmk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb2wtc2h5YW1hbGEiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sLXRpdGxlIGJnLWNoYWl0cmEiPkNoYWl0cmE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1jaGFpdHJhIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1hc2FkaGEiPkFzYWRoYTxicj5OYXZhcmF0aHJpPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iY29sLWFzYWRoYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wtdGl0bGUgYmctc2hhcmFkaGEiPlNoYXJhZGhhPGJyPk5hdmFyYXRocmk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb2wtc2hhcmFkaGEiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9Im5hdi1mb290ZXIiPg0KICAgICAgICAgICAgPGRpdiBpZD0iZXYtdmFzYW50aGEiIGNsYXNzPSJldmVudC1waWxsIj5Mb2FkaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJldi1heXVkaGEiIGNsYXNzPSJldmVudC1waWxsIj5Mb2FkaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJldi12aWpheWEiIGNsYXNzPSJldmVudC1waWxsIj5Mb2FkaW5nLi4uPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZE5hdmFyYXRocmkoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogcCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdCA9IGQuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY3VyWWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXYteWVhci10aXRsZScpLmlubmVySFRNTCA9IGDwn6q3IE5hdmFyYXRocmkgLSAke2N1clllYXJ9YDsNCg0KICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldE5hdkxpbmVzKHBhdGgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogcGF0aCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHh0LnJlcGxhY2UoLzxiclxzKlwvPz4vZ2ksICdcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpLnNwbGl0KCdcbicpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDUpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZ3MgPSBbDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb2wtc2h5YW1hbGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvMC4yLmh0bWwnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb2wtY2hhaXRyYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjMuaHRtbCcgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1hc2FkaGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvMC40Lmh0bWwnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb2wtc2hhcmFkaGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvMC4xLmh0bWwnIH0NCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb25mIG9mIGNvbmZpZ3MpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBhd2FpdCBnZXROYXZMaW5lcyhjb25mLnBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaHRtbCA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZXNbaV0uaW5jbHVkZXMoY3VyWWVhcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJuYXYtYm94Ij48c3BhbiBjbGFzcz0iZC1kYXRlIj4ke2xpbmVzW2ldfTwvc3Bhbj48c3BhbiBjbGFzcz0iZC1kYXkiPiR7bGluZXNbaSArIDFdIHx8ICcnfTwvc3Bhbj48L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25mLmlkKS5pbm5lckhUTUwgPSBodG1sIHx8ICI8ZGl2IHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoxMHB4OyBmb250LXNpemU6MTFweDsnPk5vIERhdGE8L2Rpdj4iOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGV2RmlsZXMgPSBbDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldi12YXNhbnRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS9FdmVudHMyLmh0bWwnLCBtYXRjaDogJ1ZBU0FOVEhBIFBBTkNIQU1JJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZXYtYXl1ZGhhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpL0V2ZW50czMuaHRtbCcsIG1hdGNoOiAnQVlVREhBIFBPT0pBJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZXYtdmlqYXlhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpL0V2ZW50czQuaHRtbCcsIG1hdGNoOiAnVklKQVlBIERBU0FNSScgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2IG9mIGV2RmlsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZXYucGF0aCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHR4dC5yZXBsYWNlKC9cbi9nLCAnJykuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZERhdGUgPSAiTi9BIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRJZHggPSBwYXJ0cy5maW5kSW5kZXgocCA9PiBwLmluY2x1ZGVzKGV2Lm1hdGNoKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzdGFydElkeCAhPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBzdGFydElkeDsgaiA8IHBhcnRzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzW2pdLmluY2x1ZGVzKGN1clllYXIpKSB7IGZvdW5kRGF0ZSA9IHBhcnRzW2pdOyBicmVhazsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGV2LmlkKS5pbm5lckhUTUwgPSBgPGI+JHtldi5tYXRjaH08L2I+IDogJHtmb3VuZERhdGV9YDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkTmF2YXJhdGhyaSgpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAuZ3VydS1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LWhlYWQgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuZ3VydS1saXN0IHsNCiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDQwMHB4Ow0KICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LXJvdy1pdGVtIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDMzNjY7DQogICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDZweCBzb2xpZCAjZjBhZDRlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LWRhdGUgew0KICAgICAgICAgICAgY29sb3I6ICNmMGFkNGU7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM0MTVhNzc7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtZXZlbnQtbGluZSB7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDsNCiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogU3R5bGUgZm9yIHRoZSBkeW5hbWljIEd1cnUgTGlua3MgKi8NCiAgICAgICAgLmd1cnUtbGluayB7DQogICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsNCiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOw0KICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiAjZjBhZDRlOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5ndXJ1LWxpbms6aG92ZXIgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjZjBhZDRlOw0KICAgICAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJndXJ1LXNlY3Rpb24iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJndXJ1LWhlYWQiPvCflYnvuI8gR3VydSBBcmFkaGFuYXMgYW5kIEpheWFudGhpczwvZGl2Pg0KICAgICAgICA8ZGl2IGlkPSJndXJ1LWV2ZW50LWxpc3QiIGNsYXNzPSJndXJ1LWxpc3QiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MjBweDsgY29sb3I6IzY2NjsiPlN5bmNpbmcuLi48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCAyLWRpZ2l0IG51bWJlciBhbmQgY3JlYXRlIHRoZSBsaW5rDQogICAgICAgIGZ1bmN0aW9uIHdyYXBXaXRoR3VydUxpbmsodGV4dCkgew0KICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cZHsyfS8pOw0KICAgICAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICAgICAgY29uc3QgbnVtID0gbWF0Y2hbMF07DQogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vbXlsYWlwZXJpeWF2YS5naXRodWIuaW8vQWNoYXJ5YS9BJHtudW19Lmh0bWxgOw0KICAgICAgICAgICAgICAgIHJldHVybiBgPGEgaHJlZj0iJHt1cmx9IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9Imd1cnUtbGluayI+JHt0ZXh0fTwvYT5gOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRleHQ7DQogICAgICAgIH0NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkR3VydUFyYWRoYW5hcygpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgbm93LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvUGFuY2hhbmcvR3VydS9FdmVudHMuaHRtbCcgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd1RleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY2xlYW5UZXh0ID0gcmF3VGV4dC5yZXBsYWNlKC88W14+XSo+L2csICdcbicpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY2xlYW5UZXh0LnNwbGl0KCdcbicpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDApOw0KDQogICAgICAgICAgICAgICAgbGV0IGdyb3VwZWRFdmVudHMgPSB7fTsNCg0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudExpbmUgPSBsaW5lc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbSA9IGN1cnJlbnRMaW5lLm1hdGNoKC8oXGR7Mn0pLShcZHsyfSktKFxkezR9KS8pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChtKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudERhdGVPYmogPSBuZXcgRGF0ZShwYXJzZUludChtWzNdKSwgcGFyc2VJbnQobVsyXSkgLSAxLCBwYXJzZUludChtWzFdKSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudERhdGVPYmogPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGN1cnJlbnRMaW5lOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IGxpbmVzW2kgKyAxXSB8fCAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ3JvdXBlZEV2ZW50c1tkYXRlU3RyXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cGVkRXZlbnRzW2RhdGVTdHJdID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwZWRFdmVudHNbZGF0ZVN0cl0ucHVzaChkZXRhaWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgbGV0IGxpc3RIdG1sID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIGluIGdyb3VwZWRFdmVudHMpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgdGhlIGxpbmsgd3JhcHBlciB0byBlYWNoIGV2ZW50IGxpbmUNCiAgICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50c0h0bWwgPSBncm91cGVkRXZlbnRzW2RhdGVdDQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGV2dCA9PiBgPHNwYW4gY2xhc3M9Imd1cnUtZXZlbnQtbGluZSI+4oCiICR7d3JhcFdpdGhHdXJ1TGluayhldnQpfTwvc3Bhbj5gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJycpOw0KDQogICAgICAgICAgICAgICAgICAgIGxpc3RIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3VydS1yb3ctaXRlbSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZ3VydS1kYXRlIj4ke2RhdGV9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3VydS1kZXRhaWwiPiR7ZXZlbnRzSHRtbH08L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3VydS1ldmVudC1saXN0JykuaW5uZXJIVE1MID0gbGlzdEh0bWwgfHwgIjxkaXYgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjIwcHg7Jz5ObyB1cGNvbWluZyBldmVudHMgZm91bmQuPC9kaXY+IjsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndXJ1LWV2ZW50LWxpc3QnKS5pbm5lckhUTUwgPSAiU3luYyBFcnJvci4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWRHdXJ1QXJhZGhhbmFzKCk7DQogICAgPC9zY3JpcHQ+DQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQogICAgDQogICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tdG9wOiAzMHB4OyBtYXJnaW4tYm90dG9tOiA1MHB4OyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsiPg0KICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiAjNTU1OyBmb250LXNpemU6IDE4cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7Ij5JZiBhbnkgaXNzdWVzIHdpdGggdGhlIGFwcGxpY2F0aW9uIGNvbnRhY3QgQWRtaW48L2gzPg0KDQogICAgICAgIDxidXR0b24gb25jbGljaz0iY29udGFjdEFkbWluV2hhdHNBcHAoKSIgc3R5bGU9Ig0KICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVEMzY2Ow0KICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgcGFkZGluZzogMTVweCAzMHB4Ow0KICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICBib3JkZXItcmFkaXVzOiA1MHB4Ow0KICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgzNywgMjExLCAxMDIsIDAuMyk7DQogICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4Ow0KICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yczsNCiAgICAiIG9ubW91c2VvdmVyPSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nc2NhbGUoMS4wNSknIiBvbm1vdXNlb3V0PSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nc2NhbGUoMSknIj4NCiAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDEwcHg7Ij7wn5KsPC9zcGFuPiBNZXNzYWdlIEFkbWluDQogICAgICAgIDwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGZ1bmN0aW9uIGNvbnRhY3RBZG1pbldoYXRzQXBwKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmVOdW1iZXIgPSAiOTE4MDUwNzk0MjUyIjsNCiAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBBZGQgYSBwcmUtZmlsbGVkIG1lc3NhZ2Ugc28geW91IGtub3cgd2hlcmUgdGhleSBhcmUgY29taW5nIGZyb20NCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlbmNvZGVVUklDb21wb25lbnQoIkhlbGxvIEFkbWluLCBJIGFtIGZhY2luZyBhbiBpc3N1ZSB3aXRoIHRoZSBDRyBSZWNlaXB0IEFwcC4iKTsNCiAgICAgICAgICAgIGNvbnN0IHdoYXRzYXBwVXJsID0gYGh0dHBzOi8vd2EubWUvJHtwaG9uZU51bWJlcn0/dGV4dD0ke21lc3NhZ2V9YDsNCg0KICAgICAgICAgICAgd2luZG93Lm9wZW4od2hhdHNhcHBVcmwsICdfYmxhbmsnKTsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQoNCg0KICAgIA0KICAgIDxzY3JpcHQ+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkU2V0dGluZ3NGaWxlKCkgew0KICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50ID0gIiI7DQogICAgICAgICAgICBmZWF0dXJlcy5mb3JFYWNoKGZlYXQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwZXJtXyR7ZmVhdH1gKS52YWx1ZTsNCiAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgJHtmZWF0fXwke3ZhbH1cbmA7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gRm9yIG5vdywgd2Ugc2hvdyBpdCBpbiBhbiBhbGVydCBvciBsb2cuDQogICAgICAgICAgICAvLyBZb3UgY2FuIGNvcHkgdGhpcyB0ZXh0IGFuZCBzYXZlIGl0IGFzIHVzZXJuYW1lLnR4dA0KICAgICAgICAgICAgY29uc29sZS5sb2coIi0tLSBTRVRUSU5HUyBGSUxFIENPTlRFTlQgLS0tIik7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlQ29udGVudCk7DQoNCiAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBUcmlnZ2VyIGFuIGFjdHVhbCBmaWxlIGRvd25sb2FkIGZvciB0aGUgdXNlcg0KICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtmaWxlQ29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gInVzZXJfc2V0dGluZ3NfdGVtcGxhdGUudHh0IjsNCiAgICAgICAgICAgIGxpbmsuY2xpY2soKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy9mdW5jdGlvbiBjb25zZW50QWN0aW9uKCkgew0KICAgICAgICAvLyAgICBhbGVydCgiQ29uc2VudCBHcmFudGVkIGZvciAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUpOw0KICAgICAgICAvLyAgICAvLyBMb2dpYyBmb3Igc2F2ZVJlY29yZCgpIHVzdWFsbHkgZm9sbG93cyBoZXJlDQogICAgICAgIC8vfQ0KDQogICAgICAgIC8vZnVuY3Rpb24gc2F2ZURhdGEoKSB7DQogICAgICAgIC8vICAgIGFsZXJ0KCJSZWNvcmQgU2F2ZWQgTG9jYWxseSIpOw0KICAgICAgICAvLyAgICAvLyBPcmlnaW5hbCBzYXZlUmVjb3JkKCkgbG9naWMgcmVtYWlucyBoZXJlDQogICAgICAgIC8vfQ0KDQoNCiAgICAgICAgZnVuY3Rpb24gbWF0Y2hSZWNvcmQoaWR4LCBxdWVyeSwgY29sSWR4KSB7DQogICAgICAgICAgICBjb25zdCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2lkeF0udG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIGlmIChjb2xJZHggPT09IC0xKSByZXR1cm4gbGluZS5pbmNsdWRlcyhxdWVyeSk7DQogICAgICAgICAgICBjb25zdCBjb2xzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgcmV0dXJuIChjb2xzW2NvbElkeF0gfHwgIiIpLmluY2x1ZGVzKHF1ZXJ5KTsNCiAgICAgICAgfQ0KDQoNCiAgICA8L3NjcmlwdD4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIEFkZCB0aGlzIHRvIHNob3cgdGhlIFNNUyBidXR0b24gb25seSBvbiBtb2JpbGUgZGV2aWNlcw0KICAgICAgICBmdW5jdGlvbiBjaGVja0RldmljZUZvclNNUygpIHsNCiAgICAgICAgICAgIGNvbnN0IGlzTW9iaWxlID0gL2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQogICAgICAgICAgICBjb25zdCBzbXNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXNtcycpOw0KICAgICAgICAgICAgaWYgKGlzTW9iaWxlICYmIHNtc0J0bikgew0KICAgICAgICAgICAgICAgIHNtc0J0bi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHNlbmRTTVMoKSB7DQogICAgICAgICAgICBjb25zdCBwaG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlOw0KDQogICAgICAgICAgICBpZiAoIXBob25lKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlBsZWFzZSBlbnRlciBhIHBob25lIG51bWJlciBmaXJzdC4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIENvbXBvc2UgdGhlIHRleHQgbWVzc2FnZQ0KICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBNTVBUIFJlY2VpcHQ6IE5hbWFza2FyYW0gJHtuYW1lfSwgVGhhbmsgeW91IGZvciB5b3VyIGNvbnRyaWJ1dGlvbiBvZiBScy4ke2Ftb3VudH0gdG93YXJkcyAke3Rvd2FyZHN9LiBSZWNlaXB0IE5vOiAke3JlY05vfS4gLSBNeWxhaSBNYWhhcGVyaXlhdmEgQW51c2hhbSBUcnVzdGA7DQoNCiAgICAgICAgICAgIC8vIEVuY29kZSBmb3IgVVJMIHNhZmV0eQ0KICAgICAgICAgICAgY29uc3QgZW5jb2RlZE1lc3NhZ2UgPSBlbmNvZGVVUklDb21wb25lbnQobWVzc2FnZSk7DQoNCiAgICAgICAgICAgIC8vIExhdW5jaCB0aGUgU01TIGFwcA0KICAgICAgICAgICAgLy8gTm90ZTogRm9yIGlPUyB1c2UgJyYnLCBmb3Igb3RoZXJzIHVzZSAnPycgZm9yIHRoZSBzZXBhcmF0b3INCiAgICAgICAgICAgIGNvbnN0IHNlcGFyYXRvciA9IC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSA/ICcmJyA6ICc/JzsNCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYHNtczoke3Bob25lfSR7c2VwYXJhdG9yfWJvZHk9JHtlbmNvZGVkTWVzc2FnZX1gOw0KDQogICAgICAgICAgICAvLyBMb2cgdGhlIGFjdGlvbiBmb3IgeW91ciBhdWRpdCB0cmFpbA0KICAgICAgICAgICAgd3JpdGVVc2VyTG9nKGBTTVMgVFJJR0dFUkVEOiBUbyAke3Bob25lfSBmb3IgUmVjICR7cmVjTm99YCk7DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KICAgIDx2aWRlbyBpZD0ic2VjdXJpdHktdmlkZW8iIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiBhdXRvcGxheSBwbGF5c2lubGluZT48L3ZpZGVvPg0KICAgIDxjYW52YXMgaWQ9InNlY3VyaXR5LWNhbnZhcyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvY2FudmFzPg0KDQo8L2JvZHk+DQo8L2h0bWw+DQo="))));</script>