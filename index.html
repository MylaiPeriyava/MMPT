<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5NTVBUIFJlY2VpcHQgU3lzdGVtIHYzMy4wIC0gUmVzdG9yZWQ8L3RpdGxlPg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2h0bWwycGRmLmpzLzAuMTAuMS9odG1sMnBkZi5idW5kbGUubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvaHRtbDJjYW52YXMvMS40LjEvaHRtbDJjYW52YXMubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYvMi41LjEvanNwZGYudW1kLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLWF1dG90YWJsZS8zLjUuMjUvanNwZGYucGx1Z2luLmF1dG90YWJsZS5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzdHlsZT4NCg0KICAgICAgICAubW1wdC11bmlmaWVkLWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAyNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAzMHB4IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQgew0KICAgICAgICAgICAgd2lkdGg6IDE2MHB4OyAvKiBGaXhlZCB3aWR0aCBmb3IgcGVyZmVjdCBhbGlnbm1lbnQgKi8NCiAgICAgICAgICAgIGhlaWdodDogNDVweDsgLyogVW5pZmllZCBoZWlnaHQgKi8NCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuMnM7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQ6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDZweCAxMnB4IHJnYmEoMCwwLDAsMC4xNSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYWRtaW4tdW5pZmllZDphY3RpdmUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgIC8qIFRoZSBNYXN0ZXIgSGlkZSBSdWxlICovDQogICAgICAgIC8qIFRoaXMgcnVsZSBzdGF5cyBhY3RpdmUgZXZlbiBpZiB0aGUgdGFibGUgcmUtcmVuZGVycyAqLw0KICAgICAgICAucGVybS1oaWRkZW4gew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgZGlzYWJsZWQgZWxlbWVudHMgZ2V0IHRoZSBncmV5ZWQtb3V0IGxvb2sgKi8NCiAgICAgICAgYnV0dG9uOmRpc2FibGVkLA0KICAgICAgICBpbnB1dDpkaXNhYmxlZCwNCiAgICAgICAgc2VsZWN0OmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjOTk5OTk5ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjY7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTYXZlIGJ1dHRvbiBzcGVjaWFsIGNvbG9yIHdoZW4gaXQgYmVjb21lcyBhY3RpdmUgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KDQoNCg0KICAgICAgICAvKiBDb250YWluZXIgZm9yIHRoZSAzLWNvbHVtbiB2aWV3ICovDQoNCiAgICAgICAgLyogVXBkYXRlZCBXb3Jrc3BhY2UgdG8gcHJldmVudCBvdmVybGFwcGluZyAqLw0KICAgICAgICAucmVjZWlwdC13b3Jrc3BhY2Ugew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAvKiBMT0NLIHRoZSBoZWlnaHQgaGVyZS4gU2lkZSBwYW5lbHMgd2lsbCBuZXZlciBiZSB0YWxsZXIgdGhhbiB0aGlzICovDQogICAgICAgICAgICBoZWlnaHQ6IDU1MHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnNpZGUtcGFuZWwgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgLyogRm9yY2UgdGhlIHBhbmVsIHRvIG9iZXkgdGhlIHdvcmtzcGFjZSBoZWlnaHQgKi8NCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIC8qIFRoaXMgaGVpZ2h0OiAwIGlzIGEgdHJpY2sgdG8gbWFrZSBmbGV4Ym94IGlnbm9yZSB0aGUgaW1hZ2Uncw0KICAgICAgICBuYXR1cmFsIHNpemUgYW5kIGZvcmNlIGl0IHRvIHN0YXkgd2l0aGluIHRoZSBjb250YWluZXIgKi8NCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIGltZyB7DQogICAgICAgICAgICAgICAgLyogVGhlc2UgbGluZXMgZm9yY2UgdGhlIHNocmluayB3aXRob3V0IGxvc2luZyByYXRpbyAqLw0KICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICNyZWNlaXB0X2Rpc3BsYXlfYXJlYSB7DQogICAgICAgICAgICBmbGV4OiAwIDAgYXV0bzsNCiAgICAgICAgICAgIHdpZHRoOiA0ODBwdDsNCiAgICAgICAgICAgIC8qIFRoZSByZWNlaXB0IHNldHMgdGhlIGhlaWdodCBmb3IgdGhlIHdob2xlIHJvdyAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLmV2ZW50LXBob3RvIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgfQ0KDQoNCg0KDQoNCiAgICAgICAgLmFjdGlvbi1mb290ZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1wZGYgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi13YSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVkMzY2Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIENvbnNlbnQgU3BlY2lmaWMgU3R5bGVzICovDQogICAgICAgIC5idG4tY29uc2VudC1hY3RpdmUgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgb3BhY2l0eTogMTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tY29uc2VudC1kaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICAgICAgb3BhY2l0eTogMC4zOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgb3JpZ2luYWwgc3R5bGVzIHByZXNlcnZlZCBmcm9tIGQ0MyAqLw0KICAgICAgICAucmVjZWlwdC1wcmV2aWV3LXJvdyB7DQogICAgICAgICAgICBncmlkLWNvbHVtbjogc3BhbiAyOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMzBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZTA7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yZWNlaXB0LWNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogNDYwcHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAyLjVweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5oZWFkZXItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY29sIHsNCiAgICAgICAgICAgIHdpZHRoOiA3MHB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFkZHJlc3MtY29sIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC50cnVzdC1uYW1lIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNwdDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRydXN0LWRldGFpbHMgew0KICAgICAgICAgICAgZm9udC1zaXplOiA3LjVwdDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjE7DQogICAgICAgIH0NCg0KICAgICAgICAudmFyaWFibGUtcm93IHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDZwdDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMwMDA7DQogICAgICAgICAgICBwYWRkaW5nOiAzcHQgMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZGl2aWRlciB7DQogICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgIzAwMDsNCiAgICAgICAgICAgIG1hcmdpbjogNnB0IDA7DQogICAgICAgIH0NCg0KICAgICAgICAuZG9ub3ItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxhYmVsLWNvbCB7DQogICAgICAgICAgICB3aWR0aDogODVwdDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHQgMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5kYXRhLWNvbCB7DQogICAgICAgICAgICBmb250LXNpemU6IDkuNXB0Ow0KICAgICAgICAgICAgcGFkZGluZzogMnB0IDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdHJ1c3Qtc2lnbiB7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVwdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdGF4LWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiA4cHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMnB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgOnJvb3Qgew0KICAgICAgICAgICAgLS1zYWZmcm9uOiAjRkY5OTMzOw0KICAgICAgICAgICAgLS1saWdodC1zYWZmcm9uOiAjRkZGNUU2Ow0KICAgICAgICAgICAgLS1kZWVwLXNhZmZyb246ICNGRjhDMDA7DQogICAgICAgICAgICAtLXRleHQtZGFyazogIzMzMzsNCiAgICAgICAgfQ0KDQogICAgICAgICogew0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtc2FmZnJvbik7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZGFyayk7DQogICAgICAgIH0NCg0KICAgICAgICAjYXV0aFNjcmVlbiB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMHZ3Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LXNhZmZyb24pOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB6LWluZGV4OiA5OTk5Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY2lyY2xlIHsNCiAgICAgICAgICAgIGhlaWdodDogNDBweDsNCiAgICAgICAgICAgIHdpZHRoOiA0MHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMik7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sb2dvLWxhcmdlIHsNCiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm1hc3Rlci1oZWFkZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsNCiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjIlIDU2JSAyMiU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zYWZmcm9uKTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmhlYWRlci1zZWN0aW9uIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5oZWFkZXItc2VjdGlvbjpsYXN0LWNoaWxkIHsNCiAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLnNtYWxsLWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmlkLWJhZGdlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29udGFpbmVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYWRkOGU2Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBBREQgVEhFIEZJWCBIRVJFICovDQogICAgICAgIC5lbnRyeS1jb250YWluZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29sdW1uIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBtaW4td2lkdGg6IDMwMHB4Ow0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC5mb3JtLWdyb3VwIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDMzNjY7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCwgLmZvcm0tZ3JvdXAgc2VsZWN0LCAuZm9ybS1ncm91cCB0ZXh0YXJlYSB7DQogICAgICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuc3RhdHVzLWNoZWNrcyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMjBweDsNCiAgICAgICAgICAgIGdyaWQtY29sdW1uOiBzcGFuIDI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFjdGlvbiB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ29uc2VudCBTcGVjaWZpYyBTdHlsZXMgKi8NCiAgICAgICAgLmJ0bi1jb25zZW50LWFjdGl2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1jb25zZW50LWRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmNjY2MgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjNjY2Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDsNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuNjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tc2F2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmU4YjU3Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi11bmxvY2sgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tbG9jayB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2Y4YzhkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1uYXYgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXJuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMjhiMjI7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAjZmllbGRfc2VhcmNoIHsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMyMjhiMjIgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIEFjdGlvbiBCdXR0b24gUm93IFN0eWxpbmcgKi8NCiAgICAgICAgLmJ0bi1hY3Rpb24sIC5idG4tc2F2ZSwgLmJ0bi1sb2NrLCAuYnRuLXVubG9jayB7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIHdpZHRoICovDQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIGhlaWdodCAqLw0KICAgICAgICAgICAgbWFyZ2luOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBISUdIIENPTlRSQVNUIFVOTE9DSzogQnJpZ2h0IEdvbGQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fdW5sb2NrOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkQ3MDAgIWltcG9ydGFudDsgLyogR29sZCAqLw0KICAgICAgICAgICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsgLyogQmxhY2sgdGV4dCBmb3IgY29udHJhc3QgKi8NCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNEQUE1MjA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTQVZFOiBHcmVlbiB3aGVuIGVuYWJsZWQgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzFlN2UzNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIExPQ0s6IE9yYW5nZS9SZWQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fbG9jazpub3QoOmRpc2FibGVkKSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmQ3ZTE0ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNkOTZkMTI7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBESVNBQkxFRCBTVEFURTogVW5pdmVyc2FsIGxvb2sgZm9yIGFsbCBidXR0b25zICovDQogICAgICAgIGJ1dHRvbjpkaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogI2EwYTBhMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYyAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgb3BhY2l0eTogMC41Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ2hlY2tib3ggUm93IENvbnRhaW5lciAqLw0KICAgICAgICAjY2hlY2tib3hfcm93IHsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQWN0aW9uIEJ1dHRvbiBzaXppbmcgKi8NCiAgICAgICAgI2J0bl91bmxvY2ssICNidG5fbG9jaywgI2J0bl9zYXZlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMTBweDsNCiAgICAgICAgICAgIGhlaWdodDogMzhweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC8qIEJpZyBXYWl0IE1lc3NhZ2UgT3ZlcmxheSAqLw0KICAgICAgICAjbG9hZGluZ092ZXJsYXkgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC43KTsNCiAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogMjAlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyNHB0Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAvKg0KICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICBNYWtlcyByZXNwb25pdmUgc2l6ZSAtIGZvciBSTiwgUmVjb3JkIGFuZCBSZWNlaXB0IE51bWJlcg0KICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQogICAgICAgIC8qIEFERCBUSElTIExJTkUgVE8gRklYIFRIRSBUT1AgUk9XICYgUkVDT1JEIE5VTUJFUlMgKi8NCiAgICAgICAgZGl2W3N0eWxlKj0iZGlzcGxheTogZmxleCJdIHsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgZ2FwOiAxMHB4ICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQoNCiAgICA8ZGl2IGlkPSJsb2FkaW5nT3ZlcmxheSI+QXNzaWduaW5nIE5ldyBSZWNlaXB0IE51bWJlci4uLiBQbGVhc2UgV2FpdDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibG9hZGluZy1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC45KTsgei1pbmRleDogOTk5OTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGRpc3BsYXk6IG5vbmU7Ij4NCiAgICAgICAgPGRpdiBzdHlsZT0iYm9yZGVyOiA1cHggc29saWQgI2YzZjNmMzsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTsiPjwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMzMzM7Ij5QbGVhc2Ugd2FpdCAtIFdvcmtpbmcuLi48L3A+DQogICAgPC9kaXY+DQoNCiAgICA8c3R5bGU+DQogICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQoNCiAgICA8ZGl2IGlkPSJhdXRoU2NyZWVuIj4NCiAgICAgICAgPGRpdiBpZD0ibG9nb0NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgIDxoMiBzdHlsZT0iY29sb3I6IHZhcigtLWRlZXAtc2FmZnJvbik7IG1hcmdpbjogNXB4IDA7Ij5NTVBUIFN5c3RlbTwvaDI+DQogICAgICAgIDxwIGlkPSJzdGF0dXNNc2ciPkNvbm5lY3RpbmcgdG8gQ2xvdWQuLi48L3A+DQogICAgICAgIDxwPkRldmljZSBJRDogPHNwYW4gaWQ9ImRpc3BsYXlEZXZpY2VJRCIgY2xhc3M9ImlkLWJhZGdlIj4uLi48L3NwYW4+PC9wPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibWFpbkFwcENvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KDQoNCiAgICAgICAgPGhlYWRlciBjbGFzcz0ibWFzdGVyLWhlYWRlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItc2VjdGlvbiI+DQogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW46MDsgZm9udC1zaXplOjE0cHg7Ij5Vc2VycyBPbmxpbmU8L2gzPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFjdGl2ZVVzZXJMaXN0IiBjbGFzcz0ic21hbGwtaW5mbyI+LS0tPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZ2FwOjE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibG9nb0hlYWRlckNvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDEgc3R5bGU9Im1hcmdpbjowOyBmb250LXNpemU6MjBweDsiPk15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0PC9oMT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDRweDsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgb3BhY2l0eTogMC45OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWlwdCBHZW5lcmF0aW9uIFNvZnR3YXJlIFZlcnNpb246IDxzcGFuIGlkPSJkaXNwbGF5VmVyc2lvbiI+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGFzaGJvYXJkLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJzdGF0cy10YWJsZSI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsLWluZm8iIHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMnB4IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pkxhc3QgUmVjOiA8c3BhbiBpZD0iZGFzaF9sYXN0X3JlYyI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+QmFuazogPHNwYW4gaWQ9ImRhc2hfYmFua19kYXRlIj4tLS08L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5MYXRlc3Q6IDxzcGFuIGlkPSJkYXNoX2xhdGVzdF9yZWMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkV4cDogPHNwYW4gaWQ9ImRhc2hfZXhwZW5zZXMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlJlYWR5OiA8c3BhbiBpZD0iZGFzaF9yZWFkeV9jb3VudCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+Q2FzaDogPHNwYW4gaWQ9ImRhc2hfY2FzaCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8L2hlYWRlcj4NCg0KDQogICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbnRhaW5lciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbnRyeS1jb2x1bW4iPg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyBiYWNrZ3JvdW5kOiAjMWEyMzdlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBzdHJldGNoOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyI+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOyBwYWRkaW5nLWJvdHRvbTogOHB4OyBtYXJnaW4tYm90dG9tOiAxMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IkFMTCIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IEFMTDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjIxLTIyIiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjEtMjI8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyMi0yMyIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDIyLTIzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjMtMjQiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyMy0yNDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjI0LTI1IiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjQtMjU8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyNS0yNiIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDI1LTI2PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjYtMjciIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyNi0yNzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6ICNGRkVCM0IgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iUlIiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiBSUjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgtMSkiPiYjMTAwOTQ7PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9InJlY19zbGlkZXIiIHN0eWxlPSJmbGV4OiAxOyIgb25pbnB1dD0iY2hlY2tVbnNhdmVkQ2hhbmdlcygoKSA9PiB7IGlmKHZhbGlkYXRlTmF2aWdhdGlvblNlY3VyaXR5KHRoaXMudmFsdWUpKSBuYXZpZ2F0ZURhdGFiYXNlKHRoaXMudmFsdWUpOyB9KSI+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgxKSI+JiMxMDA5NTs8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWxlZnQ6IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRUIzQjsgbWFyZ2luLWJvdHRvbTogMnB4OyI+UkVDRUlQVCBOTzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3JlY25vIiBzdHlsZT0id2lkdGg6IDE0MHB4OyBoZWlnaHQ6IDM4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1zaXplOiAxNnB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlcjogMnB4IHNvbGlkICNGRjk5MzM7IGJhY2tncm91bmQ6ICNmZmY7IGNvbG9yOiAjMDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IG1hcmdpbi1ib3R0b206IDJweDsiPlJlYzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlY29yZE51bWJlckRpc3BsYXkiIHJlYWRvbmx5IHN0eWxlPSJ3aWR0aDogNDVweDsgaGVpZ2h0OiAzOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyOiBub25lOyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2UwZTBlMDsgY29sb3I6ICMxYTIzN2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im5ld19yZWNfYnRuIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iaGVpZ2h0OiAzOHB4OyBtaW4td2lkdGg6IDUwcHg7IGJhY2tncm91bmQ6ICNmNDQzMzY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IiBvbmNsaWNrPSJnZW5lcmF0ZU5ld1JOKCkiPlJOPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5OYW1lPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX25hbWUiIG9uaW5wdXQ9InZhbGlkYXRlQ29uc2VudCgpIj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QWRkcmVzczwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9hZGRyZXNzIiByb3dzPSI0Ij48L3RleHRhcmVhPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGluL0NvdW50cjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBmbGV4OjE7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfcGluY29kZSIgc3R5bGU9IndpZHRoOiA1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfY291bnRyeSIgc3R5bGU9IndpZHRoOiA1MCU7IiB2YWx1ZT0iSU5ESUEiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZW1haWwiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TdGFyPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3N0YXIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Hb3RocmFtPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX2dvdGhyYW0iPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbHVtbiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZGF0ZSI+PC9kaXY+DQogICAgICAgICAgICAgICAgDQoNCg0KICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxMDBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMDAzMzY2OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBwYWRkaW5nLWxlZnQ6IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZWxlcGhvbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IHBhZGRpbmctbGVmdDogMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9waG9uZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJmbGV4OiAxOyBoZWlnaHQ6IDI1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQtY29sb3I6ICNmZmZkZTY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJidG5fZmV0Y2giIGRpc2FibGVkIG9uY2xpY2s9ImZldGNoRG9ub3JEZXRhaWxzKCkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiA1NXB4OyBoZWlnaHQ6IDI3cHg7IGZvbnQtc2l6ZTogMTFweDsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXItcmFkaXVzOiAzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZldGNoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QW1vdW50PC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZmllbGRfYW1vdW50IiBvbmlucHV0PSJ2YWxpZGF0ZUNvbnNlbnQoKSI+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk1vZGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImZpZWxkX21vZGUiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ub3dhcmRzPC9sYWJlbD48c2VsZWN0IGlkPSJmaWVsZF90b3dhcmRzIiBvbmNoYW5nZT0idmFsaWRhdGVDb25zZW50KCkiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5UcmFucy4gUmVmLjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9yZWYiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Db21tZW50czwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9jb21tZW50cyIgcm93cz0iMiI+PC90ZXh0YXJlYT48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+UEFOPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3BhbiI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjaGVja2JveF9yb3ciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmUwOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY2FuY2VsIj4gQ2FuY2VsDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByaW50ZWQiPiBQcmludGVkDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByYXNhZGFtIj4gUHJhc2FkYW0NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY29ycHVzIj4gQ29ycHVzIFNpZ25lZA0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDEwcHg7IG1hcmdpbi10b3A6IDE1cHg7IHBhZGRpbmctdG9wOiAxNXB4OyBib3JkZXItdG9wOiAycHggc29saWQgIzY2NjsiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyI+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fc2F2ZSIgY2xhc3M9ImJ0bi1zYXZlIiBvbmNsaWNrPSJzYXZlUmVjb3JkKCkiIGRpc2FibGVkPlNhdmU8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9jb25zZW50IiBjbGFzcz0iYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCIgZGlzYWJsZWQgb25jbGljaz0iY29uc2VudEFjdGlvbigpIj5Db25zZW50PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fdW5sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0idG9nZ2xlTG9jayhmYWxzZSkiPlVubG9jazwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0iY29uZmlybUxvY2soKSIgZGlzYWJsZWQ+TG9jazwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5TdW1tYXJ5IiBvbmNsaWNrPSJzaG93RG9uYXRpb25TdW1tYXJ5KCkiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1sZWZ0OiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgU3VtbWFyeQ0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJhbmstc3luYy1idG4iIG9uY2xpY2s9InVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHdpbmRvdy5BQ0NFU1NfVE9LRU4pIiBzdHlsZT0iYmFja2dyb3VuZDojMjdhZTYwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo0cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyI+QmFuayBVcGRhdGU8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1hY3Rpb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMTdhMmI4OyBjb2xvcjogd2hpdGU7IiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSI+UmVmcmVzaDwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tYWRtaW4tYWNjZXNzIiBjbGFzcz0iYnRuLWFjdGlvbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMxN2EyYjg7IGNvbG9yOiB3aGl0ZTsiIG9uY2xpY2s9InRvZ2dsZUFkbWluVGFibGUoKSI+QWRtaW48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tZGV2b3RlZS1hY2Nlc3MiIGNsYXNzPSJidG4tYWN0aW9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzE3YTJiODsgY29sb3I6IHdoaXRlOyIgb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHBzOi8vbXlsYWlwZXJpeWF2YS5naXRodWIuaW8vRGV2b3RlZS8nLCAnX2JsYW5rJykiPkRldm90ZWU8L2J1dHRvbj4NCg0KDQogICAgICAgICAgICAgICAgPGJyPjxicj4NCg0KDQoNCg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4LWdyb3c6IDE7Ij48L2Rpdj4NCg0KDQogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9zZWFyY2giIHBsYWNlaG9sZGVyPSJTZWFyY2guLi4iPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNlYXJjaEJ0biIgY2xhc3M9ImJ0bi1ybiIgb25jbGljaz0icGVyZm9ybVNlYXJjaCgpIj5TZWFyY2g8L2J1dHRvbj4NCg0KDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM1NTU7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiA1cHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyI+DQogICAgICAgICAgICAgICAgKiBTZWFyY2ggTG9naWM6IFJldmVyc2Ugc2VhcmNoLiBObyBQcmVmaXg9RnVsbCwgTS09UGhvbmUsIE4tPU5hbWUsIFQtPVRyYW5zIFJlZiwgUC09UEFOLiBOb3QgZm91bmQgcmVzZXRzIHRvIGxhdGVzdCByZWNvcmQuDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0icmVjZWlwdC1wcmV2aWV3LXJvdyI+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlY2VpcHQtd29ya3NwYWNlIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlLXBhbmVsIiBpZD0ibGVmdC1ldmVudHMiPg0KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iZXZlbnQxLmpwZyIgY2xhc3M9ImV2ZW50LXBob3RvIiBhbHQ9IlJlY2VudCBFdmVudCI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJyZWNlaXB0X2Rpc3BsYXlfYXJlYSI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlLXBhbmVsIiBpZD0icmlnaHQtZXZlbnRzIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9ImV2ZW50Mi5qcGciIGNsYXNzPSJldmVudC1waG90byIgYWx0PSJSZWNlbnQgRXZlbnQiPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCg0KDQogICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1mb290ZXIiIHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyI+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tcGRmIiBvbmNsaWNrPSJkb3dubG9hZFJlY2VpcHRQREYoKSI+RG93bmxvYWQgUERGPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4td2EiIG9uY2xpY2s9InNlbmRXaGF0c0FwcCgpIj5XaGF0c0FwcCBSZWNlaXB0PC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tc21zIiBjbGFzcz0iYnRuLXdhIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjsgZGlzcGxheTogbm9uZTsiIG9uY2xpY2s9InNlbmRTTVMoKSI+U01TIFJlY2VpcHQ8L2J1dHRvbj4NCiAgICAgICAgICAgIA0KDQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgbWFyZ2luOiAyMHB4IDA7Ij4NCiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJtbXB0X2ZpbGVfaW5wdXQiIGlkPSJtbXB0X21haW5fYnRuIg0KICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7IHBhZGRpbmc6MTVweDsgZm9udC1zaXplOjE4cHg7IGJhY2tncm91bmQ6IzIxOTZGMzsgY29sb3I6d2hpdGU7IGJvcmRlci1yYWRpdXM6OHB4OyBjdXJzb3I6cG9pbnRlcjsgd2lkdGg6IDkwJTsgZm9udC13ZWlnaHQ6Ym9sZDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAg8J+TuCBTQ0FOIE9SIFVQTE9BRCBSRUNFSVBUDQogICAgICAgICAgICAgICAgPC9sYWJlbD4NCiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9Im1tcHRfZmlsZV9pbnB1dCIgYWNjZXB0PSJpbWFnZS8qIiBjYXB0dXJlPSJlbnZpcm9ubWVudCIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogLTk5OTlweDsiPg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8ZGl2IGlkPSJzZWN1cml0eVBvcnRhbCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsgcG9zaXRpb246Zml4ZWQ7IHRvcDoxMCU7IGxlZnQ6MTAlOyB3aWR0aDo4MCU7IGhlaWdodDo4MCU7IGJhY2tncm91bmQ6d2hpdGU7IGJvcmRlcjoycHggc29saWQgIzMzMzsgei1pbmRleDo5OTk5OyBvdmVyZmxvdy15OmF1dG87IHBhZGRpbmc6MjBweDsgYm94LXNoYWRvdzogMHB4IDBweCAyMHB4IHJnYmEoMCwwLDAsMC41KTsiPg0KICAgICAgICAgICAgPGgzPlVzZXIgQWNjZXNzIENvbnRyb2wgTGlzdDwvaDM+DQogICAgICAgICAgICA8cD5Ub2dnbGUgYWNjZXNzIGZvciBmZWF0dXJlcy4gIlkiID0gVmlzaWJsZSwgIk4iID0gSGlkZGVuLjwvcD4NCiAgICAgICAgICAgIDx0YWJsZSBpZD0icGVybVRhYmxlIiBib3JkZXI9IjEiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ij4NCiAgICAgICAgICAgICAgICA8dGhlYWQ+PHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNlZWU7Ij48dGg+RmVhdHVyZS9PYmplY3Q8L3RoPjx0aD5BY2Nlc3MgKFkvTik8L3RoPjwvdHI+PC90aGVhZD4NCiAgICAgICAgICAgICAgICA8dGJvZHkgaWQ9InBlcm1Cb2R5Ij48L3Rib2R5Pg0KICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgIDxicj4NCiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG93bmxvYWRTZXR0aW5nc0ZpbGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6Z3JlZW47IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7Ij5HZW5lcmF0ZSBTZXR0aW5ncyBGaWxlPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWN1cml0eVBvcnRhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnIj5DbG9zZTwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCg0KDQoNCg0KICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQoNCg0KICAgIDxkaXYgaWQ9ImFkbWluLXBhbmVsLWNvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsgbWFyZ2luLXRvcDoyMHB4OyBtYXgtd2lkdGg6IDgwMHB4OyI+DQogICAgICAgIDxoMyBzdHlsZT0iY29sb3I6ICMwMDMzNjY7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbTogMTBweDsiPkFkbWluaXN0cmF0aXZlIENvbnRyb2wgUGFuZWw8L2gzPg0KICAgICAgICA8dGFibGUgYm9yZGVyPSIwIiBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTsgYm9yZGVyLXNwYWNpbmc6IDEycHg7Ij4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTAlOyI+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bi1jb250cm9sLWxpc3QiIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogI2NjY2NjYzsgY29sb3I6ICM2NjY2NjY7IHdpZHRoOiAxMDAlOyBjdXJzb3I6IG5vdC1hbGxvd2VkOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJyZXR1cm4gZmFsc2U7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29udHJvbCBMaXN0DQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmMDkzZmIgMCUsICNmNTU3NmMgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5Bbm9ueUZpbGwoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBBbm9ueUZpbGwNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNDNlOTdiIDAlLCAjMzhmOWQ3IDEwMCUpOyB3aWR0aDogMTAwJTsgY29sb3I6ICMwMDMzNjY7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bk1NUFRCYWNrdXAoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBCYWNrdXAgU3lzdGVtDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZhNzA5YSAwJSwgI2ZlZTE0MCAxMDAlKTsgd2lkdGg6IDEwMCU7IGNvbG9yOiAjMDAzMzY2OyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5Db3VudHJ5RmllbGRDb3JyZWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBDb3VudHJ5IEZpZWxkDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzZhMTFjYiAwJSwgIzI1NzVmYyAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkNpdHlFeHRyYWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ2l0eSBOYW1lcw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZjA4NDQgMCUsICNmZmIxOTkgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5DaXR5Q29ycmVjdGlvbkFwcGx5KCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBDaXR5IE5hbWVzDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzJiNTg3NiAwJSwgIzRlNDM3NiAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkRvbm9yTmFtZUNoZWNrKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgRG9ub3IgTmFtZSBDaGVjaw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNhNDQ1YjIgMCUsICNkNDE4NzIgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5Eb25vck5hbWVDb3JyZWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBEb25vciBOYW1lDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzMwY2ZkMCAwJSwgIzMzMDg2NyAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkFkZHJlc3NDaGVjaygpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEFkZHJlc3MgQ2hlY2sNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMDkyMDNmIDAlLCAjNTM3ODk1IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQWRkcmVzc0NvcnJlY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IEFkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjOGU0NGFkIDAlLCAjNzMyZDkxIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0idHJpZ2dlckZ1bGxBdWRpdCgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEF1ZGl0IERhdGFiYXNlDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzJlY2M3MSAwJSwgIzI3YWU2MCAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1blBBTkNvcnJlY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IFBBTg0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMwMGIwOWIgMCUsICM5NmM5M2QgMTAwJSk7IHdpZHRoOiAxMDAlOyBjb2xvcjogIzAwMzM2NjsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0iZ2VuZXJhdGVBZGRyZXNzTGFiZWxzKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQWRkcmVzcyBMYWJlbHMNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImxhYmVsLWNvdW50cnktZmlsdGVyIiBzdHlsZT0id2lkdGg6MTAwJTsgaGVpZ2h0OjQ1cHg7IGJvcmRlci1yYWRpdXM6OHB4OyBwYWRkaW5nOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoycHggc29saWQgIzAwYjA5YjsgYmFja2dyb3VuZDogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFMTCI+QWxsIENvdW50cmllczwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWUzYzcyIDAlLCAjMmE1Mjk4IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuVW5pcXVlRG9ub3JMaXN0KCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgRG9ub3IgTGlzdA0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJkb25vci1zZWFyY2gtaW5wdXQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iU2VhcmNoIChlLmcuIFByYXNhZCwgQ2hlbm5haSBvciBQcmFzYWQgOyBDaGVubmFpKSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6NDVweDsgYm9yZGVyLXJhZGl1czo4cHg7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjMmE1Mjk4OyI+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0ciBpZD0iYWRtaW4tcGhvdG8tcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQgaWQ9InNuYXAtYm94LTEiIHN0eWxlPSJ3aWR0aDo1MCU7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjE1cHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBib3JkZXItcmFkaXVzOiA4cHg7Ij48L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBpZD0ic25hcC1ib3gtMiIgc3R5bGU9IndpZHRoOjUwJTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MTVweDsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IGJvcmRlci1yYWRpdXM6IDhweDsiPjwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgIDwvdGFibGU+DQogICAgPC9kaXY+DQoNCg0KICAgIDxociBzdHlsZT0ibWFyZ2luLXRvcDogNDBweDsgYm9yZGVyOiAwOyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsiPg0KDQoNCiAgICA8c2NyaXB0Pg0KDQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9EQiA9ICcvRGF0YUJhc2VzL01NUFQyLktQJzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX1NFUSA9ICcvRGF0YUJhc2VzL3NlcXVlbmNlLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfTVNHX1BBVEggPSAiL1NldHRpbmdzL1VzZXJNZXNzYWdlLnR4dCI7DQoNCg0KDQogICAgICAgIHZhciBHTE9CQUxfQ0lUWV9SRVBPUlRfREFUQSA9ICIiOw0KICAgICAgICB2YXIgR0xPQkFMX0RPTk9SX05BTUVfREFUQSA9ICIiOw0KICAgICAgICB2YXIgR0xPQkFMX0FERFJFU1NfQ09SUkVDVElPTl9EQVRBID0gIiI7DQoNCiAgICAgICAgbGV0IHJlYWR5SW5kaWNlcyA9IFtdOyAvLyBIb2xkcyBpbmRpY2VzIGZvciB0aGUgUlIgZmlsdGVyDQoNCiAgICAgICAgLy8gLS0tIEdMT0JBTCBTVEFCTEUgSUQgU0VUVVAgLS0tDQogICAgICAgIGxldCBNTVBUX0dMT0JBTF9JRCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdNTVBUX1NUQUJMRV9JRCcpOw0KDQogICAgICAgIC8vIEZvcmNlIGEgbmV3IElEIGlmIGl0J3MgZW1wdHkgT1IgaWYgaXQgZG9lc24ndCBoYXZlIHlvdXIgcHJlZml4DQogICAgICAgIGlmICghTU1QVF9HTE9CQUxfSUQgfHwgIU1NUFRfR0xPQkFMX0lELnN0YXJ0c1dpdGgoIk1NUFQtREVWLVNXLSIpKSB7DQogICAgICAgICAgICBjb25zdCByYW5kb21TdWZmaXggPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIE1NUFRfR0xPQkFMX0lEID0gIk1NUFQtREVWLVNXLSIgKyByYW5kb21TdWZmaXg7DQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnTU1QVF9TVEFCTEVfSUQnLCBNTVBUX0dMT0JBTF9JRCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCg0KDQoNCiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBbDQogICAgICAgICAgICAvLyBGaXNjYWwgWWVhcnMNCiAgICAgICAgICAgICJGWTIwMjEtMjAyMiIsICJGWTIwMjItMjAyMyIsICJGWTIwMjMtMjAyNCIsICJGWTIwMjQtMjAyNSIsICJGWTIwMjUtMjAyNiIsDQogICAgICAgICAgICAvLyBVSSBFbGVtZW50cyAoUm93cy9TZWN0aW9ucykNCiAgICAgICAgICAgICJBZG1pbl9Sb3ciLCAiRGFzaGJvYXJkX1NlY3Rpb24iLCAiSGlzdG9yeV9UYWIiLA0KICAgICAgICAgICAgLy8gQnV0dG9ucw0KICAgICAgICAgICAgImJ0bl9zYXZlIiwgImJ0bl9kZWxldGUiLCAiYnRuX3ByaW50IiwgImJ0bl9jYW5jZWwiLCAiYnRuX3N5bmMiLCAiYnRuX2V4cG9ydCINCiAgICAgICAgXTsNCg0KDQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Qb3J0YWwgU2VsZWN0aW9uIGZvciBhIHBhcnRpY3VsYXIgdXNlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gb3BlblNlY3VyaXR5UG9ydGFsKHRhcmdldFVzZXIpIHsNCiAgICAgICAgICAgIHVzZXJMaXN0ID0gdGV4dC5zcGxpdA0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt0YXJnZXRVc2VyfS50eHRgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IHt9Ow0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHRleHQuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgc2V0dGluZ3NbcGFydHNbMF0udHJpbSgpXSA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSBbJ2J0bl91bmxvY2snLCAnYnRuX2xvY2snLCAnc2VhcmNoQnRuJywgJ2Jhbmstc3luYy1idG4nLCAnYnRuX2NvbnNlbnQnLCAnYnRuU3VtbWFyeSddOw0KICAgICAgICAgICAgICAgIGxldCByb3dzSHRtbCA9ICIiOw0KDQogICAgICAgICAgICAgICAgLy8gTG9vcCBmb3IgWS9OIGRyb3Bkb3ducw0KICAgICAgICAgICAgICAgIGNvbnRyb2xzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZXR0aW5nc1tpZF0gfHwgIlkiOw0KICAgICAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBmb250LWZhbWlseTpBcmlhbDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7aWR9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPjxzZWxlY3QgaWQ9ImlucHV0LSR7aWR9IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzo4cHg7Ij48b3B0aW9uIHZhbHVlPSJZIiAke3ZhbCA9PT0gJ1knID8gJ3NlbGVjdGVkJyA6ICcnfT5ZPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTiIgJHt2YWwgPT09ICdOJyA/ICdzZWxlY3RlZCcgOiAnJ30+Tjwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogICAgICAgICAgICAgICAgLy8gU1RBUlQ6IFRISVMgSVMgVEhFIEZJRUxEIFRIQVQgV0FTIE1JU1NJTkcgRlJPTSBZT1VSIFNDUkVFTg0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9ucyA9IHNldHRpbmdzWydzZWN0aW9ucyddIHx8ICIiOw0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsgZm9udC1mYW1pbHk6QXJpYWw7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5zZWN0aW9uczwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnB1dC1zZWN0aW9ucyIgdmFsdWU9IiR7Y3VycmVudFNlY3Rpb25zfSIgcGxhY2Vob2xkZXI9IkVudGVyIGRpZ2l0cyAxMjM0NTY3Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZTkxZTYzOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjExcHg7IGNvbG9yOiM2NjY7IG1hcmdpbi10b3A6NXB4OyI+VHlwZSAxLTcgaGVyZSB0byBzaG93L2hpZGUgYXBwIGNvbnRhaW5lcnMuPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGluZyBNaW5SZWNvcmROdW1iZXIgcm93DQogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE1pbiA9IHNldHRpbmdzWydNaW5SZWNvcmROdW1iZXInXSB8fCAiIjsNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzoxNXB4OyBmb250LWZhbWlseTpBcmlhbDsgZm9udC13ZWlnaHQ6Ym9sZDsiPk1pblJlY29yZE51bWJlcjwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5wdXQtTWluUmVjb3JkTnVtYmVyIiB2YWx1ZT0iJHtjdXJyZW50TWlufSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZTkxZTYzOyI+PC90ZD48L3RyPmA7DQoNCiAgICAgICAgICAgICAgICAvLyBUaGUgVUkgY29udGFpbmVyDQogICAgICAgICAgICAgICAgY29uc3QgcG9ydGFsSHRtbCA9IGA8ZGl2IGlkPSJwb3J0YWwtb3ZlcmxheSIgc3R5bGU9InBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7IHotaW5kZXg6MTAwMDA7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdy15OmF1dG87Ij48ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyB3aWR0aDo4MDBweDsgYWxpZ24tc2VsZjpmbGV4LXN0YXJ0OyI+PHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ij48dGJvZHk+JHtyb3dzSHRtbH08L3Rib2R5PjwvdGFibGU+PGRpdiBzdHlsZT0icGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOnJpZ2h0OyI+PGJ1dHRvbiBvbmNsaWNrPSJzYXZlUG9ydGFsU2V0dGluZ3MoJyR7dGFyZ2V0VXNlcn0nKSIgc3R5bGU9ImJhY2tncm91bmQ6IzgwMDAwMDsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweCAyMHB4OyBjdXJzb3I6cG9pbnRlcjsiPlNBVkUgQ0hBTkdFUzwvYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgcG9ydGFsSHRtbCk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJFcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1BvcnRhbCBTZWxlY3Rpb24gU2F2aW5nIGZvciAgYSBwYXJ0aWN1bGFyIHVzZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNhdmVQb3J0YWxTZXR0aW5ncyh0YXJnZXRVc2VyKSB7DQogICAgICAgICAgICAvLyBDb2xsZWN0IGFsbCBmaWVsZHMgaW5jbHVkaW5nICdzZWN0aW9ucycNCiAgICAgICAgICAgIGNvbnN0IGlkcyA9IFsnYnRuX3VubG9jaycsICdidG5fbG9jaycsICdzZWFyY2hCdG4nLCAnYmFuay1zeW5jLWJ0bicsICdidG5fY29uc2VudCcsICdidG5TdW1tYXJ5JywgJ3NlY3Rpb25zJywgJ01pblJlY29yZE51bWJlciddOw0KICAgICAgICAgICAgbGV0IGZpbGVMaW5lcyA9IFtdOw0KDQogICAgICAgICAgICBpZHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgaW5wdXQtJHtpZH1gKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGZpbGVMaW5lcy5wdXNoKGAke2lkfSB8ICR7ZWwudmFsdWUudHJpbSgpfWApOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gZmlsZUxpbmVzLmpvaW4oJ1xuJyk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZpbGVDb250ZW50DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJVcGRhdGVkIHN1Y2Nlc3NmdWxseSEiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC1vdmVybGF5JykucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRVc2VyID09PSBNTVBUX1VTRVJfTkFNRSkgYXBwbHlVc2VyUGVybWlzc2lvbnModGFyZ2V0VXNlcik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgiU2F2ZSBlcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NvbnN0YW50cw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgY29uc3Qgc2NyaXB0VVJMID0gImh0dHBzOi8vc2NyaXB0Lmdvb2dsZS5jb20vbWFjcm9zL3MvQUtmeWNienpiaVpDM19veUFkU3VBVWdYUjZJQlFtTlozZkVSbWhIVVZ4Q01TeTdFQVlDWDhqWDZGZ2VxNE1rcWgtcWJNQVowL2V4ZWMiOw0KDQogICAgICAgIGNvbnN0IE1NUFRfVkVSU0lPTiA9ICIzMy4wIjsNCiAgICAgICAgLy8gQWxsIG9yaWdpbmFsIEF1dGhlbnRpY2F0aW9uIEtleXMgcHJlc2VydmVkIGZyb20gZDQzDQogICAgICAgIGNvbnN0IE1NUFRfQVVUSF9LRVkgPSAnMmtnemR2ZWkxMGMzcm1qJzsNCiAgICAgICAgY29uc3QgTU1QVF9BVVRIX1NFQ1JFVCA9ICc3d2pscWszcWtvczZrb3InOw0KICAgICAgICBjb25zdCBNTVBUX0FVVEhfUkVGUkVTSCA9ICdIV2c2a1NURUdzc0FBQUFBQUFBQUFZNmpZXzdPdTdid1M4cFhCMzJjQy1TZ29IZGJWeGlGRDcwWGlVNDV6VTkyJzsNCg0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfVVNFUlMgPSAnL1NldHRpbmdzL1VzZXJzLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9BUFBST1ZFRCA9ICcvU2V0dGluZ3MvQXBwcm92ZWQudHh0JzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0xPR08gPSAnL0ltYWdlcy9Mb2dvLmpwZyc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9EUk9QRE9XTlMgPSAnL1NldHRpbmdzL0Ryb3BEb3duLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9DQVNIID0gJy9TZXR0aW5ncy9DYXNoRGVwb3NpdGVkLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9CQU5LID0gJy9EYXRhQmFzZXMvTU1QVDMuS1AnOw0KICAgICAgICBjb25zdCBNTVBUX1VSTF9FWFBFTlNFUyA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2E1ZTg4dmp6YjZ3MnFtZWwzeXN5eC9FeHBlbnNlcy54bHN4P3Jsa2V5PWptZDhpMGpzMXNreGwydnlhdnM3cG84eXAmZGw9MSI7DQogICAgICAgIGNvbnN0IEJBTktfU1RBVEVNRU5UX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2YyN211eWxvYmRhanZ6bXhjaTg1ZC9CYW5rU3RhdGVtZW50Lnhscz9ybGtleT1yNDNqMHN2bm1saWczcW02aWFpcmJ0b2pkJmRsPTEiOw0KICAgICAgICBjb25zdCBFWEVNUFRfRklMRSA9ICIvU2V0dGluZ3MvRXhlbXB0LnR4dCI7DQogICAgICAgIGNvbnN0IE1NUFRfTE9HX0RJUiA9ICIvTG9ncy8iOyAvLyBUaGUgZm9sZGVyIGZvciB1c2VyIGxvZ3MNCiAgICAgICAgbGV0IE1NUFRfUkFESU9fRklMRSA9ICcnOw0KDQogICAgICAgIGNvbnN0IE1NUFRfTElOS19BTk9OWSA9ICdodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpLzN0NWQ2ajJhcTF2YXpubDVpOXo3eC9Bbm9ueUZpbGwudHh0P3Jsa2V5PW54Zmw5eTI3cGVlcXYwdHN6ZWpjaTNmZTYmZGw9MSc7DQoNCiAgICAgICAgY29uc3QgTU1QVF9EQl9SQVdfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvajZ1M2hvMTRkeHlkcjV2Nmg1aGJpL01NUFQyLktQP3Jsa2V5PTNla3VycnE4d2t6MDhic3BpeHpnamo1enImc3Q9Y3B0eW5uYmQmcmF3PTEiOw0KDQogICAgICAgIGNvbnN0IENJVFlfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvNDdmYnF3Nzlxb2x5Y3FiMzVzOHVnL0NpdHlDb3JyZWN0aW9ucy50eHQ/cmxrZXk9enczdWI3cjN0MmlvNGJkMnFxM2F1eTQ0eSZkbD0xIjsNCg0KICAgICAgICBjb25zdCBDT1VOVFJZX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2ducjFvMmQ0cmNiZGJ6NzVmeGZrYi9Db3VudHJ5Q29ycmVjdGlvbnMudHh0P3Jsa2V5PTc0Zmx0cnh5bThnMGc4OHFlaWVqajFid3omZGw9MSI7DQoNCiAgICAgICAgY29uc3QgTkFNRV9DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9icWJ4dnhiMWkyM3M4cmRvZjdqdjIvTmFtZUNvcnJlY3Rpb25zLnR4dD9ybGtleT1odHhlNTJnOGV5bTBuZXBhd3ZmaXM1Mm1oJmRsPTEiOw0KDQogICAgICAgIGNvbnN0IE1NUFRfQkFDS1VQX0RJUiA9ICcvQmFja3VwLyc7DQoNCiAgICAgICAgY29uc3QgTU1QVF9JTUdfRVZFTlQxID0gJy9JbWFnZXMvRXZlbnQxLmpwZyc7DQogICAgICAgIGNvbnN0IE1NUFRfSU1HX0VWRU5UMiA9ICcvSW1hZ2VzL0V2ZW50Mi5qcGcnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfRVZFTlRTX1RYVCA9ICcvSW1hZ2VzL0V2ZW50c0RldGFpbHMudHh0JzsNCg0KICAgICAgICAvLyBEeW5hbWljIEFkbWluIENvbnRhY3QgQ29uc3RhbnRzDQogICAgICAgIGNvbnN0IE1NUFRfTElOS19BRE1JTl9DT05UQUNUID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvMmp6enpsbDZqZ3lvdGl0MjIyaGY3L0FkbWluQ29udGFjdC50eHQ/cmxrZXk9ajV0djkyeWNkNHNuNjVzY2psbHVmcGRrZiZkbD0xIjsNCiAgICAgICAgbGV0IEFkbWluUGhvbmVOdW1iZXIgPSAiOTE5OTYyMjgyMjgyIjsgLy8gRGVmYXVsdCBmYWxsYmFjaw0KDQoNCg0KDQogICAgICAgIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID0gMDsgLy8gRGVmYXVsdDogTm8gcmVzdHJpY3Rpb24NCg0KICAgICAgICBjb25zdCBwYW5lbENvbnRlbnQgPSAodGl0bGUsIHVybCkgPT4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmY5OTMzOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZsZXgtc2hyaW5rOiAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RpdGxlfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXZlbnQtaW1nLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHt1cmx9IiBhbHQ9IkV2ZW50Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQpgOw0KDQogICAgICAgIGxldCBpc0RpcnR5ID0gZmFsc2U7IC8vIFRyYWNrcyBpZiB0aGUgcmVjb3JkIGhhcyB1bnNhdmVkIGNoYW5nZXMNCg0KICAgICAgICBsZXQgTU1QVF9URU1QMSA9ICIiOw0KICAgICAgICBsZXQgTU1QVF9URU1QMyA9ICIiOw0KDQogICAgICAgIGxldCBNTVBUX1VTRVJfTkFNRSA9ICIiOw0KICAgICAgICBsZXQgTU1QVF9ERVZJQ0VfSUQgPSAiIjsNCg0KDQogICAgICAgIGxldCBHTE9CQUxfREJfTElORVMgPSBbXTsNCiAgICAgICAgbGV0IGN1cnJlbnRSZWNvcmRJbmRleCA9IDA7DQogICAgICAgIGxldCBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IC0xOw0KICAgICAgICBsZXQgdCA9ICIiOw0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NvbnNlbnQgbGV0dGVyIGRvd25sb2FkIGJ1dHRvbiBlbmFibGUgLyBkaXNhYmxlIGxvZ2ljDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gTkVXIENPTlNFTlQgTE9HSUMgLS0tDQogICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlQ29uc2VudCgpIHsNCiAgICAgICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZSkgfHwgMDsNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2NvbnNlbnQnKTsNCg0KICAgICAgICAgICAgLy8gUnVsZTogRW5hYmxlZCAoU29saWQgUmVkKSBpZiBUb3dhcmRzIGlzIENvcnB1cyBBTkQgQW1vdW50ID49IDEwLDAwMA0KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlOiBEaXNhYmxlZCAoRmFkZWQgUmVkKQ0KICAgICAgICAgICAgaWYgKHRvd2FyZHMuaW5jbHVkZXMoIkNPUlBVUyIpICYmIGFtdCA+PSAxMDAwMCkgew0KICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAiYnRuLWFjdGlvbiBidG4tY29uc2VudC1hY3RpdmUiOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAiYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Qb3B1bGF0ZXMgdGhlIDIwIGZpZWxkcyBvZiByZWNlaXB0cyBmcm9tIGRiIGZvciBzZWxlY3RlZCByZWNlaXB0DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkaXNwbGF5UmVjb3JkKGluZGV4KSB7DQogICAgICAgICAgICBpZiAoIUdMT0JBTF9EQl9MSU5FU1tpbmRleF0pIHJldHVybjsNCg0KDQogICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICByZXNldFNpZGVQYW5lbHMoKTsNCg0KDQogICAgICAgICAgICBjb25zdCBjb2xzID0gR0xPQkFMX0RCX0xJTkVTW2luZGV4XS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAvLyBIZWxwZXIgdG8gc2FmZWx5IHNldCB2YWx1ZXMNCiAgICAgICAgICAgIGNvbnN0IHNldFZhbCA9IChpZCwgdmFsKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSBlbC52YWx1ZSA9IHZhbCA/IHZhbC50cmltKCkgOiAiIjsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbnN0IHNldENoZWNrID0gKGlkLCB2YWwpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLmNoZWNrZWQgPSAodmFsPy50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyIpOw0KICAgICAgICAgICAgfTsNCg0KDQogICAgICAgICAgICAvLyBBREQgVEhJUyBMSU5FIEhFUkU6DQogICAgICAgICAgICB3cml0ZVVzZXJMb2coInZpZXdlZCByZWNlaXB0IG51bWJlcjogIiArIChjb2xzWzBdIHx8ICJCTEFOSyIpKTsNCg0KICAgICAgICAgICAgLy8gRVhBQ1QgTUFQUElORyBGT1IgTU1QVDIuS1AgKFYxLjcgU3RhbmRhcmRzKQ0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9yZWNubycsIGNvbHNbMF0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9kYXRlJywgY29sc1sxXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX25hbWUnLCBjb2xzWzJdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfcGhvbmUnLCBjb2xzWzNdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfYWRkcmVzcycsIGNvbHNbNF0/LnJlcGxhY2UoL34vZywgJ1xuJykpOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9lbWFpbCcsIGNvbHNbNV0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9wYW4nLCBjb2xzWzZdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfc3RhcicsIGNvbHNbN10pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9nb3RocmFtJywgY29sc1s4XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2Ftb3VudCcsIGNvbHNbOV0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9yZWYnLCBjb2xzWzEwXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX21vZGUnLCBjb2xzWzExXSk7DQoNCiAgICAgICAgICAgIC8vIFRvd2FyZHMgb2Z0ZW4gY29udGFpbnMgYSBzdWZmaXggKGUuZy4sICJDT1JQVVMgLSA4MEciKSwgd2UgdHJpbSBpdCBmb3IgdGhlIGRyb3Bkb3duIG1hdGNoDQogICAgICAgICAgICBjb25zdCB0b3dhcmRzUmF3ID0gY29sc1sxMl0gfHwgIiI7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3Rvd2FyZHMnLCB0b3dhcmRzUmF3LnNwbGl0KCctJylbMF0udHJpbSgpKTsNCg0KICAgICAgICAgICAgc2V0Q2hlY2soJ2ZpZWxkX2NhbmNlbCcsIGNvbHNbMTNdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfY29tbWVudHMnLCBjb2xzWzE0XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3BpbmNvZGUnLCBjb2xzWzE1XSk7DQogICAgICAgICAgICBzZXRDaGVjaygnZmllbGRfcHJpbnRlZCcsIGNvbHNbMTZdKTsNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9wcmFzYWRhbScsIGNvbHNbMTddKTsNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9jb3JwdXMnLCBjb2xzWzE4XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2NvdW50cnknLCBjb2xzWzE5XSB8fCAiSU5ESUEiKTsNCg0KICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGVDb25zZW50ID09PSAiZnVuY3Rpb24iKSB2YWxpZGF0ZUNvbnNlbnQoKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlUmVjZWlwdFByZXZpZXcgPT09ICJmdW5jdGlvbiIpIHVwZGF0ZVJlY2VpcHRQcmV2aWV3KGluZGV4KTsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZSA9IGluZGV4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUmVjZWlwdCBQcmV2aWV3DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVSZWNlaXB0UHJldmlldyhpbmRleCkgew0KICAgICAgICAgICAgY29uc3QgZiA9IEdMT0JBTF9EQl9MSU5FU1tpbmRleF0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgIGNvbnN0IGxvZ29TcmMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkxvZ29JbWcnKT8uc3JjIHx8ICIiOw0KDQogICAgICAgICAgICAvLyBFeHRyYWN0IHNwZWNpYWwgdG93YXJkcyB7YnJhY2tldHN9DQogICAgICAgICAgICBjb25zdCBjb21tZW50cyA9IGZbMTRdIHx8ICIiOw0KICAgICAgICAgICAgY29uc3Qgc3BlY2lhbE1hdGNoID0gY29tbWVudHMubWF0Y2goL1x7Lio/XH0vKTsNCiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxUb3dhcmRzID0gc3BlY2lhbE1hdGNoID8gc3BlY2lhbE1hdGNoWzBdIDogIiI7DQoNCiAgICAgICAgICAgIC8vIERhdGEgTWFwcGluZw0KICAgICAgICAgICAgY29uc3QgcGluY29kZSA9IGZbMTVdIHx8ICIiOw0KICAgICAgICAgICAgY29uc3QgY291bnRyeSA9IGZbMTldIHx8ICJJTkRJQSI7DQoNCiAgICAgICAgICAgIC8vIC0tLSBXQVRFUk1BUksgTE9HSUMgLS0tDQogICAgICAgICAgICBjb25zdCBpc0NhbmNlbGxlZCA9IChmWzEzXT8udHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiKTsNCiAgICAgICAgICAgIGNvbnN0IHdhdGVybWFya0hUTUwgPSBpc0NhbmNlbGxlZCA/DQogICAgICAgICAgICAgICAgYDxkaXYgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1MCU7IGxlZnQ6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgcm90YXRlKC0zMGRlZyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDYwcHQ7IGNvbG9yOiByZ2JhKDI1NSwgMCwgMCwgMC4yNSk7IGZvbnQtd2VpZ2h0OiBib2xkOyBib3JkZXI6IDEwcHggc29saWQgcmdiYSgyNTUsIDAsIDAsIDAuMjUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4OyB6LWluZGV4OiAxMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENBTkNFTExFRA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gIDogIiI7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNlaXB0X2Rpc3BsYXlfYXJlYScpLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icmVjZWlwdC1jb250YWluZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgcG9zaXRpb246IHJlbGF0aXZlOyBvdmVyZmxvdzogaGlkZGVuOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3dhdGVybWFya0hUTUx9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iaGVhZGVyLXRhYmxlIiBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0ibG9nby1jb2wiIHN0eWxlPSJ3aWR0aDogNzBwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bG9nb1NyY30iIHN0eWxlPSJ3aWR0aDogNzBwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImFkZHJlc3MtY29sIiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0cnVzdC1uYW1lIiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTRwdDsiPk1ZTEFJIE1BSEFQRVJJWUFWQSBBTlVTSEFNIFRSVVNUIChSRUdELik8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRydXN0LWRldGFpbHMiIHN0eWxlPSJmb250LXNpemU6IDlwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5ldyBOby4gNCwgT2xkIE5vLiAyMywgUGl0Y2h1cGlsbGFpIFN0cmVldCwgTXlsYXBvcmUsIENoZW5uYWktNjAwIDAwNC48YnI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGhvbmU6IDYzODA4OTgyMzEsIDg2MTAyMTQxMzguIFdoYXRzQXBwOiA2MzgwODk4MjMxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idmFyaWFibGUtcm93IiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tdG9wOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RGF0ZTogJHtmWzFdfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEycHQ7Ij5SRUNFSVBUPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPk5vOiAke2ZbMF19PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHQ7IGZvbnQtc2l6ZTogMTAuNXB0OyBsaW5lLWhlaWdodDogMS42OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWl2ZWQgd2l0aCB0aGFua3MgUnMuIDxiPiR7Zls5XX08L2I+ICg8Yj5SdXBlZXMgJHt0b1dvcmRzKGZbOV0pfSBvbmx5PC9iPikgZm9yIDxiPiR7ZlsxMl19PC9iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpYSAke2ZbMTFdfSA8Yj4ke2ZbMTBdIHx8ICcnfTwvYj4gZnJvbToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaXZpZGVyIiBzdHlsZT0iYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7IG1hcmdpbjogMTBweCAwOyI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iZG9ub3ItdGFibGUiIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgbGluZS1oZWlnaHQ6IDEuODsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDogMjAlOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+TmFtZTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48Yj4ke2ZbMl19PC9iPjwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPlBBTjwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2ZbNl0gfHwgJ04vQSd9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyI+JHtzcGVjaWFsVG93YXJkc308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPlBob25lPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7ZlszXSB8fCAnTi9BJ308L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiB0b3A7Ij5BZGRyZXNzPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7Zls0XX0gLSAke3BpbmNvZGV9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+Q291bnRyeTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4ke2NvdW50cnl9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGl2aWRlciIgc3R5bGU9ImJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjOyBtYXJnaW46IDEwcHggMDsiPjwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgbWFyZ2luLXRvcDogNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiA3cHQ7IGZvbnQtc3R5bGU6IGl0YWxpYzsiPipDb21wdXRlciBHZW5lcmF0ZWQgUmVjZWlwdCAtIE5vIHNpZ25hdHVyZSBSZXF1aXJlZDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci10cnVzdC1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDlwdDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgTVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb290ZXItdGF4LWluZm8iIHN0eWxlPSJmb250LXNpemU6IDhwdDsgbWFyZ2luLXRvcDogMTVweDsgYm9yZGVyLXRvcDogMXB4IGRhc2hlZCAjZWVlOyBwYWRkaW5nLXRvcDogNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VjIDEyLUEgVmFsaWQgdGlsbCAzMS0wMy0yMDI2IHwgUEFOIEFBRVRNNTE0NUoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCmA7DQoNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0ZldGNoIERyb2JveCBUb2tlbiBmcm9tIGFwaQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQWxsIEF1dGgvVG9rZW4vTG9hZCBsb2dpYyBwcmVzZXJ2ZWQgZnJvbSBkNDMNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0TU1QVFRva2VuKCkgew0KICAgICAgICAgICAgY29uc3QgaCA9IGJ0b2EoTU1QVF9BVVRIX0tFWS50cmltKCkgKyAiOiIgKyBNTVBUX0FVVEhfU0VDUkVULnRyaW0oKSk7DQogICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0Jhc2ljICcgKyBoLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfSwNCiAgICAgICAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgJ2dyYW50X3R5cGUnOiAncmVmcmVzaF90b2tlbicsICdyZWZyZXNoX3Rva2VuJzogTU1QVF9BVVRIX1JFRlJFU0gudHJpbSgpIH0pDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsgcmV0dXJuIGQuYWNjZXNzX3Rva2VuIHx8IG51bGw7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Jbml0aWFsaXplcyBkYXRhIGF0IGxhdW5jaC4gdmVyeSBjcnVjaWFsLiBwcm9ibGVtYXRpYyBmdW5jdGlvbi4gbm90IHRvIGJlIGRpc3R1cmJlZC4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVNTVBUKCkgew0KICAgICAgICAgICAgLy8gMS4gSEFSRFdBUkUgSUQgJiBWRVJTSU9OIFNFVFVQDQogICAgICAgICAgICBjb25zdCBjdnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgIGNvbnN0IGdsID0gY3ZzLmdldENvbnRleHQoJ3dlYmdsJyk7DQogICAgICAgICAgICBjb25zdCBkSSA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbycpOw0KICAgICAgICAgICAgY29uc3QgcmVuID0gZ2wuZ2V0UGFyYW1ldGVyKGRJLlVOTUFTS0VEX1JFTkRFUkVSX1dFQkdMKTsNCiAgICAgICAgICAgIGxldCBoYXNoID0gMDsNCiAgICAgICAgICAgIGNvbnN0IHN0ciA9IG5hdmlnYXRvci51c2VyQWdlbnQgKyByZW4gKyBzY3JlZW4ud2lkdGggKyBzY3JlZW4uaGVpZ2h0Ow0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBzdHIuY2hhckNvZGVBdChpKTsNCiAgICAgICAgICAgICAgICBoYXNoIHw9IDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IGRldklEID0gTU1QVF9HTE9CQUxfSUQ7DQogICAgICAgICAgICBNTVBUX0RFVklDRV9JRCA9IGRldklEOw0KDQoNCg0KICAgICAgICAgICAgLy8gUmVzdG9yZSBVSSBkaXNwbGF5IG9mIElEIGFuZCBWZXJzaW9uDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheURldmljZUlEJykuaW5uZXJUZXh0ID0gZGV2SUQ7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheVZlcnNpb24nKS5pbm5lclRleHQgPSBNTVBUX1ZFUlNJT047DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdCA9IGF3YWl0IGdldE1NUFRUb2tlbigpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gTE9HTyBGRVRDSCBMT0dJQyAoUmVzdG9yZWQpDQogICAgICAgICAgICAgICAgY29uc3QgbFIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfTE9HTyB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAobFIub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IGF3YWl0IGxSLmJsb2IoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYik7DQogICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgJ3UnIGlzIHRoZSBibG9iIFVSTCB1c2VkIGJ5IGRpc3BsYXlSZWNvcmQgZm9yIHRoZSByZWNlaXB0IGxvZ28NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29Db250YWluZXInKS5pbm5lckhUTUwgPSBgPGltZyBzcmM9IiR7dX0iIGNsYXNzPSJsb2dvLWNpcmNsZSBsb2dvLWxhcmdlIj5gOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb0hlYWRlckNvbnRhaW5lcicpLmlubmVySFRNTCA9IGA8aW1nIGlkPSJtYWluTG9nb0ltZyIgc3JjPSIke3V9IiBjbGFzcz0ibG9nby1jaXJjbGUiPmA7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ3JpdGljYWw6IEVuc3VyZSB0aGUgZ2xvYmFsIHJlZmVyZW5jZSBmb3IgdGhlIHJlY2VpcHQgaW1hZ2UgZXhpc3RzDQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5NTVBUX0xPR09fQkxPQl9VUkwgPSB1Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDMuIEFDQ0VTUyBDT05UUk9MICYgTVVMVEktVVNFUiBMT0dJQw0KICAgICAgICAgICAgICAgIGNvbnN0IGFSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0FQUFJPVkVEIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBhVCA9IGF3YWl0IGFSLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIC8vIEZpbmQgYWxsIG1hdGNoaW5nIHVzZXJzIGZvciB0aGlzIGRldmljZQ0KICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBhVC5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiBsLnRyaW0oKSAhPT0gIiIgJiYgbC5pbmNsdWRlcyhNTVBUX0RFVklDRV9JRCkpOw0KDQogICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBNVUxUSS1VU0VSOiBMZXQgdGhlIHVzZXIgc2VsZWN0IHRoZWlyIHByb2ZpbGUNCiAgICAgICAgICAgICAgICAgICAgc2hvd1VzZXJJZGVudGl0eVNlbGVjdG9yKG1hdGNoZXMsIHQsIE1NUFRfREVWSUNFX0lEKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBTSU5HTEUgVVNFUjogUHJvY2VlZCB0byBzZWN1cml0eSBnYXRlDQogICAgICAgICAgICAgICAgICAgIHJ1blBlcnNvbmFsU2VjdXJpdHlHYXRlKG1hdGNoZXNbMF0sIE1NUFRfREVWSUNFX0lEKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlZDogTG9nIHRoZSBzdWNjZXNzZnVsIGxhdW5jaA0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2dMYXVuY2goKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAvLyBBQ0NFU1MgUkVTVFJJQ1RFRCAoUmVzdG9yZWQgZnVsbCBVSSBibG9jaykNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFpbkF1dGhTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aFNjcmVlbicpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWFpbkF1dGhTY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5BdXRoU2NyZWVuLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGhlaWdodDogMTAwdmg7IGJhY2tncm91bmQ6ICNmNGY0ZjQ7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMjBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmZjsgcGFkZGluZzogMzBweDsgYm9yZGVyLXJhZGl1czogMTVweDsgYm9yZGVyOiAycHggc29saWQgI2ZmNGQ0ZDsgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLDAsMCwwLjEpOyBtYXgtd2lkdGg6IDQ1MHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjogI2Q5NTM0ZjsiPvCfmqsgQUNDRVNTIFJFU1RSSUNURUQ8L2gyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkRldmljZSBJRDogPGI+JHtNTVBUX0RFVklDRV9JRH08L2I+IGlzIG5vdCByZWdpc3RlcmVkLjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImxvY2F0aW9uLnJlbG9hZCgpIiBzdHlsZT0iYmFja2dyb3VuZDogI2Q5NTM0ZjsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEycHggMjVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyB3aWR0aDogMTAwJTsiPlJFVFJZIENPTk5FQ1RJT048L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2hlY2tEZXZpY2VGb3JTTVMoKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJNTVBUIEluaXRpYWxpemF0aW9uIENyaXRpY2FsIEZhaWx1cmU6IiwgZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQoNCg0KDQoNCg0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUG9wdWxhdGVzIGRyb3Bkb3duIG1lbnVzIGZvciBUb3dhcmRzIGFuZCBNb2RlIC0gbGlzdCBmcm9tIERyb3BEb3duLnR4dCBpbiBzZXR0aW5ncyBmb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREcm9wZG93bnModG9rZW4pIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZHJSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfRFJPUERPV05TIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghZHJSLm9rKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCBkclIudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdHh0LnNwbGl0KCdcbicpLm1hcChsID0+IGwudHJpbSgpKS5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbVMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKTsNCg0KICAgICAgICAgICAgICAgIC8vIENsZWFyIGV4aXN0aW5nIG9wdGlvbnMNCiAgICAgICAgICAgICAgICBtUy5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICB0Uy5pbm5lckhUTUwgPSAiIjsNCg0KICAgICAgICAgICAgICAgIGxldCBjdXJTZWMgPSAiIjsNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igc2VjdGlvbiBoZWFkZXJzIGxpa2UgW01PREVdIG9yIFtUT1dBUkRTXQ0KICAgICAgICAgICAgICAgICAgICBpZiAobC5zdGFydHNXaXRoKCdbJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1clNlYyA9IGwudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIHZhbHVlIChwYXJ0IGJlZm9yZSB0aGUgaHlwaGVuKQ0KICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gbC5zcGxpdCgnLScpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIG8udmFsdWUgPSB2YWw7DQogICAgICAgICAgICAgICAgICAgIG8udGV4dENvbnRlbnQgPSB2YWw7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNlYyA9PT0gIltNT0RFXSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1TLmFwcGVuZENoaWxkKG8pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1clNlYyA9PT0gIltUT1dBUkRTXSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRTLmFwcGVuZENoaWxkKG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRyb3Bkb3ducyBQb3B1bGF0ZWQiKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkRyb3Bkb3duIGVycm9yOiIsIGVycik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Db252ZXJ0cyBudW1iZXJzIHRvIHdvcmRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b1dvcmRzKG4pIHsNCiAgICAgICAgICAgIGxldCBhID0gWycnLCAnT25lICcsICdUd28gJywgJ1RocmVlICcsICdGb3VyICcsICdGaXZlICcsICdTaXggJywgJ1NldmVuICcsICdFaWdodCAnLCAnTmluZSAnLCAnVGVuICcsICdFbGV2ZW4gJywgJ1R3ZWx2ZSAnLCAnVGhpcnRlZW4gJywgJ0ZvdXJ0ZWVuICcsICdGaWZ0ZWVuICcsICdTaXh0ZWVuICcsICdTZXZlbnRlZW4gJywgJ0VpZ2h0ZWVuICcsICdOaW5ldGVlbiAnXTsNCiAgICAgICAgICAgIGxldCBiID0gWycnLCAnJywgJ1R3ZW50eScsICdUaGlydHknLCAnRm9ydHknLCAnRmlmdHknLCAnU2l4dHknLCAnU2V2ZW50eScsICdFaWdodHknLCAnTmluZXR5J107DQogICAgICAgICAgICBsZXQgbnVtID0gKCcwMDAwMDAwMDAnICsgcGFyc2VJbnQobikpLnN1YnN0cigtOSkubWF0Y2goL14oXGR7Mn0pKFxkezJ9KShcZHsyfSkoXGR7MX0pKFxkezJ9KSQvKTsNCiAgICAgICAgICAgIGlmICghbnVtKSByZXR1cm4gIiI7DQogICAgICAgICAgICBsZXQgc3RyID0gJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVsxXSAhPSAwKSA/IChhW051bWJlcihudW1bMV0pXSB8fCBiW251bVsxXVswXV0gKyAnICcgKyBhW251bVsxXVsxXV0pICsgJ0Nyb3JlICcgOiAnJzsNCiAgICAgICAgICAgIHN0ciArPSAobnVtWzJdICE9IDApID8gKGFbTnVtYmVyKG51bVsyXSldIHx8IGJbbnVtWzJdWzBdXSArICcgJyArIGFbbnVtWzJdWzFdXSkgKyAnTGFraCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVszXSAhPSAwKSA/IChhW051bWJlcihudW1bM10pXSB8fCBiW251bVszXVswXV0gKyAnICcgKyBhW251bVszXVsxXV0pICsgJ1Rob3VzYW5kICcgOiAnJzsNCiAgICAgICAgICAgIHN0ciArPSAobnVtWzRdICE9IDApID8gKGFbTnVtYmVyKG51bVs0XSldIHx8IGJbbnVtWzRdWzBdXSArICcgJyArIGFbbnVtWzRdWzFdXSkgKyAnSHVuZHJlZCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVs1XSAhPSAwKSA/ICgoc3RyICE9ICcnKSA/ICdhbmQgJyA6ICcnKSArIChhW051bWJlcihudW1bNV0pXSB8fCBiW251bVs1XVswXV0gKyAnICcgKyBhW251bVs1XVsxXV0pIDogJyc7DQogICAgICAgICAgICByZXR1cm4gc3RyLnRyaW0oKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIG5hdmlnYXRlRGF0YWJhc2UodikgeyBjdXJyZW50UmVjb3JkSW5kZXggPSB2OyBkaXNwbGF5UmVjb3JkKHYpOyB9DQogICAgICAgIGZ1bmN0aW9uIGNoYW5nZVJlY29yZChkKSB7IGxldCBuID0gcGFyc2VJbnQoY3VycmVudFJlY29yZEluZGV4KSArIGQ7IGlmIChuID49IDAgJiYgbiA8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGgpIHsgY3VycmVudFJlY29yZEluZGV4ID0gbjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKS52YWx1ZSA9IG47IGRpc3BsYXlSZWNvcmQobik7IH0gfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NyZWF0ZXMgYSBOZXcgQ0cgUmVjZWlwdCAtIEFzc2luZ3MgYSBuZXcgdW5zZWQgQ0cgcmVjZWlwdCBudW1iZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlTmV3Uk4oKSB7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tcm4nKTsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTsNCg0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXROZXdSZWNlaXB0Jyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHNjcmlwdFVSTCwgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogZm9ybURhdGEgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlY2VpcHQgJiYgZGF0YS5pbmRleCkgew0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJHRU5FUkFURUQgTkVXIFJFQ0VJUFQ6ICIgKyBkYXRhLnJlY2VpcHQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMTogVXBkYXRlIHRoZSBnbG9iYWwgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gcGFyc2VJbnQoZGF0YS5pbmRleCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCAyOiBGSVggVEhFIE1FTU9SWSBHQVANCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRhdGFiYXNlIGhhcyA1MDAgcmVjb3JkcyAoMC00OTkpLCBhbmQgbmV3IGluZGV4IGlzIDUwMCwNCiAgICAgICAgICAgICAgICAgICAgLy8gd2UgTVVTVCBncm93IHRoZSBhcnJheSBzbyBpbmRleCA1MDAgYWN0dWFsbHkgZXhpc3RzLg0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA8PSBjdXJyZW50UmVjb3JkSW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5wdXNoKCIiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMzogUkVTRVQgU0VBUkNIIFRSQUNLRVINCiAgICAgICAgICAgICAgICAgICAgLy8gWW91ciBzZWFyY2ggZW5naW5lIGxpa2VseSB1c2VzIGEgdmFyaWFibGUgdG8gcmVtZW1iZXIgd2hlcmUgaXQgd2FzLg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXNldHRpbmcgdGhpcyBmb3JjZXMgc2VhcmNoIHRvIHJlLXNjYW4gZnJvbSB0aGUgbmV3IGVuZC4NCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXN0Rm91bmRTZWFyY2hJbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gLTE7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gYCR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtub3cuZ2V0RnVsbFllYXIoKX1gOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIEZpZWxkcw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZSA9IGRhdGEucmVjZWlwdDsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSA9IGZvcm1hdHRlZERhdGU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgZW50cnkgZmllbGRzDQogICAgICAgICAgICAgICAgICAgIFsnZmllbGRfbmFtZScsICdmaWVsZF9waG9uZScsICdmaWVsZF9hZGRyZXNzJywgJ2ZpZWxkX2VtYWlsJywgJ2ZpZWxkX3BhbicsICdmaWVsZF9zdGFyJywgJ2ZpZWxkX2dvdGhyYW0nLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3JlZicsICdmaWVsZF9jb21tZW50cyddLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSAiMDAwMDAwIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSA9ICJJTkRJQSI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUgPSAiQ2FzaCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUgPSAiT1RIRVJTIjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbENoZWNrKSBjYW5jZWxDaGVjay5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3ByaW50ZWQnKS5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmFzYWRhbScpLmNoZWNrZWQgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDQ6IFN5bmMgdGhlIHNwZWNpZmljIGxpbmUgaW4gbWVtb3J5DQogICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdID0gYCR7ZGF0YS5yZWNlaXB0fXwke2Zvcm1hdHRlZERhdGV9fHx8fHx8fHx8fHxDYXNofE9USEVSU3xZRVN8fDAwMDAwMHxOT3xOT3x8SU5ESUFgOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgNTogVXBkYXRlIHRoZSBTbGlkZXINCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7IC8vIC0gMTsgLy8gRXhwbGljaXRseSB1c2UgdGhlIG5ldyBhcnJheSBsZW5ndGgNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KDQogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAoVGhlIHJlc3Qgb2YgeW91ciBldmVudCBsaXN0ZW5lciBsb2dpYyBmb3IgdW5jaGVja2luZyBjYW5jZWwgc3RheXMgZXhhY3RseSB0aGUgc2FtZSkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpZ2dlckZpZWxkcyA9IFsnZmllbGRfbmFtZScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcGhvbmUnLCAnZmllbGRfYWRkcmVzcyddOw0KICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyRmllbGRzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUudHJpbSgpICE9PSAiIiAmJiBjYW5jZWxDaGVjay5jaGVja2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxDaGVjay5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29scyA9IEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPj0gMTQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xzWzEzXSA9ICJOTyI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW2N1cnJlbnRSZWNvcmRJbmRleF0gPSBjb2xzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgICAgICBybkJ0bi5pbm5lclRleHQgPSAiUk4iOw0KICAgICAgICAgICAgICAgIC8vIERvIG5vdCByZS1lbmFibGUgcm5CdG4gaGVyZSwgaXQgc3RheXMgZGlzYWJsZWQgdW50aWwgbG9ja2VkIGFzIHBlciB5b3VyIGxvZ2ljDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRG93bmxvYWRzIGEgUERGIFJlY2VpcHQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkUmVjZWlwdFBERigpIHsNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjZWlwdC1jb250YWluZXInKTsNCiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlOw0KDQogICAgICAgICAgICBjb25zdCBvcHQgPSB7DQogICAgICAgICAgICAgICAgbWFyZ2luOiBbMC4yLCAwLjJdLCAvLyBbdG9wL2JvdHRvbSwgbGVmdC9yaWdodF0NCiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVjTm8gKyAnLnBkZicsDQogICAgICAgICAgICAgICAgaW1hZ2U6IHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAxIH0sDQogICAgICAgICAgICAgICAgaHRtbDJjYW52YXM6IHsNCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDIsDQogICAgICAgICAgICAgICAgICAgIHVzZUNPUlM6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIGxvZ2dpbmc6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAvLyBUaGVzZSB0d28gbGluZXMgYXJlIHRoZSBrZXkgdG8gZml4aW5nIHRoZSAiSGFsZiBQYWdlIiBjdXQtb2ZmOg0KICAgICAgICAgICAgICAgICAgICBzY3JvbGxZOiAwLA0KICAgICAgICAgICAgICAgICAgICB3aW5kb3dIZWlnaHQ6IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBqc1BERjogeyB1bml0OiAnaW4nLCBmb3JtYXQ6ICdhNCcsIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIC8vIE5ldyBsb2dpYzogVXNlICdodG1sMnBkZicgdG8gY2FwdHVyZSB0aGUgZnVsbCBzY3JvbGwgaGVpZ2h0DQogICAgICAgICAgICBodG1sMnBkZigpLmZyb20oZWxlbWVudCkuc2V0KG9wdCkudG9QZGYoKS5nZXQoJ3BkZicpLnRoZW4oZnVuY3Rpb24gKHBkZikgew0KICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgUERGIG9ubHkgaGFzIDEgcGFnZQ0KICAgICAgICAgICAgICAgIHZhciB0b3RhbFBhZ2VzID0gcGRmLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdG90YWxQYWdlczsgaSA+IDE7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBwZGYuZGVsZXRlUGFnZShpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KS5zYXZlKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU2VuZHMgYSB3aGF0c2FwcCB0ZXh0IG1lc3NhZ2UgYWxvbmcgd2l0aCBvcHRpb24gb2YgcGFzdGluZyBhY3R1YWwgcmVjZWlwdCAtIGRpcmVjdCB0byBkb25vciB0ZWxlcGhvbmUgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzZW5kV2hhdHNBcHAoKSB7DQogICAgICAgICAgICBjb25zdCByZWNlaXB0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWNlaXB0LWNvbnRhaW5lcicpOw0KDQogICAgICAgICAgICAvLyAxLiBQRVJGT1JNIENMSVBCT0FSRCBDT1BZIChXYWl0IGZvciBpdCB0byBmaW5pc2gpDQogICAgICAgICAgICBpZiAocmVjZWlwdEVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBhd2FpdCBodG1sMmNhbnZhcyhyZWNlaXB0RWxlbWVudCwgeyBzY2FsZTogMiwgdXNlQ09SUzogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2FudmFzLnRvQmxvYihyZXNvbHZlKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgQ2xpcGJvYXJkSXRlbSh7ICJpbWFnZS9wbmciOiBibG9iIH0pOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtpdGVtXSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDbGlwYm9hcmQgSW1hZ2UgUmVhZHkiKTsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQ2xpcGJvYXJkIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBDT0xMRUNUIERBVEEgRk9SIFRFWFQNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBwaG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLnJlcGxhY2UoL1xEL2csICcnKTsNCg0KICAgICAgICAgICAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29tbWVudHMnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxNYXRjaCA9IGNvbW1lbnRzLm1hdGNoKC9cey4qP1x9Lyk7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsU3RyID0gc3BlY2lhbE1hdGNoID8gYCAoJHtzcGVjaWFsTWF0Y2hbMF19KWAgOiAiIjsNCg0KICAgICAgICAgICAgaWYgKCFwaG9uZSkgeyBhbGVydCgiTm8gcGhvbmUgbnVtYmVyISIpOyByZXR1cm47IH0NCg0KICAgICAgICAgICAgLy8gMy4gQlVJTEQgVEVYVCBVUkwNCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPQ0KICAgICAgICAgICAgICAgIGAqTVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1QqJTBBYCArDQogICAgICAgICAgICAgICAgYC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0lMEFgICsNCiAgICAgICAgICAgICAgICBgKlJlY2VpcHQgTm86KiAke3JlY05vfSUwQWAgKw0KICAgICAgICAgICAgICAgIGAqRGF0ZToqICR7ZGF0ZX0lMEElMEFgICsNCiAgICAgICAgICAgICAgICBgUmVjZWl2ZWQgd2l0aCB0aGFua3MgZnJvbSAqU2hyaS9TbXQuICR7bmFtZX0qJTBBYCArDQogICAgICAgICAgICAgICAgYGEgc3VtIG9mICpScy4gJHthbW91bnR9KiBvbmx5JTBBYCArDQogICAgICAgICAgICAgICAgYHRvd2FyZHMgKiR7dG93YXJkc30ke3NwZWNpYWxTdHJ9KiUwQSUwQWAgKw0KICAgICAgICAgICAgICAgIGBfVHJ1c3QgUmVnaXN0cmF0aW9uIHZhbGlkIHRpbGwgMzEtMDMtMjAyNl9gOw0KDQogICAgICAgICAgICBjb25zdCB3YVVybCA9IGBodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT05MSR7cGhvbmV9JnRleHQ9JHttZXNzYWdlfWA7DQoNCiAgICAgICAgICAgIC8vIDQuIE9QRU4gV0hBVFNBUFANCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHdhVXJsLCAnX2JsYW5rJyk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRG93bmxvYWRzIGEgQ29uc2VudCBsZXR0ZXIgZm9yIGEgRG9ub3IgLSBmb3IgY29ycHVzIGFuZCBhbW91bnQgPj0xMDAwMA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY29uc2VudEFjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcmVmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlIDogIiI7DQoNCiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZEFkZHJlc3MgPSBhZGRyZXNzLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7DQogICAgICAgICAgICBjb25zdCBhbW91bnRJbldvcmRzID0gTnVtYmVyKGFtb3VudCkudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJykgKyAiIE9ubHkiOw0KDQogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAvLyBVc2luZyBhIHNsaWdodGx5IHNtYWxsZXIgcGFkZGluZyB0byBlbnN1cmUgMS1wYWdlIGZpdA0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuNmluIDAuNzVpbic7DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnIlRpbWVzIE5ldyBSb21hbiIsIHNlcmlmJzsNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9ICcxLjQnOyAvLyBTbGlnaHRseSB0aWdodGVyIGxpbmUgaGVpZ2h0DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gJyMwMDAnOw0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9ICcxMnB0JzsNCg0KICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7IG1hcmdpbi1ib3R0b206IDMwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9IndpZHRoOiA1NSU7IHRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij48Yj5Gcm9tOjwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+JHtuYW1lfTwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+JHtmb3JtYXR0ZWRBZGRyZXNzfTwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5QaDogJHtwaG9uZX08L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMzVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+VG86PC9iPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPjxiPk1ZTEFJIE1BSEFQRVJJWUFWQSBBTlVTSEFNIFRSVVNUPC9iPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPlNocmVlIEdhbmVzaCBGbGF0cyw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5OZXcgTm8uIDUyLzIsIE5vcnRoIE1hZGEgU3RyZWV0LDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPk15bGFwb3JlLCBDaGVubmFpIDYwMCAwMDQuPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogMzBweDsgZm9udC1zaXplOiAxM3B0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdWI6IERvbmF0aW9uIFRvd2FyZHMgQ09SUFVTIG9mIHRoZSBUcnVzdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5TaXIsPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JIGhlcmVieSBjb25maXJtIHRoYXQgbXkgY29udHJpYnV0aW9uIGFzIHBlciBkZXRhaWxzIGdpdmVuIGJlbG93IGlzIHRvd2FyZHMgPGI+Q09SUFVTPC9iPiBvZiBNeWxhaSBNYWhhcGVyaXlhdmEgQW51c2hhbSBUcnVzdC48L3A+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luOiAyNXB4IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJ3aWR0aDogMzUlOyBwYWRkaW5nOiA0cHggMDsiPkFtb3VudDwvdGQ+PHRkPjogUnMuIDxiPiR7YW1vdW50fTwvYj48L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5BbW91bnQgaW4gV29yZHM8L3RkPjx0ZD46IFJ1cGVlcyAke2Ftb3VudEluV29yZHN9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UGF5bWVudCBSZWZlcmVuY2U8L3RkPjx0ZD46ICR7cmVmfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA0cHggMDsiPlJlY2VpcHQgTnVtYmVyPC90ZD48dGQ+OiA8Yj4ke3JlY05vfTwvYj48L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5EYXRlPC90ZD48dGQ+OiAke2RhdGV9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UGhvbmUgTnVtYmVyPC90ZD48dGQ+OiAke3Bob25lfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA0cHggMDsiPlBBTjwvdGQ+PHRkPjogJHtwYW59PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNDBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91cnMgc2luY2VyZWx5LDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQ1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5fX19fX19fX19fX19fX19fX19fX19fX19fXzwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7IHBhZGRpbmctdG9wOiA1cHg7Ij4oPGI+JHtuYW1lfTwvYj4pPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KYDsNCg0KICAgICAgICAgICAgY29uc3Qgb3B0ID0gew0KICAgICAgICAgICAgICAgIG1hcmdpbjogMCwNCiAgICAgICAgICAgICAgICBmaWxlbmFtZTogJ0NvbnNlbnQgTGV0dGVyICcgKyByZWNObyArICcucGRmJywNCiAgICAgICAgICAgICAgICBpbWFnZTogeyB0eXBlOiAnanBlZycsIHF1YWxpdHk6IDAuOTggfSwNCiAgICAgICAgICAgICAgICBodG1sMmNhbnZhczogeyBzY2FsZTogMiwgbG9nZ2luZzogZmFsc2UgfSwNCiAgICAgICAgICAgICAgICBqc1BERjogeyB1bml0OiAnaW4nLCBmb3JtYXQ6ICdhNCcsIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGh0bWwycGRmKCkuc2V0KG9wdCkuZnJvbShlbGVtZW50KS5zYXZlKCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBMb2FkcyBJbml0aWFsIERhdGEgZHVyaW5nIGxhdW5jaC4gIEltcG9ydGFudCBub3QgdG8gZGlzdHVyYmVkLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZERhdGEodCkgew0KICAgICAgICAgICAgLy8gMS4gS0lMTCBUSEUgU1BMQVNIIFNDUkVFTiBJTU1FRElBVEVMWQ0KICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIG5vICJTdHVjayBhdCBEZXZpY2UgSUQiIHNjcmVlbg0KICAgICAgICAgICAgLy8gU2hvdyBvdmVybGF5DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhTY3JlZW4nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5BcHBDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQXBwIHZpc2libGUuIExvYWRpbmcgZGF0YSB3aXRoIHRva2VuLi4uIik7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBJREVOVElGWSBVU0VSIChUaGUgRDI3IGZpeCkNCiAgICAgICAgICAgICAgICAvLyBXZSBmaW5kIHRoZSByZWFsIG5hbWUgc28gcG9sbGluZyBkb2Vzbid0IGp1c3Qgc2hvdyAiVXNlciINCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhcHBSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0FQUFJPVkVEIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChhcHBSLm9rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcHBUeHQgPSBhd2FpdCBhcHBSLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gYXBwVHh0LnNwbGl0KCdcbicpLmZpbmQobCA9PiBsLmluY2x1ZGVzKE1NUFRfREVWSUNFX0lEKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01NUFRfVVNFUl9OQU1FID0gbWF0Y2guc3BsaXQoJ3wnKVsxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIldlbGNvbWUgIiArIE1NUFRfVVNFUl9OQU1FKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gSU5TRVJUIFNFQ1VSSVRZIENBTEwgSEVSRSAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHBseVVzZXJQZXJtaXNzaW9ucyhNTVBUX1VTRVJfTkFNRSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSRVNUT1JFRDogVHJpZ2dlciB0aGUgU2VjdXJpdHkgUGhvdG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhcHR1cmVTZWN1cml0eVNuYXBzaG90ID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVTZWN1cml0eVNuYXBzaG90KCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTU1QVF9SQURJT19GSUxFID0gYC9TZXR0aW5ncy8ke01NUFRfVVNFUl9OQU1FfVJhZGlvcy50eHRgOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFJhZGlvcyh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS53YXJuKCJJZGVudGl0eSBsb29rdXAgZmFpbGVkLCBkZWZhdWx0aW5nIHRvIFVua25vd24iKTsgfQ0KDQogICAgICAgICAgICAgICAgLy8gMy4gRkVUQ0ggREFUQUJBU0UgJiBTRUNPTkRBUlkgRklMRVMNCiAgICAgICAgICAgICAgICBjb25zdCBkYlIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYlR4dCA9IGF3YWl0IGRiUi50ZXh0KCk7DQogICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTID0gZGJUeHQuc3BsaXQoJ1xuJykubWFwKGwgPT4gbC50cmltKCkpLmZpbHRlcihsID0+IGwubGVuZ3RoID4gMTApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgW2Nhc2hSLCBiYW5rUl0gPSBhd2FpdCBQcm9taXNlLmFsbChbDQogICAgICAgICAgICAgICAgICAgIGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0NBU0ggfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiAoeyBvazogZmFsc2UgfSkpLA0KICAgICAgICAgICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9CQU5LIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gKHsgb2s6IGZhbHNlIH0pKQ0KICAgICAgICAgICAgICAgIF0pOw0KDQogICAgICAgICAgICAgICAgbGV0IGNhc2hDb250ZW50ID0gY2FzaFIub2sgPyAoYXdhaXQgY2FzaFIudGV4dCgpKS50b1VwcGVyQ2FzZSgpIDogIiI7DQoNCg0KICAgICAgICAgICAgICAgIGxldCBiYW5rRGF0ZSA9ICItLS0iOw0KICAgICAgICAgICAgICAgIGlmIChiYW5rUi5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibCA9IChhd2FpdCBiYW5rUi50ZXh0KCkpLnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJ3wnKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChibC5sZW5ndGggPiAwKSBiYW5rRGF0ZSA9IGJsW2JsLmxlbmd0aCAtIDFdLnNwbGl0KCd8JylbMF07DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gTE9BRCBEUk9QRE9XTlMgJiBEQVNIQk9BUkQNCiAgICAgICAgICAgICAgICBhd2FpdCBsb2FkRHJvcGRvd25zKHQpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZURhc2hib2FyZFN0YXRzKGNhc2hDb250ZW50LCBiYW5rRGF0ZSk7DQoNCg0KICAgICAgICAgICAgICAgIGxvYWRFdmVudFBhbmVscyh0KTsgLy8gVHJpZ2dlciB0aGUgZXZlbnQgY29sdW1uIGxvYWRpbmcNCg0KICAgICAgICAgICAgICAgIC8vIDUuIFNFVFVQIFNMSURFUg0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOw0KDQogICAgICAgICAgICAgICAgLy8gU0FGRSBUUklHR0VSOiBPbmx5IHJ1biBpZiB0aGUgZnVuY3Rpb24gZXhpc3RzDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidWlsZEZZSW5kZXggPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICAgICAgYnVpbGRGWUluZGV4KCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdXBkYXRlRGFzaGJvYXJkU3RhdHMoY2FzaENvbnRlbnQsIGJhbmtEYXRlKTsNCg0KICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IHNsaWRlci5tYXg7DQogICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gc2xpZGVyLm1heDsNCiAgICAgICAgICAgICAgICBjb25zdCBmbG9vciA9ICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiAmJiB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IDApID8gd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gOiAxOw0KICAgICAgICAgICAgICAgIHNsaWRlci5taW4gPSBmbG9vcjsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQoNCg0KDQogICAgICAgICAgICAgICAgLy8gNi4gU1RBUlQgQkFDS0dST1VORCBTRVJWSUNFUw0KICAgICAgICAgICAgICAgIGZldGNoRXhwZW5zZURhdGUoKTsgLy8gRXhjZWwgZmlsZQ0KICAgICAgICAgICAgICAgIHN0YXJ0QmFja2dyb3VuZFN5bmModCk7IC8vIFVzZXIgUG9sbGluZyAoVGhlIEQ3MSBTdHlsZSkNCg0KICAgICAgICAgICAgICAgIHdpbmRvdy5BQ0NFU1NfVE9LRU4gPSB0OyAvLyA8LS0tIEFERCBUSElTIExJTkUgT05MWQ0KDQogICAgICAgICAgICAgICAgLy8gSGlkZSBvdmVybGF5IG9uY2UgZXZlcnl0aGluZyBpcyByZW5kZXJlZA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlWZXJzaW9uJykuaW5uZXJUZXh0ID0gTU1QVF9WRVJTSU9OOw0KDQogICAgICAgICAgICAgICAgLy8gQUREIFRISVMgTElORSBGT1IgQVVUTy1CQUNLVVANCiAgICAgICAgICAgICAgICBydW5NTVBUQmFja3VwKHRydWUpOyAvLyBQYXNzaW5nIHRydWUgdG8gaW5kaWNhdGUgYSBzaWxlbnQvYXV0byBydW4NCg0KICAgICAgICAgICAgICAgIC8vIEluc2lkZSB5b3VyIGluaXRpYWxpemVNTVBUIGZ1bmN0aW9uLCBhZnRlciAndCcgaXMgYWNxdWlyZWQ6DQogICAgICAgICAgICAgICAgYXdhaXQgbG9hZEFkbWluQ29udGFjdCgpOw0KDQoNCiAgICAgICAgICAgICAgICBsYXVuY2hBZG1pbk5vdGlmaWNhdGlvbigpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJsb2FkRGF0YSBDcml0aWNhbCBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIGFsZXJ0KCJMb2FkIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFVwZGF0ZXMgRGFzaGJvYXJkIFZhbHVlcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGFzaGJvYXJkU3RhdHMoY2FzaEZpbGUsIGJEYXRlKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGxldCByQ291bnQgPSAwLCByQW10ID0gMCwgY0NvdW50ID0gMCwgY0FtdCA9IDA7DQoNCiAgICAgICAgICAgICAgICByZWFkeUluZGljZXMgPSBbXTsgLy8gPC0tLSBJTlNFUlQ6IFJlc2V0IHRoZSBsaXN0IGV2ZXJ5IHRpbWUgc3RhdHMgdXBkYXRlDQoNCiAgICAgICAgICAgICAgICBsZXQgbGF0RCA9IDAsIGxhdERpc3AgPSAiLS0tIjsNCiAgICAgICAgICAgICAgICBjb25zdCBjdXRPZmYgPSAyMDI2MDEwMTsNCiAgICAgICAgICAgICAgICBjb25zdCBzYWZlQ2FzaEZpbGUgPSBjYXNoRmlsZSB8fCAiIjsgLy8gU2FmZXR5IGFnYWluc3QgJ3VuZGVmaW5lZCcgaW5jbHVkZXMgZXJyb3INCg0KICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYy5sZW5ndGggPCAxNSkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJObyA9IChjWzBdIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZFN0ciA9IChjWzFdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlRmxvYXQoY1s5XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZSA9IChjWzExXSB8fCAiIikudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuYyA9IChjWzEzXSB8fCAiIikudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkciA9IChjWzRdIHx8ICIiKS50cmltKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IGRTdHIucmVwbGFjZSgvXC8vZywgJy0nKS5zcGxpdCgnLScpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocC5sZW5ndGggPT09IDMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHl5eXkgPSBwWzJdLmxlbmd0aCA9PT0gMiA/ICIyMCIgKyBwWzJdIDogcFsyXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRDb21wID0gcGFyc2VJbnQoeXl5eSArIHBbMV0ucGFkU3RhcnQoMiwgJzAnKSArIHBbMF0ucGFkU3RhcnQoMiwgJzAnKSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkQ29tcCA+IGxhdEQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXREID0gZENvbXA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0RGlzcCA9IGNbMF0gKyAiICgiICsgZFN0ciArICIpIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRDb21wID49IGN1dE9mZiAmJiBjYW5jICE9PSAiWUVTIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhc2ggY2hlY2sgd2l0aCBzYWZldHkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByQ2xlYW4gPSByTm8ucmVwbGFjZSgiTVBTIiwgIiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAiQ0FTSCIgJiYgIXNhZmVDYXNoRmlsZS5pbmNsdWRlcyhyTm8pICYmICFzYWZlQ2FzaEZpbGUuaW5jbHVkZXMockNsZWFuKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0FtdCArPSBhbXQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlYWR5IGNoZWNrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHIgIT09ICIiICYmICEoY1sxNl0gPT09ICJZRVMiICYmIGNbMTddID09PSAiWUVTIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgckNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJBbXQgKz0gYW10Ow0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHlJbmRpY2VzLnB1c2goaW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZm10ID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1JTicsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RSb3cgPSBHTE9CQUxfREJfTElORVNbR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDFdLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9sYXN0X3JlYycpLmlubmVyVGV4dCA9IGxhc3RSb3dbMF0gKyAiICgiICsgbGFzdFJvd1sxXSArICIpIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9sYXRlc3RfcmVjJykuaW5uZXJUZXh0ID0gbGF0RGlzcDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9yZWFkeV9jb3VudCcpLmlubmVyVGV4dCA9IHJDb3VudCArICIgKOKCuSIgKyBmbXQuZm9ybWF0KHJBbXQpICsgIikiOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2Nhc2gnKS5pbm5lclRleHQgPSBjQ291bnQgKyAiICjigrkiICsgZm10LmZvcm1hdChjQW10KSArICIpIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9iYW5rX2RhdGUnKS5pbm5lclRleHQgPSBiRGF0ZSB8fCAiLS0tIjsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJTVEFUUyBFUlJPUjogIiArIGUubWVzc2FnZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVXBkYXRlcyBMYXN0IGV4cGVuc2UgYWNjb3VudCBkYXRlIGZvciBkYXNoYm9hcmQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoRXhwZW5zZURhdGUoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGZXRjaGluZyBFeHBlbnNlcyBiYWNrZ3JvdW5kLi4uIik7DQogICAgICAgICAgICAgICAgY29uc3QgZVJlc3AgPSBhd2FpdCBmZXRjaChNTVBUX1VSTF9FWFBFTlNFUyk7DQogICAgICAgICAgICAgICAgaWYgKCFlUmVzcC5vaykgdGhyb3cgbmV3IEVycm9yKCJGZXRjaCBmYWlsZWQiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZVJlc3AuYXJyYXlCdWZmZXIoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChhcnJheUJ1ZmZlciwgeyB0eXBlOiAnYXJyYXknIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gd29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMF1dOw0KICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHNoZWV0LCB7IGhlYWRlcjogMSB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUm93cyA9IGpzb25EYXRhLmZpbHRlcihyb3cgPT4gcm93ICYmIHJvdy5sZW5ndGggPiAwICYmIHJvd1swXSk7DQogICAgICAgICAgICAgICAgaWYgKGNsZWFuUm93cy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cERhdGUgPSBjbGVhblJvd3NbY2xlYW5Sb3dzLmxlbmd0aCAtIDFdWzBdIHx8ICItLS0iOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9leHBlbnNlcycpLmlubmVyVGV4dCA9IGV4cERhdGU7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFeHBlbnNlIERhdGUgdXBkYXRlZDoiLCBleHBEYXRlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJFeHBlbnNlIGRhdGUgY291bGQgbm90IGJlIGxvYWRlZCAobGlrZWx5IENPUlMpLiBEZWZhdWx0aW5nIHRvIC0tLSIpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2V4cGVuc2VzJykuaW5uZXJUZXh0ID0gIi0tLSI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU3luY3MgdXNlciBzdGF0dXMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFRIRSBTWU5DIEZVTkNUSU9OIChDb3JyZWN0ZWQgRDcxIGxvZ2ljKQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzdGFydEJhY2tncm91bmRTeW5jKHRva2VuKSB7DQogICAgICAgICAgICBjb25zdCBydW5TeW5jID0gYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICghTU1QVF9VU0VSX05BTUUgfHwgTU1QVF9VU0VSX05BTUUgPT09ICJVbmtub3duIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfVVNFUlMgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlTGluZXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVMaW5lcyA9IHR4dC5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IGwuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIGVudHJpZXMgZnJvbSBsYXN0IDMgbWlucw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwLmxlbmd0aCA+PSAzICYmIChub3cgLSBwYXJzZUludChwWzJdKSkgPCAxODAwMDA7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmVzID0gYWN0aXZlTGluZXMuZmlsdGVyKGwgPT4gIWwuc3RhcnRzV2l0aChNTVBUX0RFVklDRV9JRCkpOw0KICAgICAgICAgICAgICAgICAgICBhY3RpdmVMaW5lcy5wdXNoKGAke01NUFRfREVWSUNFX0lEfXwke01NUFRfVVNFUl9OQU1FfXwke25vd31gKTsNCg0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfVVNFUlMsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGFjdGl2ZUxpbmVzLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmVVc2VyTGlzdCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGxheSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheS5pbm5lclRleHQgPSBhY3RpdmVMaW5lcy5tYXAobCA9PiBsLnNwbGl0KCd8JylbMV0pLmpvaW4oJywgJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsgY29uc29sZS5sb2coIlN5bmMgc2tpcHBlZCIpOyB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgcnVuU3luYygpOw0KICAgICAgICAgICAgc2V0SW50ZXJ2YWwocnVuU3luYywgNDUwMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vVXBkYXRlcyBFdmVudHMgaW1hZ2VzIGluIGNvbG91bW4gMSBhbmQgMw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEV2ZW50UGFuZWxzKHRva2VuKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9FVkVOVFNfVFhUIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCB0aXRsZTEgPSAiUmVjZW50IEV2ZW50IiwgdGl0bGUyID0gIlVwY29taW5nIEV2ZW50IjsNCiAgICAgICAgICAgICAgICBpZiAoci5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0eHQuc3BsaXQoL1xyP1xuLykubWFwKGwgPT4gbC50cmltKCkpLmZpbHRlcihsID0+IGwubGVuZ3RoID4gMCk7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlMSA9IGxpbmVzWzBdIHx8IHRpdGxlMTsNCiAgICAgICAgICAgICAgICAgICAgdGl0bGUyID0gbGluZXNbMV0gfHwgdGl0bGUyOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGdldEltZ1VybCA9IGFzeW5jIChwYXRoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2dldF90ZW1wb3JhcnlfbGluaycsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHBhdGggfSkNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5saW5rOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBjb25zdCBbdXJsMSwgdXJsMl0gPSBhd2FpdCBQcm9taXNlLmFsbChbZ2V0SW1nVXJsKE1NUFRfSU1HX0VWRU5UMSksIGdldEltZ1VybChNTVBUX0lNR19FVkVOVDIpXSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBwYW5lbENvbnRlbnQgPSAodGl0bGUsIHVybCkgPT4gYA0KPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmOTkzMzsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxMHB4OyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDE0cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY4YzAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGl0bGV9DQo8L2Rpdj4NCjxkaXYgY2xhc3M9ImV2ZW50LWltZy1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHt1cmx9Ij4NCjwvZGl2Pg0KYDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTCA9IHBhbmVsQ29udGVudCh0aXRsZTEsIHVybDEpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUwgPSBwYW5lbENvbnRlbnQodGl0bGUyLCB1cmwyKTsNCiAgICAgICAgICAgICAgICBNTVBUX1RFTVAxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MOw0KICAgICAgICAgICAgICAgIE1NUFRfVEVNUDMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MOw0KDQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcigiRXZlbnQgcGFuZWxzIGZhaWxlZDoiLCBlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vVXBkYXRlcyB0aGUgbGF0ZXN0IEJhbmsgU3RhdGVtZW50cyBmcm9tIGFuIEV4Y2VsIEZpbGUgU3RhdGVtZW50cy54bHMgLSBDcmVhdGVzIG5ldyByY2VpcHRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBBZGQgdGhpcyB0byB5b3VyIGdsb2JhbCB2YXJpYWJsZXMgYXQgdGhlIHRvcA0KICAgICAgICBsZXQgaXNCYW5rVXBkYXRlZCA9IGZhbHNlOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHRva2VuKSB7DQogICAgICAgICAgICBpZiAoIXRva2VuKSB7IGFsZXJ0KCJFcnJvcjogTm8gVG9rZW4gZm91bmQuIik7IHJldHVybjsgfQ0KICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jhbmstc3luYy1idG4nKTsNCiAgICAgICAgICAgIGlmIChidG4pIHsgYnRuLmlubmVyVGV4dCA9ICJTeW5jaW5nLi4uIjsgYnRuLmRpc2FibGVkID0gdHJ1ZTsgfQ0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIEV4Y2VsICYgQmFuayBTdGF0ZW1lbnQgKE1NUFQzLktQKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2VsUmVzID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZjI3bXV5bG9iZGFqdnpteGNpODVkL0JhbmtTdGF0ZW1lbnQueGxzP3Jsa2V5PXI0M2owc3ZubWxpZzNxbTZpYWlyYnRvamQmZGw9MSIsIHsgY2FjaGU6ICduby1zdG9yZScgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBleGNlbFJlcy5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGFycmF5QnVmZmVyLCB7IHR5cGU6ICdhcnJheScsIGNlbGxEYXRlczogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBleGNlbFJvd3MgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMF1dLCB7IGhlYWRlcjogMSB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGJhbmtGaWxlUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQkFOSyB9KSB9LA0KICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IGxvY2FsQmFua0NvbnRlbnQgPSBiYW5rRmlsZVJlcy5vayA/IChhd2FpdCBiYW5rRmlsZVJlcy50ZXh0KCkpLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgICAgIGxldCBiYW5rTGluZXMgPSBsb2NhbEJhbmtDb250ZW50LnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY3VycmVudEJhbCA9IDA7DQogICAgICAgICAgICAgICAgaWYgKGJhbmtMaW5lcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsYXN0TGluZSA9IGJhbmtMaW5lc1tiYW5rTGluZXMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCYWwgPSBwYXJzZUZsb2F0KGxhc3RMaW5lLnNwbGl0KCd8JylbNV0ucmVwbGFjZSgvW15cZC5dL2csICcnKSkgfHwgMDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgbmV3bHlBZGRlZEJhbmtMaW5lcyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCB3b3JraW5nQmFua0NvbnRlbnQgPSBsb2NhbEJhbmtDb250ZW50Ow0KDQogICAgICAgICAgICAgICAgLy8gMi4gUHJvY2VzcyBFeGNlbCBSb3dzDQogICAgICAgICAgICAgICAgZm9yIChsZXQgcm93IG9mIGV4Y2VsUm93cykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZVZhbCA9IHJvd1swXTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzRGF0ZSA9IGRhdGVWYWwgaW5zdGFuY2VvZiBEYXRlOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaXNEYXRlU3RyID0gdHlwZW9mIGRhdGVWYWwgPT09ICdzdHJpbmcnICYmIC9eXGR7MSwyfVwvXGR7MSwyfVwvXGR7NH0vLnRlc3QoZGF0ZVZhbC50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRGF0ZSAmJiAhaXNEYXRlU3RyKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgZFN0ciA9IGlzRGF0ZSA/IGAke1N0cmluZyhkYXRlVmFsLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX0vJHtTdHJpbmcoZGF0ZVZhbC5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0vJHtkYXRlVmFsLmdldEZ1bGxZZWFyKCl9YCA6IGRhdGVWYWwudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCByZWYgPSAocm93WzFdIHx8ICIiKS50b1N0cmluZygpLnJlcGxhY2UoL1xzKy9nLCAnICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNocSA9IChyb3dbMl0gfHwgIiIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZGViID0gcGFyc2VGbG9hdChyb3dbM10pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGxldCBjcmUgPSBwYXJzZUZsb2F0KHJvd1s0XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd0JhbCA9IHBhcnNlRmxvYXQocm93WzVdKSB8fCAwOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCByb3dTdHJpbmcgPSBgJHtkU3RyfXwke3JlZn18JHtjaHF9fCR7ZGViIHx8ICIifXwke2NyZSB8fCAiIn18JHtyb3dCYWwudG9GaXhlZCgyKX18YDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmtpbmdCYW5rQ29udGVudC5pbmNsdWRlcyhyb3dTdHJpbmcudHJpbSgpKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgd29ya2luZ0JhbmtDb250ZW50ICs9ICh3b3JraW5nQmFua0NvbnRlbnQubGVuZ3RoID4gMCA/ICJcbiIgOiAiIikgKyByb3dTdHJpbmc7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCYWwgPSByb3dCYWw7DQogICAgICAgICAgICAgICAgICAgIG5ld2x5QWRkZWRCYW5rTGluZXMucHVzaChyb3dTdHJpbmcpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChuZXdseUFkZGVkQmFua0xpbmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCBBOiBVUERBVEUgQkFOSyBGSUxFIChNTVBUMy5LUCkNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IE1NUFRfRklMRV9CQU5LLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHdvcmtpbmdCYW5rQ29udGVudA0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEI6IERPV05MT0FEIE1BSU4gREIgKE1NUFQyLktQKQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9LCBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnREQkNvbnRlbnQgPSAoYXdhaXQgZGJSZXMudGV4dCgpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBkYkxpbmVzID0gY3VycmVudERCQ29udGVudC5zcGxpdCgnXG4nKTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgbWF4Q0cgPSAwOw0KICAgICAgICAgICAgICAgICAgICBkYkxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENvbCA9IGxpbmUuc3BsaXQoJ3wnKVswXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdENvbC50b1VwcGVyQ2FzZSgpLnN0YXJ0c1dpdGgoIkNHIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IHBhcnNlSW50KGZpcnN0Q29sLnJlcGxhY2UoIkNHIiwgIiIpKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID4gbWF4Q0cpIG1heENHID0gbjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRmV0Y2ggRXhlbXB0IExpc3QNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBFWEVNUFRfRklMRSB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IG51bGwpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZXhlbXB0UGhyYXNlcyA9IChleFJlcyAmJiBleFJlcy5vaykgPyAoYXdhaXQgZXhSZXMudGV4dCgpKS5zcGxpdCgnXG4nKS5tYXAocCA9PiBwLnRyaW0oKS50b0xvd2VyQ2FzZSgpKS5maWx0ZXIocCA9PiBwKSA6IFtdOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgQzogR0VORVJBVEUgTkVXIFJFQ0VJUFRTDQogICAgICAgICAgICAgICAgICAgIGxldCBuZXdSID0gW107DQogICAgICAgICAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgdG9kYXlTdHIgPSBgJHtTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke25vdy5nZXRGdWxsWWVhcigpfWA7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbXBvcnRDb21tZW50ID0gIkF1dG8gSW1wb3J0ZWQ6IiArIHRvZGF5U3RyOw0KDQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGJMaW5lIG9mIG5ld2x5QWRkZWRCYW5rTGluZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJ0cyA9IGJMaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW10ID0gcGFyc2VGbG9hdChwYXJ0c1s0XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWZUZXh0ID0gcGFydHNbMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbXQgPD0gMCB8fCByZWZUZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoImNhc2giKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhlbXB0UGhyYXNlcy5zb21lKHAgPT4gcmVmVGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHApKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIG1heENHKys7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgck5vID0gIkNHIiArIFN0cmluZyhtYXhDRykucGFkU3RhcnQoNiwgJzAnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByRGF0ZSA9IHBhcnRzWzBdLnJlcGxhY2UoL1wvL2csICctJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgclRvdyA9IChhbXQgPj0gMTAwMDApID8gIkNPUlBVUyIgOiAiT1RIRVJTIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RlID0gcmVmVGV4dC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCJVUEkiKSA/ICJVUEkiIDogKHJlZlRleHQudG9VcHBlckNhc2UoKS5pbmNsdWRlcygiQ0hRIikgfHwgcmVmVGV4dC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCJDSEVRVUUiKSA/ICJDSEVRVUUiIDogIk9OTElORSIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gYCR7ck5vfXwke3JEYXRlfXx8fHx8fHx8JHthbXR9fCR7cmVmVGV4dH18JHttb2RlfXwke3JUb3d9fHwke2ltcG9ydENvbW1lbnR9fDAwMDAwMHx8fHxJTkRJQXxgOw0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3Ui5wdXNoKG5ld1Jvdyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAobmV3Ui5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEQ6IFVQTE9BRCBVUERBVEVEIE1BSU4gREINCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWREQiA9IGN1cnJlbnREQkNvbnRlbnQgKyAiXG4iICsgbmV3Ui5qb2luKCdcbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogTU1QVF9GSUxFX0RCLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB1cGRhdGVkREINCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU1RFUCBFOiBDUklUSUNBTCBGSVggLSBVUERBVEUgU0VRVUVOQ0UuVFhUIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbXVzdCB1cGRhdGUgdGhlIENsb3VkIFNlcXVlbmNlIHNvIHRoZSBuZXh0ICJSTiIga25vd3MgdGhlIG5ldyBzdGFydGluZyBwb2ludC4NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdDogTGFzdFJlY2VpcHROdW1iZXJ8VG90YWxSZWNvcmRDb3VudA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG90YWxDb3VudCA9IGRiTGluZXMubGVuZ3RoICsgbmV3Ui5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmVjZWlwdE5vID0gIkNHIiArIFN0cmluZyhtYXhDRykucGFkU3RhcnQoNiwgJzAnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcXVlbmNlQ29udGVudCA9IGAke2xhc3RSZWNlaXB0Tm99fCR7bmV3VG90YWxDb3VudH1gOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiBNTVBUX0ZJTEVfU0VRLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHNlcXVlbmNlQ29udGVudA0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTVUNDRVNTIVxuQmFuayB1cGRhdGVkLlxuJHtuZXdSLmxlbmd0aH0gUmVjZWlwdHMgYWRkZWQuXG5TZXF1ZW5jZSB1cGRhdGVkIHRvOiAke2xhc3RSZWNlaXB0Tm99YCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiQmFuayBVcGRhdGVkLiBObyBEb25vciByZWNlaXB0cyB3ZXJlIG5lZWRlZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlzQmFua1VwZGF0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiQWxyZWFkeSB1cCB0byBkYXRlLiIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJDUklUSUNBTCBFUlJPUjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKGJ0bikgeyBidG4uaW5uZXJUZXh0ID0gIkJhbmsgVXBkYXRlIjsgYnRuLmRpc2FibGVkID0gZmFsc2U7IH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgTWFpbiBDYWxscyBhbGwNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHNob3dEb25hdGlvblN1bW1hcnkoKSB7DQogICAgICAgICAgICAvLyAxLiBJbml0aWFsaXplIHRvdGFscyBhcyBudW1iZXJzDQogICAgICAgICAgICBsZXQgdG90YWxzID0geyB0b2RheTogMCwgd2VlazogMCwgbW9udGg6IDAsIHllYXI6IDAsIGZpblllYXI6IDAsIG92ZXJhbGw6IDAgfTsNCg0KICAgICAgICAgICAgTU1QVF9URU1QMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTDsNCiAgICAgICAgICAgIE1NUFRfVEVNUDMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MOw0KDQoNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAvLyBHZXQgdGltZXN0YW1wcyBmb3IgbWlkbmlnaHQgdG9kYXkgYW5kIDcgZGF5cyBhZ28gdG8gZW5zdXJlIGFjY3VyYXRlICJXZWVrIiBjb3VudGluZw0KICAgICAgICAgICAgY29uc3QgdG9kYXlNaWRuaWdodCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgY29uc3Qgc2V2ZW5EYXlzQWdvID0gdG9kYXlNaWRuaWdodCAtICg3ICogMjQgKiA2MCAqIDYwICogMTAwMCk7DQoNCiAgICAgICAgICAgIGNvbnN0IGN1ck0gPSBub3cuZ2V0TW9udGgoKTsgLy8gMC0xMQ0KICAgICAgICAgICAgY29uc3QgY3VyWSA9IG5vdy5nZXRGdWxsWWVhcigpOw0KDQogICAgICAgICAgICAvLyBGaW5hbmNpYWwgWWVhciBMb2dpYzogU3RhcnRzIEFwcmlsIDFzdA0KICAgICAgICAgICAgLy8gSW4gSmFuIDIwMjYsIHRoZSBGWSBzdGFydGVkIEFwcmlsIDEsIDIwMjUNCiAgICAgICAgICAgIGNvbnN0IGZ5U3RhcnRZZWFyID0gKGN1ck0gPj0gMykgPyBjdXJZIDogY3VyWSAtIDE7DQogICAgICAgICAgICBjb25zdCBmeVN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGZ5U3RhcnRZZWFyLCAzLCAxKS5nZXRUaW1lKCk7DQoNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICghbGluZS50cmltKCkgfHwgaW5kZXggPT09IDApIHJldHVybjsgLy8gU2tpcCBlbXB0eSBhbmQgaGVhZGVyDQoNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gQ2FuY2VsbGF0aW9uIENoZWNrIChGaWVsZCAxMyBpcyBZRVMgb3IgTk8pDQogICAgICAgICAgICAgICAgaWYgKGZbMTNdICYmIGZbMTNdLnRyaW0oKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gQW1vdW50IENvbnZlcnNpb24gKEZpZWxkIDkpDQogICAgICAgICAgICAgICAgLy8gU3RyaXAgY29tbWFzL3NwYWNlcyBhbmQgZm9yY2UgdG8gZmxvYXQNCiAgICAgICAgICAgICAgICBsZXQgYW10ID0gMDsNCiAgICAgICAgICAgICAgICBpZiAoZls5XSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5BbXQgPSBmWzldLnRvU3RyaW5nKCkucmVwbGFjZSgvW15cZC5dL2csICcnKTsNCiAgICAgICAgICAgICAgICAgICAgYW10ID0gcGFyc2VGbG9hdChjbGVhbkFtdCkgfHwgMDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBEYXRlIFBhcnNpbmcgKEZpZWxkIDEpDQogICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZbMV0gfHwgIiI7DQogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlU3RyLnNwbGl0KC9bXC9cLV0vKTsNCiAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9PSAzKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyBERC9NTS9ZWVlZDQogICAgICAgICAgICAgICAgY29uc3QgZCA9IHBhcnNlSW50KHBhcnRzWzBdLCAxMCk7DQogICAgICAgICAgICAgICAgY29uc3QgbSA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCkgLSAxOw0KICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwYXJzZUludChwYXJ0c1syXSwgMTApOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlY0RhdGUgPSBuZXcgRGF0ZSh5LCBtLCBkKTsNCiAgICAgICAgICAgICAgICBjb25zdCByZWNUaW1lID0gcmVjRGF0ZS5nZXRUaW1lKCk7DQoNCiAgICAgICAgICAgICAgICAvLyA1LiBBY2N1bXVsYXRlIFRvdGFscw0KICAgICAgICAgICAgICAgIHRvdGFscy5vdmVyYWxsICs9IGFtdDsNCg0KICAgICAgICAgICAgICAgIC8vIFRvZGF5DQogICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPT09IHRvZGF5TWlkbmlnaHQpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLnRvZGF5ICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBUaGlzIFdlZWsgKDcgRGF5cyBpbmNsdXNpdmUgb2YgY3VycmVudCB0aW1lKQ0KICAgICAgICAgICAgICAgIGlmIChyZWNUaW1lID49IHNldmVuRGF5c0FnbyAmJiByZWNUaW1lIDw9IG5vdy5nZXRUaW1lKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLndlZWsgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgTW9udGggKEphbiAyMDI2KQ0KICAgICAgICAgICAgICAgIGlmIChtID09PSBjdXJNICYmIHkgPT09IGN1clkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLm1vbnRoICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBUaGlzIFllYXIgKDIwMjYpDQogICAgICAgICAgICAgICAgaWYgKHkgPT09IGN1clkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLnllYXIgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEZpbmFuY2lhbCBZZWFyIChBcHJpbCB0byBub3cpDQogICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPj0gZnlTdGFydERhdGUgJiYgcmVjVGltZSA8PSBub3cuZ2V0VGltZSgpKSB7DQogICAgICAgICAgICAgICAgICAgIHRvdGFscy5maW5ZZWFyICs9IGFtdDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZGlzcGxheVN1bW1hcnlUYWJsZSh0b3RhbHMpOw0KICAgICAgICAgICAgc2hvd0RvbmF0aW9uU3VtbWFyeTEoKTsNCiAgICAgICAgICAgIHNob3dEb25hdGlvblN1bW1hcnkzKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IENvbG91bSAyIE1pZGRsZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gZGlzcGxheVN1bW1hcnlUYWJsZShkYXRhKSB7DQogICAgICAgICAgICBjb25zdCB0YWJsZUhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3VtbWFyeS1jb250YWluZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjVweDsgYm9yZGVyOiAycHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogMTJweDsgbWFyZ2luOiAxMHB4IGF1dG87IG1heC13aWR0aDogNTAwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjogI2ZmOTkzMzsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBmb250LWZhbWlseTogJ0FyaWFsIEJsYWNrJywgc2Fucy1zZXJpZjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmZmY4ZjA7IHBhZGRpbmctYm90dG9tOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBET05BVElPTlMgU1VNTUFSWQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gyPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmY5OTMzOyBjb2xvcjogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyB0ZXh0LWFsaWduOiBsZWZ0OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+Q2F0ZWdvcnk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IHRleHQtYWxpZ246IHJpZ2h0OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+QW1vdW50ICjigrkpPC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPlRvZGF5PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS50b2RheS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+VGhpcyBXZWVrPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS53ZWVrLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5UaGlzIE1vbnRoPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS5tb250aC50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+Q2FsZW5kYXIgWWVhciAoJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9KTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEueWVhci50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2ZmZjhmMDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI2QzNTQwMDsiPkZpbmFuY2lhbCBZZWFyPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjZDM1NDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEuZmluWWVhci50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5PVkVSQUxMIFRPVEFMPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS4yZW07Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS5vdmVyYWxsLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDE1cHg7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM3ZjhjOGQ7IHRleHQtYWxpZ246IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGVkIG9uICR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX08YnI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQ2FuY2VsbGVkIHJlY2VpcHRzIGV4Y2x1ZGVkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjZWlwdF9kaXNwbGF5X2FyZWEnKS5pbm5lckhUTUwgPSB0YWJsZUhUTUw7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TdW1tYXJ5IENvbG91bSAxDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBzaG93RG9uYXRpb25TdW1tYXJ5MSgpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjYWxjdWxhdGVCcmVha2Rvd25EYXRhKCkubW9kZVN1bW1hcnk7DQogICAgICAgICAgICBsZXQgdG90YWwgPSAwOw0KICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gIiI7DQoNCiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7DQogICAgICAgICAgICAgICAgdG90YWwgKz0gdmFsdWU7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4ke2tleX08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+JHt2YWx1ZS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX08L3RkPjwvdHI+YDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MID0gZ2VuZXJhdGVTdHlsZWRUYWJsZSgiUGF5bWVudCBNb2RlIiwgcm93c0h0bWwsIHRvdGFsKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgQ29sb3VtIDMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHNob3dEb25hdGlvblN1bW1hcnkzKCkgew0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNhbGN1bGF0ZUJyZWFrZG93bkRhdGEoKS50b3dhcmRzU3VtbWFyeTsNCiAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7DQogICAgICAgICAgICBsZXQgcm93c0h0bWwgPSAiIjsNCg0KICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHsNCiAgICAgICAgICAgICAgICB0b3RhbCArPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPiR7a2V5fTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4ke3ZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfTwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MID0gZ2VuZXJhdGVTdHlsZWRUYWJsZSgiQ29udHJpYnV0aW9uIFRvd2FyZHMiLCByb3dzSHRtbCwgdG90YWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUmVzZXRzIHNpZGUgcGFuZWxzIGV2ZW50cyBqcGcgLSBmaXJzdCBhbmQgdGhpcmQgY29sb3VtbiBhZnRlciBzdW1tYXJ5ICBkaXNwbGF5DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiByZXNldFNpZGVQYW5lbHMoKSB7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1ldmVudHMnKS5pbm5lckhUTUwgPSBNTVBUX1RFTVAxOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LWV2ZW50cycpLmlubmVySFRNTCA9IE1NUFRfVEVNUDM7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Gb3IgU3VtbWFyeSAtIEJyZWFrZG93biBjYWxjdWxhdGlvbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlQnJlYWtkb3duRGF0YSgpIHsNCiAgICAgICAgICAgIGNvbnN0IG1vZGVTdW1tYXJ5ID0geyAiQ2FzaCI6IDAsICJDaGVxdWUiOiAwLCAiVVBJIjogMCwgIk9ubGluZSI6IDAsICJPdGhlcnMiOiAwLCAiUE9TIjogMCB9Ow0KICAgICAgICAgICAgY29uc3QgdG93YXJkc1N1bW1hcnkgPSB7DQogICAgICAgICAgICAgICAgIk9USEVSUyI6IDAsICJDT1JQVVMiOiAwLCAiS1VNQkhBQkhJU0hFS0hBTSI6IDAsICJBTk5BREhBQU5BTSI6IDAsDQogICAgICAgICAgICAgICAgIkFOVVNIQSBQT09KQSI6IDAsICJBQVZBSEFOVEhJIEhPTUFNIjogMCwgIllBVEhJIE1BQUxBWUFNIjogMCwNCiAgICAgICAgICAgICAgICAiQlVJTERJTkciOiAwLCAiTklUSFlBUE9PSkFJIjogMA0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPCAxMykgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gcGFyc2VGbG9hdChjb2xzWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgIGNvbnN0IG1vZGUgPSAoY29sc1sxMV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b3dhcmRzID0gKGNvbHNbMTJdIHx8ICIiKS5zcGxpdCgnLScpWzBdLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2FuY2VsbGVkID0gKGNvbHNbMTNdIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyI7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWlzQ2FuY2VsbGVkKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIE1vZGUgRGF0YQ0KICAgICAgICAgICAgICAgICAgICBpZiAobW9kZVN1bW1hcnkuaGFzT3duUHJvcGVydHkobW9kZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVTdW1tYXJ5W21vZGVdICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVTdW1tYXJ5WyJPdGhlcnMiXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBUb3dhcmRzIERhdGENCiAgICAgICAgICAgICAgICAgICAgaWYgKHRvd2FyZHNTdW1tYXJ5Lmhhc093blByb3BlcnR5KHRvd2FyZHMpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0b3dhcmRzU3VtbWFyeVt0b3dhcmRzXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0b3dhcmRzU3VtbWFyeVsiT1RIRVJTIl0gKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiB7IG1vZGVTdW1tYXJ5LCB0b3dhcmRzU3VtbWFyeSB9Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9NYWluIFRhYmxlIFN0eWxlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBJbnRlcm5hbCBoZWxwZXIgdG8ga2VlcCB0aGUgZXhhY3QgZm9ybWF0IG9mIHlvdXIgQ29weSAoNSkgZmlsZQ0KICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVN0eWxlZFRhYmxlKHRpdGxlLCByb3dzLCB0b3RhbCkgew0KICAgICAgICAgICAgcmV0dXJuIGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBoZWlnaHQ6MTAwJTsgb3ZlcmZsb3cteTphdXRvOyBmb250LWZhbWlseTogc2Fucy1zZXJpZjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICMyYzNlNTA7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMS4yZW07Ij4ke3RpdGxlfTwvaDI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyBmb250LXNpemU6IDEzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmMzljMTI7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IGxlZnQ7Ij5DYXRlZ29yeTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7Ij5BbW91bnQgKOKCuSk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cm93c30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGZvbnQtd2VpZ2h0OiBib2xkOyI+VE9UQUw8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjFlbTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt0b3RhbC50b0xvY2FsZVN0cmluZygnZW4tSU4nKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU2hvd3MgdXNlcnMgb25saW4gcGhvdG8gb24gdGhlIG1haW4gcGFnZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLyoqDQogICAgICAgICAqIFBIT1RPIExPQURFUiBFTkdJTkUNCiAgICAgICAgICogVXNlcyB0aGUgcHJvdmVuIFhIUiBtZXRob2QgZnJvbSB0aGUgbG9nbyBsb2dpYw0KICAgICAgICAgKi8NCiAgICAgICAgZnVuY3Rpb24gbG9hZFVzZXJQaG90b1ZpYVhIUihwYXRoLCB0YXJnZXRJZCkgew0KICAgICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogICAgICAgICAgICB4aHIub3BlbignUE9TVCcsICdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcpOw0KICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0KTsgLy8gVXNlcyBnbG9iYWwgdG9rZW4gJ3QnDQogICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignRHJvcGJveC1BUEktQXJnJywgSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IHBhdGggfSkpOw0KICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJzsNCg0KICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSB4aHIucmVzcG9uc2U7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGltZykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHVybDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAidHJhbnNwYXJlbnQiOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUGhvdG8gRXJyb3IgIiArIHhoci5zdGF0dXMgKyAiOiAiICsgcGF0aCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldElkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGltZykgaW1nLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjNzc3IjsgLy8gRmFsbGJhY2sgZ3JheQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB4aHIuc2VuZCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFVJIFdBVENIRVIgJiBQT0xMSU5HIEhBTkRMRVINCiAgICAgICAgICogV2F0Y2hlcyAnYWN0aXZlVXNlckxpc3QnIGZvciBjaGFuZ2VzIGZyb20geW91ciA2MHMgcG9sbA0KICAgICAgICAgKi8NCiAgICAgICAgY29uc3QgcGhvdG9XYXRjaGVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgbGlzdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlVXNlckxpc3QnKTsNCiAgICAgICAgICAgIGlmICghbGlzdEVsZW1lbnQpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3QgcmF3VGV4dCA9IGxpc3RFbGVtZW50LmlubmVyVGV4dC50cmltKCk7DQoNCiAgICAgICAgICAgIC8vIFNhZmV0eTogRG9uJ3QgcnVuIGlmIGVtcHR5LCBqdXN0IHBvbGxpbmcgcGxhY2Vob2xkZXIsIG9yIGlmIGltYWdlcyBhbHJlYWR5IGV4aXN0DQogICAgICAgICAgICBpZiAoIXJhd1RleHQgfHwgcmF3VGV4dCA9PT0gIi0tLSIgfHwgbGlzdEVsZW1lbnQucXVlcnlTZWxlY3RvcignaW1nJykpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gMS4gUHJlcGFyZSBDb250YWluZXIgZm9yIE11bHRpcGxlIFVzZXJzDQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUuZmxleFdyYXAgPSAid3JhcCI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUuZ2FwID0gIjE1cHgiOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICI1cHgiOw0KDQogICAgICAgICAgICAvLyAyLiBDbGVhciB0ZXh0IGFuZCBidWlsZCBwaG90byBhcnJheQ0KICAgICAgICAgICAgLy8gU3VwcG9ydHMgc2luZ2xlIG5hbWUgb3IgY29tbWEtc2VwYXJhdGVkIG5hbWVzIGZyb20geW91ciBwb2xsZXINCiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gcmF3VGV4dC5zcGxpdCgnLCcpLm1hcChuID0+IG4udHJpbSgpKTsNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LmlubmVySFRNTCA9ICcnOw0KDQogICAgICAgICAgICBuYW1lcy5mb3JFYWNoKChuYW1lLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAiIikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcElkID0gYHVzZXItcGljLSR7aW5kZXh9LSR7bmFtZS5yZXBsYWNlKC9ccysvZywgJycpfWA7DQogICAgICAgICAgICAgICAgY29uc3QgcFBhdGggPSAiL0ltYWdlcy8iICsgbmFtZSArICIuanBnIjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5zdHlsZS5mbGV4RGlyZWN0aW9uID0gImNvbHVtbiI7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOw0KICAgICAgICAgICAgICAgIHVzZXJXcmFwcGVyLnN0eWxlLm1pbldpZHRoID0gIjYwcHgiOw0KDQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD0iJHtwSWR9IiBzdHlsZT0iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ0cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0NHB4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMyk7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD0iJHtuYW1lWzBdfSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDNweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogMXB4IDFweCAycHggYmxhY2s7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtuYW1lfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGxpc3RFbGVtZW50LmFwcGVuZENoaWxkKHVzZXJXcmFwcGVyKTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFRyaWdnZXIgaW5kaXZpZHVhbCBYSFIgbG9hZA0KICAgICAgICAgICAgICAgIGxvYWRVc2VyUGhvdG9WaWFYSFIocFBhdGgsIHBJZCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gSU5JVElBTElaRSBXQVRDSEVSDQogICAgICAgIGNvbnN0IG9ic2VydmVyVGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZVVzZXJMaXN0Jyk7DQogICAgICAgIGlmIChvYnNlcnZlclRhcmdldCkgew0KICAgICAgICAgICAgcGhvdG9XYXRjaGVyLm9ic2VydmUob2JzZXJ2ZXJUYXJnZXQsIHsgY2hpbGRMaXN0OiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOw0KICAgICAgICB9DQoNCg0KICAgICAgICBmdW5jdGlvbiBjaGVja1Vuc2F2ZWRDaGFuZ2VzKGNhbGxiYWNrKSB7DQogICAgICAgICAgICBpZiAoIWlzRGlydHkpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdXNlckNob2ljZSA9IGNvbmZpcm0oIlJlY2VpcHQgTm90IFNhdmVkISBcblxuQ2xpY2sgT0sgdG8gRElTQ0FSRCBjaGFuZ2VzLiBcbkNsaWNrIENBTkNFTCB0byBTVEFZIGFuZCBTYXZlLiIpOw0KDQogICAgICAgICAgICBpZiAodXNlckNob2ljZSkgew0KICAgICAgICAgICAgICAgIGlzRGlydHkgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOyAvLyBUaGlzIHJlLWVuYWJsZXMgc2VhcmNoIGFuZCBuYXYgYXV0b21hdGljYWxseQ0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TYXZlcyBhIG1vZGlmaWVkIG9yIG5ldyByZWNlaXB0IC0gYSBhdWRpdCBvZiByZWNlaXB0IGlzIHByb21wdGVkIGJlZm9yZSBzYXZpbmcuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzYXZlUmVjb3JkKCkgew0KICAgICAgICAgICAgLy8gMS4gUnVuIHRoZSBBdWRpdCBmaXJzdA0KICAgICAgICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgcnVuQXVkaXQoKTsNCiAgICAgICAgICAgIGlmICghY29uZmlybWVkKSByZXR1cm47IC8vIFN0b3AgaWYgdXNlciBjYW5jZWxzDQoNCiAgICAgICAgICAgIGNvbnN0IHJlY29yZElkeFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlOw0KICAgICAgICAgICAgaWYgKHJlY29yZElkeFRleHQgPT09ICItLS0iKSByZXR1cm47DQogICAgICAgICAgICBjb25zdCBpZHggPSBwYXJzZUludChyZWNvcmRJZHhUZXh0KTsNCiAgICAgICAgICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3NhdmUnKTsNCg0KICAgICAgICAgICAgLy8gMi4gR2F0aGVyIGRhdGEgaW4gZXhhY3Qgb3JkZXIgKEluZGljZXMgMC0xOSkNCiAgICAgICAgICAgIGNvbnN0IHJvd0RhdGEgPSBbDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUsICAgICAgICAgICAvLyAwDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSwgICAgICAgICAgICAvLyAxDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZSwgICAgICAgICAgICAvLyAyDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWUsICAgICAgICAgICAvLyAzDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2FkZHJlc3MnKS52YWx1ZS5yZXBsYWNlKC9cbi9nLCAnficpLCAvLyA0DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2VtYWlsJykudmFsdWUsICAgICAgICAgICAvLyA1DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlLCAgICAgICAgICAgICAvLyA2DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3N0YXInKS52YWx1ZSwgICAgICAgICAgICAvLyA3DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2dvdGhyYW0nKS52YWx1ZSwgICAgICAgICAvLyA4DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlLCAgICAgICAgICAvLyA5DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlLCAgICAgICAgICAgICAvLyAxMA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUsICAgICAgICAgICAgLy8gMTENCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfdG93YXJkcycpLnZhbHVlLCAgICAgICAgIC8vIDEyDQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgLy8gMTMNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29tbWVudHMnKS52YWx1ZS5yZXBsYWNlKC9cbi9nLCAnficpLCAvLyAxNA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUsICAgICAgICAgIC8vIDE1DQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmludGVkJykuY2hlY2tlZCA/ICJZRVMiIDogIk5PIiksICAvLyAxNg0KICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcHJhc2FkYW0nKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgLy8gMTcNCiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvcnB1cycpLmNoZWNrZWQgPyAiWUVTIiA6ICJOTyIpLCAgIC8vIDE4DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSAgICAgICAgICAgLy8gMTkNCiAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRMaW5lID0gcm93RGF0YS5qb2luKCd8Jyk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgc2F2ZUJ0bi5pbm5lclRleHQgPSAiU3luY2luZy4uLiI7DQogICAgICAgICAgICAgICAgc2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbaWR4XSA9IHVwZGF0ZWRMaW5lOw0KDQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogTU1QVF9GSUxFX0RCLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIk1PRElGSUVEIFJFQ09SRDogIiArIHVwZGF0ZWRMaW5lKTsNCiAgICAgICAgICAgICAgICBhbGVydCgiUmVjb3JkIFNhdmVkIGFuZCBTeW5jZWQuIik7DQogICAgICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsNCiAgICAgICAgICAgICAgICAvLyAtLS0gQUREIFRIRVNFIFRXTyBMSU5FUyAtLS0NCiAgICAgICAgICAgICAgICAvLyAxLiBTeW5jIHRoZSBnbG9iYWwgaW5kZXggdG8gdGhlIHJlY29yZCB3ZSBhcmUgYWN0dWFsbHkgbG9va2luZyBhdA0KICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmROdW1iZXJEaXNwbGF5JykudmFsdWUpOw0KICAgICAgICAgICAgICAgIC8vIDIuIEZvcmNlIHRoZSByZWNlaXB0IEhUTUwgdG8gcmVkcmF3IHVzaW5nIHRoZSBsYXRlc3QgZGF0YSBpbiBtZW1vcnkNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQogICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJTeW5jIEVycm9yOiAiICsgZXJyb3IubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIHNhdmVCdG4uaW5uZXJUZXh0ID0gIlNhdmUiOw0KICAgICAgICAgICAgICAgIHNhdmVCdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBQcm9tcHQgZm9yIHVzZXIgd2hlbiBoZSBsZWF2ZXMgcmVjZWlwdCB3aXRob3V0IHNhdmluZw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY29uZmlybUxvY2soKSB7DQogICAgICAgICAgICBpZiAoaXNEaXJ0eSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJDaG9pY2UgPSBjb25maXJtKCJSZWNlaXB0IE5vdCBTYXZlZCEgXG5cbkNsaWNrIE9LIHRvIERJU0NBUkQgY2hhbmdlcyBhbmQgTG9jay4gXG5DbGljayBDQU5DRUwgdG8gc3RheSBhbmQgU2F2ZS4iKTsNCiAgICAgICAgICAgICAgICBpZiAoIXVzZXJDaG9pY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBVc2VyIGNsaWNrZWQgQ2FuY2VsLCBzbyBkbyBub3RoaW5nIChzdGF5IGluIGVkaXQgbW9kZSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBJZiBub3QgZGlydHksIG9yIGlmIHVzZXIgY2hvc2UgdG8gZGlzY2FyZCwgcHJvY2VlZCB0byBsb2NrDQogICAgICAgICAgICBpc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFJOIEJ1dHRvbiAtIENyZWF0ZXMgYSBuZXcgcmVjZWlwdCBieSBhc3NpZ25pbmcgbmV3IHJlY2VpcHQgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjcmVhdGVOZXdSZWNlaXB0KCkgew0KICAgICAgICAgICAgY29uc3Qgcm5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3JuJyk7DQoNCiAgICAgICAgICAgIC8vIDEuIERpc2FibGUgYnV0dG9uIHRvIHByZXZlbnQgZG91YmxlLWNsaWNrcw0KICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgcm5CdG4uaW5uZXJUZXh0ID0gIkFzc2lnbmluZy4uLiI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXROZXdSZWNlaXB0Jyk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBDYWxsIHRoZSBHb29nbGUgU2NyaXB0DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzY3JpcHRVUkwsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBQYXJzZSB0aGUgSlNPTiByZXNwb25zZQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocmVzdWx0VGV4dCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZWNlaXB0ICYmIGRhdGEuaW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gNC4gVXBkYXRlIHRoZSBoaWRkZW4vZGlzcGxheSByZWNvcmQgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29yZE51bWJlckRpc3BsYXknKS52YWx1ZSA9IGRhdGEuaW5kZXg7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNS4gUG9wdWxhdGUgRmllbGRzIHdpdGggRGVmYXVsdHMNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUgPSBkYXRhLnJlY2VpcHQ7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9kYXRlJykudmFsdWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlID0gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gWW91ciByZXF1ZXN0ZWQgZGVmYXVsdHMNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BpbmNvZGUnKS52YWx1ZSA9ICIwMDAwMDAiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY291bnRyeScpLnZhbHVlID0gIklORElBIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX21vZGUnKS52YWx1ZSA9ICJDQVNIIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKS52YWx1ZSA9ICJPVEhFUlMiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNldCB0byBDYW5jZWxsZWQ9WUVTIGluaXRpYWxseSBhcyBhIHBsYWNlaG9sZGVyDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKS5jaGVja2VkID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA2LiBVbmxvY2sgZm9yIGVudHJ5DQogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA3LiBTeW5jIGxvY2FsIG1lbW9yeSBzbyB0aGUgbmV3IHJvdyBleGlzdHMgaW4gdGhlIGJyb3dzZXIncyBsaXN0DQogICAgICAgICAgICAgICAgICAgIC8vIFdlIGNyZWF0ZSBhIGJsYW5rIHBpcGVzIHN0cmluZyB0byByZXByZXNlbnQgdGhlIG5ldyByb3cgbG9jYWxseQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibGFua1JvdyA9IGAke2RhdGEucmVjZWlwdH18fHx8fHx8fHx8fHx8WUVTfHwwMDAwMDB8fHxPfElORElBYDsNCiAgICAgICAgICAgICAgICAgICAgLy9jb25zdCBibGFua1JvdyA9IGAke2RhdGEucmVjZWlwdH18fHx8fHx8fHx8fHx8WUVTfHwwMDAwMDB8Tk98Tk98Tk98SU5ESUFgOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5wdXNoKGJsYW5rUm93KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJOZXcgUmVjZWlwdCBBc3NpZ25lZDogIiArIGRhdGEucmVjZWlwdCArICJcblJlY29yZCBJbmRleDogIiArIGRhdGEuaW5kZXgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBkYXRhIHJlY2VpdmVkIGZyb20gc2VydmVyIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUk4gRXJyb3I6IiwgZSk7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yIGdldHRpbmcgbmV3IG51bWJlcjogIiArIGUubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBybkJ0bi5pbm5lclRleHQgPSAiUk4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIGJ5IGRlZmF1bHQgYWxsIHJlY2VpcHQgZmllbGRzIGFyZSBsb2NrZWQuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b2dnbGVMb2NrKHNob3VsZExvY2spIHsNCiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IFsnZmllbGRfcmVjbm8nLCAnZmllbGRfZGF0ZScsICdmaWVsZF9uYW1lJywgJ2ZpZWxkX3Bob25lJywgJ2ZpZWxkX2FkZHJlc3MnLCAnZmllbGRfZW1haWwnLCAnZmllbGRfcGFuJywgJ2ZpZWxkX3N0YXInLCAnZmllbGRfZ290aHJhbScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcmVmJywgJ2ZpZWxkX21vZGUnLCAnZmllbGRfdG93YXJkcycsICdmaWVsZF9jb21tZW50cycsICdmaWVsZF9waW5jb2RlJywgJ2ZpZWxkX2NvdW50cnknLCAnZmllbGRfY2FuY2VsJywgJ2ZpZWxkX3ByaW50ZWQnLCAnZmllbGRfcHJhc2FkYW0nLCAnZmllbGRfY29ycHVzJ107DQoNCiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94Um93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoZWNrYm94X3JvdycpOw0KICAgICAgICAgICAgY29uc3Qgc0lucCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9zZWFyY2gnKTsNCiAgICAgICAgICAgIGNvbnN0IHNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQnRuJyk7DQogICAgICAgICAgICBjb25zdCBuYXZCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi1uYXYnKTsNCiAgICAgICAgICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3NhdmUnKTsNCiAgICAgICAgICAgIGNvbnN0IHJuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1ybicpOyAvLyBBZGRlZA0KDQogICAgICAgICAgICBmaWVsZHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChlbC50eXBlID09PSAiY2hlY2tib3giKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5kaXNhYmxlZCA9IHNob3VsZExvY2s7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5yZWFkT25seSA9IHNob3VsZExvY2s7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kID0gc2hvdWxkTG9jayA/ICIjZmZmZmUwIiA6ICIjZmZmZmZmIjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmICghc2hvdWxkTG9jaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya0RpcnR5ID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlydHkgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYXZlQnRuKSBzYXZlQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNJbnApIHNJbnAuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzQnRuKSBzQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZCdG5zLmZvckVhY2goYiA9PiBiLmRpc2FibGVkID0gdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZWwub25pbnB1dCA9IG1hcmtEaXJ0eTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLm9uY2hhbmdlID0gbWFya0RpcnR5Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGlmIChjaGVja2JveFJvdykgew0KICAgICAgICAgICAgICAgIGNoZWNrYm94Um93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNob3VsZExvY2sgPyAiI2ZmZmZlMCIgOiAiI2ZmZmZmZiI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fdW5sb2NrJykuZGlzYWJsZWQgPSAhc2hvdWxkTG9jazsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fbG9jaycpLmRpc2FibGVkID0gc2hvdWxkTG9jazsNCiAgICAgICAgICAgIGlmIChzYXZlQnRuKSBzYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIGlmIChybkJ0bikgcm5CdG4uZGlzYWJsZWQgPSAhc2hvdWxkTG9jazsgLy8gUk4gYWN0aXZlIG9ubHkgd2hlbiBsb2NrZWQNCg0KICAgICAgICAgICAgaWYgKHNob3VsZExvY2spIHsNCiAgICAgICAgICAgICAgICBpc0RpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKHNJbnApIHNJbnAuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBpZiAoc0J0bikgc0J0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIG5hdkJ0bnMuZm9yRWFjaChiID0+IGIuZGlzYWJsZWQgPSBmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRXNzZW50aWFsIGZpeGVzIC0gbWlzYw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gLS0tIElOSVRJQUxJWkFUSU9OIEFORCBTRUFSQ0ggRklYIC0tLQ0KICAgICAgICAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpOw0KICAgICAgICAgICAgY29uc3QgZmV0Y2hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2ZldGNoJyk7DQogICAgICAgICAgICBjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQnRuJyk7DQoNCiAgICAgICAgICAgIC8vIDEuIFRlbGVwaG9uZSBGZXRjaCBCdXR0b24gQ29sb3IgTG9naWMNCiAgICAgICAgICAgIGlmIChwaG9uZUlucHV0ICYmIGZldGNoQnRuKSB7DQogICAgICAgICAgICAgICAgcGhvbmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZWFkeSA9IHRoaXMudmFsdWUudHJpbSgpLmxlbmd0aCA+PSAxMDsNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2hCdG4uZGlzYWJsZWQgPSAhaXNSZWFkeTsNCiAgICAgICAgICAgICAgICAgICAgLy8gVHVybnMgZ3JlZW4gd2hlbiAxMCBkaWdpdHMgYXJlIGVudGVyZWQNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2hCdG4uc3R5bGUuYmFja2dyb3VuZCA9IGlzUmVhZHkgPyAiIzRDQUY1MCIgOiAiI2UxZTFlMSI7DQogICAgICAgICAgICAgICAgICAgIGZldGNoQnRuLnN0eWxlLmNvbG9yID0gaXNSZWFkeSA/ICJ3aGl0ZSIgOiAiYmxhY2siOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBTRUFSQ0ggQlVUVE9OIEZJWDogUmVzZXQgaW5kZXggaWYgYXQgdGhlIGVuZCBvZiBEQg0KICAgICAgICAgICAgaWYgKHNlYXJjaEJ0bikgew0KICAgICAgICAgICAgICAgIC8vIFdlIG92ZXJyaWRlIHRoZSBjbGljayB0byBlbnN1cmUgaXQgZG9lc24ndCBnZXQgc3R1Y2sgYWZ0ZXIgYSBOZXcgUk4NCiAgICAgICAgICAgICAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFJlY29yZEluZGV4ICE9PSAndW5kZWZpbmVkJyAmJiBjdXJyZW50UmVjb3JkSW5kZXggPj0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGF0IHRoZSB2ZXJ5IGxhc3QgcmVjb3JkLCByZXNldCB0byBzdGFydCBzbyBzZWFyY2ggY2FuIGZpbmQgb2xkZXIgcmVjb3Jkcw0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgcGVyZm9ybVNlYXJjaCgpIGZyb20geW91ciBmaWxlIHdpbGwgbm93IHJ1biBjb3JyZWN0bHkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gQXV0by1VbmNoZWNrICdDYW5jZWwnIGJveCB3aGVuIHVzZXIgc3RhcnRzIHR5cGluZw0KICAgICAgICAgICAgWydmaWVsZF9uYW1lJywgJ2ZpZWxkX2Ftb3VudCcsICdmaWVsZF9waG9uZSddLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgew0KICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbENoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NhbmNlbCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbENoZWNrICYmIGNhbmNlbENoZWNrLmNoZWNrZWQpIGNhbmNlbENoZWNrLmNoZWNrZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pKCk7DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEZldGNoIGRvbm9yIGJhc2ljIGRldGFpbHMgZnJvbSBwYXN0IChsYXRlc3QpIHJlY2VpcHRzIHdpdGggdGhlIGhlbHAgb2YgdGVsZXBvbmUgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gREFUQSBGRVRDSElORyBMT0dJQyAtLS0NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hEb25vckRldGFpbHMoKSB7DQogICAgICAgICAgICBjb25zdCBwaG9uZVRvRmluZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQoNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQoNCiAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBvdmVybGF5IGlzIHZpc2libGUNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG5ld2VzdCB0byBvbGRlc3QgKFJldmVyc2UgTG9vcCkNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2ldOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBUZWxlcGhvbmUgQ29sdW1uIChJbmRleCAzKQ0KICAgICAgICAgICAgICAgICAgICAvLyBXZSBtYXRjaCB0aGUgbGFzdCAxMCBkaWdpdHMgdG8gaWdub3JlICs5MSBvciBsZWFkaW5nIHplcm9zDQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkRiUGhvbmUgPSAoY29sc1szXSB8fCAiIikucmVwbGFjZSgvXEQvZywgIiIpLnNsaWNlKC0xMCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbklucHV0UGhvbmUgPSBwaG9uZVRvRmluZC5yZXBsYWNlKC9cRC9nLCAiIikuc2xpY2UoLTEwKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5EYlBob25lID09PSBjbGVhbklucHV0UGhvbmUgJiYgY2xlYW5EYlBob25lLmxlbmd0aCA+PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIHRoZSBkYXRhIHRvIHlvdXIgZmllbGRzDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlID0gY29sc1syXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hZGRyZXNzJykudmFsdWUgPSAoY29sc1s0XSB8fCAiIikucmVwbGFjZSgvfi9nLCAnXG4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpLnZhbHVlID0gY29sc1s1XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKS52YWx1ZSA9IGNvbHNbNl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZ290aHJhbScpLnZhbHVlID0gY29sc1s4XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSBjb2xzWzE1XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb3VudHJ5JykudmFsdWUgPSBjb2xzWzE5XSB8fCAiSU5ESUEiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBub3RlIGluIGNvbW1lbnRzDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gYCR7U3RyaW5nKGQuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhkLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke2QuZ2V0RnVsbFllYXIoKX1gOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvbW1lbnRzJykudmFsdWUgPSBgQXV0by1GZXRjaGVkIGZyb20gUk46ICR7Y29sc1swXX0gb24gJHt0b2RheX1gOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJOZXcgRG9ub3IgLSBObyBwcmV2aW91cyByZWNvcmRzIGZvdW5kIGZvciB0aGlzIG51bWJlci4iKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAvLyBVbmxvY2sgdGhlIGZvcm0gc28gdGhlIHVzZXIgY2FuIGVkaXQgdGhlIGZldGNoZWQgZGF0YQ0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRvZ2dsZUxvY2sgPT09ICJmdW5jdGlvbiIpIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIDMwMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU2VhcmNoIFJlY29yZHMgLSBSb3VuZCBSb2JpbiBNZXRob2QNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIC0tLSBGSU5BTCBTRUFSQ0ggRklYOiBQUkVWRU5UUyBHRVRUSU5HIFNUVUNLIEFUIEVORCAtLS0NCiAgICAgICAgZnVuY3Rpb24gcGVyZm9ybVNlYXJjaCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHJhdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9zZWFyY2gnKS52YWx1ZS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIGlmICghcmF3KSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIC0tLSBTVEVQIDE6IFBJQ0sgVVAgUFJFRklYIExPR0lDIEZST00gQ09NTUVOVEVEIENPREUgLS0tDQogICAgICAgICAgICBsZXQgcXVlcnkgPSByYXc7DQogICAgICAgICAgICBsZXQgY29sSW5kZXggPSAtMTsgLy8gRGVmYXVsdDogRnVsbCBSZWNvcmQgU2VhcmNoDQoNCiAgICAgICAgICAgIGlmIChyYXcuc3RhcnRzV2l0aCgiTS0iKSkgeyBxdWVyeSA9IHJhdy5yZXBsYWNlKCJNLSIsICIiKTsgY29sSW5kZXggPSAzOyB9DQogICAgICAgICAgICBlbHNlIGlmIChyYXcuc3RhcnRzV2l0aCgiTi0iKSkgeyBxdWVyeSA9IHJhdy5yZXBsYWNlKCJOLSIsICIiKTsgY29sSW5kZXggPSAyOyB9DQogICAgICAgICAgICBlbHNlIGlmIChyYXcuc3RhcnRzV2l0aCgiVC0iKSkgeyBxdWVyeSA9IHJhdy5yZXBsYWNlKCJULSIsICIiKTsgY29sSW5kZXggPSAxMDsgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocmF3LnN0YXJ0c1dpdGgoIlAtIikpIHsgcXVlcnkgPSByYXcucmVwbGFjZSgiUC0iLCAiIik7IGNvbEluZGV4ID0gNjsgfQ0KDQogICAgICAgICAgICAvLyAtLS0gU1RFUCAyOiBTRVRVUCBMT09QIC0tLQ0KICAgICAgICAgICAgLy8gRk9SQ0UgU1RFUC1CQUNLOiBTdGFydCBsb29raW5nIGZyb20gdGhlIHJlY29yZCBCRUZPUkUgdGhlIGN1cnJlbnQgb25lLg0KICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoY3VycmVudFJlY29yZEluZGV4ID4gMCkgPyBjdXJyZW50UmVjb3JkSW5kZXggLSAxIDogR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7DQoNCiAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOw0KICAgICAgICAgICAgbGV0IGkgPSBzdGFydEluZGV4Ow0KICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsNCg0KICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSB3aG9sZSBkYXRhYmFzZSBvbmNlDQogICAgICAgICAgICB3aGlsZSAoY291bnQgPCBHTE9CQUxfREJfTElORVMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpXS50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHdoYXQgd2UgYXJlIHNlYXJjaGluZyBhZ2FpbnN0IGJhc2VkIG9uIHRoZSBwcmVmaXgNCiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAoY29sSW5kZXggPT09IC0xKSA/IGxpbmUgOiAobGluZS5zcGxpdCgnfCcpW2NvbEluZGV4XSB8fCAiIik7DQoNCiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmluY2x1ZGVzKHF1ZXJ5KSkgew0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkSW5kZXggPSBpOw0KICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGktLTsNCiAgICAgICAgICAgICAgICBpZiAoaSA8IDApIGkgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsgLy8gV3JhcCBhcm91bmQgdG8gZW5kDQogICAgICAgICAgICAgICAgY291bnQrKzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gLS0tIFNURVAgMzogRElTUExBWSBSRVNVTFRTIC0tLQ0KICAgICAgICAgICAgaWYgKGZvdW5kKSB7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgc2xpZGVyLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KICAgICAgICAgICAgICAgIGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gY3VycmVudFJlY29yZEluZGV4Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTm8gb3RoZXIgbWF0Y2hlcyBmb3VuZCBmb3I6ICIgKyByYXcpOw0KICAgICAgICAgICAgICAgIC8vIFJlc2V0IGxvZ2ljIGlmIG5vdGhpbmcgZm91bmQNCiAgICAgICAgICAgICAgICBsYXN0Rm91bmRTZWFyY2hJbmRleCA9IC0xOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gRW5zdXJlIHlvdXIgaGVscGVyIGlzIHN0cmljdGx5IGNoZWNraW5nIGRhdGENCiAgICAgICAgZnVuY3Rpb24gY2hlY2tTZWFyY2hNYXRjaChpZHgsIHF1ZXJ5KSB7DQogICAgICAgICAgICBjb25zdCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2lkeF07DQogICAgICAgICAgICBpZiAoIWxpbmUpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIHJldHVybiBsaW5lLnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFVzZXIgbmFtZSByZWdpc3RlcmVkIGFzIGxvZ2dlZCBpbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gd3JpdGVVc2VyTG9nKGFjdGlvbikgew0KICAgICAgICAgICAgaWYgKCFNTVBUX1VTRVJfTkFNRSkgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtNTVBUX0xPR19ESVJ9JHtNTVBUX1VTRVJfTkFNRX0udHh0YDsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTsNCiAgICAgICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0gYFske3RpbWVzdGFtcH1dICR7YWN0aW9ufVxuYDsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgZXhpc3RpbmdDb250ZW50ID0gIiI7DQogICAgICAgICAgICAgICAgLy8gVXNlICd0JyBhcyBwZXIgeW91ciBCYXNlIGZpbGUNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZmlsZU5hbWUgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIGV4aXN0aW5nQ29udGVudCA9IGF3YWl0IHJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGV4aXN0aW5nQ29udGVudCArIGxvZ0VudHJ5Ow0KICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlTmFtZSwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogdXBkYXRlZENvbnRlbnQNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKCJMb2dnaW5nIGZhaWxlZDoiLCBlcnIpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9yZW1vdmUgdXNlciBmcm9tIGxpc3QgaWYgbm90IHBvbGxlZCBmb3IgMiBtaW51dGVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB5b3UgYXNrZWQgZm9yIC0gcGxhY2UgaXQgd2l0aCB5b3VyIG90aGVyIHVzZXItaGFuZGxpbmcgZnVuY3Rpb25zDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJlbW92ZVVzZXJGcm9tUG9sbGluZyh1c2VyTmFtZSkgew0KICAgICAgICAgICAgLy8gMS4gTG9nIHRoZSBldmVudCBiZWZvcmUgdGhleSBhcmUgcmVtb3ZlZA0KICAgICAgICAgICAgYXdhaXQgd3JpdGVVc2VyTG9nKGBTRVNTSU9OIEVORDogVXNlciAke3VzZXJOYW1lfSBkaXNjb25uZWN0ZWQvcmVtb3ZlZCBmcm9tIHBvbGxpbmcuYCk7DQoNCiAgICAgICAgICAgIC8vIDIuIFlvdXIgZXhpc3RpbmcgbG9naWMgdG8gYWN0dWFsbHkgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgVUkgb3IgbGlzdA0KICAgICAgICAgICAgY29uc29sZS5sb2coYFVzZXIgJHt1c2VyTmFtZX0gaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGFjdGl2ZSBwb2xsaW5nLmApOw0KDQogICAgICAgICAgICAvLyBJZiB5b3UgaGF2ZSBhIHNwZWNpZmljIFVJIGVsZW1lbnQgZm9yIHRoZSB1c2VyIGxpc3QsIHVwZGF0ZSBpdCBoZXJlDQogICAgICAgICAgICAvLyB1cGRhdGVBY3RpdmVVc2VyTGlzdCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gTG9jYXRlIHRoaXMgaW4geW91ciA8c2NyaXB0PiBzZWN0aW9uDQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnYnV0dG9uJyk7DQogICAgICAgICAgICBpZiAodGFyZ2V0KSB7DQogICAgICAgICAgICAgICAgLy8gUFJPQkU6IEFkZCB0aGlzIGxpbmUgdG8gaWdub3JlIHRoZSBzYXZlIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmlkID09PSAnYnRuX3NhdmUnIHx8IHRhcmdldC5pZCA9PT0gJ2Jhbmstc3luYy1idG4nKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBidG5UZXh0ID0gdGFyZ2V0LmlubmVyVGV4dCB8fCB0YXJnZXQudmFsdWUgfHwgIkljb24gQnV0dG9uIjsNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coYENMSUNLRUQgQlVUVE9OOiBbJHtidG5UZXh0fV1gKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCg0KICAgICAgICAvLyAyLiBMQVVOQ0ggTE9HIChJbnNpZGUgeW91ciBleGlzdGluZyBpbml0aWFsaXplTU1QVCBvciByaWdodCBhZnRlcikNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9nTGF1bmNoKCkgew0KICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gRGl2aWRlciB3aXRoIFZlcnNpb24gTnVtYmVyDQogICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBWRVI6ICIgKyBNTVBUX1ZFUlNJT04pOw0KICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiTEFVTkNIRUQ6IFNlc3Npb24gU3RhcnRlZCBmb3IgIiArIE1NUFRfVVNFUl9OQU1FKTsNCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgY29uZmlybXMgdGhlIHRleHQgbG9nIHN0YXJ0ZWQuDQogICAgICAgICAgICAgICAgLy8gVGhlIHNuYXBzaG90IGxvZyB3aWxsIGZvbGxvdyBhcyBzb29uIGFzIHRoZSBjYW1lcmEgZmluaXNoZXMuDQogICAgICAgICAgICB9LCAyMDAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFRoaXMgcnVucyA1IHNlY29uZHMgYWZ0ZXIgbGF1bmNoIGFzIGEgc2VwYXJhdGUgIkhlYWx0aCBDaGVjayINCiAgICAgICAgLy8gQnVsbGV0cHJvb2YgSW50ZWdyaXR5IENoZWNrDQogICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyA9PT0gJ3VuZGVmaW5lZCcgfHwgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA9PT0gMCkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgLy8gMS4gR2V0IEFjdHVhbCBEQiBEYXRhDQogICAgICAgICAgICAgICAgY29uc3QgbGFzdERCTGluZSA9IEdMT0JBTF9EQl9MSU5FU1tHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsUk4gPSBsYXN0REJMaW5lLnNwbGl0KCd8JylbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbENvdW50ID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZldGNoIFNlcXVlbmNlIHdpdGggQ0FDSEUgQlVTVEVSDQogICAgICAgICAgICAgICAgLy8gQWRkaW5nIGEgdGltZXN0YW1wIGVuc3VyZXMgRHJvcGJveC9Ccm93c2VyIGNhbm5vdCBzZXJ2ZSBhbiBvbGQgdmVyc2lvbg0KICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQnVzdGVyID0gRGF0ZS5ub3coKTsNCiAgICAgICAgICAgICAgICBjb25zdCBzZXFSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfU0VRIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0N1c3RvbS1CdXN0ZXInOiBjYWNoZUJ1c3RlciAvLyBTb21lIGJyb3dzZXJzIG5lZWQgdGhpcyBpbiBoZWFkZXINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHNlcVJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXFUZXh0ID0gKGF3YWl0IHNlcVJlcy50ZXh0KCkpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2ZpbGVSTiwgZmlsZUNvdW50XSA9IHNlcVRleHQuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiSW50ZWdyaXR5IENoZWNrIC0+IERCOiIsIGFjdHVhbFJOLCAiRmlsZToiLCBmaWxlUk4pOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDMuIENvbXBhcmUNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdHVhbFJOICE9PSBmaWxlUk4pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGFpciA9IGNvbmZpcm0oDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYE1JU01BVENIIERFVEVDVEVEIVxuXG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRGF0YWJhc2U6ICR7YWN0dWFsUk59XG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU2VxdWVuY2UgRmlsZTogJHtmaWxlUk59XG5cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBUaGUgc2VxdWVuY2UgZmlsZSBpcyBvdXRkYXRlZC4gU3luYyBpdCBub3c/YA0KICAgICAgICAgICAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGFpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcmZvcm1TZXF1ZW5jZUZpeChhY3R1YWxSTiwgYWN0dWFsQ291bnQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkludGVncml0eSBjaGVjayBlcnJvcjoiLCBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgNDAwMCk7IC8vIFNob3J0ZXIgd2FpdCB0aW1lDQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQWRtaW4gUGFuZWwNCiAgICAgICAgLy8gVXBkYXRlcyBjb250cm9sLWxpc3QgLSBzZWxlY3QgYWxsb3dlZCBjb250cm9scyBmb3IgYSBwYXJ0aWN1bGFyIHVzZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIDEuIFVQREFURUQgRkVBVFVSRVMgTElTVA0KICAgICAgICBjb25zdCBwcm9qZWN0RmVhdHVyZXMgPSBbDQogICAgICAgICAgICAiYnRuLWFkbWluLWFjY2VzcyIsICJidG4tZGV2b3RlZS1hY2Nlc3MiLCAibWFzdGVyLWhlYWRlciIsICJkYXNoYm9hcmQtY29udGFpbmVyIiwgImVudHJ5LWNvbnRhaW5lciIsICJyZWNlaXB0LXByZXZpZXctcm93IiwNCiAgICAgICAgICAgICJidG5fc2F2ZSIsICJuZXdfcmVjX2J0biIsICJidG5fdW5sb2NrIiwgImJ0bl9sb2NrIiwgInNlYXJjaEJ0biIsICJiYW5rLXN5bmMtYnRuIiwgImJ0bl9jb25zZW50IiwgImJ0blN1bW1hcnkiLA0KICAgICAgICAgICAgInNlY3Rpb25zIiwgIk1pblJlY29yZE51bWJlciINCiAgICAgICAgXTsNCg0KICAgICAgICAvLyAyLiBPUEVOIFBPUlRBTCAoQ29ycmVjdGx5IHBhcnNpbmcgRGV2aWNlIElEIHwgVXNlcm5hbWUgfCBQYXNzd29yZCkNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gb3BlblNlY3VyaXR5UG9ydGFsKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB1c2VyUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvU2V0dGluZ3MvQXBwcm92ZWQudHh0JyB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgdXNlckxpc3QgPSBbXTsNCiAgICAgICAgICAgICAgICBpZiAodXNlclJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgdXNlclJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgZW1wdHkgbGluZXMsIGNvbW1lbnRzIHN0YXJ0aW5nIHdpdGggIywgYW5kIGxpbmVzIHdpdGhvdXQgcGlwZXMNCiAgICAgICAgICAgICAgICAgICAgdXNlckxpc3QgPSB0ZXh0LnNwbGl0KCdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKHUgPT4gdS50cmltKCkpDQogICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHUgPT4gdSAhPT0gIiIgJiYgIXUuc3RhcnRzV2l0aCgnIycpICYmIHUuaW5jbHVkZXMoJ3wnKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgdGFrZSB0aGUgbWlkZGxlIHBhcnQgKFVzZXJuYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPj0gMiA/IHBhcnRzWzFdLnRyaW0oKSA6IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih1ID0+IHUgIT09IG51bGwpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGxldCBodG1sSGVhZGVyID0gYA0KPGRpdiBpZD0icG9ydGFsLW92ZXJsYXkiIHN0eWxlPSJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjUpOyB6LWluZGV4OjEwMDAwOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3cteTphdXRvOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyB3aWR0aDo4MDBweDsgYWxpZ24tc2VsZjpmbGV4LXN0YXJ0OyBib3gtc2hhZG93OjAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC40KTsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtZmFtaWx5OkFyaWFsOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0icGFkZGluZzoyMHB4OyBiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJtYXJnaW46MDsiPlNlY3VyaXR5IFBvcnRhbDwvaDI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+U2VsZWN0IFVzZXI6IDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJwb3J0YWwtdXNlci1zZWxlY3RvciIgb25jaGFuZ2U9ImxvYWRVc2VyU2V0dGluZ3ModGhpcy52YWx1ZSkiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBVc2VyIC0tPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt1c2VyTGlzdC5tYXAodSA9PiBgPG9wdGlvbiB2YWx1ZT0iJHt1fSI+JHt1fTwvb3B0aW9uPmApLmpvaW4oJycpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBvcnRhbC1jb250ZW50LWFyZWEiIHN0eWxlPSJtaW4taGVpZ2h0OjIwMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJwYWRkaW5nOjQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjojNjY2OyI+U2VsZWN0IGEgdXNlcm5hbWUgdG8gbG9hZCB0aGUgc2VjdXJpdHkgZmlsZS48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0icGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOnJpZ2h0OyBib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ic2F2ZVNlY3VyaXR5RmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojODAwMDAwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMnB4IDMwcHg7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjRweDsgY3Vyc29yOnBvaW50ZXI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5TQVZFIENIQU5HRVM8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9ydGFsLW92ZXJsYXknKS5yZW1vdmUoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OjEwcHg7IHBhZGRpbmc6MTJweCAyNXB4OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6bm9uZTsgY3Vyc29yOnBvaW50ZXI7Ij5DQU5DRUw8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KPC9kaXY+YDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaHRtbEhlYWRlcik7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJFcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIDMuIExPQUQgREFUQSAoUGF0aCBpcyBub3cgY29ycmVjdGx5IC9TZXR0aW5ncy9Vc2VybmFtZS50eHQpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRVc2VyU2V0dGluZ3ModGFyZ2V0VXNlcikgew0KICAgICAgICAgICAgaWYgKCF0YXJnZXRVc2VyKSByZXR1cm47DQogICAgICAgICAgICBjb25zdCBjb250ZW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtY29udGVudC1hcmVhJyk7DQogICAgICAgICAgICBjb250ZW50QXJlYS5pbm5lckhUTUwgPSAnPHAgc3R5bGU9InBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5Mb2FkaW5nICcgKyB0YXJnZXRVc2VyICsgJy50eHQuLi48L3A+JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9ICh0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpID8gdCA6IE1NUFRfQVVUSF9LRVk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt0YXJnZXRVc2VyfS50eHRgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IHt9Ow0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHRleHQuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgc2V0dGluZ3NbcGFydHNbMF0udHJpbSgpXSA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgbGV0IHJvd3NIdG1sID0gYDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyI+PHRib2R5PmA7DQoNCiAgICAgICAgICAgICAgICBwcm9qZWN0RmVhdHVyZXMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNldHRpbmdzW2lkXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAiTWluUmVjb3JkTnVtYmVyIiB8fCBpZCA9PT0gInNlY3Rpb25zIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7aWR9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJpbnB1dC0ke2lkfSIgdmFsdWU9IiR7dmFsfSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZTkxZTYzOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFkgPSAodmFsID09PSAnWScgfHwgdmFsID09PSAnJykgPyAnc2VsZWN0ZWQnIDogJyc7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE4gPSAodmFsID09PSAnTicpID8gJ3NlbGVjdGVkJyA6ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7aWR9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iaW5wdXQtJHtpZH0iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjhweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJZIiAke3NlbGVjdGVkWX0+WTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJOIiAke3NlbGVjdGVkTn0+Tjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPC90Ym9keT48L3RhYmxlPmA7DQogICAgICAgICAgICAgICAgY29udGVudEFyZWEuaW5uZXJIVE1MID0gcm93c0h0bWw7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnRlbnRBcmVhLmlubmVySFRNTCA9ICI8cCBzdHlsZT0ncGFkZGluZzoyMHB4Oyc+RXJyb3IgbG9hZGluZyBzZXR0aW5ncy48L3A+IjsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gNC4gU0FWRSAoUGF0aCBmaXhlZCB0byAvU2V0dGluZ3MvVXNlcm5hbWUudHh0KQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzYXZlU2VjdXJpdHlGaWxlKCkgew0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0VXNlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtdXNlci1zZWxlY3RvcicpLnZhbHVlOw0KICAgICAgICAgICAgaWYgKCF0YXJnZXRVc2VyKSByZXR1cm4gYWxlcnQoIlNlbGVjdCB1c2VyISIpOw0KDQogICAgICAgICAgICBsZXQgZmlsZUxpbmVzID0gW107DQogICAgICAgICAgICBwcm9qZWN0RmVhdHVyZXMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgaW5wdXQtJHtpZH1gKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGZpbGVMaW5lcy5wdXNoKGAke2lkfSB8ICR7ZWwudmFsdWUudHJpbSgpfWApOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gZmlsZUxpbmVzLmpvaW4oJ1xuJyk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjdGl2ZVRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogYC9TZXR0aW5ncy8ke3RhcmdldFVzZXJ9LnR4dGAsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZpbGVDb250ZW50DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJTYXZlZDogIiArIHRhcmdldFVzZXIgKyAiLnR4dCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9ydGFsLW92ZXJsYXknKS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJTYXZlIEVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIENoZWNrcyBpZiBvdXIgbWFpbiBEQiBpcyByZWFkeSBmb3IgdXNlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBzdGFydEludGVncml0eVByb2JlKGF0dGVtcHRzKSB7DQogICAgICAgICAgICBpZiAoYXR0ZW1wdHMgPD0gMCkgcmV0dXJuOyAvLyBTdG9wIHRyeWluZyBhZnRlciAxMCBhdHRlbXB0cw0KDQogICAgICAgICAgICAvLyAxLiBDaGVjayBpZiBZT1VSIGNvcmUgZGF0YSBpcyByZWFkeQ0KICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgIT09ICd1bmRlZmluZWQnICYmIEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPiAwICYmIHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgew0KDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlN5c3RlbSBSZWFkeS4gUHJvYmluZyBTZXF1ZW5jZS4uLiIpOw0KICAgICAgICAgICAgICAgIHBlcmZvcm1TZXF1ZW5jZUNoZWNrKCk7DQoNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gMi4gTm90IHJlYWR5IHlldD8gV2FpdCAyIHNlY29uZHMgYW5kIHRyeSBhZ2Fpbg0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTeXN0ZW0gYnVzeS4uLiByZXRyeWluZyBwcm9iZSBpbiAycyIpOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc3RhcnRJbnRlZ3JpdHlQcm9iZShhdHRlbXB0cyAtIDEpLCAyMDAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBMb29rcyBmb3Igc2VxdWVuY2UudHh0IGFuZCBjaGVja3MgbGFzdCByZWNvcmQgYW5kIHJlY2VpcHQgQ0cgbnVtYmVyIC0gaWYgbm90IG9rIC0gcHJvbXB0cyBmb3IgYXV0byBjb3JyZWN0aW9uDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBwZXJmb3JtU2VxdWVuY2VDaGVjaygpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gR2V0IHRoZSB0b3RhbCBjb3VudCAoaXJyZXNwZWN0aXZlIG9mIHByZWZpeCkNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvdW50ID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZpbmQgdGhlIGxhdGVzdCBDRyByZWNlaXB0IGJ5IHNlYXJjaGluZyBiYWNrd2FyZCBmcm9tIHRoZSBlbmQNCiAgICAgICAgICAgICAgICBsZXQgZGJSTiA9ICIiOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWlwdE51bWJlciA9IEdMT0JBTF9EQl9MSU5FU1tpXS5zcGxpdCgnfCcpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY2VpcHROdW1iZXIuc3RhcnRzV2l0aCgiQ0ciKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGJSTiA9IHJlY2VpcHROdW1iZXI7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gRm91bmQgdGhlIGhpZ2hlc3QvbGF0ZXN0IENHIG51bWJlciwgc3RvcCBzZWFyY2hpbmcNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBJZiBubyBDRyBmb3VuZCBhdCBhbGwsIHVzZSB0aGUgbGFzdCBsaW5lJ3MgbnVtYmVyDQogICAgICAgICAgICAgICAgaWYgKCFkYlJOICYmIEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGRiUk4gPSBHTE9CQUxfREJfTElORVNbR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDFdLnNwbGl0KCd8JylbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9TRVEgfSkNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICduby1zdG9yZScNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IChhd2FpdCByZXMudGV4dCgpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtmaWxlUk4sIGZpbGVDb3VudF0gPSB0ZXh0LnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSBmb3VuZCBDRyBudW1iZXIgd2l0aCB3aGF0IGlzIGluIHNlcXVlbmNlLnR4dA0KICAgICAgICAgICAgICAgICAgICBpZiAoZGJSTiAhPT0gZmlsZVJOKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBhaXIgPSBjb25maXJtKGBTRVFVRU5DRSBNSVNNQVRDSCFcblxuTGF0ZXN0IENHIGluIERCOiAke2RiUk59XG5GaWxlIHNheXM6ICR7ZmlsZVJOfVxuVG90YWwgUmVjb3JkczogJHtkYkNvdW50fVxuXG5VcGRhdGUgc2VxdWVuY2UgZmlsZT9gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBhaXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX1NFUSwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGJSTiArICJ8IiArIGRiQ291bnQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIlByb2JlIGZldGNoIGZhaWxlZC4gTmV0d29yayBtaWdodCBiZSBidXN5LiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIExvb2tzIGZvciBVc2VyTmFtZS50eHQgYW5kIGNoZWNrcyB3aGF0IGFyZSB0aGUgY29udHJvbHMgdG8gYmUgYWxsb3dlZCAtIGZ1bGwgYWNjZXNzIGlmIGZpbGUgbm90IGZvdW5kLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU3RhcnQgdGhlIHByb2JlICh0cnkgMTAgdGltZXMsIGV2ZXJ5IDIgc2Vjb25kcykNCiAgICAgICAgc3RhcnRJbnRlZ3JpdHlQcm9iZSgxMCk7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEFuZEFwcGx5U2VjdXJpdHkodXNlck5hbWUpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt1c2VyTmFtZX0udHh0YCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgcmV0dXJuOyAvLyBJZiBubyBmaWxlIGV4aXN0cywgdXNlciBoYXMgZnVsbCBhY2Nlc3MNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIC8vY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcbicpOw0KDQoNCiAgICAgICAgICAgICAgICAvLyBTa2lwIGNvbW1lbnRzIGFuZCBmb3JtYXR0aW5nIGxpbmVzDQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcbicpLmZpbHRlcihsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IGxpbmUudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbCAhPT0gIiIgJiYgIWwuc3RhcnRzV2l0aCgnIycpICYmIGwuaW5jbHVkZXMoJ3wnKTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtpZCwgYWNjZXNzXSA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkICYmIGFjY2VzcyAmJiBhY2Nlc3MudHJpbSgpID09PSAiTiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZC50cmltKCkpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaWQudHJpbSgpKVswXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOyAvLyBESVNBUFBFQVINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgU2VjdXJpdHk6IEhpZGRlbiAke2lkfWApOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJTZWN1cml0eSBmaWxlIG5vdCBmb3VuZCBmb3IgdXNlciwgZ3JhbnRpbmcgZGVmYXVsdCBhY2Nlc3MuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gaWYgbWlucmVjb3JkIG51bWJlciBzcGVjaWZpZWQgaW4gdXNlcm5hbWUudHh0IHRoZW4gYmxvY2tzIHVzZXIgdG8gdmlldyBwcmV2aW91cyByZWNvcmRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvKioNCiogU2VjdXJpdHkgR2F0ZSBmb3IgTmF2aWdhdGlvbg0KKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0SW5kZXggLSBUaGUgaW5kZXggdGhlIHVzZXIgaXMgdHJ5aW5nIHRvIG1vdmUgdG8NCiovDQogICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlTmF2aWdhdGlvblNlY3VyaXR5KHRhcmdldEluZGV4KSB7DQogICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IGluZGV4IGlzIGFjdHVhbGx5IGEgcmVjb3JkIG51bWJlciAoMS1iYXNlZCksDQogICAgICAgICAgICAvLyB3ZSB1c2UgaXQgZGlyZWN0bHkuIE90aGVyd2lzZSwgd2UgYXNzdW1lIGl0J3MgYSAwLWJhc2VkIGFycmF5IGluZGV4Lg0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0Uk4gPSB0YXJnZXRJbmRleCArIDE7DQoNCiAgICAgICAgICAgIGlmICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IDAgJiYgdGFyZ2V0Uk4gPCB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCLwn5uRIFNFQ1VSSVRZIEJMT0NLXG5cbllvdXIgYWNjZXNzIGxldmVsIGRvZXMgbm90IHBlcm1pdCB2aWV3aW5nIHJlY29yZHMgYmVmb3JlOiAiICsgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4pOw0KDQogICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHNsaWRlciB2aXN1YWwgaWYgaXQgbW92ZWQNCiAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHNsaWRlci52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCg0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gRGVueSBuYXZpZ2F0aW9uDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQWxsb3cgbmF2aWdhdGlvbg0KICAgICAgICB9DQoNCiAgICAgICAgLy8gSWYgYSBmbG9vciBpcyBzZXQsIGFuZCB3ZSBhcmUgY3VycmVudGx5IGF0IGEgbG93ZXIgcmVjb3JkLCBqdW1wIHRvIHRoZSBmbG9vcg0KICAgICAgICBpZiAod2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPiAwKSB7DQogICAgICAgICAgICAvLyBJZiBjdXJyZW50IGluZGV4IGlzIDAgb3IgbGVzcyB0aGFuIHRoZSBmbG9vciwgbG9hZCB0aGUgZmxvb3IgcmVjb3JkDQogICAgICAgICAgICBpZiAoKGN1cnJlbnRSZWNvcmRJbmRleCArIDEpIDwgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4pIHsNCiAgICAgICAgICAgICAgICBjdXJyZW50UmVjb3JkSW5kZXggPSB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiAtIDE7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZVNsaWRlcigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIGxvb2tzIGZvciBhcHByb3ZlZC50eHQgYW5kIGFsbG93cyB1c2VyIHRvIGVudGVyIHN3IC0gYmFzZWQgb24gZGV2aWNlIGlkIGFuZCBwYXNzd29yZA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuUGVyc29uYWxTZWN1cml0eUdhdGUoc2VsZWN0ZWRSb3csIGN1cnJlbnREZXZJRCkgew0KICAgICAgICAgICAgY29uc3QgcGFydHMgPSBzZWxlY3RlZFJvdy5zcGxpdCgnfCcpLm1hcChwID0+IHAudHJpbSgpKTsNCiAgICAgICAgICAgIGNvbnN0IHVOYW1lID0gcGFydHNbMV07DQogICAgICAgICAgICBjb25zdCB1UGFzcyA9IHBhcnRzWzJdIHx8ICIwIjsNCg0KICAgICAgICAgICAgLy8gLS0tIENSSVRJQ0FMOiBTZXQgR2xvYmFsIElkZW50aXR5IGltbWVkaWF0ZWx5IC0tLQ0KICAgICAgICAgICAgTU1QVF9VU0VSX05BTUUgPSB1TmFtZTsNCg0KICAgICAgICAgICAgLy8gSGFuZGxlIFBJTiA9IDAgKEltbWVkaWF0ZSBBdXRvLUxvZ2luKQ0KICAgICAgICAgICAgaWYgKHVQYXNzID09PSAiMCIpIHsNCiAgICAgICAgICAgICAgICBsb2NrQW5kUmVmcmVzaFVzZXIodU5hbWUpOw0KICAgICAgICAgICAgICAgIGF3YWl0IGZpbmlzaE1NUFRMYXVuY2godCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBCdWlsZCBQSU4gVUkgaWYgUElOIGlzIG5vdCAwDQogICAgICAgICAgICBjb25zdCBnYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICBnYXRlLmlkID0gInNlY3VyaXR5X2hpamFjayI7DQogICAgICAgICAgICBnYXRlLnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDI1NSwyNTAsMjQwLDAuOTgpOyB6LWluZGV4Ojk5OTk5OTsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZm9udC1mYW1pbHk6c2Fucy1zZXJpZjsiOw0KDQogICAgICAgICAgICBnYXRlLmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBwYWRkaW5nOjQwcHg7IGJvcmRlci1yYWRpdXM6MTVweDsgYm9yZGVyOjNweCBzb2xpZCAjRkY5OTMzOyB0ZXh0LWFsaWduOmNlbnRlcjsgYm94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuMSk7IHdpZHRoOjMyMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImdhdGVfcGhvdG9fY29udGFpbmVyIj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjojMzMzOyBtYXJnaW46MTBweCAwOyI+JHt1TmFtZX08L2gyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIGlkPSJnYXRlX2lucHV0IiBwbGFjZWhvbGRlcj0iRW50ZXIgUElOIiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxNXB4OyBib3JkZXI6MnB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjIycHg7IG91dGxpbmU6bm9uZTsgbWFyZ2luLWJvdHRvbToxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImdhdGVfdmVyaWZ5IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMnB4OyBiYWNrZ3JvdW5kOiMyOGE3NDU7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo4cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGN1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MTZweDsiPlVOTE9DSyBBUFA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgaWQ9ImdhdGVfZXJyIiBzdHlsZT0iY29sb3I6cmVkOyBtYXJnaW4tdG9wOjEwcHg7IGRpc3BsYXk6bm9uZTsiPkludmFsaWQgUGFzc3dvcmQ8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChnYXRlKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2lucHV0JykuZm9jdXMoKTsNCg0KICAgICAgICAgICAgLy8gVXNlciBQaG90byBGZXRjaA0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwaG90b1BhdGggPSBgL0ltYWdlcy8ke3VOYW1lfS5qcGdgOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHBob3RvUGF0aCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgaWYgKHBSLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBhd2FpdCBwUi5ibG9iKCk7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX3Bob3RvX2NvbnRhaW5lcicpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iJHtVUkwuY3JlYXRlT2JqZWN0VVJMKGIpfSIgc3R5bGU9IndpZHRoOjEyMHB4OyBoZWlnaHQ6MTIwcHg7IGJvcmRlci1yYWRpdXM6NTAlOyBib3JkZXI6M3B4IHNvbGlkICNGRjk5MzM7IG9iamVjdC1maXQ6Y292ZXI7IG1hcmdpbi1ib3R0b206MTBweDsiPmA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiRGVmYXVsdGluZyB0byBubyBwaG90byIpOyB9DQoNCiAgICAgICAgICAgIGNvbnN0IHZlcmlmeSA9IGFzeW5jICgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS52YWx1ZSA9PT0gdVBhc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgZ2F0ZS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgbG9ja0FuZFJlZnJlc2hVc2VyKHVOYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmluaXNoTU1QVExhdW5jaCh0KTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9lcnInKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX3ZlcmlmeScpLm9uY2xpY2sgPSB2ZXJpZnk7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9pbnB1dCcpLm9ua2V5cHJlc3MgPSAoZSkgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHZlcmlmeSgpOyB9Ow0KICAgICAgICB9DQoNCg0KDQoNCiAgICAgICAgZnVuY3Rpb24gc2hvd1VzZXJJZGVudGl0eVNlbGVjdG9yKG1hdGNoZXMsIHRva2VuLCBkZXZJRCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgb3ZlcmxheS5pZCA9ICJ1c2VyX2lkZW50aXR5X292ZXJsYXkiOw0KICAgICAgICAgICAgb3ZlcmxheS5zdHlsZSA9ICJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6I0ZERkNGQjsgei1pbmRleDoyMTQ3NDgzNjQ3OyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBmb250LWZhbWlseTpzYW5zLXNlcmlmOyI7DQoNCiAgICAgICAgICAgIGxldCBidXR0b25zSHRtbCA9IG1hdGNoZXMubWFwKChsaW5lLCBpZHgpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGluZS5zcGxpdCgnfCcpWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYDxidXR0b24gaWQ9ImlkZW50aXR5X2J0bl8ke2lkeH0iIHN0eWxlPSJ3aWR0aDozMDBweDsgcGFkZGluZzoyMHB4OyBtYXJnaW46MTBweDsgYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyOjNweCBzb2xpZCAjRkY5OTMzOyBib3JkZXItcmFkaXVzOjEycHg7IGZvbnQtc2l6ZToyMHB4OyBmb250LXdlaWdodDpib2xkOyBjdXJzb3I6cG9pbnRlcjsgY29sb3I6IzMzMzsiPiR7bmFtZX08L2J1dHRvbj5gOw0KICAgICAgICAgICAgfSkuam9pbignJyk7DQoNCiAgICAgICAgICAgIG92ZXJsYXkuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgc3R5bGU9ImNvbG9yOiNGRjk5MzM7IG1hcmdpbi1ib3R0b206MTBweDsiPlNFTEVDVCBQUk9GSUxFPC9oMT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9ImNvbG9yOiM2NjY7IG1hcmdpbi1ib3R0b206MzBweDsiPk11bHRpcGxlIHVzZXJzIGZvdW5kIGZvciB0aGlzIGRldmljZTo8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7YnV0dG9uc0h0bWx9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7DQoNCiAgICAgICAgICAgIG1hdGNoZXMuZm9yRWFjaCgobGluZSwgaWR4KSA9PiB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGlkZW50aXR5X2J0bl8ke2lkeH1gKS5vbmNsaWNrID0gKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHNlbmRzIHRoZSBzcGVjaWZpYyBzZWxlY3RlZCB1c2VyIHJvdyB0byB0aGUgR2F0ZQ0KICAgICAgICAgICAgICAgICAgICBydW5QZXJzb25hbFNlY3VyaXR5R2F0ZShsaW5lLCBkZXZJRCk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBmaW5pc2hNTVBUTGF1bmNoKHRva2VuKSB7DQogICAgICAgICAgICAvLyAxLiBTd2l0Y2ggVUkgVmlzaWJpbGl0eQ0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhTY3JlZW4nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5BcHBDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCg0KICAgICAgICAgICAgLy8gMi4gU3RhcnQgdGhlIGFjdHVhbCBhcHAgZGF0YSBsb2FkaW5nDQogICAgICAgICAgICAvLyBUaGlzIHdpbGwgbm93IHVzZSB0aGUgZ2xvYmFsbHkgc2V0IE1NUFRfVVNFUl9OQU1FDQogICAgICAgICAgICBsb2FkRGF0YSh0b2tlbik7DQoNCiAgICAgICAgICAgIC8vIDMuIExvZyB0aGUgc3RhcnQNCiAgICAgICAgICAgIC8vIERpdmlkZXIgd2l0aCBWZXJzaW9uIE51bWJlcg0KICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBWRVI6ICIgKyBNTVBUX1ZFUlNJT04pOw0KICAgICAgICAgICAgYXdhaXQgd3JpdGVVc2VyTG9nKGBMQVVOQ0hFRDogU2Vzc2lvbiBTdGFydGVkIGZvciAke01NUFRfVVNFUl9OQU1FfWApOw0KICAgICAgICB9DQoNCg0KDQoNCg0KDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFRoZSAiSGFtbWVyIiAtIGZvcmNlcyB0aGUgYXBwIHRvIGFja25vd2xlZGdlIFRISVMgdXNlciBhbmQgbm8gb25lIGVsc2UuDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBsb2NrQW5kUmVmcmVzaFVzZXIoZmluYWxOYW1lKSB7DQogICAgICAgICAgICB3aW5kb3cuTU1QVF9VU0VSX05BTUUgPSBmaW5hbE5hbWU7DQoNCiAgICAgICAgICAgIC8vIEZvcmNlIGhlYWRlci9zaWRlYmFyIHVwZGF0ZQ0KICAgICAgICAgICAgY29uc3QgdXNlckxhYmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlVc2VyJyk7DQogICAgICAgICAgICBpZiAodXNlckxhYmVsKSB1c2VyTGFiZWwuaW5uZXJUZXh0ID0gZmluYWxOYW1lOw0KDQogICAgICAgICAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZVVzZXJMaXN0Jyk7DQogICAgICAgICAgICBpZiAoYWN0aXZlTGlzdCkgYWN0aXZlTGlzdC5pbm5lclRleHQgPSBmaW5hbE5hbWU7DQoNCiAgICAgICAgICAgIC8vIFJlLXJ1biBwZXJtaXNzaW9uIGxvZ2ljIGZvciBUSElTIHVzZXIgc3BlY2lmaWNhbGx5DQogICAgICAgICAgICBpZiAodHlwZW9mIGFwcGx5VXNlclBlcm1pc3Npb25zID09PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgICAgICAgYXBwbHlVc2VyUGVybWlzc2lvbnMoZmluYWxOYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgaGlkZSBsb2dpYyBydW5zIEFGVEVSIHRoZSBwYWdlIGFuZCBhbGwgZGF0YSAoaW1hZ2VzL3N0YXRzKSBhcmUgcmVhZHkNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAvLyAxLXNlY29uZCBkZWxheSB0byBlbnN1cmUgYW55IGludGVybmFsICdsb2FkUmVjb3JkJyBmdW5jdGlvbnMgaGF2ZSBmaW5pc2hlZCByZW5kZXJpbmcgcm93cw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gUmVwbGFjZSAnY3VycmVudFVzZXInIHdpdGggd2hhdGV2ZXIgdmFyaWFibGUgc3RvcmVzIHlvdXIgbG9nZ2VkLWluIG5hbWUNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRVc2VyICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgICAgICBhcHBseVVzZXJQZXJtaXNzaW9ucyhjdXJyZW50VXNlcik7DQogICAgICAgICAgICAgICAgICAgIGNhcHR1cmVTZWN1cml0eVNuYXBzaG90KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBsb29rcyBmb3IgdXNlcm5hbWUudHh0IGFuZCBlbmFibGVzIC8gZGlzYWJsZXMgY29udHJvbHMgZm9yIHRoYXQgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBhcHBseVVzZXJQZXJtaXNzaW9ucyh1c2VyTmFtZSkgew0KICAgICAgICAgICAgLy8gMS4gSW5pdGlhbCBkZWJ1ZyBhbGVydA0KICAgICAgICAgICAgLy9hbGVydCgiRnVuY3Rpb24gU3RhcnRlZCBmb3I6ICIgKyB1c2VyTmFtZSk7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gIi9TZXR0aW5ncy8iICsgdXNlck5hbWUudHJpbSgpICsgIi50eHQiOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogZmlsZVBhdGggfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXG4nKTsNCg0KICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IFtpZCwgYWNjZXNzXSA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAocyA9PiBzLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmICghaWQpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQS4gTWluIFJlY29yZCBMb2dpYyAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAiTWluUmVjb3JkTnVtYmVyIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxvb3JWYWx1ZSA9IHBhcnNlSW50KGFjY2VzcykgfHwgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID0gZmxvb3JWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmRTbGlkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIuc2V0QXR0cmlidXRlKCdtaW4nLCBmbG9vclZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoc2xpZGVyLnZhbHVlKSA8IGZsb29yVmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gZmxvb3JWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsb2FkUmVjb3JkQnlJbmRleCA9PT0gImZ1bmN0aW9uIikgbG9hZFJlY29yZEJ5SW5kZXgoZmxvb3JWYWx1ZSAtIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBCLiBTZWN0aW9ucyBMb2dpYyAoMS03KSAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAic2VjdGlvbnMiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KCJTZWN0aW9ucyByZWFkOiBbIiArIGFjY2VzcyArICJdIik7DQogICAgICAgICAgICAgICAgICAgICAgICBhcHBseVNlY3Rpb25BY2Nlc3MoYWNjZXNzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBDLiBTdGFuZGFyZCBVSSBUb2dnbGVzIChOID0gSGlkZSkgLS0tDQoNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQy4gU3RhbmRhcmQgVUkgVG9nZ2xlcyAoTiA9IEhpZGUvRGlzYWJsZSkgLS0tDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBDLiBTdGFuZGFyZCBVSSBUb2dnbGVzIChBZ2dyZXNzaXZlIE1vZGUpIC0tLQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCMke2lkfSwgLiR7aWR9YCk7DQoNCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzID09PSAiTiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxLiBJbml0aWFsIEhpZGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmRpc2FibGVkID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIuIFRoZSAiU2VjdXJpdHkgR3VhcmQiIChPYnNlcnZlcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb3RoZXIgc2NyaXB0IHRyaWVzIHRvIHNob3cgdGhpcyBidXR0b24sIHRoaXMgc25hcHMgaXQgYmFjayB0byBoaWRkZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gImF0dHJpYnV0ZXMiICYmIGVsLnN0eWxlLmRpc3BsYXkgIT09ICJub25lIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbCwgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsnc3R5bGUnLCAnY2xhc3MnXSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhwbGljaXRseSBTaG93IGlmICdZJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gYXBwbHlTZWN0aW9uQWNjZXNzKGFsbG93ZWRTdHJpbmcpIHsNCiAgICAgICAgICAgIC8vIFdlIHRhcmdldCB0aGUgY29udGFpbmVycyBleGFjdGx5IGFzIHlvdSBkZWZpbmVkIHRoZW0NCiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25NYXAgPSB7DQogICAgICAgICAgICAgICAgJzAnOiAnI3JhZGlvLWRvY2snLCAvL0ludGVybmV0IFJhZGlvDQogICAgICAgICAgICAgICAgJzEnOiAnLnBhbmNoYW5nLW91dGVyJywNCiAgICAgICAgICAgICAgICAnMic6ICcuZmxhc2hiYWNrLWNvbnRhaW5lcicsDQogICAgICAgICAgICAgICAgJzMnOiAnLmNoaXRyYW0tY29udGFpbmVyJywNCiAgICAgICAgICAgICAgICAnNCc6ICcubW1wdC1hcmNoaXZlLWJveCcsDQogICAgICAgICAgICAgICAgJzUnOiAnI2F1ZGlvX2FyY2hpdmVfc2VjdGlvbicsDQogICAgICAgICAgICAgICAgJzYnOiAnI3ZpZGVvLWFyY2hpdmUtYm94JywgLy8gVGFyZ2V0ZWQgdmlhIHRoZSBJRCB3ZSBhZGRlZCBpbiBTdGVwIDENCiAgICAgICAgICAgICAgICAnNyc6ICcjcGFuY2hhbmdfc2VjdGlvbicsDQogICAgICAgICAgICAgICAgJzgnOiAnLmx1bmFyLXNlY3Rpb24nLA0KICAgICAgICAgICAgICAgICc5JzogJy5uYXYtc2VjdGlvbicsDQogICAgICAgICAgICAgICAgJ0cnOiAnLmd1cnUtc2VjdGlvbicNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNlY3Rpb25NYXApLmZvckVhY2gobnVtID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RvciA9IHNlY3Rpb25NYXBbbnVtXTsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOw0KDQogICAgICAgICAgICAgICAgaWYgKGVsKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIElGIHRoZSBudW1iZXIgaXMgaW4gdGhlIHN0cmluZyAoZS5nLiAnMTIzJyksIGtlZXAvc2hvdyBpdC4NCiAgICAgICAgICAgICAgICAgICAgLy8gSUYgTk9UIChlLmcuICc2JyBpcyBtaXNzaW5nKSwgaGlkZSBpdCBpbW1lZGlhdGVseS4NCiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbG93ZWRTdHJpbmcuaW5jbHVkZXMobnVtKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBUYWtlcyBhIHNuYXAgb2YgdXNlciB3aGlsZSBsYXVuY2ggYW5kIHB1dHMgaW4gbG9nIGZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gSU5ERVBFTkRFTlQgU0VDVVJJVFkgU05BUFNIT1QNCiAgICAgICAgbGV0IE1NUFRfUEhPVE9fQ0FQVFVSRUQgPSBmYWxzZTsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCgpIHsNCiAgICAgICAgICAgIGlmIChNTVBUX1BIT1RPX0NBUFRVUkVEIHx8ICFNTVBUX1VTRVJfTkFNRSkgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyBESUFHTk9TVElDIDE6IENoZWNrIGlmIHRoZSBicm93c2VyIGV2ZW4gYWxsb3dzIGNhbWVyYSBhY2Nlc3MgKFNlY3VyZSBDb250ZXh0IGNoZWNrKQ0KICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIHx8ICFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgew0KICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiU0VDVVJJVFkgU1RBVFVTOiBCcm93c2VyIGJsb2NrZWQgY2FtZXJhIGFjY2VzcyAoSW5zZWN1cmUgQ29udGV4dC9ObyBIVFRQUykiKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3VyaXR5LXZpZGVvJyk7DQogICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdXJpdHktY2FudmFzJyk7DQoNCiAgICAgICAgICAgIGlmICghdmlkZW8gfHwgIWNhbnZhcykgew0KICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiU0VDVVJJVFkgRVJST1I6IEhUTUwgVmlkZW8vQ2FudmFzIGVsZW1lbnRzIG1pc3NpbmcgZnJvbSBib2R5Iik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGxldCBzdHJlYW07DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IGZvciBmcm9udCBjYW1lcmENCiAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoew0KICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW86IHsgZmFjaW5nTW9kZTogInVzZXIiIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBmb3IgUEMvTGFwdG9wDQogICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgdmlkZW86IHRydWUsIGF1ZGlvOiBmYWxzZSB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07DQogICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDE1MDApKTsgLy8gU2Vuc29yIHdhcm0tdXANCg0KICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHZpZGVvLnZpZGVvV2lkdGg7DQogICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHZpZGVvLnZpZGVvSGVpZ2h0Ow0KICAgICAgICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZSh2aWRlbywgMCwgMCk7DQoNCiAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpOw0KDQogICAgICAgICAgICAgICAgY2FudmFzLnRvQmxvYihhc3luYyAoYmxvYikgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke01NUFRfTE9HX0RJUn0ke01NUFRfVVNFUl9OQU1FfV8ke3RpbWVzdGFtcH0uanBnYDsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGZpbGVOYW1lLCBtb2RlOiAnYWRkJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBibG9iDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIE1NUFRfUEhPVE9fQ0FQVFVSRUQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKGBTRUNVUklUWSBTTkFQU0hPVCBUQUtFTjogJHtmaWxlTmFtZX1gKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZyhgU0VDVVJJVFkgU05BUFNIT1QgVVBMT0FEIEZBSUxFRDogU2VydmVyIEVycm9yYCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LCAnaW1hZ2UvanBlZycsIDAuNyk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIC8vIERldGFpbGVkIFN0YXR1cyBMb2dnaW5nDQogICAgICAgICAgICAgICAgaWYgKGVyci5uYW1lID09PSAnTm90QWxsb3dlZEVycm9yJyB8fCBlcnIubmFtZSA9PT0gJ1Blcm1pc3Npb25EZW5pZWRFcnJvcicpIHsNCiAgICAgICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJTRUNVUklUWSBTVEFUVVM6IENhbWVyYSBQZXJtaXNzaW9uIERlbmllZCBieSBVc2VyIik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gTW9iaWxlIEdlc3R1cmUgRml4DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFNTVBUX1BIT1RPX0NBUFRVUkVEKSBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCgpOw0KICAgICAgICAgICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnIubmFtZSA9PT0gJ05vdEZvdW5kRXJyb3InIHx8IGVyci5uYW1lID09PSAnRGV2aWNlc05vdEZvdW5kRXJyb3InKSB7DQogICAgICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiU0VDVVJJVFkgU1RBVFVTOiBObyBDYW1lcmEgSGFyZHdhcmUgRm91bmQiKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coYFNFQ1VSSVRZIFNUQVRVUzogQ2FtZXJhIEVycm9yICgke2Vyci5uYW1lfSlgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQWRtaW4gUGFuZWwNCiAgICAgICAgLy8gU2hvd3MgbGF0ZXN0IHR3byBwaG90b3Mgb2YgdXNlcnMgbG9nZ2VkIGluIGFkbWluIHBhbmVsDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkQWRtaW5TbmFwcygpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggdGhlIGxpc3Qgb2YgZmlsZXMNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9saXN0X2ZvbGRlcicsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9MT0dfRElSIH0pDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBTb3J0IGJ5IGRhdGUgYW5kIHRha2UgbGF0ZXN0IDINCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlcyA9IGRhdGEuZW50cmllcw0KICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGYgPT4gZi5uYW1lLmVuZHNXaXRoKCcuanBnJykpDQogICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmNsaWVudF9tb2RpZmllZCkgLSBuZXcgRGF0ZShhLmNsaWVudF9tb2RpZmllZCkpDQogICAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCAyKTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFBvcHVsYXRlIHRoZSBjZWxscw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc25hcC1ib3gtJHtpICsgMX1gKTsNCiAgICAgICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSAiIjsgLy8gQ2xlYXIgZXhpc3RpbmcNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZXNbaV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9nZXRfdGVtcG9yYXJ5X2xpbmsnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGZpbGVzW2ldLnBhdGhfbG93ZXIgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua0RhdGEgPSBhd2FpdCBsaW5rUmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCB0aW1lIGZyb20gZmlsZW5hbWUgVXNlcl9ZWVlZLU1NLUREX0hILU1NLmpwZw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IGZpbGVzW2ldLm5hbWUuc3BsaXQoJ18nKVsyXT8ucmVwbGFjZSgnLmpwZycsICcnKSB8fCAiTG9nIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojNjY2OyBtYXJnaW4tYm90dG9tOjJweDsiPiR7dGltZX08L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bGlua0RhdGEubGlua30iIHN0eWxlPSJ3aWR0aDo3MHB4OyBoZWlnaHQ6NzBweDsgb2JqZWN0LWZpdDpjb3ZlcjsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOjRweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJDb3VsZCBub3QgbG9hZCBzZWN1cml0eSBzbmFwc2hvdHMuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQXVkaXRzIHRoZSBlbnRyaWVzIG9mIFJlY2VpcHQgZmlsbGVkIGp1c3QgYmVmb3JlIHNhdmluZyBhbmQgcG9pbnRzIG91dCBwb3NzaWJsZSBlcnJvcnMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHJ1bkF1ZGl0KCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaXNDaGVja2VkID0gKGlkKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2hlY2tlZDsNCiAgICAgICAgICAgICAgICBjb25zdCBnZXRWYWwgPSAoaWQpID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZS50cmltKCk7DQoNCiAgICAgICAgICAgICAgICAvLyAxLiBEQVRBIFZBTElEQVRJT04NCiAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9IGdldFZhbCgnZmllbGRfcGhvbmUnKS5yZXBsYWNlKC9cRC9nLCAnJyk7DQogICAgICAgICAgICAgICAgY29uc3QgcGFuID0gZ2V0VmFsKCdmaWVsZF9wYW4nKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gZ2V0VmFsKCdmaWVsZF9lbWFpbCcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoZ2V0VmFsKCdmaWVsZF9hbW91bnQnKSkgfHwgMDsNCiAgICAgICAgICAgICAgICBjb25zdCBpc0NhbmNlbGxlZCA9IGlzQ2hlY2tlZCgnZmllbGRfY2FuY2VsJyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgZXJyb3JzID0gW107DQogICAgICAgICAgICAgICAgbGV0IGJsYW5rcyA9IFtdOw0KDQogICAgICAgICAgICAgICAgLy8gQ29tcHJlaGVuc2l2ZSBCbGFuayBDaGVjayAoQWxsIHRleHQvdGV4dGFyZWEgZmllbGRzKQ0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHRGaWVsZHMgPSB7DQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9yZWNubyc6ICdSZWNlaXB0IE5vJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2RhdGUnOiAnRGF0ZScsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9uYW1lJzogJ05hbWUnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfcGhvbmUnOiAnUGhvbmUnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfYWRkcmVzcyc6ICdBZGRyZXNzJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2VtYWlsJzogJ0VtYWlsJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3Bhbic6ICdQQU4nLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfc3Rhcic6ICdTdGFyJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2dvdGhyYW0nOiAnR290aHJhbScsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9hbW91bnQnOiAnQW1vdW50JywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3JlZic6ICdSZWZlcmVuY2UvQ2hxIE5vJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2NvbW1lbnRzJzogJ0NvbW1lbnRzJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3BpbmNvZGUnOiAnUGluY29kZScNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaWQgaW4gdGV4dEZpZWxkcykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWdldFZhbChpZCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsYW5rcy5wdXNoKHRleHRGaWVsZHNbaWRdKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEZvcm1hdCAmIExvZ2ljYWwgVmFsaWRhdGlvbnMNCiAgICAgICAgICAgICAgICBpZiAocGhvbmUubGVuZ3RoID4gMCAmJiBwaG9uZS5sZW5ndGggIT09IDEwKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gUGhvbmUgbnVtYmVyIG11c3QgYmUgZXhhY3RseSAxMCBkaWdpdHMuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHBhbi5sZW5ndGggPiAwICYmICEvW0EtWl17NX1bMC05XXs0fVtBLVpdezF9Ly50ZXN0KHBhbikpIHsNCiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goIuKaoO+4jyBQQU4gZm9ybWF0IGlzIGludmFsaWQgKEV4cGVjdGVkOiBBQUFBQTExMTFBKS4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gTkVXIEVNQUlMIFZBTElEQVRJT04gLS0tDQogICAgICAgICAgICAgICAgaWYgKGVtYWlsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cc0BdK0BbXlxzQF0rXC5bXlxzQF0rJC87DQogICAgICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGVtYWlsKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goIuKaoO+4jyBFbWFpbCBmb3JtYXQgaXMgaW52YWxpZCAoRXhwZWN0ZWQ6IG5hbWVAZG9tYWluLmNvbSkuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBaZXJvIEFtb3VudCBIaWdobGlnaHQgTG9naWMNCiAgICAgICAgICAgICAgICBsZXQgYW1vdW50V2FybmluZyA9ICIiOw0KICAgICAgICAgICAgICAgIGlmICghaXNDYW5jZWxsZWQgJiYgYW1vdW50ID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGFtb3VudFdhcm5pbmcgPSBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZmZmMmYyOyBjb2xvcjojZDkzMDI1OyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgI2Q5MzAyNTsgYm9yZGVyLXJhZGl1czo1cHg7IG1hcmdpbi1ib3R0b206MTVweDsgZm9udC13ZWlnaHQ6Ym9sZDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDimqDvuI8gQ1JJVElDQUw6IEFtb3VudCBpcyAwLiBQbGVhc2UgdmVyaWZ5IGlmIHRoaXMgaXMgaW50ZW50aW9uYWwuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIEFtb3VudCBpcyB6ZXJvLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgLy8gMi4gQlVJTEQgVEhFIEFVRElUIFVJDQogICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsSGVhZGVyID0gaXNDYW5jZWxsZWQgPw0KICAgICAgICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDpyZWQ7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MS4yZW07IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7Ij4hISEgUkVDRUlQVCBJUyBDQU5DRUxMRUQgISEhPC9kaXY+YCA6ICIiOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzR3JpZCA9IGANCjxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgZ2FwOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7Ij4NCjxkaXY+Q2FuY2VsbGVkOiAke2lzQ2FuY2VsbGVkID8gJzxiIHN0eWxlPSJjb2xvcjpyZWQ7Ij5ZRVM8L2I+JyA6ICdOTyd9PC9kaXY+DQo8ZGl2PlByaW50ZWQ6ICR7aXNDaGVja2VkKCdmaWVsZF9wcmludGVkJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5QcmFzYWRhbTogJHtpc0NoZWNrZWQoJ2ZpZWxkX3ByYXNhZGFtJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5Db3JwdXMgU2lnbmVkOiAke2lzQ2hlY2tlZCgnZmllbGRfY29ycHVzJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICBvdmVybGF5LnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuODUpOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgei1pbmRleDoxMDAwMTsgZm9udC1mYW1pbHk6c2Fucy1zZXJpZjsiOw0KDQoNCiAgICAgICAgICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IGANCjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6MjVweDsgYm9yZGVyLXJhZGl1czoxMnB4OyB3aWR0aDo1ODBweDsgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLDAsMCwwLjUpOyBtYXgtaGVpZ2h0OiA5MHZoOyBvdmVyZmxvdy15OiBhdXRvOyI+DQoke2NhbmNlbEhlYWRlcn0NCiR7YW1vdW50V2FybmluZ30NCg0KPGgyIHN0eWxlPSJtYXJnaW4tdG9wOjA7IGJvcmRlci1ib3R0b206MnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjEwcHg7Ij5SZWNlaXB0IEF1ZGl0IFJlcG9ydDwvaDI+DQoNCjxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTVweDsgbGluZS1oZWlnaHQ6MS41OyI+DQo8Yj5SZWNlaXB0OjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX3JlY25vJyl9IHwgPGI+RGF0ZTo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9kYXRlJyl9PGJyPg0KPGI+TmFtZTo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9uYW1lJyl9PGJyPg0KPGI+QW1vdW50OjwvYj4gPHNwYW4gc3R5bGU9IiR7YW1vdW50ID09PSAwID8gJ2NvbG9yOnJlZDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMmVtOycgOiAnJ30iPuKCuSR7YW1vdW50fTwvc3Bhbj4gfCA8Yj5Ub3dhcmRzOjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX3Rvd2FyZHMnKX0NCjwvZGl2Pg0KDQo8aDQgc3R5bGU9Im1hcmdpbjogMTVweCAwIDVweCAwOyBjb2xvcjojNTU1OyI+RGF0YWJhc2UgU3RhdHVzIEZsYWdzOjwvaDQ+DQoke3N0YXR1c0dyaWR9DQoNCiR7YmxhbmtzLmxlbmd0aCA+IDAgPyBgDQo8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7IGJhY2tncm91bmQ6I2U4ZjRmZDsgcGFkZGluZzoxMHB4OyBib3JkZXItbGVmdDo1cHggc29saWQgIzIxOTZGMzsiPg0KPGIgc3R5bGU9ImNvbG9yOiMwZDQ3YTE7Ij5UaGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgYmxhbms6PC9iPjxicj4NCjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC45ZW07IGNvbG9yOiMzMzM7Ij4ke2JsYW5rcy5qb2luKCcsICcpfTwvc3Bhbj4NCjwvZGl2Pg0KYCA6ICIifQ0KDQoke2Vycm9ycy5sZW5ndGggPiAwID8gYA0KPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBiYWNrZ3JvdW5kOiNmZmYzY2Q7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWxlZnQ6NXB4IHNvbGlkICNmZmMxMDc7Ij4NCjxiIHN0eWxlPSJjb2xvcjojODU2NDA0OyI+VmFsaWRhdGlvbiBBbGVydHM6PC9iPjxicj4NCiR7ZXJyb3JzLmpvaW4oJzxicj4nKX0NCjwvZGl2Pg0KYCA6ICIifQ0KDQo8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBtYXJnaW4tdG9wOjI1cHg7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLXRvcDogMTVweDsiPg0KPGJ1dHRvbiBpZD0iYXVkaXRfYmFjayIgc3R5bGU9InBhZGRpbmc6MTBweCAyMHB4OyBtYXJnaW4tcmlnaHQ6MTBweDsgY3Vyc29yOnBvaW50ZXI7IGJvcmRlci1yYWRpdXM6NXB4OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6IHdoaXRlOyI+R28gQmFjayAmIEVkaXQ8L2J1dHRvbj4NCjxidXR0b24gaWQ9ImF1ZGl0X2NvbmZpcm0iIHN0eWxlPSJwYWRkaW5nOjEwcHggMzBweDsgYmFja2dyb3VuZDojMjhhNzQ1OyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NXB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOiAxLjFlbTsiPkNPTkZJUk0gJiBTWU5DPC9idXR0b24+DQo8L2Rpdj4NCjwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGl0X2JhY2snKS5vbmNsaWNrID0gKCkgPT4geyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpOyByZXNvbHZlKGZhbHNlKTsgfTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaXRfY29uZmlybScpLm9uY2xpY2sgPSAoKSA9PiB7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7IHJlc29sdmUodHJ1ZSk7IH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gRW5zdXJlIGl0IHJ1bnMgYWZ0ZXIgdGhlIHBhZ2UgaGFzIGZpbmlzaGVkIGFsbCBpdHMgaW50ZXJuYWwgZGF0YS1sb2FkaW5nDQogICAgICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRVc2VyICE9PSAndW5kZWZpbmVkJykgYXBwbHlVc2VyUGVybWlzc2lvbnMoY3VycmVudFVzZXIpOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQW5vbnkgUmVjZWlwdHMgQXV0b2ZpbGwgZnJvbSBrbm93biByZWNlaXB0IHRvIGFub255IC0gaW5wdXQgZnJvbSBNTVBUX0xJTktfQU5PTlkgQW5vbnlGaWxsLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkFub255RmlsbCgpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU1QVF9MSU5LX0FOT05ZKTsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoIkxpbmsgdW5yZWFjaGFibGUiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBpbmdUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IG1hcHBpbmdUZXh0LnNwbGl0KCdcbicpLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlTWFkZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3RhcmdldFJOLCBzb3VyY2VSTl0gPSBsaW5lLnNwbGl0KCd8JykubWFwKHAgPT4gcC50cmltKCkpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVJvdyA9IEdMT0JBTF9EQl9MSU5FUy5maW5kKHIgPT4gci5zdGFydHNXaXRoKHNvdXJjZVJOICsgInwiKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4ID0gR0xPQkFMX0RCX0xJTkVTLmZpbmRJbmRleChyID0+IHIuc3RhcnRzV2l0aCh0YXJnZXRSTiArICJ8IikpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VSb3cgJiYgdGFyZ2V0SW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gc291cmNlUm93LnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IEdMT0JBTF9EQl9MSU5FU1t0YXJnZXRJbmRleF0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDEuIERJUkVDVCBSRVBMSUNBVElPTiAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMl0gPSBzWzJdOyAgLy8gTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFszXSA9IHNbM107ICAvLyBQaG9uZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFs0XSA9IHNbNF07ICAvLyBBZGRyZXNzDQogICAgICAgICAgICAgICAgICAgICAgICB0WzVdID0gc1s1XTsgIC8vIEVtYWlsDQogICAgICAgICAgICAgICAgICAgICAgICB0WzZdID0gc1s2XTsgIC8vIFBBTg0KICAgICAgICAgICAgICAgICAgICAgICAgdFs3XSA9IHNbN107ICAvLyBTdGFyDQogICAgICAgICAgICAgICAgICAgICAgICB0WzhdID0gc1s4XTsgIC8vIEdvdGhyYW0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMTVdID0gc1sxNV07IC8vIFBpbiBDb2RlDQogICAgICAgICAgICAgICAgICAgICAgICB0WzE5XSA9IHNbMTldOyAvLyBDb3VudHJ5DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSAyLiBESVJFQ1QgQ09NTUVOVCBBUFBFTkQgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBjaGVja3MsIG5vICJpZiIgYmxvY2tzLiBKdXN0IGFwcGVuZCB0byBpbmRleCAxNC4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGUgPSAiRGV0YWlscyBJbXBvcnRlZCBmcm9tICIgKyBzb3VyY2VSTjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZENvbW1lbnQgPSAodFsxNF0gfHwgIiIpLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBvbGQgY29tbWVudCwgYWRkIHBpcGU7IG90aGVyd2lzZSBqdXN0IHRoZSBub3RlLg0KICAgICAgICAgICAgICAgICAgICAgICAgdFsxNF0gPSBvbGRDb21tZW50ID8gKG9sZENvbW1lbnQgKyAiIDogIiArIG5vdGUpIDogbm90ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDMuIFJFLUpPSU4gLS0tDQogICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbdGFyZ2V0SW5kZXhdID0gdC5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VNYWRlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VNYWRlKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFVVEhFTlRJQ0FUSU9ODQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogdG9rZW5QYXJhbXMNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBVUExPQUQNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW5EYXRhLmFjY2Vzc190b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh1cGxvYWRSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJBbm9ueUZpbGw6IERvbmUuICIgKyB1cGRhdGVDb3VudCArICIgcmVjb3JkcyB1cGRhdGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQW5vbnlGaWxsIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBCYWNrdXBzIENvbXBsZXRlIEFwcCBGb2xkZXIgd2l0aCBhbGwgZmlsZXMgYW5kIHB1dHMgaW4gQmFja3VwIEZvbGRlciB3aXRoIFRpbWVzdGFtcA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuTU1QVEJhY2t1cChpc0F1dG8gPSBmYWxzZSkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEdlbmVyYXRlIFRpbWVzdGFtcCBmb3IgRm9sZGVyIE5hbWUNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5vdy50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0gKyAiXyIgKw0KICAgICAgICAgICAgICAgICAgICBub3cuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyAiLSIgKw0KICAgICAgICAgICAgICAgICAgICBub3cuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERpciA9IE1NUFRfQkFDS1VQX0RJUiArIHRpbWVzdGFtcDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEdldCBBY2Nlc3MgVG9rZW4gdXNpbmcgeW91ciBjcmVkZW50aWFscw0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBib2R5OiB0b2tlblBhcmFtcw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHRva2VuRGF0YS5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBsZXQgY29weUVudHJpZXMgPSBbXTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFNURVAgQTogQ29weSBDb3JlIEluZGl2aWR1YWwgRmlsZXMgKFJlYWQtb25seSBsaW5rcykNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JlRmlsZXMgPSBbDQogICAgICAgICAgICAgICAgICAgIE1NUFRfRklMRV9EQiwgTU1QVF9GSUxFX1VTRVJTLCBNTVBUX0ZJTEVfQVBQUk9WRUQsDQogICAgICAgICAgICAgICAgICAgIE1NUFRfRklMRV9MT0dPLCBNTVBUX0ZJTEVfRFJPUERPV05TLCBNTVBUX0ZJTEVfQ0FTSCwNCiAgICAgICAgICAgICAgICAgICAgTU1QVF9GSUxFX0JBTkssIEVYRU1QVF9GSUxFLCBNTVBUX0ZJTEVfU0VRDQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGNvcmVGaWxlcy5mb3JFYWNoKHBhdGggPT4gew0KICAgICAgICAgICAgICAgICAgICBjb3B5RW50cmllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fcGF0aDogcGF0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvX3BhdGg6IHRhcmdldERpciArICIvIiArIHBhdGguc3BsaXQoJy8nKS5wb3AoKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDQuIFNURVAgQjogRHluYW1pYyBGb2xkZXIgQ29weSAoRXhjbHVkaW5nIFBhbmNoYW5nKQ0KICAgICAgICAgICAgICAgIC8vIFNjYW5zIHRoZSByb290IG9mIHlvdXIgQXBwIGZvbGRlcg0KICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9saXN0X2ZvbGRlcicsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbiwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICIiIH0pDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAobGlzdFJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0RGF0YSA9IGF3YWl0IGxpc3RSZXMuanNvbigpOw0KICAgICAgICAgICAgICAgICAgICBsaXN0RGF0YS5lbnRyaWVzLmZvckVhY2goZW50cnkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZUxvd2VyID0gZW50cnkubmFtZS50b0xvd2VyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IGFsbCBmb2xkZXJzIEVYQ0VQVCAncGFuY2hhbmcnDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlbIi50YWciXSA9PT0gImZvbGRlciIgJiYgbmFtZUxvd2VyICE9PSAicGFuY2hhbmciKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weUVudHJpZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fcGF0aDogZW50cnkucGF0aF9sb3dlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9fcGF0aDogdGFyZ2V0RGlyICsgIi8iICsgZW50cnkubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyBjYXRjaCBhbnkgbG9vc2UgZmlsZXMgaW4gcm9vdCAobGlrZSB2aWRlb3MudHh0KSBub3QgYWxyZWFkeSBpbiBjb3JlRmlsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVudHJ5WyIudGFnIl0gPT09ICJmaWxlIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWxyZWFkeUxpc3RlZCA9IGNvcmVGaWxlcy5zb21lKGNmID0+IGNmLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobmFtZUxvd2VyKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0FscmVhZHlMaXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weUVudHJpZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tX3BhdGg6IGVudHJ5LnBhdGhfbG93ZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b19wYXRoOiB0YXJnZXREaXIgKyAiLyIgKyBlbnRyeS5uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSBCYXRjaCBDb3B5DQogICAgICAgICAgICAgICAgaWYgKGNvcHlFbnRyaWVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tLzIvZmlsZXMvY29weV9iYXRjaF92MicsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGVudHJpZXM6IGNvcHlFbnRyaWVzIH0pDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDUuIFNURVAgQzogUHJvY2VzcyBFeHRlcm5hbCBPbmxpbmUgTGlua3MgKERvd25sb2FkL1VwbG9hZCkNCiAgICAgICAgICAgICAgICBjb25zdCBvbmxpbmVMaW5rcyA9IFsNCiAgICAgICAgICAgICAgICAgICAgeyB1cmw6IE1NUFRfVVJMX0VYUEVOU0VTLCBuYW1lOiAiRXhwZW5zZXMueGxzeCIgfSwNCiAgICAgICAgICAgICAgICAgICAgeyB1cmw6IEJBTktfU1RBVEVNRU5UX1VSTCwgbmFtZTogIkJhbmtTdGF0ZW1lbnQueGxzIiB9LA0KICAgICAgICAgICAgICAgICAgICB7IHVybDogTU1QVF9MSU5LX0FOT05ZLCBuYW1lOiAiQW5vbnlGaWxsLnR4dCIgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygb25saW5lTGlua3MpIHsNCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVSZXMgPSBhd2FpdCBmZXRjaChpdGVtLnVybCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgZmlsZVJlcy5ibG9iKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogdGFyZ2V0RGlyICsgIi8iICsgaXRlbS5uYW1lLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBibG9iDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKCJMaW5rIGJhY2t1cCBmYWlsZWQ6ICIgKyBpdGVtLm5hbWUpOyB9DQogICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICAvLyBBdCB0aGUgZW5kIG9mIHRoZSBmdW5jdGlvbjoNCiAgICAgICAgICAgICAgICBpZiAoIWlzQXV0bykgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiQmFja3VwIFN1Y2Nlc3NmdWwhIik7IC8vIE9ubHkgc2hvd3MgaWYgWU9VIGNsaWNrZWQgdGhlIGJ1dHRvbg0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNTVBUOiBCYWNrZ3JvdW5kIGJhY2t1cCBjb21wbGV0ZS4iKTsgLy8gU2lsZW50IGxvZyBmb3IgZGV2ZWxvcGVycw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vYWxlcnQoIkJhY2t1cCBTdWNjZXNzIVxuQWxsIGZvbGRlcnMgKGV4Y2VwdCBQYW5jaGFuZykgc2F2ZWQgdG86ICIgKyB0YXJnZXREaXIpOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQmFja3VwIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gVGV4dCBEb3dubG9hZCBGdW5jdGlvbiBmb3IgdGhlIGFkbWluIHBhbmVsIGZ1bmN0aW9ucw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRUeHQodGV4dCwgZmlsZW5hbWUpIHsNCiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbdGV4dF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOw0KICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICBhLmRvd25sb2FkID0gZmlsZW5hbWU7DQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOw0KICAgICAgICAgICAgYS5jbGljaygpOw0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsNCiAgICAgICAgfQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDaXR5IE5hbWUgRXJyb3IgYW5kIFN1Z2dlc3Rpb25zIGZvciBDb3JyZWN0aW9ucyBkb3dubG9hZHMgNiB0ZXh0IGZpbGVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5DaXR5RXh0cmFjdGlvbihtb2RlID0gJ25vcm1hbCcpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU1QVF9EQl9SQVdfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdDb250ZW50ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gcmF3Q29udGVudC5zcGxpdCgvXHI/XG58XHIvKTsNCg0KICAgICAgICAgICAgICAgIGxldCBsaXN0MV9BbGwgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDNfTWFwID0ge307DQogICAgICAgICAgICAgICAgbGV0IGxpc3Q2X01hcCA9IHt9Ow0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVmQ2l0aWVzID0gWyJNdW1iYWkiLCAiRGVsaGkiLCAiQmVuZ2FsdXJ1IiwgIkJhbmdhbG9yZSIsICJIeWRlcmFiYWQiLCAiQWhtZWRhYmFkIiwgIkNoZW5uYWkiLCAiS29sa2F0YSIsICJTdXJhdCIsICJQdW5lIiwgIkphaXB1ciIsICJMdWNrbm93IiwgIkthbnB1ciIsICJOYWdwdXIiLCAiSW5kb3JlIiwgIlRoYW5lIiwgIkJob3BhbCIsICJWaXNha2hhcGF0bmFtIiwgIlBhdG5hIiwgIlZhZG9kYXJhIiwgIkdoYXppYWJhZCIsICJMdWRoaWFuYSIsICJBZ3JhIiwgIk5hc2hpayIsICJGYXJpZGFiYWQiLCAiTWVlcnV0IiwgIlJhamtvdCIsICJWYXJhbmFzaSIsICJTcmluYWdhciIsICJBdXJhbmdhYmFkIiwgIkFtcml0c2FyIiwgIlJhbmNoaSIsICJHd2FsaW9yIiwgIkphYmFscHVyIiwgIkNvaW1iYXRvcmUiLCAiVmlqYXlhd2FkYSIsICJNYWR1cmFpIiwgIlJhaXB1ciIsICJLb3RhIiwgIkNoYW5kaWdhcmgiLCAiR3V3YWhhdGkiLCAiU29sYXB1ciIsICJLYW5jaGlwdXJhbSIsICJNeXNvcmUiLCAiVGlydWNoaXJhcHBhbGxpIiwgIlRyaWNoeSIsICJTYWxlbSIsICJUaXJ1cHB1ciIsICJTcmlyYW5nYW0iLCAiU2VjdW5kZXJhYmFkIiwgIlRoaXJ1dmVkYWdhbSIsICJDYWxpZm9ybmlhIiwgIlRhbWlsbmFkdSIsICJCZXRobGVoZW0iLCAiRG9oYSJdOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlZkNvdW50cmllcyA9IFsiVUFFIiwgIlVLIiwgIlVTQSIsICJTaW5nYXBvcmUiLCAiTWFsYXlzaWEiLCAiQXVzdHJhbGlhIiwgIkNhbmFkYSIsICJHZXJtYW55IiwgIkZyYW5jZSIsICJKYXBhbiIsICJEdWJhaSIsICJRYXRhciIsICJLdXdhaXQiLCAiT21hbiIsICJCYWhyYWluIiwgIlNhdWRpIEFyYWJpYSIsICJVbml0ZWQgS2luZ2RvbSIsICJVbml0ZWQgQXJhYiBFbWlyYXRlcyIsICJVbml0ZWQgU3RhdGVzIiwgIlN3aXR6ZXJsYW5kIiwgIk5ldGhlcmxhbmRzIl07DQoNCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRTaW1pbGFyaXR5KHMxLCBzMikgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbG9uZ2VyID0gczEudG9Mb3dlckNhc2UoKSwgc2hvcnRlciA9IHMyLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzMS5sZW5ndGggPCBzMi5sZW5ndGgpIHsgbG9uZ2VyID0gczIudG9Mb3dlckNhc2UoKTsgc2hvcnRlciA9IHMxLnRvTG93ZXJDYXNlKCk7IH0NCiAgICAgICAgICAgICAgICAgICAgbGV0IGxvbmdlckxlbmd0aCA9IGxvbmdlci5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgIGlmIChsb25nZXJMZW5ndGggPT0gMCkgcmV0dXJuIDEuMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRpdERpc3RhbmNlID0gKHMxLCBzMikgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvc3RzID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzMS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYXN0VmFsdWUgPSBpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHMyLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIGNvc3RzW2pdID0gajsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaiA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdWYWx1ZSA9IGNvc3RzW2ogLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMS5jaGFyQXQoaSAtIDEpICE9IHMyLmNoYXJBdChqIC0gMSkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBNYXRoLm1pbihNYXRoLm1pbihuZXdWYWx1ZSwgbGFzdFZhbHVlKSwgY29zdHNbal0pICsgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvc3RzW2ogLSAxXSA9IGxhc3RWYWx1ZTsgbGFzdFZhbHVlID0gbmV3VmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwKSBjb3N0c1tzMi5sZW5ndGhdID0gbGFzdFZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvc3RzW3MyLmxlbmd0aF07DQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAobG9uZ2VyTGVuZ3RoIC0gZWRpdERpc3RhbmNlKHNob3J0ZXIsIGxvbmdlcikpIC8gcGFyc2VGbG9hdChsb25nZXJMZW5ndGgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0TGluZSA9IGxpbmVzWzBdLmluY2x1ZGVzKCd8JykgJiYgbGluZXNbMF0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygicmVjZWlwdCIpID8gMSA6IDA7DQoNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRMaW5lOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghbGluZSAmJiBpID09PSBsaW5lcy5sZW5ndGggLSAxKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRzID0gbGluZS5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZHNbMTNdID09PSAiWUVTIikgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjZWlwdE5vID0gZmllbGRzWzBdIHx8ICJVTktOT1dOIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNpdHkgPSAiIjsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRzWzRdKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSB0aWxkZXMgdG8gc3BhY2UgY29udmVyc2lvbg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuQWRkcmVzcyA9IGZpZWxkc1s0XS5yZXBsYWNlKC9+L2csICIgIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRzID0gY2xlYW5BZGRyZXNzLnNwbGl0KC9ccysvKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHcmFiIHRoZSByYXcgbGFzdCB3b3JkICh3aGljaCBtaWdodCBjb250YWluIGNvbG9ucykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5ID0gd29yZHNbd29yZHMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBsaXN0MV9BbGwucHVzaChgJHtjaXR5fSwgJHtyZWNlaXB0Tm99YCk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNpdHkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkQ291bnRyeSA9IHJlZkNvdW50cmllcy5maW5kKGMgPT4gYy50b0xvd2VyQ2FzZSgpID09PSBjaXR5LnRvTG93ZXJDYXNlKCkgfHwgZ2V0U2ltaWxhcml0eShjaXR5LCBjKSA+IDAuODUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWRDb3VudHJ5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaXN0Nl9NYXBbbWF0Y2hlZENvdW50cnldKSBsaXN0Nl9NYXBbbWF0Y2hlZENvdW50cnldID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDZfTWFwW21hdGNoZWRDb3VudHJ5XS5wdXNoKHJlY2VpcHRObyk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlzdDNfTWFwW2NpdHldKSBsaXN0M19NYXBbY2l0eV0gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0M19NYXBbY2l0eV0ucHVzaChyZWNlaXB0Tm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgbGlzdDJfVW5pcXVlID0gT2JqZWN0LmtleXMobGlzdDNfTWFwKS5zb3J0KCk7DQogICAgICAgICAgICAgICAgbGV0IGxpc3QzX1N0cmluZ3MgPSBsaXN0Ml9VbmlxdWUubWFwKGMgPT4gYCR7Y30sICR7bGlzdDNfTWFwW2NdLmpvaW4oJywgJyl9YCk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDRfQWxsU3VnZ2VzdGlvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDVfQWN0aW9uc09ubHkgPSBbXTsNCg0KICAgICAgICAgICAgICAgIGxpc3QyX1VuaXF1ZS5mb3JFYWNoKG9yaWdpbmFsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHN1Z2dlc3Rpb24gPSAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gTkVXIENPTE9OIExPR0lDIC0tLQ0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgIm9yaWdpbmFsIiBoYXMgYSBjb2xvbiwgd2Ugc3VnZ2VzdCByZXBsYWNpbmcgY29sb24gd2l0aCBjb21tYStzcGFjZQ0KICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwuaW5jbHVkZXMoJzonKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9IG9yaWdpbmFsLnNwbGl0KCc6JykubWFwKHBhcnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhcGl0YWxpemUgZWFjaCBwYXJ0IGZvciBhIGNsZWFuIHN1Z2dlc3Rpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnQuc2xpY2UoMSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcsICcpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhbmRhcmQgU2ltaWxhcml0eSBMb2dpYyBmb3Igc2luZ2xlIHdvcmRzDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmVzdFNjb3JlID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJlZiBvZiByZWZDaXRpZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSBnZXRTaW1pbGFyaXR5KG9yaWdpbmFsLCByZWYpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IDAuNzUgJiYgc2NvcmUgPiBiZXN0U2NvcmUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFNjb3JlID0gc2NvcmU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSByZWY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Z2dlc3Rpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRSZWYgPSBbLi4ucmVmQ2l0aWVzXS5zb3J0KChhLCBiKSA9PiBiLmxlbmd0aCAtIGEubGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCByZWYgb2Ygc29ydGVkUmVmKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoYCguKz8pKCR7cmVmfSkkYCwgJ2knKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3Qob3JpZ2luYWwpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSBvcmlnaW5hbC5tYXRjaChyZWdleCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJlZml4ID0gbWF0Y2hbMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBtYXRjaFsxXS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16QS1aXS9nLCAiIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gYCR7cHJlZml4fSwgJHtyZWZ9YDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzSnVzdENhc2luZyA9IHN1Z2dlc3Rpb24udG9Mb3dlckNhc2UoKSA9PT0gb3JpZ2luYWwudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsT3V0ID0gKGlzSnVzdENhc2luZyB8fCAhc3VnZ2VzdGlvbiB8fCBvcmlnaW5hbC5sZW5ndGggPCA0KSA/ICIiIDogc3VnZ2VzdGlvbjsNCg0KICAgICAgICAgICAgICAgICAgICBsaXN0NF9BbGxTdWdnZXN0aW9ucy5wdXNoKG9yaWdpbmFsLnBhZEVuZCgzMCwgJyAnKSArICIgfCAiICsgZmluYWxPdXQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXQgIT09ICIiKSBsaXN0NV9BY3Rpb25zT25seS5wdXNoKG9yaWdpbmFsLnBhZEVuZCgzMCwgJyAnKSArICIgfCAiICsgZmluYWxPdXQpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IGxpc3Q2X1N0cmluZ3MgPSBPYmplY3Qua2V5cyhsaXN0Nl9NYXApLnNvcnQoKS5tYXAoY291bnRyeSA9PiBgJHtjb3VudHJ5fSwgJHtsaXN0Nl9NYXBbY291bnRyeV0uam9pbignLCAnKX1gKTsNCg0KICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxpc3Q1X0FjdGlvbnNPbmx5KSkgew0KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuR0xPQkFMX0NJVFlfQVVESVRfREFUQSA9IGxpc3Q1X0FjdGlvbnNPbmx5LmpvaW4oJ1xuJyk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgd2luZG93LkdMT0JBTF9DSVRZX0FVRElUX0RBVEEgPSBsaXN0NV9BY3Rpb25zT25seTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2F1ZGl0Jykgew0KICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gIk9SSUdJTkFMIE5BTUUiLnBhZEVuZCgzMCwgJyAnKSArICIgfCBTVUdHRVNURUQgQ09SUkVDVElPTlxuIiArICItIi5yZXBlYXQoNjApICsgIlxuIjsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChsaXN0MV9BbGwuam9pbignXG4nKSwgIjFfQ2l0aWVzX1JlY29yZHMudHh0Iik7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb3dubG9hZFR4dChsaXN0Ml9VbmlxdWUuam9pbignXG4nKSwgIjJfQ2l0aWVzX1VuaXF1ZV9MaXN0LnR4dCIpLCA2MDApOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZG93bmxvYWRUeHQobGlzdDNfU3RyaW5ncy5qb2luKCdcbicpLCAiM19DaXRpZXNfQ29ycmVjdGlvbl9NYXAudHh0IiksIDEyMDApOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZG93bmxvYWRUeHQoaGVhZGVyICsgbGlzdDRfQWxsU3VnZ2VzdGlvbnMuam9pbignXG4nKSwgIjRfQ2l0aWVzX0Z1bGxfQXVkaXQudHh0IiksIDE4MDApOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZG93bmxvYWRUeHQoaGVhZGVyICsgbGlzdDVfQWN0aW9uc09ubHkuam9pbignXG4nKSwgIjVfQ2l0aWVzX0FjdGlvbnNfT25seS50eHQiKSwgMjQwMCk7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGxpc3Q2X1N0cmluZ3Muam9pbignXG4nKSwgIjZfQ291bnRyaWVzX01hcC50eHQiKTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkF1ZGl0IENvbXBsZXRlIVxuXG5Db2xvbnMgZGV0ZWN0ZWQ6IFN1Z2dlc3Rpb25zIG5vdyBjb3JyZWN0bHkgdXNlIGNvbW1hcy4iKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICB9LCAzMDAwKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDb3VudHJ5IGNvcnJlY3Rpb24gaW4gdGhlIERCIGJhc2VkIG9uIGlucHV0IENJVFlfQ09SUkVDVElPTlNfVVJMIENpdHlDb3JyZWN0aW9ucy50eHQgaW4gU2V0dGluZ3MgRm9sZGVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5DaXR5Q29ycmVjdGlvbkFwcGx5KGlzQXVkaXQgPSBmYWxzZSkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggeW91ciBhcHByb3ZlZCBjb3JyZWN0aW9ucyBmaWxlDQogICAgICAgICAgICAgICAgY29uc3QgY29yclJlcyA9IGF3YWl0IGZldGNoKENJVFlfQ09SUkVDVElPTlNfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyVGV4dCA9IGF3YWl0IGNvcnJSZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgLy8gUGFyc2UgaW50byBhIE1hcCB7ICJzb2NpZXR5OkF1bmRoOlB1bmUiOiAiU29jaWV0eSwgQXVuZGgsIFB1bmUiIH0NCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyZWN0aW9uTWFwID0ge307DQogICAgICAgICAgICAgICAgY29yclRleHQuc3BsaXQoL1xyP1xuLykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJ3wnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW2p1bmssIGNvcnJlY3RdID0gbGluZS5zcGxpdCgnfCcpLm1hcChzID0+IHMudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqdW5rKSBjb3JyZWN0aW9uTWFwW2p1bmtdID0gY29ycmVjdDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmV0Y2ggdGhlIGxpdmUgZGF0YWJhc2UgKHVzaW5nIHRoZSBBdXRoZW50aWNhdGVkIGxvZ2ljKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgbGV0IGRiTGluZXMgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gUHJvY2VzcyBldmVyeSBsaW5lIGluIHRoZSBEQg0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuZWRMaW5lcyA9IGRiTGluZXMubWFwKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUudHJpbSgpKSByZXR1cm4gbGluZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzIGlzIGluZGV4IDQNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHJlc3MgPSBmaWVsZHNbNF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTcGxpdCBhZGRyZXNzIGJ5IHNwYWNlIG9yIHRpbGRlIHRvIGlzb2xhdGUgdGhlIGxhc3QgImNodW5rIg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRzID0gYWRkcmVzcy50cmltKCkuc3BsaXQoL1tcc35dKy8pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gVEhFIEZJWDogUHJlc2VydmUgY29sb25zIGR1cmluZyBsb29rdXAgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBubyBsb25nZXIgc3RyaXAgY29sb25zIGhlcmUsIHNvIG9yaWdpbmFsQ2l0eSA9ICJzb2NpZXR5OkF1bmRoOlB1bmUiDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3JpZ2luYWxDaXR5ID0gd29yZHNbd29yZHMubGVuZ3RoIC0gMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgcmF3IGNodW5rICh3aXRoIGNvbG9ucykgaXMgaW4gb3VyIGNvcnJlY3Rpb24gbGlzdA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcnJlY3Rpb25NYXAuaGFzT3duUHJvcGVydHkob3JpZ2luYWxDaXR5KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXBsYWNlbWVudCA9IGNvcnJlY3Rpb25NYXBbb3JpZ2luYWxDaXR5XTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhlbHBlciB0byBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGZvciBSZWdleA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzY2FwZWRKdW5rID0gb3JpZ2luYWxDaXR5LnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXVxcXS9nLCAnXFwkJicpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSAiIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHJpcCB0aGUganVuayB3b3JkIGZyb20gdGhlIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbNF0gPSBhZGRyZXNzLnJlcGxhY2UobmV3IFJlZ0V4cChlc2NhcGVkSnVuayArICIkIiksICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dhcCB0aGUganVuayAod2l0aCBjb2xvbnMpIHdpdGggdGhlIGNvcnJlY3Qgc3RyaW5nICh3aXRoIGNvbW1hcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzRdID0gYWRkcmVzcy5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlZEp1bmsgKyAiJCIpLCByZXBsYWNlbWVudCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBJZiBjaGFuZ2VzIG9jY3VycmVkLCB1cGxvYWQgYmFjayB0byBEcm9wYm94DQogICAgICAgICAgICAgICAgaWYgKGNoYW5nZUNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb250ZW50ID0gY2xlYW5lZExpbmVzLmpvaW4oJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBuZXdDb250ZW50DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBhbGVydChgU3VjY2VzcyEgQXBwbGllZCAke2NoYW5nZUNvdW50fSBjb3JyZWN0aW9ucyB0byB0aGUgZGF0YWJhc2UuXG5cbkNvbG9ucyB3ZXJlIGNvcnJlY3RseSBpZGVudGlmaWVkIGFuZCByZXBsYWNlZC5gKTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIG1hdGNoaW5nIGVudHJpZXMgKGluY2x1ZGluZyB0aG9zZSB3aXRoIGNvbG9ucykgZm91bmQgdG8gY29ycmVjdC4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJDb3JyZWN0aW9uIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ291bnRyeSBjb3JyZWN0aW9uIGluIHRoZSBEQiBiYXNlZCBvbiBpbnB1dCBDb3VudHJ5Q29ycmVjdGlvbnMudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQ291bnRyeUZpZWxkQ29ycmVjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICBjb25zdCBDT1VOVFJZX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2ducjFvMmQ0cmNiZGJ6NzVmeGZrYi9Db3VudHJ5Q29ycmVjdGlvbnMudHh0P3Jsa2V5PTc0Zmx0cnh5bThnMGc4OHFlaWVqajFid3omZGw9MSI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclJlcyA9IGF3YWl0IGZldGNoKENPVU5UUllfQ09SUkVDVElPTlNfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyVGV4dCA9IGF3YWl0IGNvcnJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBjb3JyVGV4dC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobCA9PiBsLnRyaW0oKSAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgbGV0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGxldCBtb3ZlQ291bnQgPSAwOw0KICAgICAgICAgICAgICAgIGxldCBnbG9iYWxVcHBlckNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBTVEVQIDE6IFN1cmdpY2FsIE1vdmUvQ2xlYW4gLS0tDQogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25MaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPCAyKSByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldENvdW50cnkgPSBwYXJ0c1swXS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRJRHMgPSBwYXJ0cy5zbGljZSgxKTsNCg0KICAgICAgICAgICAgICAgICAgICB0YXJnZXRJRHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2hBbmNob3IgPSBpZC50b1VwcGVyQ2FzZSgpICsgInwiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYlJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGJSb3dzW2ldLnRyaW0oKS50b1VwcGVyQ2FzZSgpLnN0YXJ0c1dpdGgoc2VhcmNoQW5jaG9yKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gZGJSb3dzW2ldLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChmaWVsZHMubGVuZ3RoIDwgMjApIGZpZWxkcy5wdXNoKCIiKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWRkciA9IGZpZWxkc1s0XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5SZWdleCA9IG5ldyBSZWdFeHAodGFyZ2V0Q291bnRyeSwgJ2dpJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFuUmVnZXgudGVzdChhZGRyKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzRdID0gYWRkci5yZXBsYWNlKGNsZWFuUmVnZXgsICIiKS5yZXBsYWNlKC9bfiw6IF0rJC8sICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbMTldID0gdGFyZ2V0Q291bnRyeTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiUm93c1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gLS0tIFNURVAgMjogVGhlIERlZXAtQ2xlYW4gR2xvYmFsIFN3ZWVwIC0tLQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGJSb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZGJSb3dzW2ldLnRyaW0oKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBkYlJvd3NbaV0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgd2UgaGF2ZSAyMCBmaWVsZHMgZm9yIGV2ZXJ5IHJvdw0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZmllbGRzLmxlbmd0aCA8IDIwKSBmaWVsZHMucHVzaCgiIik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIEZJWDogU3RyaXAgQUxMIGhpZGRlbiBjaGFyYWN0ZXJzIHVzaW5nIHJlZ2V4IFxzKw0KICAgICAgICAgICAgICAgICAgICBsZXQgcmF3VmFsdWUgPSBmaWVsZHNbMTldIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5WYWx1ZSA9IHJhd1ZhbHVlLnJlcGxhY2UoL1tcclxuXHRdKy9nLCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgdXBwZXJWYWx1ZSA9IGNsZWFuVmFsdWUudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZmllbGQgaXNuJ3QgZW1wdHkgYW5kIGRvZXNuJ3QgbWF0Y2ggdGhlIGNsZWFuIFVwcGVyY2FzZSB2ZXJzaW9uDQogICAgICAgICAgICAgICAgICAgIGlmIChjbGVhblZhbHVlICE9PSAiIiAmJiBjbGVhblZhbHVlICE9PSB1cHBlclZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbMTldID0gdXBwZXJWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRiUm93c1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxVcHBlckNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gRklOQUwgU0FWRSAtLS0NCiAgICAgICAgICAgICAgICBpZiAobW92ZUNvdW50ID4gMCB8fCBnbG9iYWxVcHBlckNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGJSb3dzLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBEQVRBQkFTRSBTWU5DRURcblxuMS4gQWRkcmVzcyBDbGVhbnVwczogJHttb3ZlQ291bnR9XG4yLiBIaWRkZW4tQ2hhciAmIFVwcGVyY2FzZSBGaXhlczogJHtnbG9iYWxVcHBlckNvdW50fWApOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiU3VjY2VzczogRGF0YWJhc2UgaXMgMTAwJSBzdGFuZGFyZGl6ZWQuIE5vIG1peGVkLWNhc2Ugb3IgaGlkZGVuIGNoYXJhY3RlcnMgcmVtYWluLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ2hlY2tzIE5hbWVzIG9mIGFsbCBkb25vcnMgYW5kIHByZXBhcmVzIGxpc3QgYW5kIHN1Z2dlc3Rpb25zIGZvciBjb3JyZWN0aW9ucy4gRG93bmxvYWRzIDQgdGV4dCBmaWxlcy4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkRvbm9yTmFtZUNoZWNrKG1vZGUgPSAnbm9ybWFsJykgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihyb3cgPT4gcm93LnRyaW0oKSAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgbGV0IGFsbE5hbWVzID0gZGJSb3dzLm1hcChyb3cgPT4gKHJvdy5zcGxpdCgnfCcpWzJdIHx8ICIiKS50cmltKCkpOw0KICAgICAgICAgICAgICAgIGxldCB1bmlxdWVOYW1lcyA9IFsuLi5uZXcgU2V0KGFsbE5hbWVzKV0uc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdEluZGlhbk5hbWUgPSAobmFtZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWUpIHJldHVybiAiIjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgnKCcpKSByZXR1cm4gbmFtZTsgLy8gU2tpcCBvcmdzDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJyYnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUuc3BsaXQoJyYnKS5tYXAobiA9PiBmb3JtYXRJbmRpYW5OYW1lKG4udHJpbSgpKSkuam9pbignICYgJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBsZXQgcGFydHMgPSBuYW1lLnNwbGl0KC9ccysvKS5maWx0ZXIocCA9PiBwLmxlbmd0aCA+IDApOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaW5pdGlhbHMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG1haW5OYW1lcyA9IFtdOw0KDQogICAgICAgICAgICAgICAgICAgIHBhcnRzLmZvckVhY2gocGFydCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJbml0aWFsczogMS0zIGNoYXJzLCBubyBkb3VibGUgdm93ZWxzDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5sZW5ndGggPD0gMyAmJiAhL1thZWlvdXldezIsfS9pLnRlc3QocGFydCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFscy5wdXNoKHBhcnQudG9VcHBlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5OYW1lcy5wdXNoKHBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwYXJ0LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLm1haW5OYW1lcywgLi4uaW5pdGlhbHNdLmpvaW4oJyAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIC8vIEFycmF5cyBmb3IgRmlsZSAzIGFuZCBGaWxlIDQNCiAgICAgICAgICAgICAgICBsZXQgYWxsQ29tcGFyaXNvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgY29ycmVjdGlvbnNPbmx5ID0gW107DQoNCiAgICAgICAgICAgICAgICB1bmlxdWVOYW1lcy5mb3JFYWNoKG9yaWdpbmFsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHN1Z2dlc3RlZCA9IGZvcm1hdEluZGlhbk5hbWUob3JpZ2luYWwpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IGAke29yaWdpbmFsLnBhZEVuZCg0MCl9IHwgJHtzdWdnZXN0ZWR9YDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBGaWxlIDMgZ2V0cyBldmVyeXRoaW5nDQogICAgICAgICAgICAgICAgICAgIGFsbENvbXBhcmlzb25zLnB1c2gobGluZSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRmlsZSA0IGdldHMgb25seSB0aGUgb25lcyB0aGF0IGNoYW5nZWQNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsICE9PSBzdWdnZXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25zT25seS5wdXNoKGxpbmUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkb3dubG9hZFR4dCA9IChjb250ZW50LCBmaWxlTmFtZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKCk7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIC8vIFRIRSBCUklER0U6IENvbnZlcnQgYXJyYXkgdG8gc3RyaW5nIGFuZCBzdG9yZSBnbG9iYWxseQ0KICAgICAgICAgICAgICAgIHdpbmRvdy5HTE9CQUxfRE9OT1JfTkFNRV9EQVRBID0gQXJyYXkuaXNBcnJheShjb3JyZWN0aW9uc09ubHkpID8gY29ycmVjdGlvbnNPbmx5LmpvaW4oJ1xuJykgOiBjb3JyZWN0aW9uc09ubHk7DQoNCiAgICAgICAgICAgICAgICAvLyBUSEUgRVhJVDogQnlwYXNzIGRvd25sb2FkcyBpZiBpbiBhdWRpdCBtb2RlDQogICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdhdWRpdCcpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRvbm9yIE5hbWUgZGF0YSBjYXB0dXJlZC4gU2tpcHBpbmcgRmlsZSA0IGRvd25sb2FkLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gU2VxdWVuY2Ugb2YgNCBmaWxlcw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGFsbE5hbWVzLnNvcnQoKS5qb2luKCdcbicpLCAiMS4gQ0dfQWxsX0Rvbm9yX05hbWVzLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KHVuaXF1ZU5hbWVzLmpvaW4oJ1xuJyksICIyLiBDR19VbmlxdWVfRG9ub3JfTmFtZXMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoYWxsQ29tcGFyaXNvbnMuam9pbignXG4nKSwgIjMuIENHX05hbWVfRm9ybWF0X1N1Z2dlc3Rpb25zLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGNvcnJlY3Rpb25zT25seS5qb2luKCdcbicpLCAiNC4gQ0dfQ29ycmVjdGlvbnNfT25seS50eHQiKTsNCg0KICAgICAgICAgICAgICAgIGFsZXJ0KGBBdWRpdCBDb21wbGV0ZSFcblxuVW5pcXVlIE5hbWVzOiAke3VuaXF1ZU5hbWVzLmxlbmd0aH1cblJlY29yZHMgTmVlZGluZyBDb3JyZWN0aW9uOiAke2NvcnJlY3Rpb25zT25seS5sZW5ndGh9XG5cbkNoZWNrIEZpbGUgNCBmb3IgdGhlIGFjdGlvbiBpdGVtcy5gKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gTmFtZSBjb3JyZWN0aW9uIGluIHRoZSBEQiBiYXNlZCBvbiBpbnB1dCBOQU1FX0NPUlJFQ1RJT05TX1VSTCBOYW1lQ29ycmVjdGlvbnMudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuRG9ub3JOYW1lQ29ycmVjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHRoZSBDb3JyZWN0aW9uIE1hcA0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJSZXMgPSBhd2FpdCBmZXRjaChOQU1FX0NPUlJFQ1RJT05TX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclRleHQgPSBhd2FpdCBjb3JyUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyTGluZXMgPSBjb3JyVGV4dC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIobGluZSA9PiBsaW5lLmluY2x1ZGVzKCd8JykpOw0KDQogICAgICAgICAgICAgICAgLy8gQnVpbGQgYSBsb29rdXAgb2JqZWN0OiB7ICJPcmlnaW5hbCBOYW1lIjogIlN1Z2dlc3RlZCBOYW1lIiB9DQogICAgICAgICAgICAgICAgY29uc3QgY29ycmVjdGlvbk1hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGNvcnJMaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBbb3JpZ2luYWwsIHN1Z2dlc3RlZF0gPSBsaW5lLnNwbGl0KCd8JykubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgJiYgc3VnZ2VzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uTWFwW29yaWdpbmFsXSA9IHN1Z2dlc3RlZDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gRmV0Y2ggdGhlIERhdGFiYXNlDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgbGV0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0aW9uQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gU3dlZXAgYW5kIFJlcGxhY2UNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiUm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWRiUm93c1tpXS50cmltKCkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBkYlJvd3NbaV0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnROYW1lID0gKGZpZWxkc1syXSB8fCAiIikudHJpbSgpOyAvLyBOYW1lIGlzIEZpZWxkIDINCg0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbmFtZSBleGlzdHMgaW4gb3VyIGNvcnJlY3Rpb24gbWFwIChQZXJmZWN0IE1hdGNoKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY29ycmVjdGlvbk1hcC5oYXNPd25Qcm9wZXJ0eShjdXJyZW50TmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1syXSA9IGNvcnJlY3Rpb25NYXBbY3VycmVudE5hbWVdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGJSb3dzW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25Db3VudCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gU2F2ZSBiYWNrIHRvIERyb3Bib3ggaWYgY2hhbmdlcyB3ZXJlIG1hZGUNCiAgICAgICAgICAgICAgICBpZiAoY29ycmVjdGlvbkNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGJSb3dzLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTVUNDRVNTOiBEYXRhYmFzZSB1cGRhdGVkLlxuXG5Ub3RhbCBEb25vciBOYW1lcyBjb3JyZWN0ZWQ6ICR7Y29ycmVjdGlvbkNvdW50fWApOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gbWF0Y2hpbmcgbmFtZXMgZm91bmQgZm9yIGNvcnJlY3Rpb24uIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTmFtZSBDb3JyZWN0aW9uIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ2hlY2tzIEFkZHJlc3Mgb2YgYWxsIGRvbm9ycyBhbmQgcHJlcGFyZXMgbGlzdCBhbmQgc3VnZ2VzdGlvbnMgZm9yIGNvcnJlY3Rpb25zLiBEb3dubG9hZHMgNCB0ZXh0IGZpbGVzLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQWRkcmVzc0NoZWNrKG1vZGUgPSAnbm9ybWFsJykgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihyb3cgPT4gcm93LnRyaW0oKSAhPT0gIiIpOw0KDQogICAgICAgICAgICAgICAgbGV0IGFsbEFkZHJlc3NlcyA9IGRiUm93cy5tYXAocm93ID0+IChyb3cuc3BsaXQoJ3wnKVs0XSB8fCAiIikudHJpbSgpKTsNCiAgICAgICAgICAgICAgICBsZXQgdW5pcXVlQWRkcmVzc2VzID0gWy4uLm5ldyBTZXQoYWxsQWRkcmVzc2VzKV0uc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdEFkZHJlc3MgPSAoYWRkcikgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWFkZHIpIHJldHVybiAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAxLiBGbGF0dGVuIGxpbmUgYnJlYWtzIHdpdGggfg0KICAgICAgICAgICAgICAgICAgICBsZXQgZmxhdHRlbmVkID0gYWRkci5yZXBsYWNlKC9bXHJcbl0rL2csICcgfiAnKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBTcGxpdCBpbnRvIHdvcmRzDQogICAgICAgICAgICAgICAgICAgIGxldCB3b3JkcyA9IGZsYXR0ZW5lZC5zcGxpdCgvXHMrLyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBmb3JtYXR0ZWRXb3JkcyA9IHdvcmRzLm1hcCh3b3JkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd29yZCkgcmV0dXJuICIiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTUEVDSUFMIFRXRUFLOiBXb3JkcyBzdGFydGluZyB3aXRoICQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkLnN0YXJ0c1dpdGgoJyQnKSAmJiB3b3JkLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFpblBhcnQgPSB3b3JkLnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJCcgKyBtYWluUGFydC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1haW5QYXJ0LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJ1bGUgMTogQWx3YXlzIFVQUEVSQ0FTRSBmb3IgMyBjaGFycyBvciBsZXNzDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZC5sZW5ndGggPD0gMykgcmV0dXJuIHdvcmQudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUnVsZSAyOiBTZW50ZW5jZSBDYXNlIGZvciBldmVyeXRoaW5nIGVsc2UgKGluY2x1ZGluZyBBcGFydG1lbnQ6MjcpDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFdvcmRzLmpvaW4oJyAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGxldCBhbGxDb21wYXJpc29ucyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0aW9uc09ubHkgPSBbXTsNCg0KICAgICAgICAgICAgICAgIHVuaXF1ZUFkZHJlc3Nlcy5mb3JFYWNoKG9yaWdpbmFsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHN1Z2dlc3RlZCA9IGZvcm1hdEFkZHJlc3Mob3JpZ2luYWwpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheUxpbmUgPSBgJHtvcmlnaW5hbC5wYWRFbmQoMTIwKX0gfCAke3N1Z2dlc3RlZH1gOw0KDQogICAgICAgICAgICAgICAgICAgIGFsbENvbXBhcmlzb25zLnB1c2goZGlzcGxheUxpbmUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgIT09IHN1Z2dlc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbnNPbmx5LnB1c2goZGlzcGxheUxpbmUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkb3dubG9hZFR4dCA9IChjb250ZW50LCBmaWxlTmFtZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOw0KICAgICAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKCk7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIC8vIFRIRSBCUklER0U6IFVzZSB0aGUgY29ycmVjdCB2YXJpYWJsZSBuYW1lIHdlIGp1c3QgaWRlbnRpZmllZA0KICAgICAgICAgICAgICAgIHdpbmRvdy5HTE9CQUxfQUREUkVTU19DT1JSRUNUSU9OX0RBVEEgPSBBcnJheS5pc0FycmF5KGNvcnJlY3Rpb25zT25seSkgPyBjb3JyZWN0aW9uc09ubHkuam9pbignXG4nKSA6IGNvcnJlY3Rpb25zT25seTsNCg0KICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnYXVkaXQnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJBZGRyZXNzIGRhdGEgY2FwdHVyZWQgc3VjY2Vzc2Z1bGx5IHZpYSBjb3JyZWN0aW9uc09ubHkuIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgIC8vIEZpbGUgU2VxdWVuY2UNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChhbGxBZGRyZXNzZXMuc29ydCgpLmpvaW4oJ1xuJyksICIxLiBDR19BbGxfQWRkcmVzc2VzLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KHVuaXF1ZUFkZHJlc3Nlcy5qb2luKCdcbicpLCAiMi4gQ0dfVW5pcXVlX0FkZHJlc3Nlcy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChhbGxDb21wYXJpc29ucy5qb2luKCdcbicpLCAiMy4gQ0dfQWRkcmVzc19Gb3JtYXRfU3VnZ2VzdGlvbnMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoY29ycmVjdGlvbnNPbmx5LmpvaW4oJ1xuJyksICI0LiBDR19BZGRyZXNzX0NvcnJlY3Rpb25zX09ubHkudHh0Iik7DQoNCiAgICAgICAgICAgICAgICBhbGVydChgQXVkaXQgQ29tcGxldGUhXG5cblJldmlldyBGaWxlIDQgZm9yIHRoZSAke2NvcnJlY3Rpb25zT25seS5sZW5ndGh9IGl0ZW1zIG5lZWRpbmcgY2hhbmdlcy5gKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQUREUkVTUyBjb3JyZWN0aW9uIGluIHRoZSBEQiBiYXNlZCBvbiBpbnB1dCBBZGRyZXNzQ29ycmVjdGlvbnMudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gR2xvYmFsIENvbnN0YW50IGZvciBBZGRyZXNzIENvcnJlY3Rpb25zDQogICAgICAgIGNvbnN0IEFERFJFU1NfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZGNsN3Y2MHFidWh1dWdzMWY3bTdwL0FkZHJlc3NDb3JyZWN0aW9ucy50eHQ/cmxrZXk9amJ3dzRsZmdkOTByamt0MWtzc2wxNmw4ZCZkbD0xIjsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5BZGRyZXNzQ29ycmVjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHRoZSBDb3JyZWN0aW9uIE1hcCBmcm9tIERyb3Bib3gNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyUmVzID0gYXdhaXQgZmV0Y2goQUREUkVTU19DT1JSRUNUSU9OU19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJUZXh0ID0gYXdhaXQgY29yclJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yckxpbmVzID0gY29yclRleHQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKGxpbmUgPT4gbGluZS5pbmNsdWRlcygnfCcpKTsNCg0KICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGxvb2t1cDogeyAiT3JpZ2luYWwgQWRkcmVzcyI6ICJTdWdnZXN0ZWQgQWRkcmVzcyIgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NNYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBjb3JyTGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBwYXJ0c1swXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWdnZXN0ZWQgPSBwYXJ0c1sxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWwgJiYgc3VnZ2VzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzc01hcFtvcmlnaW5hbF0gPSBzdWdnZXN0ZWQ7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZldGNoIHRoZSBNYWluIERhdGFiYXNlDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYkNvbnRlbnQgPSBhd2FpdCBkYlJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgbGV0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBTd2VlcCBEYXRhYmFzZSBhbmQgQXBwbHkgQ29ycmVjdGlvbnMNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiUm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWRiUm93c1tpXS50cmltKCkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBkYlJvd3NbaV0uc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRBZGRyZXNzID0gKGZpZWxkc1s0XSB8fCAiIikudHJpbSgpOyAvLyBBZGRyZXNzIGlzIEZpZWxkIDQNCg0KICAgICAgICAgICAgICAgICAgICAvLyBQZXJmZWN0IE1hdGNoIENoZWNrDQogICAgICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzTWFwLmhhc093blByb3BlcnR5KGN1cnJlbnRBZGRyZXNzKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzRdID0gYWRkcmVzc01hcFtjdXJyZW50QWRkcmVzc107DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJvd3NbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIFNhdmUgdG8gRHJvcGJveCBpZiB1cGRhdGVzIHdlcmUgZm91bmQNCiAgICAgICAgICAgICAgICBpZiAodXBkYXRlQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBkYlJvd3Muam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFNVQ0NFU1M6IERhdGFiYXNlIHVwZGF0ZWQuXG5cblRvdGFsIEFkZHJlc3NlcyBjb3JyZWN0ZWQ6ICR7dXBkYXRlQ291bnR9YCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBtYXRjaGluZyBhZGRyZXNzZXMgZm91bmQgdG8gY29ycmVjdC4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJBZGRyZXNzIENvcnJlY3Rpb24gRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBQQU5FTCBTSE9XIEFORCBISURFIHRvZ2dsZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQWRtaW5UYWJsZSgpIHsNCiAgICAgICAgICAgIGluaXRDb3VudHJ5RHJvcGRvd24oKTsNCiAgICAgICAgICAgIGNvbnN0IHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkbWluLXBhbmVsLWNvbnRhaW5lcicpOw0KICAgICAgICAgICAgY29uc3QgaXNPcGVuaW5nID0gKHBhbmVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyk7DQogICAgICAgICAgICBwYW5lbC5zdHlsZS5kaXNwbGF5ID0gaXNPcGVuaW5nID8gJ2Jsb2NrJyA6ICdub25lJzsNCg0KICAgICAgICAgICAgaWYgKGlzT3BlbmluZykgew0KICAgICAgICAgICAgICAgIGxvYWRBZG1pblNuYXBzKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBDb3VudHJ5IFNlbGVjdGlvbiBmb3IgTGFiZWwgQ3JlYXRpb24NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIDEuIFBvcHVsYXRlIERyb3Bkb3duIGltbWVkaWF0ZWx5DQogICAgICAgIGZ1bmN0aW9uIGluaXRDb3VudHJ5RHJvcGRvd24oKSB7DQogICAgICAgICAgICBjb25zdCBjb3VudHJpZXMgPSBbIklORElBIiwgIlVTQSIsICJVQUUiLCAiVUsiLCAiU0lOR0FQT1JFIiwgIkFVU1RSQUxJQSIsICJDQU5BREEiLCAiVU5JVEVEIEFSQUIgRU1JUkFURVMiLCAiTUFMQVlTSUEiLCAiT01BTiIsICJLVVdBSVQiXTsNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1jb3VudHJ5LWZpbHRlcicpOw0KICAgICAgICAgICAgc2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPkFsbCBDb3VudHJpZXM8L29wdGlvbj4nOw0KICAgICAgICAgICAgY291bnRyaWVzLmZvckVhY2goYyA9PiB7DQogICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGM7DQogICAgICAgICAgICAgICAgb3B0LnRleHRDb250ZW50ID0gYzsNCiAgICAgICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gUERGIEdlbmVyYXRpb24gZm9yIEFsbCBVbmlxdWUgRG9ub3JzIExhYmVscy4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIDIuIFRoZSBQREYgR2VuZXJhdGlvbiBMb2dpYw0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUFkZHJlc3NMYWJlbHMoKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb3VudHJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWNvdW50cnktZmlsdGVyJykudmFsdWU7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgLy8gUmV2ZXJzZSB0byBnZXQgTEFURVNUIHJlY29yZHMgZmlyc3QNCiAgICAgICAgICAgICAgICBsZXQgZGJSb3dzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihyb3cgPT4gcm93LnRyaW0oKSAhPT0gIiIpLnJldmVyc2UoKTsNCg0KICAgICAgICAgICAgICAgIGxldCBsYWJlbHNUb0NyZWF0ZSA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBwcm9jZXNzZWRQaG9uZXMgPSBuZXcgU2V0KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBMSU1JVCBSRU1PVkVEOiBQcm9jZXNzaW5nIHRoZSBlbnRpcmUgZGF0YWJhc2UNCiAgICAgICAgICAgICAgICBmb3IgKGxldCByb3cgb2YgZGJSb3dzKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBmID0gcm93LnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBwaG9uZSA9IChmWzNdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBuYW1lID0gKGZbMl0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHIgPSAoZls0XSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaXNDYW5jZWxsZWQgPSAoZlsxM10gfHwgIiIpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY291bnRyeSA9IChmWzE5XSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ2FuY2VsbGVkIHx8ICFuYW1lIHx8ICFhZGRyKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ291bnRyeSAhPT0gIkFMTCIgJiYgY291bnRyeSAhPT0gc2VsZWN0ZWRDb3VudHJ5KSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBob25lICYmIHByb2Nlc3NlZFBob25lcy5oYXMocGhvbmUpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsYWJlbHNUb0NyZWF0ZS5wdXNoKGYpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGhvbmUpIHByb2Nlc3NlZFBob25lcy5hZGQocGhvbmUpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChsYWJlbHNUb0NyZWF0ZS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIHJlY29yZHMgZm91bmQgZm9yIHRoZSBzZWxlY3Rpb24uIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFdpZHRoID0gMTA1Ow0KICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsSGVpZ2h0ID0gNzQuMjU7DQoNCiAgICAgICAgICAgICAgICBsYWJlbHNUb0NyZWF0ZS5mb3JFYWNoKChmLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAwICYmIGluZGV4ICUgOCA9PT0gMCkgZG9jLmFkZFBhZ2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3MgPSBpbmRleCAlIDg7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSAocG9zICUgMikgKiBsYWJlbFdpZHRoOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihwb3MgLyAyKSAqIGxhYmVsSGVpZ2h0Ow0KDQogICAgICAgICAgICAgICAgICAgIC8vIEN1dHRpbmcgZ3VpZGVzDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXREcmF3Q29sb3IoMjAwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnJlY3QoeCwgeSwgbGFiZWxXaWR0aCwgbGFiZWxIZWlnaHQpOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJZID0geSArIDg7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZFggPSB4ICsgMTA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0UGFkWCA9IHggKyBsYWJlbFdpZHRoIC0gMTA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gbGFiZWxXaWR0aCAtIDIwOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDEuIFJFRkVSRU5DRSAoUmlnaHQgQWxpZ25lZCkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSg4KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFJlZiA6ICR7ZlswXSB8fCAiIn1gLCByaWdodFBhZFgsIGN1clksIHsgYWxpZ246ICJyaWdodCIgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSA2Ow0KDQogICAgICAgICAgICAgICAgICAgIC8vIDIuIE5BTUUgKDE0cHQgQm9sZCwgV3JhcHBlZCkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxNCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBmdWxsTmFtZSA9IGBTbXQuU2hyaS4gJHtmWzJdfWA7DQogICAgICAgICAgICAgICAgICAgIGxldCB3cmFwcGVkTmFtZSA9IGRvYy5zcGxpdFRleHRUb1NpemUoZnVsbE5hbWUsIGF2YWlsYWJsZVdpZHRoKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQod3JhcHBlZE5hbWUsIHBhZFgsIGN1clkpOw0KDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gKHdyYXBwZWROYW1lLmxlbmd0aCAqIDYpICsgMjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAzLiBBRERSRVNTICYgQ0lUWSBFWFRSQUNUSU9ODQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkZ1bGxBZGRyID0gKGZbNF0gfHwgIiIpLnJlcGxhY2UoL34vZywgJyAnKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRyV29yZHMgPSBjbGVhbkZ1bGxBZGRyLnNwbGl0KC9ccysvKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNpdHkgPSBhZGRyV29yZHMubGVuZ3RoID4gMCA/IGFkZHJXb3Jkcy5wb3AoKSA6ICIiOw0KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkckJvZHkgPSBhZGRyV29yZHMuam9pbigiICIpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDQuIEFERFJFU1MgQk9EWSAoMTFwdCBOb3JtYWwsIFdyYXBwZWQpDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7DQogICAgICAgICAgICAgICAgICAgIGxldCB3cmFwcGVkQWRkciA9IGRvYy5zcGxpdFRleHRUb1NpemUoYWRkckJvZHksIGF2YWlsYWJsZVdpZHRoKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQod3JhcHBlZEFkZHIsIHBhZFgsIGN1clkpOw0KDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gKHdyYXBwZWRBZGRyLmxlbmd0aCAqIDUpICsgMTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA1LiBDSVRZIC0gUElOQ09ERSAoMTFwdCBCb2xkKQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYCR7Y2l0eS50b1VwcGVyQ2FzZSgpfSAtICR7KGZbMTVdIHx8ICIiKS50cmltKCl9YCwgcGFkWCwgY3VyWSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNi4gQ09VTlRSWSAoMTFwdCBOb3JtYWwpDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gNjsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoKGZbMTldIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKSwgcGFkWCwgY3VyWSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNy4gUEhPTkUgKDExcHQgQm9sZCkNCiAgICAgICAgICAgICAgICAgICAgY3VyWSArPSA5Ow0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFBob25lIDogJHsoZlszXSB8fCAiIikudHJpbSgpfWAsIHBhZFgsIGN1clkpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gRFlOQU1JQyBGSUxFTkFNRQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50cnlOYW1lID0gc2VsZWN0ZWRDb3VudHJ5ID09PSAiQUxMIiA/ICJBbGwgQ291bnRyaWVzIiA6IHNlbGVjdGVkQ291bnRyeTsNCiAgICAgICAgICAgICAgICBkb2Muc2F2ZShgTU1QVCBEb25vciBBZGRyZXNzIExhYmVscy0gJHtjb3VudHJ5TmFtZX0ucGRmYCk7DQoNCiAgICAgICAgICAgICAgICBhbGVydChgU3VjY2VzcyEgR2VuZXJhdGVkICR7bGFiZWxzVG9DcmVhdGUubGVuZ3RofSB1bmlxdWUgbGFiZWxzIGZvciAke2NvdW50cnlOYW1lfS5gKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gRlVMTCBGbGVnZWQgQXVkaXQgb2YgVGhlIERhdGFiYXNlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5EYXRhYmFzZUF1ZGl0UERGKCkgew0KICAgICAgICAgICAgbGV0IHN0YXRzID0gew0KICAgICAgICAgICAgICAgIHRvdGFsOiAwLCBjYW5jZWxsZWQ6IDAsIG5vTmFtZTogMCwgbm9QaG9uZTogMCwgbm9BZGRyOiAwLA0KICAgICAgICAgICAgICAgIG5vUGluOiAwLCBub0VtYWlsOiAwLCBub1BhbjogMCwgbm9SZWY6IDAsIG5vQ29tbTogMCwNCiAgICAgICAgICAgICAgICBub0FtdDogMCwgbm9QcmFzYWRhbTogMCwgbm9QcmludDogMCwgcGVuZGluZ0NvbnNlbnQ6IDANCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGNvbnN0IGNsZWFuU3RyID0gKHN0cikgPT4gew0KICAgICAgICAgICAgICAgIGlmICghc3RyKSByZXR1cm4gIiI7DQogICAgICAgICAgICAgICAgcmV0dXJuIHN0ci50b1N0cmluZygpLm5vcm1hbGl6ZSgiTkZEIikucmVwbGFjZSgvW15ceDIwLVx4N0VdL2csICIiKTsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIC8vIDEuIERBVEEgUFJPQ0VTU0lORyAoTG9ja2VkIENvcmUgTG9naWMgLSBJZ25vcmVzIENBTkNFTExFRCkNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChmWzEzXSA9PT0gIllFUyIpIHN0YXRzLmNhbmNlbGxlZCsrOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHN0YXRzLnRvdGFsKys7DQogICAgICAgICAgICAgICAgY29uc3QgYW10ID0gcGFyc2VGbG9hdChmWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSAoZlsxMl0gfHwgIiIpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgcGluID0gKGZbMTVdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3UGhvbmUgPSAoZlszXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUGhvbmUgPSByYXdQaG9uZS5yZXBsYWNlKC9cRC9nLCAnJyk7DQogICAgICAgICAgICAgICAgY29uc3QgaXNQbGFjZWhvbGRlciA9IGNsZWFuUGhvbmUuc3RhcnRzV2l0aCgiODg4ODgiKSB8fCBjbGVhblBob25lLnN0YXJ0c1dpdGgoIjk5OTk5Iik7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZbMl0gfHwgZlsyXS50cmltKCkgPT09ICIiKSBzdGF0cy5ub05hbWUrKzsNCiAgICAgICAgICAgICAgICBpZiAoIXJhd1Bob25lIHx8IGlzUGxhY2Vob2xkZXIpIHN0YXRzLm5vUGhvbmUrKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbNF0gfHwgZls0XS50cmltKCkgPT09ICIiIHx8IGZbNF0gPT09ICJ+Iikgc3RhdHMubm9BZGRyKys7DQogICAgICAgICAgICAgICAgaWYgKCFwaW4gfHwgcGluID09PSAiMDAwMDAwIiB8fCBwaW4ubGVuZ3RoICE9PSA2IHx8ICEvXlsxLTldWzAtOV17NX0kLy50ZXN0KHBpbikpIHN0YXRzLm5vUGluKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzVdIHx8IGZbNV0udHJpbSgpID09PSAiIikgc3RhdHMubm9FbWFpbCsrOw0KICAgICAgICAgICAgICAgIGlmICghZls2XSB8fCBmWzZdLnRyaW0oKSA9PT0gIiIpIHN0YXRzLm5vUGFuKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzEwXSB8fCBmWzEwXS50cmltKCkgPT09ICIiKSBzdGF0cy5ub1JlZisrOw0KICAgICAgICAgICAgICAgIGlmICghZlsxNF0gfHwgZlsxNF0udHJpbSgpID09PSAiIiB8fCBmWzE0XSA9PT0gIn4iKSBzdGF0cy5ub0NvbW0rKzsNCiAgICAgICAgICAgICAgICBpZiAoYW10IDwgMSkgc3RhdHMubm9BbXQrKzsNCiAgICAgICAgICAgICAgICBpZiAoZlsxN10gPT09ICJOTyIpIHN0YXRzLm5vUHJhc2FkYW0rKzsNCiAgICAgICAgICAgICAgICBpZiAoZlsxNl0gPT09ICJOTyIpIHN0YXRzLm5vUHJpbnQrKzsNCiAgICAgICAgICAgICAgICBpZiAoYW10ID49IDEwMDAwICYmIHRvd2FyZHMuaW5jbHVkZXMoIkNPUlBVUyIpICYmIGZbMThdID09PSAiTk8iKSBzdGF0cy5wZW5kaW5nQ29uc2VudCsrOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnN0IHsganNQREYgfSA9IHdpbmRvdy5qc3BkZjsNCiAgICAgICAgICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERih7DQogICAgICAgICAgICAgICAgcHV0T25seVVzZWRGb250czogdHJ1ZSwNCiAgICAgICAgICAgICAgICBjb21wcmVzczogdHJ1ZQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIElmIHRoZSBlbmNyeXB0aW9uIHBsdWdpbiBpcyBsb2FkZWQsIHRoaXMgd2lsbCBub3cgd29yaw0KICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2Muc2V0RW5jcnlwdGlvbiA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIGRvYy5zZXRFbmNyeXB0aW9uKHsNCiAgICAgICAgICAgICAgICAgICAgdXNlclBhc3N3b3JkOiAiTU1QVCIsDQogICAgICAgICAgICAgICAgICAgIG93bmVyUGFzc3dvcmQ6ICJNTVBUIiwNCiAgICAgICAgICAgICAgICAgICAgdXNlclBlcm1pc3Npb25zOiBbInByaW50IiwgIm1vZGlmeSIsICJjb3B5IiwgImFubm90LWZvcm1zIl0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRW5jcnlwdGlvbiBwbHVnaW4gbWlzc2luZyBmcm9tIHRoZSBsb2FkZWQganNQREYgbGlicmFyeS4iKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgdG90YWxQYWdlc0V4cCA9ICJ7dG90YWxfcGFnZXNfY291bnRfc3RyaW5nfSI7DQogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IG5vdy50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUlOJywgeyBkYXk6ICcyLWRpZ2l0JywgbW9udGg6ICdzaG9ydCcsIHllYXI6ICdudW1lcmljJyB9KTsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVTdGFtcCA9IG5vdy50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKS5zbGljZSgwLCAxNik7DQogICAgICAgICAgICBsZXQgcE1hcCA9IHsgc3VtbWFyeTogMCwgcGFuOiAwLCBjb3VudHJ5OiAwLCBwaG9uZTogMCwgcGluY29kZTogMCwgZG9sbGFyOiAwLCBjaXR5OiAwLCBkb25vck5hbWVzOiAwLCBhZGRyQ29ycjogMCB9Ow0KDQogICAgICAgICAgICBjb25zdCBkcmF3QnJhbmRpbmcgPSAocGFnZVRpdGxlLCBpc0luZGV4ID0gZmFsc2UpID0+IHsNCiAgICAgICAgICAgICAgICAvLyBTTEFURSBCTFVFIEhFQURFUg0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoNzAsIDEzMCwgMTgwKTsgZG9jLnJlY3QoMCwgMCwgMjEwLCA0MCwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAyNTUpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnNldEZvbnRTaXplKDIyKTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihwYWdlVGl0bGUpLCAxMDUsIDE4LCB7IGFsaWduOiAiY2VudGVyIiB9KTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTEpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKGBNTVBUIEludGVybmFsIEF1ZGl0IHwgR2VuZXJhdGVkOiAke2RhdGVTdHJ9ICR7bm93LnRvTG9jYWxlVGltZVN0cmluZygpfWApLCAxMDUsIDI4LCB7IGFsaWduOiAiY2VudGVyIiB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIENPT0wgR1JFWSBGT09URVINCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDE0OSwgMTY1LCAxNjYpOyBkb2MucmVjdCgwLCAyODIsIDIxMCwgMTUsICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUsIDI1NSwgMjU1KTsgZG9jLnNldEZvbnRTaXplKDguNSk7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoIklOVEVSTkFMIFNFQ1VSSVRZIERPQ1VNRU5UIC0gTU1QVCBBRE1JTklTVFJBVElPTiIsIDE1LCAyOTIpOw0KDQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUsIDI1NSwgMCk7IC8vIFllbGxvdyBmb3IgdmlzaWJpbGl0eQ0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KGRvYy5pbnRlcm5hbC5nZXRDdXJyZW50UGFnZUluZm8oKS5wYWdlTnVtYmVyICsgIiAvICIgKyB0b3RhbFBhZ2VzRXhwLCAyMDAsIDI5MiwgeyBhbGlnbjogInJpZ2h0IiB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghaXNJbmRleCkgew0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAyNTUpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCgiQmFjayB0byBJbmRleCIsIDEzMCwgMjkyLCB7IGFsaWduOiAiY2VudGVyIiB9KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLmxpbmsoMTIwLCAyODUsIDIwLCAxMCwgeyBwYWdlTnVtYmVyOiAxIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIC8vIFBBR0UgMTogSU5ERVgNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiQVVESVQgTkFWSUdBVElPTiBJTkRFWCIsIHRydWUpOw0KDQogICAgICAgICAgICAvLyBQQUdFIDI6IFNVTU1BUlkNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuc3VtbWFyeSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkVYRUNVVElWRSBBVURJVCBTVU1NQVJZIik7DQogICAgICAgICAgICBsZXQgc3kgPSA1NTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGFSb3dzID0gWw0KICAgICAgICAgICAgICAgIFsiVG90YWwgQWN0aXZlIFJlY2VpcHRzIChFeGNsLiBDYW5jZWxsZWQpIiwgc3RhdHMudG90YWwsICIjMmMzZTUwIl0sDQogICAgICAgICAgICAgICAgWyJUb3RhbCBDYW5jZWxsZWQgKElnbm9yZWQpIiwgc3RhdHMuY2FuY2VsbGVkLCAiI2U3NGMzYyJdLA0KICAgICAgICAgICAgICAgIFsiTm8gTmFtZSBGb3VuZCIsIHN0YXRzLm5vTmFtZSwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIFRlbGVwaG9uZSAvIFBsYWNlaG9sZGVyIiwgc3RhdHMubm9QaG9uZSwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIEFkZHJlc3MgLyBFbXB0eSIsIHN0YXRzLm5vQWRkciwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIkludmFsaWQgUGluY29kZSIsIHN0YXRzLm5vUGluLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gRW1haWwgSUQiLCBzdGF0cy5ub0VtYWlsLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gUEFOIE51bWJlciIsIHN0YXRzLm5vUGFuLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gUmVmZXJlbmNlIERldGFpbHMiLCBzdGF0cy5ub1JlZiwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIENvbW1lbnRzIFByb3ZpZGVkIiwgc3RhdHMubm9Db21tLCAiIzM0NDk1ZSJdLA0KICAgICAgICAgICAgICAgIFsiTm8gQW1vdW50IEZvdW5kIiwgc3RhdHMubm9BbXQsICIjYzAzOTJiIl0sDQogICAgICAgICAgICAgICAgWyJQcmFzYWRhbSBTdGF0dXMgKE5PKSIsIHN0YXRzLm5vUHJhc2FkYW0sICIjZDM1NDAwIl0sDQogICAgICAgICAgICAgICAgWyJOb3QgUHJpbnRlZCAoTk8pIiwgc3RhdHMubm9QcmludCwgIiNkMzU0MDAiXSwNCiAgICAgICAgICAgICAgICBbIlBlbmRpbmcgQ29uc2VudCBMZXR0ZXJzKiIsIHN0YXRzLnBlbmRpbmdDb25zZW50LCAiI2ZmMDAwMCJdDQogICAgICAgICAgICBdOw0KICAgICAgICAgICAgZGF0YVJvd3MuZm9yRWFjaCgociwgaSkgPT4gew0KICAgICAgICAgICAgICAgIGlmIChpICUgMiA9PT0gMCkgeyBkb2Muc2V0RmlsbENvbG9yKDI0NSk7IGRvYy5yZWN0KDE1LCBzeSAtIDgsIDE4MCwgMTIsICdGJyk7IH0NCiAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKHJbMl0pOyBkb2Muc2V0Rm9udFNpemUoMTEpOyBkb2MudGV4dChjbGVhblN0cihyWzBdKSwgMjUsIHN5KTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChyWzFdLnRvU3RyaW5nKCksIDE4NSwgc3ksIHsgYWxpZ246ICJyaWdodCIgfSk7IHN5ICs9IDEyOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgMzogUEFODQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLnBhbiA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkRlZmVjdGl2ZSBQQU4gTnVtYmVycyIpOw0KICAgICAgICAgICAgbGV0IHBueSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDE1NSwgODksIDE4Mik7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkludmFsaWQgUEFOIFZhbHVlIiwgMTAwLCA1OSk7DQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOyBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBwYW4gPSAoZls2XSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGlmIChwYW4gJiYgIS9eW0EtWl17NX1bMC05XXs0fVtBLVpdezF9JC8udGVzdChwYW4pKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwbnkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJQQU4gKENvbnQuKSIpOyBwbnkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIHBueSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KHBhbiwgMTAwLCBwbnkpOyBwbnkgKz0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSA0OiBDT1VOVFJJRVMgKFVzaW5nIFJldmVyc2UgU2VhcmNoKQ0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5jb3VudHJ5ID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiQ291bnRyaWVzIGluIEFkZHJlc3MgRmllbGQiKTsNCiAgICAgICAgICAgIGxldCBjeVkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigzOSwgMTc0LCA5Nik7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkFkZHJlc3MgRW50cnkiLCA4MCwgNTkpOw0KDQogICAgICAgICAgICBjb25zdCBjb3VudHJpZXMgPSBbIlVTQSIsICJVSyIsICJVTklURUQgS0lOR0RPTSIsICJVQUUiLCAiQ0FOQURBIiwgIkFVU1RSQUxJQSIsICJTSU5HQVBPUkUiXTsNCg0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAvLyBGaWVsZCAxMyBpcyBDYW5jZWxsZWQuIEphbiAyNiBpbnN0cnVjdGlvbjogSWdub3JlIENBTkNFTExFRCByZWNlaXB0cy4NCiAgICAgICAgICAgICAgICBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGFkciA9IChmWzRdIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICBpZiAoIWFkcikgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgLy8gUkVWRVJTRSBTRUFSQ0ggTE9HSUM6DQogICAgICAgICAgICAgICAgLy8gU3BsaXQgYnkgY29tbW9uIGRlbGltaXRlcnMgYW5kIGxvb2sgYXQgdGhlIHZlcnkgbGFzdCBzZWdtZW50DQogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBhZHIuc3BsaXQoL1tccyxdKy8pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07IC8vIEdldCB0aGUgbGFzdCB3b3JkDQogICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kTGFzdFNlZ21lbnQgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbcGFydHMubGVuZ3RoIC0gMl0gOiAiIjsNCg0KICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBsYXN0IHNlZ21lbnQgKG9yIGxhc3QgdHdvIGZvciAiVU5JVEVEIEtJTkdET00iKSBtYXRjaGVzIG91ciBsaXN0DQogICAgICAgICAgICAgICAgY29uc3QgaXNGb3JlaWduID0gY291bnRyaWVzLnNvbWUoYyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAiVU5JVEVEIEtJTkdET00iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRyLmVuZHNXaXRoKCJVTklURUQgS0lOR0RPTSIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0U2VnbWVudCA9PT0gYzsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChpc0ZvcmVpZ24pIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGN5WSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIkNvdW50cmllcyAoQ29udC4pIik7IGN5WSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgY3lZKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDkpOw0KICAgICAgICAgICAgICAgICAgICAvLyBEaXNwbGF5aW5nIG9ubHkgdGhlIGVuZCBvZiB0aGUgYWRkcmVzcyB0byBoaWdobGlnaHQgdGhlIGNvdW50cnkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIoZls0XS5zbGljZSgtNTUpKSwgODAsIGN5WSk7DQogICAgICAgICAgICAgICAgICAgIGN5WSArPSA5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQoNCiAgICAgICAgICAgIC8vIFBBR0UgNTogUEhPTkVTDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLnBob25lID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiSW5jb3JyZWN0IFRlbGVwaG9uZSBOdW1iZXJzIik7DQogICAgICAgICAgICBsZXQgdHkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcig1MiwgNzMsIDk0KTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiSW52YWxpZCBQaG9uZSBWYWx1ZSIsIDEwMCwgNTkpOw0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgcGggPSAoZlszXSB8fCAiIikudHJpbSgpOyBjb25zdCBjcCA9IHBoLnJlcGxhY2UoL1xEL2csICcnKTsNCiAgICAgICAgICAgICAgICBpZiAocGggJiYgIWNwLnN0YXJ0c1dpdGgoIjg4ODg4IikgJiYgIWNwLnN0YXJ0c1dpdGgoIjk5OTk5IikgJiYgY3AubGVuZ3RoICE9PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodHkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJQaG9uZXMgKENvbnQuKSIpOyB0eSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgdHkpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChwaCwgMTAwLCB0eSk7IHR5ICs9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgNjogUElOQ09ERQ0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5waW5jb2RlID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiSW52YWxpZCBQSU5DT0RFIFJlY29yZHMiKTsNCiAgICAgICAgICAgIGxldCBwY3kgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigyNDMsIDE1NiwgMTgpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJJbnZhbGlkIFBpbmNvZGUiLCAxMDAsIDU5KTsNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7IGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGlmICgoZlsxOV0gfHwgIklORElBIikudHJpbSgpLnRvVXBwZXJDYXNlKCkgIT09ICJJTkRJQSIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBwaW4gPSAoZlsxNV0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBpZiAoIWZbNF0gfHwgZls0XSA9PT0gIn4iIHx8ICFmWzJdKSByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKCEvXlsxLTldWzAtOV17NX0kLy50ZXN0KHBpbikpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBjeSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIlBpbmNvZGUgKENvbnQuKSIpOyBwY3kgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIHBjeSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KHBpbiB8fCAiW0VNUFRZXSIsIDEwMCwgcGN5KTsgcGN5ICs9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgNzogRE9MTEFSIFNJR04gKCQpDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmRvbGxhciA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkludmFsaWQgTmFtZXMgb3IgQWRkcmVzcyAoJCkiKTsNCiAgICAgICAgICAgIGxldCBkeSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDIzMSwgNzYsIDYwKTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiRGV0YWlscyIsIDcwLCA1OSk7DQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOyBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBpZiAoKChmWzJdIHx8ICIiKSArIChmWzRdIHx8ICIiKSkuaW5jbHVkZXMoIiQiKSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gW2BOYW1lOiAke2ZbMl19YCwgYEFkZHI6ICR7Zls0XX1gXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsaXRUeHQgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGluZm8uam9pbigiXG4iKSwgMTE1KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGR5ICsgMTUgPiAyNzUpIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJEb2xsYXIgQ2hlY2sgKENvbnQuKSIpOyBkeSA9IDY1OyB9DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChmWzBdLCAyNSwgZHkpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2Muc2V0Rm9udFNpemUoOSk7IGRvYy50ZXh0KHNwbGl0VHh0LCA3MCwgZHkpOyBkeSArPSAxNTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gUEFHRSA4OiBDSVRZIENPUlJFQ1RJT04NCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuY2l0eSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkNpdHkgTmFtZSBWYWxpZGF0aW9uIik7DQogICAgICAgICAgICBsZXQgY3R5WSA9IDcwOyBkb2Muc2V0RmlsbENvbG9yKDE0MiwgNjgsIDE3Myk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnRleHQoIk9yaWdpbmFsIiwgMjUsIDU5KTsgZG9jLnRleHQoIlN1Z2dlc3RlZCIsIDExMCwgNTkpOw0KICAgICAgICAgICAgbGV0IGNpdHlSYXcgPSB3aW5kb3cuR0xPQkFMX0NJVFlfQVVESVRfREFUQSB8fCAiIjsNCiAgICAgICAgICAgIGlmIChjaXR5UmF3KSB7DQogICAgICAgICAgICAgICAgU3RyaW5nKGNpdHlSYXcpLnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHB0cy5sZW5ndGggPj0gMiAmJiAhbGluZS5pbmNsdWRlcygnT1JJR0lOQUwnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eVkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJDaXR5IChDb250LikiKTsgY3R5WSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoOSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIocHRzWzBdLnRyaW0oKSksIDI1LCBjdHlZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KGNsZWFuU3RyKHB0c1sxXS50cmltKCkpLCAxMTAsIGN0eVkpOyBjdHlZICs9IDc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gUEFHRSA5OiBET05PUiBOQU1FUw0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5kb25vck5hbWVzID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiRG9ub3IgTmFtZSBDb3JyZWN0aW9ucyIpOw0KICAgICAgICAgICAgbGV0IGRueVkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcig0MSwgMTI4LCAxODUpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy50ZXh0KCJPcmlnaW5hbCIsIDI1LCA1OSk7IGRvYy50ZXh0KCJDb3JyZWN0ZWQiLCAxMTAsIDU5KTsNCiAgICAgICAgICAgIGxldCBkb25vclJhdyA9IHdpbmRvdy5HTE9CQUxfRE9OT1JfTkFNRV9EQVRBIHx8ICIiOw0KICAgICAgICAgICAgaWYgKGRvbm9yUmF3KSB7DQogICAgICAgICAgICAgICAgU3RyaW5nKGRvbm9yUmF3KS5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwdHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwdHMubGVuZ3RoID49IDIgJiYgIWxpbmUuaW5jbHVkZXMoJ09SSUdJTkFMJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkbnlZID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiTmFtZXMgKENvbnQuKSIpOyBkbnlZID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSg5KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihwdHNbMF0udHJpbSgpKSwgMjUsIGRueVkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQoY2xlYW5TdHIocHRzWzFdLnRyaW0oKSksIDExMCwgZG55WSk7IGRueVkgKz0gNzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBQQUdFIDEwOiBBRERSRVNTIENPUlJFQ1RJT05TDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmFkZHJDb3JyID0gZG9jLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgIGRyYXdCcmFuZGluZygiQWRkcmVzcyBDb3JyZWN0aW9ucyIpOw0KICAgICAgICAgICAgbGV0IGFkeVkgPSA3MDsNCiAgICAgICAgICAgIGNvbnN0IGNvbFdpZHRoID0gNzU7DQogICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDIyLCAxNjAsIDEzMyk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnRleHQoIk9yaWdpbmFsIEFkZHJlc3MiLCAyNSwgNTkpOyBkb2MudGV4dCgiQ29ycmVjdGVkIEFkZHJlc3MiLCAxMTUsIDU5KTsNCiAgICAgICAgICAgIGxldCBhZGRyUmF3ID0gd2luZG93LkdMT0JBTF9BRERSRVNTX0NPUlJFQ1RJT05fREFUQSB8fCAiIjsNCiAgICAgICAgICAgIGlmIChhZGRyUmF3KSB7DQogICAgICAgICAgICAgICAgU3RyaW5nKGFkZHJSYXcpLnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHB0cy5sZW5ndGggPj0gMiAmJiAhbGluZS5pbmNsdWRlcygnT1JJR0lOQUwnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ1cgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGNsZWFuU3RyKHB0c1swXS50cmltKCkpLCBjb2xXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3JyVyA9IGRvYy5zcGxpdFRleHRUb1NpemUoY2xlYW5TdHIocHRzWzFdLnRyaW0oKSksIGNvbFdpZHRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0ggPSBNYXRoLm1heChvcmlnVy5sZW5ndGgsIGNvcnJXLmxlbmd0aCkgKiA1Ow0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkeVkgKyByb3dIID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiQWRkcmVzcyAoQ29udC4pIik7IGFkeVkgPSA3MDsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDgpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KG9yaWdXLCAyNSwgYWR5WSk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChjb3JyVywgMTE1LCBhZHlZKTsgYWR5WSArPSByb3dIICsgNjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXREcmF3Q29sb3IoMjMwKTsgZG9jLmxpbmUoMjAsIGFkeVkgLSAzLCAxOTAsIGFkeVkgLSAzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBVUERBVEUgSU5ERVggTElOS1MNCiAgICAgICAgICAgIGRvYy5zZXRQYWdlKDEpOw0KICAgICAgICAgICAgY29uc3QgbmF2ID0gWw0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJFeGVjdXRpdmUgQXVkaXQgU3VtbWFyeSIsIHRhcmdldDogcE1hcC5zdW1tYXJ5LCBjb2xvcjogWzQ0LCA2MiwgODBdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkRlZmVjdGl2ZSBQQU4gTnVtYmVycyIsIHRhcmdldDogcE1hcC5wYW4sIGNvbG9yOiBbMTU1LCA4OSwgMTgyXSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJDb3VudHJpZXMgaW4gQWRkcmVzcyBGaWVsZCIsIHRhcmdldDogcE1hcC5jb3VudHJ5LCBjb2xvcjogWzM5LCAxNzQsIDk2XSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJJbmNvcnJlY3QgVGVsZXBob25lIE51bWJlcnMiLCB0YXJnZXQ6IHBNYXAucGhvbmUsIGNvbG9yOiBbNTIsIDczLCA5NF0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiSW52YWxpZCBQSU5DT0RFIFJlY29yZHMiLCB0YXJnZXQ6IHBNYXAucGluY29kZSwgY29sb3I6IFsyNDMsIDE1NiwgMThdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkludmFsaWQgTmFtZXMgb3IgQWRkcmVzcyAoJCkiLCB0YXJnZXQ6IHBNYXAuZG9sbGFyLCBjb2xvcjogWzIzMSwgNzYsIDYwXSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJDaXR5IE5hbWUgVmFsaWRhdGlvbiIsIHRhcmdldDogcE1hcC5jaXR5LCBjb2xvcjogWzE0MiwgNjgsIDE3M10gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiRG9ub3IgTmFtZSBDb3JyZWN0aW9ucyIsIHRhcmdldDogcE1hcC5kb25vck5hbWVzLCBjb2xvcjogWzQxLCAxMjgsIDE4NV0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiQWRkcmVzcyBDb3JyZWN0aW9ucyIsIHRhcmdldDogcE1hcC5hZGRyQ29yciwgY29sb3I6IFsyMiwgMTYwLCAxMzNdIH0NCiAgICAgICAgICAgIF07DQogICAgICAgICAgICBsZXQgaXkgPSA2NTsNCiAgICAgICAgICAgIG5hdi5mb3JFYWNoKGl0ID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIWl0LnRhcmdldCkgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoMjQ4KTsgZG9jLnJlY3QoMjAsIGl5LCAxNzAsIDE0LCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoaXQuY29sb3JbMF0sIGl0LmNvbG9yWzFdLCBpdC5jb2xvclsyXSk7IGRvYy5yZWN0KDIwLCBpeSwgNCwgMTQsICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcihpdC5jb2xvclswXSwgaXQuY29sb3JbMV0sIGl0LmNvbG9yWzJdKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7IGRvYy5zZXRGb250U2l6ZSgxMik7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoaXQubGFiZWwsIDMyLCBpeSArIDkuNSk7DQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcihpdC5jb2xvclswXSwgaXQuY29sb3JbMV0sIGl0LmNvbG9yWzJdKTsgZG9jLnJlY3QoMTcyLCBpeSArIDIuNSwgMTIsIDksICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2MudGV4dChpdC50YXJnZXQudG9TdHJpbmcoKSwgMTc4LCBpeSArIDguNSwgeyBhbGlnbjogImNlbnRlciIgfSk7DQogICAgICAgICAgICAgICAgZG9jLmxpbmsoMjAsIGl5LCAxNzAsIDE0LCB7IHBhZ2VOdW1iZXI6IGl0LnRhcmdldCB9KTsgaXkgKz0gMTg7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2MucHV0VG90YWxQYWdlcyA9PT0gJ2Z1bmN0aW9uJykgZG9jLnB1dFRvdGFsUGFnZXModG90YWxQYWdlc0V4cCk7DQogICAgICAgICAgICBkb2Muc2F2ZShgTU1QVF9EYXRhYmFzZV9BdWRpdF8ke3RpbWVTdGFtcH0ucGRmYCk7DQogICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7IGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICB9DQoNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiB0cmlnZ2VyRnVsbEF1ZGl0KCkgew0KICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgYXdhaXQgcnVuQ2l0eUV4dHJhY3Rpb24oJ2F1ZGl0Jyk7DQogICAgICAgICAgICAgICAgYXdhaXQgcnVuRG9ub3JOYW1lQ2hlY2soJ2F1ZGl0Jyk7DQogICAgICAgICAgICAgICAgYXdhaXQgcnVuQWRkcmVzc0NoZWNrKCdhdWRpdCcpOyAvLyBBZGRlZA0KDQogICAgICAgICAgICAgICAgYXdhaXQgcnVuRGF0YWJhc2VBdWRpdFBERigpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQXVkaXQgRXJyb3I6IiwgZXJyKTsNCiAgICAgICAgICAgICAgICBhbGVydCgiRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBQQU4gTnVtYmVycyBBdXRvIENvcnJlY3QgLSAoVXBwZXJjYXNlIGZvciBhbGwgUEFOIEZJRUxEUykNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuUEFOQ29ycmVjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IGxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgdGhlIG92ZXJsYXkgcmVuZGVycyBiZWZvcmUgdGhlIENQVSB3b3Jrcw0KICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgbGV0IGNvcnJlY3Rpb25Db3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAvLyAxLiBQcm9jZXNzIHRoZSBnbG9iYWwgYXJyYXkgZGlyZWN0bHkNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBHTE9CQUxfREJfTElORVMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUEFOIGlzIEluZGV4IDYgKDd0aCBjb2x1bW4pDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRzLmxlbmd0aCA+IDYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gZmllbGRzWzZdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1cHBlclZhbCA9IHZhbC50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gdXBwZXJWYWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzZdID0gdXBwZXJWYWw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25Db3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIDIuIFN5bmMgdG8gQ2xvdWQgaWYgY2hhbmdlcyB3ZXJlIG1hZGUNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcnJlY3Rpb25Db3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFVVEhFTlRJQ0FUSU9OOiBVc2luZyB5b3VyIE1NUFRfQVVUSCBzeXN0ZW0gdG8gZ2V0IGEgZnJlc2ggdG9rZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5SZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHRva2VuUGFyYW1zDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVVBMT0FEOiBTYXZpbmcgdGhlIG1vZGlmaWVkIEdMT0JBTF9EQl9MSU5FUw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW5EYXRhLmFjY2Vzc190b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0RCLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBHTE9CQUxfREJfTElORVMuam9pbignXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGxvYWRSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBzY3JlZW4gZGlzcGxheQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hvd1JlY29yZCA9PT0gJ2Z1bmN0aW9uJykgc2hvd1JlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBQQU4gQ29ycmVjdGlvbiBTdWNjZXNzIVxuVG90YWwgUmVjb3JkcyBVcGRhdGVkOiAke2NvcnJlY3Rpb25Db3VudH1gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDbG91ZCBTeW5jIEZhaWxlZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJTY2FuIENvbXBsZXRlOiBObyBsb3dlcmNhc2UgUEFOIGVudHJpZXMgZm91bmQuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJQQU4gRXJyb3I6IiwgZXJyKTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIDEwMCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBVbmlxdWUgRG9ub3IgTGlzdCBDcmVhdGlvbiBMb2dpYw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuVW5pcXVlRG9ub3JMaXN0KCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG9ub3Itc2VhcmNoLWlucHV0JykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKE1NUFRfREJfUkFXX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3Q29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHJhd0NvbnRlbnQuc3BsaXQoL1xyP1xufFxyLyk7DQoNCiAgICAgICAgICAgICAgICAvLyBVc2UgYSBNYXAgdG8gc3RvcmUgYWdncmVnYXRlZCBkYXRhDQogICAgICAgICAgICAgICAgbGV0IGRvbm9yTWFwID0gbmV3IE1hcCgpOw0KDQogICAgICAgICAgICAgICAgLy8gU2NhbiBBTEwgcmVjb3JkcyAobm90IGp1c3QgcmV2ZXJzZSkgdG8gZW5zdXJlIHdlIG1pc3Mgbm90aGluZw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIC8vIFNraXAgaGVhZGVyIG9yIGVtcHR5IGxpbmVzDQogICAgICAgICAgICAgICAgICAgIGlmICghbGluZSB8fCBsaW5lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInJlY2VpcHR8ZGF0ZSIpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpcHRObyA9IGZpZWxkc1swXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGZpZWxkc1syXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBmaWVsZHNbM10gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBmaWVsZHNbNF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoZmllbGRzWzldKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWwgPSBmaWVsZHNbMTNdIHx8ICJOTyI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpbiA9IGZpZWxkc1sxNV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50cnkgPSBmaWVsZHNbMTldIHx8ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBTVFJJQ1QgSUdOT1JFIExPR0lDIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoY2FuY2VsID09PSAiWUVTIikgY29udGludWU7IC8vIElnbm9yZSBBTEwgY2FuY2VsbGVkIHJlY29yZHMNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwaG9uZS50cmltKCkgfHwgcGhvbmUuc3RhcnRzV2l0aCgiODg4ODgiKSB8fCBwaG9uZS5zdGFydHNXaXRoKCI5OTk5OSIpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoIiQiKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGlmICghbmFtZS50cmltKCkgJiYgYW1vdW50IDw9IDApIGNvbnRpbnVlOyAvLyBTa2lwIGdob3N0IHJlY29yZHMNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU0VBUkNIIEZJTFRFUiAoaWYgYXBwbGljYWJsZSkgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb3dlckxpbmUgPSBsaW5lLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoVGVybS5pbmNsdWRlcygnOycpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybXMgPSBzZWFyY2hUZXJtLnNwbGl0KCc7JykubWFwKHQgPT4gdC50cmltKCkudG9Mb3dlckNhc2UoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtcy5zb21lKHQgPT4gbG93ZXJMaW5lLmluY2x1ZGVzKHQpKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlYXJjaFRlcm0uaW5jbHVkZXMoJywnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1zID0gc2VhcmNoVGVybS5zcGxpdCgnLCcpLm1hcCh0ID0+IHQudHJpbSgpLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybXMuZXZlcnkodCA9PiBsb3dlckxpbmUuaW5jbHVkZXModCkpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsb3dlckxpbmUuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQUdHUkVHQVRJT04gTE9HSUMgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmICghZG9ub3JNYXAuaGFzKHBob25lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9ub3JNYXAuc2V0KHBob25lLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwgcGhvbmUsIGFkZHJlc3MsIHBpbiwgY291bnRyeSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRlc3RSZWNlaXB0OiByZWNlaXB0Tm8sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxBbW91bnQ6IGFtb3VudCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhpc3RpbmcgPSBkb25vck1hcC5nZXQocGhvbmUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcudG90YWxBbW91bnQgKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuY291bnQgKz0gMTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyByZWNlaXB0IG51bWJlciBpcyBoaWdoZXIgdGhhbiB3aGF0IHdlIGhhdmUsIHVwZGF0ZSB0aGUgIkxhdGVzdCIgZGV0YWlscw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHdlIGhhdmUgdGhlIG1vc3QgcmVjZW50IE5hbWUvQWRkcmVzcyBldmVuIGlmIHdlIHByb2Nlc3Mgb3V0IG9mIG9yZGVyDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQocmVjZWlwdE5vLnJlcGxhY2UoL1xEL2csICcnKSkgPiBwYXJzZUludChleGlzdGluZy5sYXRlc3RSZWNlaXB0LnJlcGxhY2UoL1xEL2csICcnKSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5uYW1lID0gbmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5hZGRyZXNzID0gYWRkcmVzczsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5waW4gPSBwaW47DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuY291bnRyeSA9IGNvdW50cnk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGF0ZXN0UmVjZWlwdCA9IHJlY2VpcHRObzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZURvbm9ycyA9IEFycmF5LmZyb20oZG9ub3JNYXAudmFsdWVzKCkpOw0KDQogICAgICAgICAgICAgICAgaWYgKHVuaXF1ZURvbm9ycy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIGRvbm9ycyBmb3VuZCBtYXRjaGluZyB0aGUgY3JpdGVyaWEuIik7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdGVVbmlxdWVEb25vclBERih1bmlxdWVEb25vcnMsIHNlYXJjaFRlcm0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkRvbm9yIExpc3QgRXJyb3I6ICIgKyBlcnIubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gUERGIGZpbGUgR2VuZXJhdGlvbiBmb3IgVW5pcXVlIERvbm9yIExpc3QNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlVW5pcXVlRG9ub3JQREYoZG9ub3JzLCBzZWFyY2hUZXJtKSB7DQogICAgICAgICAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7DQogICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoJ3AnLCAnbW0nLCAnYTQnKTsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTsNCg0KICAgICAgICAgICAgLy8gMS4gU29ydCBieSBUb3RhbCBBbW91bnQgKEhpZ2hlc3Qgb24gdG9wKQ0KICAgICAgICAgICAgZG9ub3JzLnNvcnQoKGEsIGIpID0+IGIudG90YWxBbW91bnQgLSBhLnRvdGFsQW1vdW50KTsNCg0KICAgICAgICAgICAgbGV0IHRpdGxlMyA9ICIiOw0KICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0pIHsNCiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gc2VhcmNoVGVybS5pbmNsdWRlcygnOycpID8gIk9SIiA6ICJBTkQiOw0KICAgICAgICAgICAgICAgIHRpdGxlMyA9IGBTZWFyY2ggUmVzdWx0cyBmb3I6ICR7c2VhcmNoVGVybS5yZXBsYWNlKC9bOyxdL2csICIgIiArIHR5cGUgKyAiICIpfWA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IGRvbm9ycy5tYXAoZCA9PiB7DQogICAgICAgICAgICAgICAgLy8gQWR2YW5jZWQgQWRkcmVzcyBMb2dpYzogU3BsaXQgYnkgc3BhY2UsIHRpbGRlLCBvciBjb2xvbiB0byBmaW5kIHRoZSBjaXR5DQogICAgICAgICAgICAgICAgY29uc3QgYWRkclBhcnRzID0gZC5hZGRyZXNzLnRyaW0oKS5zcGxpdCgvW1xzfjpdKy8pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNpdHkgPSBhZGRyUGFydHMubGVuZ3RoID4gMCA/IGFkZHJQYXJ0c1thZGRyUGFydHMubGVuZ3RoIC0gMV0gOiAiIjsNCiAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgcmVtYWluaW5nIGFkZHJlc3MgZm9yIGRpc3BsYXkNCiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdBZGRyID0gZC5hZGRyZXNzLnJlcGxhY2UoL1s6fl0vZywgJywgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IG1haW5BZGRyID0gcmVtYWluaW5nQWRkci5zcGxpdCgnLCAnKS5zbGljZSgwLCAtMSkuam9pbignLCAnKTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiBbDQogICAgICAgICAgICAgICAgICAgIC8vIENvbHVtbiAxOiBOYW1lICYgQ29udGFjdA0KICAgICAgICAgICAgICAgICAgICAvL3sgY29udGVudDogYCR7ZC5uYW1lfVxuJHtkLnBob25lfVxuJHtkLnJlY2VpcHROb31gLCBzdHlsZXM6IHsgZm9udFN0eWxlOiAnYm9sZCcgfSB9LA0KICAgICAgICAgICAgICAgICAgICB7IGNvbnRlbnQ6IGAke2QubmFtZX1cbiR7ZC5waG9uZX1cbiR7ZC5sYXRlc3RSZWNlaXB0fWAsIHN0eWxlczogeyBmb250U3R5bGU6ICdib2xkJyB9IH0sDQogICAgICAgICAgICAgICAgICAgIC8vIENvbHVtbiAyOiBDb250cmlidXRpb24NCiAgICAgICAgICAgICAgICAgICAgeyBjb250ZW50OiBgUnMuICR7ZC50b3RhbEFtb3VudC50b0xvY2FsZVN0cmluZygnZW4tSU4nLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiwgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pfVxuJHtkLmNvdW50fSBUaW1lc2AsIHN0eWxlczogeyBoYWxpZ246ICdjZW50ZXInLCBmb250U3R5bGU6ICdib2xkJyB9IH0sDQogICAgICAgICAgICAgICAgICAgIC8veyBjb250ZW50OiBgUnMuICR7ZC50b3RhbEFtb3VudC50b0xvY2FsZVN0cmluZygpfVxuJHtkLmNvdW50fSBUaW1lc2AsIHN0eWxlczogeyBoYWxpZ246ICdjZW50ZXInLCBmb250U3R5bGU6ICdib2xkJyB9IH0sDQogICAgICAgICAgICAgICAgICAgIC8vIENvbHVtbiAzOiBBZGRyZXNzIERldGFpbHMgKENpdHkgLSBQaW5jb2RlIC0gQ291bnRyeSBvbiBsYXN0IGxpbmUpDQogICAgICAgICAgICAgICAgICAgIHsgY29udGVudDogYCR7bWFpbkFkZHJ9XG4ke2NpdHkudG9VcHBlckNhc2UoKX0gLSAke2QucGlufSAtICR7ZC5jb3VudHJ5LnRvVXBwZXJDYXNlKCl9YCwgc3R5bGVzOiB7IGZvbnRTdHlsZTogJ2JvbGQnIH0gfQ0KICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgZG9jLmF1dG9UYWJsZSh7DQogICAgICAgICAgICAgICAgaGVhZDogW1snTmFtZSAmIENvbnRhY3QnLCAnQ29udHJpYnV0aW9uJywgJ0FkZHJlc3MgRGV0YWlscyddXSwNCiAgICAgICAgICAgICAgICBib2R5OiB0YWJsZURhdGEsDQogICAgICAgICAgICAgICAgc3RhcnRZOiA1MCwgLy8gUHVzaGVkIGRvd24gc2lnbmlmaWNhbnRseSB0byBwcmV2ZW50IGFueSBvdmVybGFwDQogICAgICAgICAgICAgICAgbWFyZ2luOiB7IHRvcDogNTAgfSwgLy8gRW5zdXJlcyBzdWJzZXF1ZW50IHBhZ2VzIGRvbid0IG92ZXJsYXAgaGVhZGVyDQogICAgICAgICAgICAgICAgdGhlbWU6ICdncmlkJywNCiAgICAgICAgICAgICAgICBoZWFkU3R5bGVzOiB7DQogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogWzAsIDUxLCAxMDJdLA0KICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IDI1NSwNCiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDExLA0KICAgICAgICAgICAgICAgICAgICBmb250U3R5bGU6ICdib2xkJywNCiAgICAgICAgICAgICAgICAgICAgY2VsbFBhZGRpbmc6IDQsDQogICAgICAgICAgICAgICAgICAgIGhhbGlnbjogJ2NlbnRlcicNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGJvZHlTdHlsZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDEwLA0KICAgICAgICAgICAgICAgICAgICBjZWxsUGFkZGluZzogNCwNCiAgICAgICAgICAgICAgICAgICAgbGluZUNvbG9yOiBbMTgwLCAxODAsIDE4MF0sDQogICAgICAgICAgICAgICAgICAgIHRleHRDb2xvcjogWzAsIDAsIDBdIC8vIFNoYXJwIGJsYWNrIHRleHQNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGNvbHVtblN0eWxlczogew0KICAgICAgICAgICAgICAgICAgICAwOiB7IGNlbGxXaWR0aDogNTUgfSwNCiAgICAgICAgICAgICAgICAgICAgMTogeyBjZWxsV2lkdGg6IDQwIH0sDQogICAgICAgICAgICAgICAgICAgIDI6IHsgY2VsbFdpZHRoOiAnYXV0bycgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgZGlkRHJhd1BhZ2U6IGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFBlcm1hbmVudCBIZWFkZXIgZm9yIEFsbCBQYWdlcw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTgpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDAsIDUxLCAxMDIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCh1bmRlZmluZWQsICdib2xkJyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJNeWxhaSBNYWhhIFBlcmlheWF2YSBBbnVzaGFtIFRydXN0IiwgMTA1LCAxNSwgeyBhbGlnbjogJ2NlbnRlcicgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU3RhdHMgJiBUaW1lc3RhbXANCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigxMDApOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCh1bmRlZmluZWQsICdib2xkJyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBVbmlxdWUgRG9ub3IgTGlzdCBDcmVhdGVkIG9uOiAke3RpbWVzdGFtcH1gLCAxNCwgMjUpOw0KDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCwgMTAyLCAwKTsgLy8gRGFyayBHcmVlbiBmb3IgdG90YWwgY291bnQNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFRvdGFsIFVuaXF1ZSBEb25vcnM6ICR7ZG9ub3JzLmxlbmd0aH1gLCAxNCwgMzMpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh0aXRsZTMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDE1MCwgMCwgMCk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCh0aXRsZTMsIDE0LCA0MCk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBTdHlsaXNoIERpdmlkZXIgTGluZQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0RHJhd0NvbG9yKDAsIDUxLCAxMDIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0TGluZVdpZHRoKDEpOw0KICAgICAgICAgICAgICAgICAgICBkb2MubGluZSgxNCwgNDMsIDE5NiwgNDMpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEZvb3Rlcg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlU2l6ZSA9IGRvYy5pbnRlcm5hbC5wYWdlU2l6ZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZUhlaWdodCA9IHBhZ2VTaXplLmhlaWdodCA/IHBhZ2VTaXplLmhlaWdodCA6IHBhZ2VTaXplLmdldEhlaWdodCgpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTApOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDE1MCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KHVuZGVmaW5lZCwgJ2JvbGQnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoIkludGVybmFsIERvY3VtZW50IiwgMTQsIHBhZ2VIZWlnaHQgLSAxMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBQYWdlICR7ZGF0YS5wYWdlTnVtYmVyfWAsIDE5NiwgcGFnZUhlaWdodCAtIDEwLCB7IGFsaWduOiAncmlnaHQnIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCBmaWxlU3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpLnNsaWNlKDAsIDE5KTsNCiAgICAgICAgICAgIGRvYy5zYXZlKGBNTVBUX0Rvbm9yX0xpc3RfJHtmaWxlU3RhbXB9LnBkZmApOw0KICAgICAgICB9DQoNCg0KICAgICAgICB3aW5kb3cub25sb2FkID0gaW5pdGlhbGl6ZU1NUFQ7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c2NyaXB0Pg0KICAgICAgICBmdW5jdGlvbiBidWlsZEZZSW5kZXgoKSB7DQogICAgICAgICAgICAvLyAxLiBJbml0aWFsIERhdGEgQ2hlY2sNCiAgICAgICAgICAgIGlmICh0eXBlb2YgR0xPQkFMX0RCX0xJTkVTID09PSAndW5kZWZpbmVkJyB8fCBHTE9CQUxfREJfTElORVMubGVuZ3RoIDw9IDEpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gMi4gU0VDVVJJVFkgQ0hFQ0s6IE9ubHkgZGlzYWJsZSBpZiByZXN0cmljdGVkIGFib3ZlIHJlY29yZCAxDQogICAgICAgICAgICAvLyBJZiBNaW5SZWNvcmROdW1iZXIgaXMgMSwgaXQgbWVhbnMgInN0YXJ0IGZyb20gYmVnaW5uaW5nIiwgc28gdGhleSBhcmUgTk9UIHJlc3RyaWN0ZWQuDQogICAgICAgICAgICBjb25zdCBtaW5BbGxvd2VkID0gd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gfHwgMDsNCiAgICAgICAgICAgIGNvbnN0IHJhZGlvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdmeV9maWx0ZXInKTsNCg0KICAgICAgICAgICAgaWYgKG1pbkFsbG93ZWQgPiAxKSB7IC8vIDwtLS0gRklYRUQ6IE9ubHkgbG9jayBpZiBudW1iZXIgaXMgZ3JlYXRlciB0aGFuIDENCiAgICAgICAgICAgICAgICByYWRpb3MuZm9yRWFjaChyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgci5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHIucGFyZW50RWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gIjAuNSI7DQogICAgICAgICAgICAgICAgICAgIHIucGFyZW50RWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gIm5vbmUiOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTZWN1cml0eTogRlkgRmlsdGVyIGRpc2FibGVkIChSZXN0cmljdGVkIFVzZXIgbG9ja2VkIHRvIGluZGV4OiAiICsgbWluQWxsb3dlZCArICIpIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgYnV0dG9ucyBhcmUgRU5BQkxFRCBpZiB0aGV5IGFyZW4ndCByZXN0cmljdGVkDQogICAgICAgICAgICAgICAgcmFkaW9zLmZvckVhY2gociA9PiB7DQogICAgICAgICAgICAgICAgICAgIHIuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgci5wYXJlbnRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAiMSI7DQogICAgICAgICAgICAgICAgICAgIHIucGFyZW50RWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gImF1dG8iOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAzLiBJbml0aWFsaXplIFJhbmdlcyBmb3IgZnVsbCBhY2Nlc3MgdXNlcnMNCiAgICAgICAgICAgIGZ5UmFuZ2VzID0geyAiQUxMIjogeyBtaW46IDEsIG1heDogR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDEgfSB9Ow0KDQogICAgICAgICAgICAvLyA0LiBCdWlsZCB0aGUgWWVhciBNYXANCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKChsaW5lLCBpZHgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAwKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgY29scyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gY29sc1sxXSA/IGNvbHNbMV0udHJpbSgpIDogIiI7DQoNCiAgICAgICAgICAgICAgICBpZiAoZGF0ZVN0ci5pbmNsdWRlcygnLScpKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVN0ci5zcGxpdCgnLScpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID49IDMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBwYXJzZUludChwYXJ0c1sxXSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gcGFyc2VJbnQocGFydHNbMl0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRZID0gKG0gPD0gMykgPyB5IC0gMSA6IHk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmeUtleSA9IHN0YXJ0WS50b1N0cmluZygpLnNsaWNlKC0yKSArICItIiArIChzdGFydFkgKyAxKS50b1N0cmluZygpLnNsaWNlKC0yKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmeVJhbmdlc1tmeUtleV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmeVJhbmdlc1tmeUtleV0gPSB7IG1pbjogaWR4LCBtYXg6IGlkeCB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmeVJhbmdlc1tmeUtleV0ubWF4ID0gaWR4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIDUuIEFVVE8tU0VMRUNUIENVUlJFTlQgRlkgKEphbiAyMDI2IGlzIEZZIDI1LTI2KQ0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgY3VyTW9udGggPSB0b2RheS5nZXRNb250aCgpICsgMTsNCiAgICAgICAgICAgIGNvbnN0IGN1clllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgY29uc3Qgc3RhcnRZID0gKGN1ck1vbnRoIDw9IDMpID8gY3VyWWVhciAtIDEgOiBjdXJZZWFyOw0KICAgICAgICAgICAgY29uc3QgY3VycmVudEZZS2V5ID0gc3RhcnRZLnRvU3RyaW5nKCkuc2xpY2UoLTIpICsgIi0iICsgKHN0YXJ0WSArIDEpLnRvU3RyaW5nKCkuc2xpY2UoLTIpOw0KDQogICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgIHJhZGlvcy5mb3JFYWNoKHIgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyLnZhbHVlID09PSBjdXJyZW50RllLZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgci5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYXBwbHlGWUZpbHRlcihjdXJyZW50RllLZXkpOw0KICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIEZhbGxiYWNrIGlmIGN1cnJlbnQgeWVhciBpcyBlbXB0eQ0KICAgICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZnlfZmlsdGVyIl1bdmFsdWU9IkFMTCJdJyk7DQogICAgICAgICAgICAgICAgaWYgKGFsbFJhZGlvKSB7DQogICAgICAgICAgICAgICAgICAgIGFsbFJhZGlvLmNoZWNrZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBhcHBseUZZRmlsdGVyKCJBTEwiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBhcHBseUZZRmlsdGVyKHZhbCkgew0KICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgIGNvbnN0IHJuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld19yZWNfYnRuJyk7DQogICAgICAgICAgICBpZiAoIXNsaWRlcikgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyAxLiBDQUxDVUxBVEUgQ1VSUkVOVCBGWSAoSmFuIDIwMjYgaXMgRlkgMjUtMjYpDQogICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBjdXJNb250aCA9IHRvZGF5LmdldE1vbnRoKCkgKyAxOw0KICAgICAgICAgICAgY29uc3QgY3VyWWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICBjb25zdCBzdGFydFkgPSAoY3VyTW9udGggPD0gMykgPyBjdXJZZWFyIC0gMSA6IGN1clllYXI7DQogICAgICAgICAgICBjb25zdCBjdXJyZW50RllLZXkgPSBzdGFydFkudG9TdHJpbmcoKS5zbGljZSgtMikgKyAiLSIgKyAoc3RhcnRZICsgMSkudG9TdHJpbmcoKS5zbGljZSgtMik7DQoNCiAgICAgICAgICAgIC8vIDIuIFJOIEJVVFRPTiBTQUZFVFkNCiAgICAgICAgICAgIGlmIChybkJ0bikgew0KICAgICAgICAgICAgICAgIGlmICh2YWwgPT09ICJBTEwiIHx8IHZhbCA9PT0gY3VycmVudEZZS2V5KSB7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLnN0eWxlLm9wYWNpdHkgPSAiMSI7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLnN0eWxlLm9wYWNpdHkgPSAiMC4zIjsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uc3R5bGUuY3Vyc29yID0gIm5vdC1hbGxvd2VkIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIDMuIEZJTFRFUiBMT0dJQw0KICAgICAgICAgICAgaWYgKHZhbCA9PT0gIlJSIikgew0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZHlJbmRpY2VzID09PSAndW5kZWZpbmVkJyB8fCByZWFkeUluZGljZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBSZWFkeSBSZWNlaXB0cyBmb3VuZCEiKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJmeV9maWx0ZXIiXVt2YWx1ZT0iQUxMIl0nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbFJhZGlvKSBhbGxSYWRpby5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYXBwbHlGWUZpbHRlcigiQUxMIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gQ0hBTkdFIEhFUkU6IERJU0FCTEUgSU5TVEVBRCBPRiBISURFIC0tLQ0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOyAvLyBLZWVwIGl0IHZpc2libGUNCiAgICAgICAgICAgICAgICBzbGlkZXIuZGlzYWJsZWQgPSB0cnVlOyAgICAgICAgICAgICAgLy8gTWFrZSBpdCB1bmNsaWNrYWJsZQ0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS5vcGFjaXR5ID0gIjAuNCI7ICAgICAgICAvLyBHcmF5IGl0IG91dCB2aXN1YWxseQ0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS5jdXJzb3IgPSAibm90LWFsbG93ZWQiOw0KDQogICAgICAgICAgICAgICAgc2xpZGVyLm1pbiA9IDA7DQogICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IHJlYWR5SW5kaWNlcy5sZW5ndGggLSAxOw0KICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IDA7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChyZWFkeUluZGljZXNbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gLS0tIFJFU1RPUkUgU0xJREVSIEZPUiBOT1JNQUwgVklFV1MgLS0tDQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgICAgICAgICAgICAgc2xpZGVyLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLm9wYWNpdHkgPSAiMSI7DQogICAgICAgICAgICAgICAgc2xpZGVyLnN0eWxlLmN1cnNvciA9ICJwb2ludGVyIjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gKGZ5UmFuZ2VzICYmIGZ5UmFuZ2VzW3ZhbF0pID8gZnlSYW5nZXNbdmFsXSA6IChmeVJhbmdlcyA/IGZ5UmFuZ2VzWyJBTEwiXSA6IG51bGwpOw0KDQogICAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsb29yID0gKHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOICYmIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID4gcmFuZ2UubWluKQ0KICAgICAgICAgICAgICAgICAgICAgICAgPyB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STg0KICAgICAgICAgICAgICAgICAgICAgICAgOiByYW5nZS5taW47DQoNCiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm1pbiA9IGZsb29yOw0KICAgICAgICAgICAgICAgICAgICBzbGlkZXIubWF4ID0gcmFuZ2UubWF4Ow0KICAgICAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSByYW5nZS5tYXg7DQogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQoc2xpZGVyLnZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBGaXhlZCBBcnJvdyBOYXZpZ2F0aW9uIGZvciBSUiBNb2RlDQogICAgICAgIGZ1bmN0aW9uIG1vdmVGWVJlY29yZChkaXJlY3Rpb24pIHsNCiAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICBjb25zdCByYWRpb0NoZWNrZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJmeV9maWx0ZXIiXTpjaGVja2VkJyk7DQogICAgICAgICAgICBpZiAoIXNsaWRlciB8fCAhcmFkaW9DaGVja2VkKSByZXR1cm47DQoNCiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkTW9kZSA9IHJhZGlvQ2hlY2tlZC52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHBhcnNlSW50KHNsaWRlci52YWx1ZSkgKyBkaXJlY3Rpb247DQoNCiAgICAgICAgICAgIGlmIChuZXdWYWwgPj0gcGFyc2VJbnQoc2xpZGVyLm1pbikgJiYgbmV3VmFsIDw9IHBhcnNlSW50KHNsaWRlci5tYXgpKSB7DQogICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gbmV3VmFsOw0KICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE1vZGUgPT09ICJSUiIpIHsNCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChyZWFkeUluZGljZXNbbmV3VmFsXSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChuZXdWYWwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAvKiBDb21wcmVzc2VkIHBhZGRpbmcgZm9yIHRoZSBtYWluIHdvcmtzcGFjZSAqLw0KICAgICAgICBib2R5IHsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA2MHB4ICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCg0KICAgICAgICAjcmFkaW8tZG9jayB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICBib3R0b206IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICMwMDIyNDQsICMwMDQ0ODgpOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDIwcHg7IC8qIFJlZHVjZWQgdmVydGljYWwgcGFkZGluZyAqLw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAtMnB4IDEwcHggcmdiYSgwLDAsMCwwLjMpOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7IC8qIFJvdyBpbnN0ZWFkIG9mIENvbHVtbiAqLw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgLyogVGl0bGUgbGVmdCwgQ29udHJvbHMgcmlnaHQgKi8NCiAgICAgICAgICAgIHotaW5kZXg6IDEwMDAwOw0KICAgICAgICAgICAgaGVpZ2h0OiA0NXB4OyAvKiBGaXhlZCBzbWFsbCBoZWlnaHQgKi8NCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAucmFkaW8tdGl0bGUgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBjb2xvcjogI2ZmOTkzMzsNCiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgIH0NCg0KICAgICAgICAucmFkaW8tY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBnYXA6IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgICNyYWRpb1NlbGVjdCB7DQogICAgICAgICAgICBwYWRkaW5nOiA0cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICB3aWR0aDogMTgwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDI4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAucmFkaW8tYnRuIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTJweDsNCiAgICAgICAgICAgIGhlaWdodDogMjhweDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tcGxheSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjhhNzQ1Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1zdG9wIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkOTUzNGY7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBpZD0icmFkaW8tZG9jayI+DQogICAgICAgIDxkaXYgY2xhc3M9InJhZGlvLXRpdGxlIj5IaW5kdSBEZXZvdGlvbmFsIFJhZGlvPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0icmFkaW8tY29udHJvbHMiPg0KICAgICAgICAgICAgPHNlbGVjdCBpZD0icmFkaW9TZWxlY3QiPg0KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gTG9hZGluZyAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJyYWRpby1idG4gYnRuLXBsYXkiIG9uY2xpY2s9InBsYXlSYWRpbygpIj5QTEFZPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJyYWRpby1idG4gYnRuLXN0b3AiIG9uY2xpY2s9InN0b3BSYWRpbygpIj5TVE9QPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIA0KICAgICAgICA8YXVkaW8gaWQ9InJhZGlvUGxheWVyIiBjcm9zc29yaWdpbj0iYW5vbnltb3VzIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9hdWRpbz4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQoNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkUmFkaW9zKHRva2VuKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9SQURJT19GSUxFIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBJZiBwZXJzb25hbGl6ZWQgZmlsZSBpcyBtaXNzaW5nLCBmZXRjaCB0aGUgZGVmYXVsdCBvbmUNCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUGVyc29uYWxpemVkIHJhZGlvIG5vdCBmb3VuZCwgbG9hZGluZyBkZWZhdWx0Li4uIik7DQogICAgICAgICAgICAgICAgICAgIHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogJy9TZXR0aW5ncy9SYWRpb3MudHh0JyB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKCJObyBSYWRpbyBGaWxlIik7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBzdGF0aW9ucyA9IHRleHQuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gbC5pbmNsdWRlcygnLCcpKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYWRpb0Ryb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9TZWxlY3QnKTsNCg0KICAgICAgICAgICAgICAgIHJhZGlvRHJvcC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgU3RhdGlvbiAtLTwvb3B0aW9uPicgKw0KICAgICAgICAgICAgICAgICAgICBzdGF0aW9ucy5tYXAocyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbbmFtZSwgdXJsXSA9IHMuc3BsaXQoJywnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPG9wdGlvbiB2YWx1ZT0iJHt1cmwudHJpbSgpfSI+JHtuYW1lLnRyaW0oKX08L29wdGlvbj5gOw0KICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcnKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1NlbGVjdCcpLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPlJhZGlvIFVuYXZhaWxhYmxlPC9vcHRpb24+JzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgZnVuY3Rpb24gcGxheVJhZGlvKCkgew0KICAgICAgICAgICAgY29uc3QgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvUGxheWVyJyk7DQogICAgICAgICAgICBjb25zdCBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9TZWxlY3QnKTsNCiAgICAgICAgICAgIGNvbnN0IHVybCA9IHNlbC52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBzZWwub3B0aW9uc1tzZWwuc2VsZWN0ZWRJbmRleF0udGV4dDsNCg0KICAgICAgICAgICAgaWYgKCF1cmwpIHJldHVybjsNCg0KICAgICAgICAgICAgcGxheWVyLnNyYyA9IHVybDsNCiAgICAgICAgICAgIHBsYXllci5wbGF5KCkNCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBVcGRhdGUgeW91ciBhcHAncyBtYWluIHN0YXR1cyB0ZXh0IGlmIHlvdSBoYXZlIG9uZQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUGxheWluZzogIiArIG5hbWUpOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gYWxlcnQoIlN0YXRpb24gb2ZmbGluZS4gVHJ5IGFub3RoZXIuIikpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gc3RvcFJhZGlvKCkgew0KICAgICAgICAgICAgY29uc3QgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvUGxheWVyJyk7DQogICAgICAgICAgICBwbGF5ZXIucGF1c2UoKTsNCiAgICAgICAgICAgIHBsYXllci5zcmMgPSAiIjsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAucGFuY2hhbmctb3V0ZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgIH0NCg0KICAgICAgICAucGFuY2hhbmctaGFsZiB7DQogICAgICAgICAgICBmbGV4OiAxOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAucGFuY2hhbmctbWFpbi10aXRsZSB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDsNCiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgIH0NCg0KICAgICAgICAucC1zdWItaGVhZCB7DQogICAgICAgICAgICBmb250LXNpemU6IDE1cHg7DQogICAgICAgICAgICBjb2xvcjogIzAwMzM2NjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgbWFyZ2luOiAxNXB4IDAgOHB4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDNweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5wLWV2ZW50LWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOWYwOw0KICAgICAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICAgICAgICAgICAgLyogRGF0YSBzcGVjaWZpYyBzdHlsaW5nICovDQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQogICAgICAgIH0NCg0KICAgICAgICAucC1jZW50ZXItYm94IHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmMGY0ZmY7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAzMzY2Ow0KICAgICAgICB9DQogICAgICAgIC8qIEJvbGQgQ29sb3IgQ29kaW5nIGZvciBEYXRhICovDQogICAgICAgIC5jLWRhdGUgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jLW5hbWUgew0KICAgICAgICAgICAgY29sb3I6ICMwMDAwZmY7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jLWV4dHJhIHsNCiAgICAgICAgICAgIGNvbG9yOiAjMmU3ZDMyOw0KICAgICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljOw0KICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7DQogICAgICAgICAgICAucGFuY2hhbmctb3V0ZXIgew0KICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5wLWV2ZW50LWJveCB7DQogICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbDsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0icGFuY2hhbmctb3V0ZXIiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1oYWxmIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLW1haW4tdGl0bGUiPlVwY29taW5nIEFudXNoYW0gRGF0ZXM8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3AtYW51c2hhbSI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLXN1Yi1oZWFkIj7wn5WJ77iPIFBlcml5YXZhIEpheWFudGhpPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJkaXNwLWpheWFudGhpIj48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtc3ViLWhlYWQiPvCflYnvuI8gUGVyaXlhdmEgQXJhZGhhbmE8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3AtYXJhZGhhbmEiPjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1oYWxmIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLW1haW4tdGl0bGUiPlVwY29taW5nIEVrYWRhc2hpIERhdGVzPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJkaXNwLWVrYWRhc2hpIj48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkUGFuY2hhbmdTdWl0ZSgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIG5vdy5zZXRIb3VycygwLCAwLCAwLCAwKTsNCg0KICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldExpbmVzKHBhdGgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogcGF0aCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHh0LnJlcGxhY2UoLzxiclxzKlwvPz4vZ2ksICdcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpLnNwbGl0KCdcbicpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDApOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDEuIEFOVVNIQU0NCiAgICAgICAgICAgICAgICBjb25zdCByb3dzMSA9IGF3YWl0IGdldExpbmVzKCcvUGFuY2hhbmcvQW51c2hhbS8wLjEuaHRtbCcpOw0KICAgICAgICAgICAgICAgIGxldCBoMSA9ICIiOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93czEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MxW2ldLm1hdGNoKC9cZHsxLDJ9LVx3Ky1cZHs0fS8pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUocm93czFbaV0pID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgxICs9IGA8ZGl2IGNsYXNzPSJwLWV2ZW50LWJveCI+PHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzMVtpXX08L3NwYW4+IDxzcGFuIGNsYXNzPSJjLWV4dHJhIj4ke3Jvd3MxW2kgKyAxXSB8fCAnJ308L3NwYW4+PC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcC1hbnVzaGFtJykuaW5uZXJIVE1MID0gaDEgfHwgIk5vIFVwY29taW5nIjsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEpBWUFOVEhJDQogICAgICAgICAgICAgICAgY29uc3Qgcm93czMgPSBhd2FpdCBnZXRMaW5lcygnL1BhbmNoYW5nL0FudXNoYW0vMC4zLmh0bWwnKTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyb3dzM1tpXS5tYXRjaCgvXGR7MSwyfS1cdystXGR7NH0vKSAmJiBuZXcgRGF0ZShyb3dzM1tpXSkgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IChyb3dzM1tpICsgMV0gfHwgIiIpLnJlcGxhY2UoL1wvXGR7Mn1cL1xkezR9L2csICcnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWpheWFudGhpJykuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InAtZXZlbnQtYm94IHAtY2VudGVyLWJveCI+PHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzM1tpXX0gKFNhdCk8L3NwYW4+IDxzcGFuIGNsYXNzPSJjLWV4dHJhIj5UaW1pbmc6ICR7dGltZX08L3NwYW4+PC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gMy4gQVJBREhBTkENCiAgICAgICAgICAgICAgICBjb25zdCByb3dzNCA9IGF3YWl0IGdldExpbmVzKCcvUGFuY2hhbmcvQW51c2hhbS8wLjQuaHRtbCcpOw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93czQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3M0W2ldLm1hdGNoKC9cZHsxLDJ9LVx3Ky1cZHs0fS8pICYmIG5ldyBEYXRlKHJvd3M0W2ldKSA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWFyYWRoYW5hJykuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InAtZXZlbnQtYm94IHAtY2VudGVyLWJveCI+PHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzNFtpXX0gKE1vbik8L3NwYW4+PC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gRUtBREFTSEkNCiAgICAgICAgICAgICAgICBjb25zdCByb3dzRSA9IGF3YWl0IGdldExpbmVzKCcvUGFuY2hhbmcvRWthZGFzaGkvMC4xLmh0bWwnKTsNCiAgICAgICAgICAgICAgICBsZXQgaEUgPSAiIjsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3NFLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gcm93c0VbaV0ubWF0Y2goLyhcZHsxLDJ9KS0oXGR7Mn18W2EtekEtWl0rKS0oXGR7NH0pLyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZFBhcnRzID0gcm93c0VbaV0uc3BsaXQoJyAnKVswXS5zcGxpdCgnLScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHQgPSBuZXcgRGF0ZShkUGFydHNbMl0sIG5ldyBEYXRlKERhdGUucGFyc2UoZFBhcnRzWzFdICsgIiAxLCAyMDEyIikpLmdldE1vbnRoKCksIGRQYXJ0c1swXSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkdCA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoRSArPSBgPGRpdiBjbGFzcz0icC1ldmVudC1ib3giPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYy1kYXRlIj4ke3Jvd3NFW2ldfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImMtbmFtZSI+JHtyb3dzRVtpICsgMV0gfHwgJyd9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYy1leHRyYSI+JHtyb3dzRVtpICsgMl0gfHwgJyd9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpICs9IDI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3AtZWthZGFzaGknKS5pbm5lckhUTUwgPSBoRSB8fCAiTm8gVXBjb21pbmciOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCJMb2FkIEZhaWwiLCBlKTsgfQ0KICAgICAgICB9DQogICAgICAgIGxvYWRQYW5jaGFuZ1N1aXRlKCk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5mbGFzaGJhY2stY29udGFpbmVyIHsNCiAgICAgICAgICAgIG1hcmdpbjogMjBweCBhdXRvOw0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZhZmE7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIG1heC13aWR0aDogOTUlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1oZWFkZXItd3JhcHBlciB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBnYXA6IDEycHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1jb250cm9scyB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAxNXB4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1oZWFkZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ0dlb3JnaWEnLCBzZXJpZjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjZweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCAjZmY5OTMzOw0KICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDsNCiAgICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIEp1bXAgdG8gRGF0ZSBTdHlsaW5nICovDQogICAgICAgIC5qdW1wLWJveCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogOHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweCAxMnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmp1bXAtYm94IHNlbGVjdCB7DQogICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC52aWV3LXRvZ2dsZSB7DQogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZGYyZjI7DQogICAgICAgICAgICBwYWRkaW5nOiA1cHggMTVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAudmlldy10b2dnbGUgbGFiZWwgew0KICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICAgICAgZ2FwOiA1cHg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1idG4gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzgwMDAwMDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgICAgICAgIHdpZHRoOiAzNXB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAzNXB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5uYXYtYnRuOmhvdmVyIHsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmY5OTMzOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2stZ3JpZCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAgZ2FwOiAyNXB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1jYXJkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDg1MHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA4cHggMjBweCByZ2JhKDAsMCwwLDAuMSk7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmZsYXNoYmFjay1jYXJkIGg0IHsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTJweCAwOw0KICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7DQogICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWltZy13cmFwcGVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDEycHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWltZyB7DQogICAgICAgICAgICB3aWR0aDogMTkwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDE1MHB4Ow0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogMC4zczsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuZmxhc2hiYWNrLWltZzpob3ZlciB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsNCiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICNmZjk5MzM7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDYwMHB4KSB7DQogICAgICAgICAgICAuZmxhc2hiYWNrLWhlYWRlciB7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuZmxhc2hiYWNrLWltZyB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDE0MHB4Ow0KICAgICAgICAgICAgICAgIGhlaWdodDogMTEwcHg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5uYXYtY29udHJvbHMgew0KICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0iZmxhc2hiYWNrLWNvbnRhaW5lciIgaWQ9ImZsYXNoYmFja1NlY3Rpb24iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4NCiAgICAgICAgPGRpdiBjbGFzcz0iZmxhc2hiYWNrLWhlYWRlci13cmFwcGVyIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb250cm9scyI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgb25jbGljaz0iY2hhbmdlRmxhc2hiYWNrRGF0ZSgtMSkiPuKXgDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImZsYXNoYmFja1RpdGxlIiBjbGFzcz0iZmxhc2hiYWNrLWhlYWRlciI+8J+Onu+4jyBUcnVzdCBNZW1vcmllczogT24gVGhpcyBEYXk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIiBvbmNsaWNrPSJjaGFuZ2VGbGFzaGJhY2tEYXRlKDEpIj7ilrY8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IGZsZXgtd3JhcDogd3JhcDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJqdW1wLWJveCI+DQogICAgICAgICAgICAgICAgICAgIPCfk4UgSnVtcCB0bzoNCiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ianVtcERheSI+PC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imp1bXBNb250aCI+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwIj5KYW48L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEiPkZlYjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMiI+TWFyPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIzIj5BcHI8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjQiPk1heTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNSI+SnVuPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI2Ij5KdWw8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjciPkF1Zzwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iOCI+U2VwPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI5Ij5PY3Q8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEwIj5Ob3Y8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjExIj5EZWM8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0idGVsZXBvcnRUb0RhdGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzgwMDAwMDsgY29sb3I6d2hpdGU7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjEwcHg7IHBhZGRpbmc6MnB4IDhweDsgY3Vyc29yOnBvaW50ZXI7IGZvbnQtc2l6ZToxMnB4OyI+R088L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InZpZXctdG9nZ2xlIj4NCiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0idmlld01vZGUiIHZhbHVlPSIzIiBjaGVja2VkIG9uY2xpY2s9InNldFZpZXdNb2RlKDMpIj4gU3VtbWFyeTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InZpZXdNb2RlIiB2YWx1ZT0iYWxsIiBvbmNsaWNrPSJzZXRWaWV3TW9kZSgnYWxsJykiPiBBbGw8L2xhYmVsPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGlkPSJmbGFzaGJhY2tHcmlkIiBjbGFzcz0iZmxhc2hiYWNrLWdyaWQiPjwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgbGV0IGZsYXNoYmFja09mZnNldCA9IDA7DQogICAgICAgIGxldCBjdXJyZW50Vmlld0xpbWl0ID0gMzsNCg0KICAgICAgICAvLyBJbml0aWFsaXplIERheSBkcm9wZG93biAoMS0zMSkNCiAgICAgICAgY29uc3QgZGF5U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBEYXknKTsNCiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzE7IGkrKykgew0KICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgb3B0LnZhbHVlID0gaTsgb3B0LmlubmVySFRNTCA9IGk7DQogICAgICAgICAgICBkYXlTZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHNldFZpZXdNb2RlKG1vZGUpIHsNCiAgICAgICAgICAgIGN1cnJlbnRWaWV3TGltaXQgPSBtb2RlOw0KICAgICAgICAgICAgbG9hZER5bmFtaWNGbGFzaGJhY2tzKCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBjaGFuZ2VGbGFzaGJhY2tEYXRlKG9mZnNldCkgew0KICAgICAgICAgICAgZmxhc2hiYWNrT2Zmc2V0ICs9IG9mZnNldDsNCiAgICAgICAgICAgIGxvYWREeW5hbWljRmxhc2hiYWNrcygpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gdGVsZXBvcnRUb0RhdGUoKSB7DQogICAgICAgICAgICBjb25zdCBkID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBEYXknKS52YWx1ZSk7DQogICAgICAgICAgICBjb25zdCBtID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBNb250aCcpLnZhbHVlKTsNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbSwgZCk7DQoNCiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBkaWZmZXJlbmNlIGluIGRheXMgdG8gc2V0IHRoZSBvZmZzZXQNCiAgICAgICAgICAgIGNvbnN0IGRpZmZUaW1lID0gdGFyZ2V0LmdldFRpbWUoKSAtIG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgZmxhc2hiYWNrT2Zmc2V0ID0gTWF0aC5yb3VuZChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7DQogICAgICAgICAgICBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREeW5hbWljRmxhc2hiYWNrcygpIHsNCiAgICAgICAgICAgIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2hiYWNrR3JpZCcpOw0KICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFzaGJhY2tTZWN0aW9uJyk7DQogICAgICAgICAgICBjb25zdCB0aXRsZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGFzaGJhY2tUaXRsZScpOw0KICAgICAgICAgICAgY29uc3QgZG9tYWluID0gImh0dHBzOi8vd3d3LmdhbmVzYXNhcm1hLmNvbSI7DQogICAgICAgICAgICBjb25zdCBUaW1lbGluZVVSTF9GbGFzaCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL3JmODVlbGt6NWZjM2NsMWg4a2NjYy9UaW1lTGluZS50eHQ/cmxrZXk9dW1raDByN3d0Zjd1bHUzcnpxemNnYjF5YyZkbD0xIjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIHRhcmdldERhdGUuc2V0RGF0ZSh0YXJnZXREYXRlLmdldERhdGUoKSArIGZsYXNoYmFja09mZnNldCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBtbSA9IFN0cmluZyh0YXJnZXREYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRkID0gU3RyaW5nKHRhcmdldERhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRvdFBhdHRlcm4gPSBgLiR7bW19LiR7ZGR9YDsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXNoUGF0dGVybiA9IGAtJHttbX0tJHtkZH1gOw0KDQogICAgICAgICAgICAgICAgLy8gU3luYyBEcm9wZG93bnMgd2l0aCBjdXJyZW50IHZpZXdpbmcgZGF0ZQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wRGF5JykudmFsdWUgPSB0YXJnZXREYXRlLmdldERhdGUoKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcE1vbnRoJykudmFsdWUgPSB0YXJnZXREYXRlLmdldE1vbnRoKCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBpc1RvZGF5ID0gKHRhcmdldERhdGUuZ2V0TW9udGgoKSA9PT0gbm93LmdldE1vbnRoKCkgJiYgdGFyZ2V0RGF0ZS5nZXREYXRlKCkgPT09IG5vdy5nZXREYXRlKCkpOw0KICAgICAgICAgICAgICAgIHRpdGxlRGl2LmlubmVyVGV4dCA9IGlzVG9kYXkgPyBg8J+Onu+4jyBUcnVzdCBNZW1vcmllczogT24gVGhpcyBEYXlgIDogYPCfjp7vuI8gTWVtb3JpZXM6ICR7dGFyZ2V0RGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUlOJywgeyBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJyB9KX1gOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChUaW1lbGluZVVSTF9GbGFzaCk7DQogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBkYXRhLnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICBjb25zdCBldmVudHNNYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBsZXQgZm91bmRNYXRjaCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKChsaW5lLmluY2x1ZGVzKGRvdFBhdHRlcm4pIHx8IGxpbmUuaW5jbHVkZXMoZGFzaFBhdHRlcm4pKSAmJiBsaW5lLm1hdGNoKC9cLihqcGd8anBlZ3xwbmcpJC9pKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2ViUGF0aCA9IGxpbmUudHJpbSgpLnJlcGxhY2UoL1xcL2csICcvJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmdWxsVXJsID0gZG9tYWluICsgZW5jb2RlVVJJKHdlYlBhdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSB3ZWJQYXRoLnNwbGl0KCcvJykucG9wKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ZWFyID0gZmlsZW5hbWUubWF0Y2goL14oXGR7NH0pLykgPyBmaWxlbmFtZS5tYXRjaCgvXihcZHs0fSkvKVsxXSA6ICJQYXN0IjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50TmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoL15cZHs0fVsuLV1cZHsyfVsuLV1cZHsyfS0vLCAnJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXHMqXGQqXHMqXC4oanBnfGpwZWd8cG5nKSQvaSwgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL15cZCtccysvLCAnJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvLS9nLCAnICcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudE5hbWUpIGV2ZW50TmFtZSA9ICJUcnVzdCBBY3Rpdml0eSI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwS2V5ID0gYCR7eWVhcn18JHtldmVudE5hbWV9YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnRzTWFwW2dyb3VwS2V5XSkgZXZlbnRzTWFwW2dyb3VwS2V5XSA9IHsgeWVhciwgZXZlbnROYW1lLCBwaG90b3M6IFtdIH07DQogICAgICAgICAgICAgICAgICAgICAgICBldmVudHNNYXBbZ3JvdXBLZXldLnBob3Rvcy5wdXNoKGZ1bGxVcmwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXRjaCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghZm91bmRNYXRjaCkgew0KICAgICAgICAgICAgICAgICAgICBncmlkLmlubmVySFRNTCA9IGA8ZGl2IHN0eWxlPSJwYWRkaW5nOjQwcHg7IHdpZHRoOjEwMCU7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6d2hpdGU7IGJvcmRlci1yYWRpdXM6MTBweDsiPk5vIHJlY29yZHMgZm91bmQgZm9yICR7dGFyZ2V0RGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUlOJywgeyBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJyB9KX0uPC9kaXY+YDsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhldmVudHNNYXApLnNvcnQoKGEsIGIpID0+IGIuc3BsaXQoJ3wnKVswXSAtIGEuc3BsaXQoJ3wnKVswXSkuZm9yRWFjaChrZXkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBldmVudHNNYXBba2V5XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NOYW1lID0gJ2ZsYXNoYmFjay1jYXJkJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlQaG90b3MgPSBjdXJyZW50Vmlld0xpbWl0ID09PSAnYWxsJyA/IGdyb3VwLnBob3RvcyA6IGdyb3VwLnBob3Rvcy5zbGljZSgwLCAzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND4ke2dyb3VwLmV2ZW50TmFtZX0gJHtpc1RvZGF5ID8gYCgke2dyb3VwLnllYXJ9KWAgOiBgLSAke2dyb3VwLnllYXJ9YH08L2g0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGFzaGJhY2staW1nLXdyYXBwZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkaXNwbGF5UGhvdG9zLm1hcChzcmMgPT4gYDxpbWcgc3JjPSIke3NyY30iIGNsYXNzPSJmbGFzaGJhY2staW1nIiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLnNyYykiIG9uZXJyb3I9InRoaXMuc3R5bGUuZGlzcGxheT0nbm9uZSciPmApLmpvaW4oJycpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZC5hcHBlbmRDaGlsZChjYXJkKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWREeW5hbWljRmxhc2hiYWNrcyk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCg0KICAgIDxzdHlsZT4NCiAgICAgICAgLmNoaXRyYW0tY29udGFpbmVyIHsNCiAgICAgICAgICAgIG1hcmdpbjogMjBweCBhdXRvOw0KICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZhZmE7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIG1heC13aWR0aDogOTUlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0taGVhZGVyIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdHZW9yZ2lhJywgc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDI2cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0tZ3JpZCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmNoaXRyYW0tYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsMCwwLDAuMSk7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuOHMgZWFzZS1pbi1vdXQ7DQogICAgICAgIH0NCg0KICAgICAgICAubGFuZHNjYXBlLWJveCB7DQogICAgICAgICAgICB3aWR0aDogNDUwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAucG9ydHJhaXQtYm94IHsNCiAgICAgICAgICAgIHdpZHRoOiAzMjBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jaGl0cmFtLWltZyB7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDQwMHB4Ow0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbjsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jaGl0cmFtLWxhYmVsIHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDgwMHB4KSB7DQogICAgICAgICAgICAubGFuZHNjYXBlLWJveCwgLnBvcnRyYWl0LWJveCB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA0MDBweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWNvbnRhaW5lciI+DQogICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0taGVhZGVyIj7wn5WJ77iPIENoaXRyYSBQdXJhbmFtPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tZ3JpZCI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWJveCBsYW5kc2NhcGUtYm94Ij4NCiAgICAgICAgICAgICAgICA8aW1nIGlkPSJpbWdfbGFuZHNjYXBlIiBzcmM9IiIgY2xhc3M9ImNoaXRyYW0taW1nIiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLnNyYykiIHRpdGxlPSJWaWV3IEZ1bGwgSW1hZ2UiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tbGFiZWwiIGlkPSJsYmxfbGFuZHNjYXBlIj5Db25uZWN0aW5nIHRvIERpdmluZSBHYWxsZXJ5Li4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tYm94IHBvcnRyYWl0LWJveCI+DQogICAgICAgICAgICAgICAgPGltZyBpZD0iaW1nX3BvcnRyYWl0IiBzcmM9IiIgY2xhc3M9ImNoaXRyYW0taW1nIiBvbmNsaWNrPSJ3aW5kb3cub3Blbih0aGlzLnNyYykiIHRpdGxlPSJWaWV3IEZ1bGwgSW1hZ2UiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoaXRyYW0tbGFiZWwiIGlkPSJsYmxfcG9ydHJhaXQiPkNvbm5lY3RpbmcgdG8gRGl2aW5lIEdhbGxlcnkuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGNvbnN0IENISVRSQU1fQ09ORklHID0gew0KICAgICAgICAgICAgZm9sZGVyOiAiL1BhbmNoYW5nL0NoaXRocmFQdXJhbmFtLyIsDQogICAgICAgICAgICBsYW5kc2NhcGVDb3VudDogNDEsDQogICAgICAgICAgICBwb3J0cmFpdENvdW50OiA4MCwNCiAgICAgICAgICAgIGludGVydmFsOiA3MDAwDQogICAgICAgIH07DQoNCiAgICAgICAgbGV0IGN1cnJlbnRMID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQ0hJVFJBTV9DT05GSUcubGFuZHNjYXBlQ291bnQpICsgMTsNCiAgICAgICAgbGV0IGN1cnJlbnRQID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQ0hJVFJBTV9DT05GSUcucG9ydHJhaXRDb3VudCkgKyAxOw0KICAgICAgICBsZXQgZHJvcGJveFRva2VuID0gIiI7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2V0RHJvcGJveExpbmsoZmlsZU5hbWUpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9nZXRfdGVtcG9yYXJ5X2xpbmsnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGRyb3Bib3hUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBDSElUUkFNX0NPTkZJRy5mb2xkZXIgKyBmaWxlTmFtZSB9KQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubGluazsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJMaW5rIEZldGNoIEZhaWw6IiwgZmlsZU5hbWUpOw0KICAgICAgICAgICAgICAgIHJldHVybiAiIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNoaXRyYW0oKSB7DQogICAgICAgICAgICAvLyAxLiBHZXQgQWNjZXNzIFRva2VuICh1c2luZyB5b3VyIGdsb2JhbCBNTVBUIGNvbnN0YW50cykNCiAgICAgICAgICAgIGlmICghZHJvcGJveFRva2VuKSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBkcm9wYm94VG9rZW4gPSBkLmFjY2Vzc190b2tlbjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMi4gUHJlcGFyZSBGaWxlIE5hbWVzDQogICAgICAgICAgICBjb25zdCBsTnVtID0gU3RyaW5nKGN1cnJlbnRMKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgY29uc3QgcE51bSA9IFN0cmluZyhjdXJyZW50UCkucGFkU3RhcnQoMiwgJzAnKTsNCg0KICAgICAgICAgICAgLy8gMy4gRmV0Y2ggVGVtcCBMaW5rcyBmcm9tIERyb3Bib3gNCiAgICAgICAgICAgIGNvbnN0IFtsVXJsLCBwVXJsXSA9IGF3YWl0IFByb21pc2UuYWxsKFsNCiAgICAgICAgICAgICAgICBnZXREcm9wYm94TGluayhgTCR7bE51bX0uanBnYCksDQogICAgICAgICAgICAgICAgZ2V0RHJvcGJveExpbmsoYFAke3BOdW19LmpwZ2ApDQogICAgICAgICAgICBdKTsNCg0KICAgICAgICAgICAgLy8gNC4gVXBkYXRlIFVJIChMYW5kc2NhcGUpDQogICAgICAgICAgICBjb25zdCBsSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19sYW5kc2NhcGUnKTsNCiAgICAgICAgICAgIGNvbnN0IGxCb3ggPSBsSW1nLnBhcmVudEVsZW1lbnQ7DQogICAgICAgICAgICBsQm94LnN0eWxlLm9wYWNpdHkgPSAwLjM7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAobFVybCkgbEltZy5zcmMgPSBsVXJsOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYmxfbGFuZHNjYXBlJykuaW5uZXJUZXh0ID0gYEthbmNoaSBNYWhhcGVyaXlhdmFgOw0KICAgICAgICAgICAgICAgIGxCb3guc3R5bGUub3BhY2l0eSA9IDE7DQogICAgICAgICAgICB9LCA4MDApOw0KDQogICAgICAgICAgICAvLyA1LiBVcGRhdGUgVUkgKFBvcnRyYWl0KQ0KICAgICAgICAgICAgY29uc3QgcEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdfcG9ydHJhaXQnKTsNCiAgICAgICAgICAgIGNvbnN0IHBCb3ggPSBwSW1nLnBhcmVudEVsZW1lbnQ7DQogICAgICAgICAgICBwQm94LnN0eWxlLm9wYWNpdHkgPSAwLjM7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocFVybCkgcEltZy5zcmMgPSBwVXJsOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYmxfcG9ydHJhaXQnKS5pbm5lclRleHQgPSBgS2FuY2hpIE1haGFwZXJpeWF2YWA7DQogICAgICAgICAgICAgICAgcEJveC5zdHlsZS5vcGFjaXR5ID0gMTsNCiAgICAgICAgICAgIH0sIDgwMCk7DQoNCiAgICAgICAgICAgIC8vIDYuIEluY3JlbWVudCBvciBSZXNldA0KICAgICAgICAgICAgY3VycmVudEwgPSBjdXJyZW50TCA+PSBDSElUUkFNX0NPTkZJRy5sYW5kc2NhcGVDb3VudCA/IDEgOiBjdXJyZW50TCArIDE7DQogICAgICAgICAgICBjdXJyZW50UCA9IGN1cnJlbnRQID49IENISVRSQU1fQ09ORklHLnBvcnRyYWl0Q291bnQgPyAxIDogY3VycmVudFAgKyAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gSW5pdGlhbGl6ZQ0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsNCiAgICAgICAgICAgIHVwZGF0ZUNoaXRyYW0oKTsNCiAgICAgICAgICAgIHNldEludGVydmFsKHVwZGF0ZUNoaXRyYW0sIENISVRSQU1fQ09ORklHLmludGVydmFsKTsNCiAgICAgICAgfSk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8c3R5bGU+DQogICAgICAgIC5tbXB0LWFyY2hpdmUtYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDI1cHg7DQogICAgICAgICAgICBtYXJnaW46IDMwcHggMTBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgwLDAsMCwwLjEpOw0KICAgICAgICB9DQoNCiAgICAgICAgLmFyY2hpdmUtaGVhZGVyIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmZmY1ZTY7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5hcmNoaXZlLWNvbnRyb2xzIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDE1cHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgIH0NCg0KICAgICAgICAjc2NyaXB0dXJlX2Ryb3Bkb3duIHsNCiAgICAgICAgICAgIHdpZHRoOiAzODBweDsNCiAgICAgICAgICAgIGhlaWdodDogNDVweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNGRjk5MzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmFmMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tYXJjaGl2ZS1kb3dubG9hZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjODAwMDAwIDAlLCAjNGEwMDAwIDEwMCUpOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgcGFkZGluZzogMTJweCAzMHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yczsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuYnRuLWFyY2hpdmUtZG93bmxvYWQ6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wMyk7DQogICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwwLDAsMC4yKTsNCiAgICAgICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0ibW1wdC1hcmNoaXZlLWJveCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImFyY2hpdmUtaGVhZGVyIj7wn5OcIFNjcmlwdHVyZXMgZnJvbSBNTVBUIEFyY2hpdmVzPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImFyY2hpdmUtY29udHJvbHMiPg0KICAgICAgICAgICAgPHNlbGVjdCBpZD0ic2NyaXB0dXJlX2Ryb3Bkb3duIj4NCiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIExvYWRpbmcgVGl0bGVzIGZyb20gRHJpdmUuLi4gLS08L29wdGlvbj4NCiAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFyY2hpdmUtZG93bmxvYWQiIG9uY2xpY2s9ImhhbmRsZUFyY2hpdmVEb3dubG9hZCgpIj7wn5OlIERvd25sb2FkIFBERjwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IG1hcmdpbi10b3A6IDE1cHg7Ij5Ob3RlOiBTY2FubmVkIHZlcnNpb25zIGFyZSBwcm92aWRlZCBmb3IgcGVyc29uYWwgc3Bpcml0dWFsIHN0dWR5LjwvcD4NCiAgICA8L2Rpdj4NCg0KDQogICAgPHNjcmlwdD4NCg0KICAgICAgICAvLyAtLS0gR09PR0xFIERSSVZFIEFSQ0hJVkUgTE9HSUMgLS0tDQogICAgICAgIC8vIFJFUExBQ0UgJ1lPVVJfQVBQU19TQ1JJUFRfVVJMJyB3aXRoIHRoZSBvbmUgeW91IGdldCBmcm9tIEdvb2dsZSBTY3JpcHQgRGVwbG95bWVudA0KICAgICAgICBjb25zdCBBUkNISVZFX0JSSURHRV9VUkwgPSAiaHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J3cTF3Tkw3eGZSS1pxU3AxYzVVR0doZW5iX0lsMlhZQ3NjR1BzcGtOMEF6eFFyX2xXeUlnakpILUdmY0k3THVWakpmQS9leGVjIjsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBpbml0TU1QVEFyY2hpdmUoKSB7DQogICAgICAgICAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JpcHR1cmVfZHJvcGRvd24nKTsNCiAgICAgICAgICAgIGlmICghZHJvcGRvd24pIHJldHVybjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAncmVkaXJlY3Q6IGZvbGxvdycgaXMgcmVxdWlyZWQgZm9yIEdvb2dsZSBBcHBzIFNjcmlwdCBXZWIgQXBwcw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goQVJDSElWRV9CUklER0VfVVJMLCB7IHJlZGlyZWN0OiAiZm9sbG93IiB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgIGRyb3Bkb3duLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBhIFNjcmlwdHVyZSAtLTwvb3B0aW9uPic7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj5ObyBmaWxlcyBmb3VuZCBpbiBmb2xkZXI8L29wdGlvbj4nOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICAvL29wdC52YWx1ZSA9IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/ZXhwb3J0PWRvd25sb2FkJmlkPSR7ZmlsZS5pZH1gOw0KICAgICAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL3UvMC91Yz9pZD0ke2ZpbGUuaWR9JmV4cG9ydD1kb3dubG9hZGA7DQogICAgICAgICAgICAgICAgICAgIG9wdC50ZXh0Q29udGVudCA9IGZpbGUubmFtZTsNCiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkFyY2hpdmUgRXJyb3I6IiwgZXJyKTsNCiAgICAgICAgICAgICAgICBkcm9wZG93bi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj5BcmNoaXZlIE9mZmxpbmUgKENoZWNrIFVSTCk8L29wdGlvbj4nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICBmdW5jdGlvbiBoYW5kbGVBcmNoaXZlRG93bmxvYWQoKSB7DQogICAgICAgICAgICBjb25zdCB1cmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyaXB0dXJlX2Ryb3Bkb3duJykudmFsdWU7DQogICAgICAgICAgICBpZiAoIXVybCkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJQbGVhc2Ugc2VsZWN0IGEgc2NyaXB0dXJlIHRpdGxlIGZpcnN0LiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgRmlsZSBJRCBmcm9tIHRoZSBVUkwNCiAgICAgICAgICAgIGNvbnN0IGZpbGVJZCA9IHVybC5zcGxpdCgnaWQ9JylbMV07DQoNCiAgICAgICAgICAgIC8vIFdlIHVzZSBhICJieXBhc3MiIFVSTCBzdHJ1Y3R1cmUuDQogICAgICAgICAgICAvLyBUaGlzIHRlbGxzIEdvb2dsZSB0byBza2lwIHRoZSBjb25maXJtYXRpb24gcGFnZSBieSBwcmUtY29uZmlybWluZyB0aGUgZG93bmxvYWQuDQogICAgICAgICAgICBjb25zdCBmb3JjZURvd25sb2FkVXJsID0gYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91Yz9leHBvcnQ9ZG93bmxvYWQmaWQ9JHtmaWxlSWR9JmNvbmZpcm09dGA7DQoNCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGZvcmNlRG93bmxvYWRVcmwsICdfYmxhbmsnKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gQWRkIHRoaXMgdG8geW91ciBleGlzdGluZyB3aW5kb3cubG9hZCBsaXN0ZW5lciBvciBjcmVhdGUgYSBuZXcgb25lOg0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGluaXRNTVBUQXJjaGl2ZSk7DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8ZGl2IGNsYXNzPSJtbXB0LXVuaWZpZWQtYm94IiBpZD0iYXVkaW9fYXJjaGl2ZV9zZWN0aW9uIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYXJjaGl2ZS1oZWFkZXIiPg0KICAgICAgICAgICAg8J+OpyBBdWRpbyBCb29rcyBGcm9tIE1NUFQgQXJjaGl2ZXMNCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogMTVweDsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbjogMjBweCAwOyI+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDVweDsiPkJvb2s8L2xhYmVsPg0KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImF1ZGlvX2Jvb2tfZHJvcGRvd24iIG9uY2hhbmdlPSJsb2FkQXVkaW9DaGFwdGVycygpIiBzdHlsZT0ibWluLXdpZHRoOiAyMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA0cHg7IHBhZGRpbmc6IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJhY2tncm91bmQ6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IEJvb2sgLS08L29wdGlvbj4NCiAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDVweDsiPkNoYXB0ZXI8L2xhYmVsPg0KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImF1ZGlvX2NoYXB0ZXJfZHJvcGRvd24iIGRpc2FibGVkIG9uY2hhbmdlPSJ1cGRhdGVBdWRpb1VJKCkiIHN0eWxlPSJtaW4td2lkdGg6IDMwMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogNXB4OyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQ2hhcHRlciAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyI+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuX2F1ZGlvX3BsYXkiIGRpc2FibGVkIG9uY2xpY2s9InBsYXlBdWRpb0Jvb2soKSIgY2xhc3M9ImJ0bi1ybiIgc3R5bGU9ImJhY2tncm91bmQ6ICMyOGE3NDU7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAwIDIwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyI+4pa2IFBsYXk8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fYXVkaW9fc3RvcCIgZGlzYWJsZWQgb25jbGljaz0ic3RvcEF1ZGlvQm9vaygpIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iYmFja2dyb3VuZDogI2QzMmYyZjsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDAgMjBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7Ij7ilqAgU3RvcDwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9ImF1ZGlvX3BsYXllcl9jb250YWluZXIiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogcmVsYXRpdmU7IG1hcmdpbjogMTBweCBhdXRvOyBib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJhY2tncm91bmQ6ICMwMDA7IGhlaWdodDogODVweDsgbWF4LXdpZHRoOiA5MDBweDsiPg0KICAgICAgICAgICAgPGRpdiBpZD0icGxheV9pbnN0cnVjdGlvbiIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICNmZjk5MzM7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE0cHg7IHRvcDogMTBweDsgei1pbmRleDogNTsgcG9pbnRlci1ldmVudHM6IG5vbmU7Ij4NCiAgICAgICAgICAgICAgICBDbGljayBQbGF5IG9uIHRoZSBwbGF5ZXIgYmVsb3cgdG8gc3RhcnQNCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGlmcmFtZSBpZD0iZ29vZ2xlX2F1ZGlvX2lmcmFtZSIgc3JjPSIiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjE2MCIgZnJhbWVib3JkZXI9IjAiIHN0eWxlPSJtYXJnaW4tdG9wOiAtMzVweDsiPjwvaWZyYW1lPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJhdWRpb19zdGF0dXMiIHN0eWxlPSJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjODAwMDAwOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLXRvcDogMTBweDsiPkNvbm5lY3RpbmcgdG8gQXJjaGl2ZS4uLjwvZGl2Pg0KICAgIDwvZGl2Pg0KDQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBTY3JpcHQgbG9naWMgcmVtYWlucyB0aGUgc2FtZSAocmVzdG9yZXMgdGhlIGNvbm5lY3RpbmcgbWVzc2FnZSkNCiAgICAgICAgY29uc3QgR09PR0xFX0FVRElPX1VSTCA9ICJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYnhHSTJBZ3dkc2dxWi1xRlhFeG1NTVlFeU80S19hRm0tN0gzQVNubGRLZkFUeFQ4Ry1HX3NidUhvSzQwdHF1X2JjLS9leGVjIjsNCiAgICAgICAgbGV0IGF1ZGlvTGliRGF0YSA9IFtdOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRBdWRpb0FyY2hpdmUoKSB7DQogICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fc3RhdHVzJyk7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goR09PR0xFX0FVRElPX1VSTCk7DQogICAgICAgICAgICAgICAgYXVkaW9MaWJEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tTZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fYm9va19kcm9wZG93bicpOw0KICAgICAgICAgICAgICAgIGJvb2tTZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IEJvb2sgLS08L29wdGlvbj4nOw0KICAgICAgICAgICAgICAgIGF1ZGlvTGliRGF0YS5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOw0KICAgICAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBpZHg7DQogICAgICAgICAgICAgICAgICAgIG9wdC50ZXh0Q29udGVudCA9IGl0ZW0uYm9va05hbWU7DQogICAgICAgICAgICAgICAgICAgIGJvb2tTZWwuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBzdGF0dXMuaW5uZXJUZXh0ID0gIkFyY2hpdmUgUmVhZHkuIjsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBzdGF0dXMuaW5uZXJUZXh0ID0gIkFyY2hpdmUgY29ubmVjdGlvbiBlcnJvci4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaW5pdEF1ZGlvQXJjaGl2ZSgpOw0KDQogICAgICAgIGZ1bmN0aW9uIGxvYWRBdWRpb0NoYXB0ZXJzKCkgew0KICAgICAgICAgICAgY29uc3QgaWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2Jvb2tfZHJvcGRvd24nKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGNoYXBTZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpOw0KICAgICAgICAgICAgc3RvcEF1ZGlvQm9vaygpOw0KICAgICAgICAgICAgY2hhcFNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgQ2hhcHRlciAtLTwvb3B0aW9uPic7DQogICAgICAgICAgICBpZiAoaWR4ID09PSAiIikgeyBjaGFwU2VsLmRpc2FibGVkID0gdHJ1ZTsgcmV0dXJuOyB9DQogICAgICAgICAgICBhdWRpb0xpYkRhdGFbaWR4XS5jaGFwdGVycy5mb3JFYWNoKGZpbGUgPT4gew0KICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBmaWxlLmlkOw0KICAgICAgICAgICAgICAgIG9wdC50ZXh0Q29udGVudCA9IGZpbGUubmFtZS5yZXBsYWNlKC9cLlteLy5dKyQvLCAiIik7DQogICAgICAgICAgICAgICAgY2hhcFNlbC5hcHBlbmRDaGlsZChvcHQpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBjaGFwU2VsLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVBdWRpb1VJKCkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9hdWRpb19wbGF5JykuZGlzYWJsZWQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2NoYXB0ZXJfZHJvcGRvd24nKS52YWx1ZSA9PT0gIiIpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gcGxheUF1ZGlvQm9vaygpIHsNCiAgICAgICAgICAgIGNvbnN0IGZpbGVJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19jaGFwdGVyX2Ryb3Bkb3duJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fcGxheWVyX2NvbnRhaW5lcicpOw0KICAgICAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dvb2dsZV9hdWRpb19pZnJhbWUnKTsNCiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19zdGF0dXMnKTsNCiAgICAgICAgICAgIGlmICghZmlsZUlkKSByZXR1cm47DQogICAgICAgICAgICBpZnJhbWUuc3JjID0gYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS9maWxlL2QvJHtmaWxlSWR9L3ByZXZpZXdgOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9hdWRpb19wbGF5JykuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9hdWRpb19zdG9wJykuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgIHN0YXR1cy5pbm5lclRleHQgPSAiU3RyZWFtaW5nOiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2NoYXB0ZXJfZHJvcGRvd24nKS5zZWxlY3RlZE9wdGlvbnNbMF0udGV4dDsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHN0b3BBdWRpb0Jvb2soKSB7DQogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fcGxheWVyX2NvbnRhaW5lcicpOw0KICAgICAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dvb2dsZV9hdWRpb19pZnJhbWUnKTsNCiAgICAgICAgICAgIGlmcmFtZS5zcmMgPSAiIjsNCiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9hdWRpb19zdG9wJykuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX3N0YXR1cycpLmlubmVyVGV4dCA9ICJBcmNoaXZlIFJlYWR5LiI7DQogICAgICAgICAgICB1cGRhdGVBdWRpb1VJKCk7DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxkaXYgaWQ9InZpZGVvLWFyY2hpdmUtYm94IiBjbGFzcz0ibW1wdC11bmlmaWVkLWJveCIgc3R5bGU9ImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgd2lkdGg6IDEwMCU7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7IHBhZGRpbmc6IDI1cHg7IGJvcmRlci1yYWRpdXM6IDEycHg7IGJhY2tncm91bmQ6ICNmZmY7IG1hcmdpbjogMTVweCAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsiPg0KDQogICAgICAgIDxoMiBzdHlsZT0iY29sb3I6ICM4MDAwMDA7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAyNHB4OyBtYXJnaW4tdG9wOiAwOyBtYXJnaW4tYm90dG9tOiAxNXB4OyI+DQogICAgICAgICAgICDwn46sIFZpZGVvcyBGcm9tIE1NUFQgQXJjaGl2ZXMNCiAgICAgICAgPC9oMj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjMDAwOyBmb250LXNpemU6IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbTogMTVweDsgbGluZS1oZWlnaHQ6IDEuNjsiPg0KICAgICAgICAgICAgPHN0cm9uZyBzdHlsZT0iY29sb3I6ICM4MDAwMDA7IGZvbnQtc2l6ZTogMTdweDsiPk5vdGU6PC9zdHJvbmc+DQogICAgICAgICAgICA8c3Ryb25nIHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1zaXplOiAxNnB4OyI+U2VsZWN0IHRoZSByZXF1aXJlZCBlcGlzb2RlIGZyb20gdGhlIHBsYXlsaXN0IGljb24gYXQgdGhlIHRvcC1yaWdodCBjb3JuZXIgb2YgdGhlIHZpZGVvIHdpbmRvdy48L3N0cm9uZz4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxNXB4OyBmbGV4LXdyYXA6IHdyYXA7Ij4NCiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBmb250LXNpemU6IDE2cHg7Ij5Ub3BpYzo8L2xhYmVsPg0KICAgICAgICAgICAgPHNlbGVjdCBpZD0idG9waWNfc2VsZWN0IiBvbmNoYW5nZT0iUHJlcGFyZVZpZGVvKCkiIHN0eWxlPSJ3aWR0aDogMzIwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyOiAxcHggc29saWQgIzgwMDAwMDsgYm9yZGVyLXJhZGl1czogNXB4OyBwYWRkaW5nOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiAjZmZmOyI+DQogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBMb2FkaW5nIEFyY2hpdmUgLS08L29wdGlvbj4NCiAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJMYXVuY2hJZnJhbWUoKSIgc3R5bGU9ImJhY2tncm91bmQ6ICMyOGE3NDU7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMHB4IDMwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNXB4OyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOyI+4pa2IFBsYXk8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9zdG9wIiBvbmNsaWNrPSJTdG9wSWZyYW1lKCkiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBiYWNrZ3JvdW5kOiAjZGMzNTQ1OyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMTBweCAzMHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTVweDsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTsiPuKcliBTdG9wPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9IkRpdlZpZFRpdGxlMSIgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDIwcHg7IG1hcmdpbi1ib3R0b206IDVweDsgbWluLWhlaWdodDogMjZweDsiPlJlYWR5LjwvZGl2Pg0KICAgICAgICA8ZGl2IGlkPSJEaXZUaW1lciIgc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsgY29sb3I6IGJsdWU7IHRleHQtYWxpZ246IGNlbnRlcjsgaGVpZ2h0OiAyMHB4OyBmb250LXdlaWdodDogYm9sZDsiPjwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9InZpZF9jb250YWluZXIiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW46IDIwcHggYXV0byAwIGF1dG87IHdpZHRoOiAxMDAlOyBtYXgtd2lkdGg6IDU2MHB4OyBhc3BlY3QtcmF0aW86IDE2Lzk7IGJhY2tncm91bmQ6ICMwMDA7IGJvcmRlcjogNHB4IHNvbGlkICM4MDAwMDA7IGJvcmRlci1yYWRpdXM6IDhweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYm94LXNoYWRvdzogMCA2cHggMThweCByZ2JhKDAsMCwwLDAuMyk7Ij4NCiAgICAgICAgICAgIDxpZnJhbWUgaWQ9Imlmcl9tYWluIiBuYW1lPSJpZnJfbWFpbiIgc3JjPSJhYm91dDpibGFuayIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZnJhbWVib3JkZXI9IjAiDQogICAgICAgICAgICAgICAgICAgIGFsbG93PSJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgY2xpcGJvYXJkLXdyaXRlOyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlOyB3ZWItc2hhcmUiDQogICAgICAgICAgICAgICAgICAgIHJlZmVycmVycG9saWN5PSJzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgdmFyIFRhcmdldFVybCA9ICIiOw0KICAgICAgICB2YXIgYXJjaGl2ZURhdGEgPSBbXTsNCiAgICAgICAgY29uc3QgaWZyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lmcl9tYWluJyk7DQogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRfY29udGFpbmVyJyk7DQogICAgICAgIGNvbnN0IHN0b3BCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3N0b3AnKTsNCiAgICAgICAgY29uc3QgREFUQV9TT1VSQ0UgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9qa2tic2JoemRkandyam56czgwZnUvVmlkZW9zLnR4dD9ybGtleT1zNHVjaGlwNG90YnRuNHc4N3c4eDl6aGtqJmRsPTEiOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIExvYWRBcmNoaXZlKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKERBVEFfU09VUkNFKTsNCiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi0xNmxlJykuZGVjb2RlKGJ1ZmZlcik7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnJlcGxhY2UoL15cdUZFRkYvLCAnJykuc3BsaXQoL1xyP1xuLykuZmlsdGVyKGwgPT4gbC5pbmNsdWRlcygnLCcpKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3BpY19zZWxlY3QnKTsNCiAgICAgICAgICAgICAgICBzZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvb3NlIGEgVG9waWMgLS08L29wdGlvbj4nOw0KDQogICAgICAgICAgICAgICAgbGluZXMuZm9yRWFjaCgobGluZSwgaSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJywnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDIpIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbFVybCA9IHBhcnRzWzFdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdElkID0gZnVsbFVybC5tYXRjaCgvWz8mXWxpc3Q9KFteJl0rKS8pPy5bMV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpVG9rZW4gPSBmdWxsVXJsLm1hdGNoKC9bPyZdc2k9KFteJl0rKS8pPy5bMV0gfHwgIlZ5M0Z3VWp0U3RmUThYNnAiOw0KDQogICAgICAgICAgICAgICAgICAgIGFyY2hpdmVEYXRhLnB1c2goeyBuYW1lOiBwYXJ0c1swXS50cmltKCksIGlkOiBsaXN0SWQsIHNpOiBzaVRva2VuIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gaTsgb3B0LnRleHRDb250ZW50ID0gcGFydHNbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBzZWwuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VmlkVGl0bGUxJykuaW5uZXJUZXh0ID0gIkRhdGEgTG9hZCBFcnJvciI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBQcmVwYXJlVmlkZW8oKSB7DQogICAgICAgICAgICBjb25zdCBpZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9waWNfc2VsZWN0JykudmFsdWU7DQogICAgICAgICAgICBpZiAoaWR4ID09PSAiIikgeyBUYXJnZXRVcmwgPSAiIjsgcmV0dXJuOyB9DQogICAgICAgICAgICBjb25zdCBpdGVtID0gYXJjaGl2ZURhdGFbaWR4XTsNCiAgICAgICAgICAgIFRhcmdldFVybCA9ICJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC92aWRlb3Nlcmllcz9zaT0iICsgaXRlbS5zaSArICImbGlzdD0iICsgaXRlbS5pZCArICImYXV0b3BsYXk9MSI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VmlkVGl0bGUxJykuaW5uZXJUZXh0ID0gaXRlbS5uYW1lOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gTGF1bmNoSWZyYW1lKCkgew0KICAgICAgICAgICAgaWYgKFRhcmdldFVybCA9PT0gIiIpIHsgYWxlcnQoIlBsZWFzZSBzZWxlY3QgYSB0b3BpYyIpOyByZXR1cm47IH0NCiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIHN0b3BCdG4uc3R5bGUuZGlzcGxheSA9ICJpbmxpbmUtYmxvY2siOw0KICAgICAgICAgICAgaWZyLnNyYyA9ICJhYm91dDpibGFuayI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VGltZXInKS5pbm5lclRleHQgPSAiRXN0YWJsaXNoaW5nIENvbm5lY3Rpb24uLi4iOw0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgaWZyLnNyYyA9IFRhcmdldFVybDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VGltZXInKS5pbm5lclRleHQgPSAiIjsNCiAgICAgICAgICAgIH0sIDEwMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gU3RvcElmcmFtZSgpIHsNCiAgICAgICAgICAgIGlmci5zcmMgPSAiYWJvdXQ6YmxhbmsiOw0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBzdG9wQnRuLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VGltZXInKS5pbm5lclRleHQgPSAiUGxheWVyIFN0b3BwZWQuIjsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRGl2VGltZXInKS5pbm5lclRleHQgPSAiIjsgfSwgMjAwMCk7DQogICAgICAgIH0NCg0KICAgICAgICBMb2FkQXJjaGl2ZSgpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPGRpdiBjbGFzcz0ibW1wdC11bmlmaWVkLWJveCIgaWQ9InBhbmNoYW5nX3NlY3Rpb24iIHN0eWxlPSJib3JkZXItY29sb3I6ICNmZjk5MzM7Ij4NCiAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiAyNHB4OyBjb2xvcjogIzgwMDAwMDsgZm9udC1mYW1pbHk6ICdHZW9yZ2lhJywgc2VyaWY7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tYm90dG9tOiAyMHB4OyI+DQogICAgICAgICAgICDwn5WJ77iPIFRvZGF5J3MgUGFuY2hhbmcNCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0icGFuY2hhbmdfY29udGVudCI+DQogICAgICAgICAgICA8ZGl2IGlkPSJwYW5jaGFuZ19sb2FkaW5nIiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjNjY2OyI+RmV0Y2hpbmcgQWxtYW5hYy4uLjwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGlkPSJwYW5jaGFuZ19kaXNwbGF5IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPg0KICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iZGF0ZS10YWJsZSIgc3R5bGU9Im1hcmdpbjogMCBhdXRvIDIwcHggYXV0bzsgbWF4LXdpZHRoOiA2MDBweDsgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsiPg0KICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGlkPSJwYW5faGVhZGVyX2RhdGUiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjODAwMDAwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGZvbnQtc2l6ZTogMThweDsiPjwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDI4MHB4LCAxZnIpKTsgZ2FwOiAxNXB4OyB0ZXh0LWFsaWduOiBsZWZ0OyI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbi1jYXJkIiBzdHlsZT0iYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmZGU2OyBwYWRkaW5nOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY5OTMzOyBtYXJnaW4tYm90dG9tOiA4cHg7Ij4xLiBUSVRISTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJ0YWJsZV90aXRoaSIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTogMTNweDsiPjwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbi1jYXJkIiBzdHlsZT0iYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmZGU2OyBwYWRkaW5nOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY5OTMzOyBtYXJnaW4tYm90dG9tOiA4cHg7Ij4yLiBOQUtTSEFUUkE8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBpZD0idGFibGVfbmFrc2hhdHJhIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjMuIFlPR0E8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBpZD0idGFibGVfeW9nYSIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTogMTNweDsiPjwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbi1jYXJkIiBzdHlsZT0iYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmZGU2OyBwYWRkaW5nOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY5OTMzOyBtYXJnaW4tYm90dG9tOiA4cHg7Ij40LiBLQVJBTkE8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBpZD0idGFibGVfa2FyYW5hIiBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOiAxM3B4OyI+PC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFuLWNhcmQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmZkZTY7IHBhZGRpbmc6IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZjk5MzM7IG1hcmdpbi1ib3R0b206IDhweDsiPjUuIFZBUkEgKERheSk8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImRpc3BsYXlfdmFyYSIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHBhZGRpbmc6IDVweDsiPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgLy8gRW5zdXJlIHRoaXMgaXMgYXQgdGhlIHRvcCBvZiB5b3VyIHNjcmlwdA0KICAgICAgICBjb25zdCBQQU5DSEFOR19CQVNFID0gJy9QYW5jaGFuZyc7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZERhaWx5UGFuY2hhbmcoKSB7DQogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgeXl5eSA9IG5vdy5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgY29uc3QgbW0gPSBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgICAgICAgY29uc3QgZGQgPSBTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgIGNvbnN0IHRvZGF5SVNPID0gYCR7eXl5eX0tJHttbX0tJHtkZH1gOw0KDQogICAgICAgICAgICBjb25zdCBkYWlseVBhdGggPSBgJHtQQU5DSEFOR19CQVNFfS8ke3l5eXl9LyR7bW19LyR7eXl5eX0ke21tfSR7ZGR9Lmh0bWxgOw0KDQogICAgICAgICAgICBjb25zdCBrYWFsYVRpbWluZ3MgPSB7DQogICAgICAgICAgICAgICAgJ1N1bmRheSc6IHsgcmFodTogJzQ6MzAgcG0gdG8gNjowMCBwbScsIGd1bGlrYTogJzM6MDAgcG0gdG8gNDozMCBwbScsIHlhbTogJzEyOjAwIHBtIHRvIDE6MzAgcG0nIH0sDQogICAgICAgICAgICAgICAgJ01vbmRheSc6IHsgcmFodTogJzc6MzAgYW0gdG8gOTowMCBhbScsIGd1bGlrYTogJzE6MzAgcG0gdG8gMzowMCBwbScsIHlhbTogJzEwOjMwIGFtIHRvIDEyOjAwIHBtJyB9LA0KICAgICAgICAgICAgICAgICdUdWVzZGF5JzogeyByYWh1OiAnMzowMCBwbSB0byA0OjMwIHBtJywgZ3VsaWthOiAnMTI6MDAgcG0gdG8gMTozMCBwbScsIHlhbTogJzk6MDAgYW0gdG8gMTA6MzAgYW0nIH0sDQogICAgICAgICAgICAgICAgJ1dlZG5lc2RheSc6IHsgcmFodTogJzEyOjAwIHBtIHRvIDE6MzAgcG0nLCBndWxpa2E6ICcxMDozMCBhbSB0byAxMjowMCBwbScsIHlhbTogJzc6MzAgYW0gdG8gOTowMCBhbScgfSwNCiAgICAgICAgICAgICAgICAnVGh1cnNkYXknOiB7IHJhaHU6ICcxOjMwIHBtIHRvIDM6MDAgcG0nLCBndWxpa2E6ICc5OjAwIGFtIHRvIDEwOjMwIGFtJywgeWFtOiAnNjowMCBhbSB0byA3OjMwIGFtJyB9LA0KICAgICAgICAgICAgICAgICdGcmlkYXknOiB7IHJhaHU6ICcxMDozMCBhbSB0byAxMjowMCBwbScsIGd1bGlrYTogJzc6MzAgYW0gdG8gOTowMCBhbScsIHlhbTogJzM6MDAgcG0gdG8gNDozMCBwbScgfSwNCiAgICAgICAgICAgICAgICAnU2F0dXJkYXknOiB7IHJhaHU6ICc5OjAwIGFtIHRvIDEwOjMwIGFtJywgZ3VsaWthOiAnNjowMCBhbSB0byA3OjMwIGFtJywgeWFtOiAnMTozMCBwbSB0byAzOjAwIHBtJyB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIFN1bnJpc2UvU3Vuc2V0IGZvciBDaGVubmFpIGZyb20gT3Blbi1NZXRlbyBBUEkNCiAgICAgICAgICAgICAgICBsZXQgc3VuSW5mbyA9ICJMb2FkaW5nIHRpbWVzLi4uIjsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW5SZXMgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkub3Blbi1tZXRlby5jb20vdjEvZm9yZWNhc3Q/bGF0aXR1ZGU9MTMuMDgyNyZsb25naXR1ZGU9ODAuMjcwNyZkYWlseT1zdW5yaXNlLHN1bnNldCZ0aW1lem9uZT1hdXRvJnN0YXJ0X2RhdGU9JHt0b2RheUlTT30mZW5kX2RhdGU9JHt0b2RheUlTT31gKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VuRGF0YSA9IGF3YWl0IHN1blJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdFRpbWUgPSAodCkgPT4gbmV3IERhdGUodCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdlbi1JTicsIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JywgaG91cjEyOiB0cnVlIH0pOw0KICAgICAgICAgICAgICAgICAgICBzdW5JbmZvID0gYFN1bnJpc2UgaXMgYXQgPGI+JHtmb3JtYXRUaW1lKHN1bkRhdGEuZGFpbHkuc3VucmlzZVswXSl9PC9iPiBhbmQgU3Vuc2V0IGlzIGF0IDxiPiR7Zm9ybWF0VGltZShzdW5EYXRhLmRhaWx5LnN1bnNldFswXSl9PC9iPmA7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgICAgIHN1bkluZm8gPSAiU3VucmlzZSBhbmQgU3Vuc2V0IGRhdGEgY3VycmVudGx5IHVuYXZhaWxhYmxlIjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBEcm9wYm94IEZldGNoIExvZ2ljDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5QYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHRva2VuUGFyYW1zIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUb2tlbiA9IHRva2VuRGF0YS5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZGFpbHlQYXRoIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcigiU3luY2luZy4uLiIpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd0RhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSByYXdEYXRhLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpOw0KDQogICAgICAgICAgICAgICAgLy8gLS0tIENPTVBBQ1QgSEVBREVSIChOTyBJQ09OKSAtLS0NCiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuX2hlYWRlcl9kYXRlJyk7DQogICAgICAgICAgICAgICAgY29uc3QgdmFyYU5hbWUgPSBwYXJ0c1sxXSA/IHBhcnRzWzFdLnNwbGl0KCc6JylbMF0udHJpbSgpIDogIiI7DQoNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZCA9ICJsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjODAwMDAwIDAlLCAjNGEwMDAwIDEwMCUpIjsNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICIxNXB4IjsNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gIjEwcHggMTBweCAwIDAiOw0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSAiY2VudGVyIjsNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuYm9yZGVyQm90dG9tID0gIjNweCBzb2xpZCAjRkZENzAwIjsNCg0KICAgICAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGJhc2VsaW5lOyBnYXA6IDE1cHg7IG1hcmdpbi1ib3R0b206IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDI2cHg7IGZvbnQtd2VpZ2h0OiA4MDA7IGNvbG9yOiAjRkZENzAwOyB0ZXh0LXNoYWRvdzogMnB4IDJweCA0cHggcmdiYSgwLDAsMCwwLjUpOyI+JHtwYXJ0c1swXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMjBweDsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICNGRkZGRkY7IGJvcmRlci1sZWZ0OiAxcHggc29saWQgI0ZGRDcwMDsgcGFkZGluZy1sZWZ0OiAxNXB4OyI+JHt2YXJhTmFtZX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogMnB4IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNGRkQ3MDA7IGJvcmRlci1yYWRpdXM6IDIwcHg7IGZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjRkZENzAwOyBsZXR0ZXItc3BhY2luZzogMC41cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUSU1FIFNQRUNJRklFRCBBUkUgRU5EIFRJTUUgSU4gSVNUDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBUQUJMRVMgUE9QVUxBVElPTiAtLS0NCiAgICAgICAgICAgICAgICBjb25zdCBmaWxsVGFibGUgPSAoaWQsIHN0YXJ0KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRibCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YmwpIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgdGJsLmlubmVySFRNTCA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjID0gcGFydHNbc3RhcnQgKyBpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWMgJiYgcmVjLmluY2x1ZGVzKCc6JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gcmVjLnN1YnN0cmluZygwLCByZWMuaW5kZXhPZignOicpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IHJlYy5zdWJzdHJpbmcocmVjLmluZGV4T2YoJzonKSArIDEpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gIiIgJiYgKHRpbWUgPT09ICIiIHx8IHRpbWUgPT09ICItLTotLSIpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcm93ID0gdGJsLmluc2VydFJvdygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5pbm5lckhUTUwgPSBgPHRkIHN0eWxlPSJmb250LXdlaWdodDo3MDA7IHBhZGRpbmc6NnB4IDRweDsgY29sb3I6IzMzMzsgZm9udC1zaXplOjE0cHg7IHdpZHRoOjY1JTsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPiR7bmFtZX08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgY29sb3I6I2QzMmYyZjsgcGFkZGluZzo2cHggNHB4OyBmb250LWZhbWlseTptb25vc3BhY2U7IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxNXB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+JHt0aW1lfTwvdGQ+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX3RpdGhpJywgMyk7DQogICAgICAgICAgICAgICAgZmlsbFRhYmxlKCd0YWJsZV9uYWtzaGF0cmEnLCA3KTsNCiAgICAgICAgICAgICAgICBmaWxsVGFibGUoJ3RhYmxlX3lvZ2EnLCAxMSk7DQogICAgICAgICAgICAgICAgZmlsbFRhYmxlKCd0YWJsZV9rYXJhbmEnLCAxNSk7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcGxheV92YXJhJykuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICNmZmY5YzQ7IGJvcmRlcjogMnB4IHNvbGlkICNGRkQ3MDA7IHBhZGRpbmc6IDhweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjb2xvcjogIzgwMDAwMDsgZm9udC1zaXplOiAyMnB4OyBmb250LXdlaWdodDogOTAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4ke3ZhcmFOYW1lfTwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gSElORFUgQ0FMRU5EQVIgJiBLQUFMQVMgLS0tDQogICAgICAgICAgICAgICAgY29uc3QgdG90YWxQYXJ0cyA9IHBhcnRzLmxlbmd0aDsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxMdW5hciA9IHBhcnRzW3RvdGFsUGFydHMgLSAyXSB8fCAnLS0nOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbFNvbGFyID0gcGFydHNbdG90YWxQYXJ0cyAtIDNdIHx8ICctLSc7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsTWFsYXlhbGFtID0gcGFydHNbdG90YWxQYXJ0cyAtIDRdIHx8ICctLSc7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsVGFtaWwgPSBwYXJ0c1t0b3RhbFBhcnRzIC0gNV0gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB0b2RheUthYWxhID0ga2FhbGFUaW1pbmdzW3ZhcmFOYW1lXSB8fCB7IHJhaHU6ICctLScsIGd1bGlrYTogJy0tJywgeWFtOiAnLS0nIH07DQoNCiAgICAgICAgICAgICAgICBsZXQgY2FsZW5kYXJEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGluZHVfY2FsZW5kYXJfc2VjdGlvbicpOw0KICAgICAgICAgICAgICAgIGlmICghY2FsZW5kYXJEaXYpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXJEaXYuaWQgPSAnaGluZHVfY2FsZW5kYXJfc2VjdGlvbic7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5jaGFuZ19kaXNwbGF5JykuYXBwZW5kQ2hpbGQoY2FsZW5kYXJEaXYpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNhbGVuZGFyRGl2LmlubmVySFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICM4MDAwMDA7IGNvbG9yOiAjRkZENzAwOyBwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTZweDsgbWFyZ2luLXRvcDogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjRkZENzAwOyI+SGluZHUgQ2FsZW5kYXIgZm9yIFRvZGF5PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiAjZmZmZGU3OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBtYXJnaW4tYm90dG9tOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRhbWlsPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dmFsVGFtaWx9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5NYWxheWFsYW08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxNYWxheWFsYW19PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5Tb2xhcjwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDo4MDA7Ij4ke3ZhbFNvbGFyfTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+THVuYXI8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxMdW5hcn08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjODAwMDAwOyBjb2xvcjogI0ZGRDcwMDsgcGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE2cHg7IGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOyBib3JkZXItYm90dG9tOiAycHggc29saWQgI0ZGRDcwMDsiPlRvZGF5J3MgS2FhbGFzPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiAjZmZmZGU3OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBtYXJnaW4tYm90dG9tOiAxNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlJhaHUgS2FhbGE8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6I2QzMmYyZjsgZm9udC13ZWlnaHQ6ODAwOyI+JHt0b2RheUthYWxhLnJhaHV9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5HdWxpa2EgS2FhbGE8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6I2QzMmYyZjsgZm9udC13ZWlnaHQ6ODAwOyI+JHt0b2RheUthYWxhLmd1bGlrYX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPllhbWFuZ2FkYTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojZDMyZjJmOyBmb250LXdlaWdodDo4MDA7Ij4ke3RvZGF5S2FhbGEueWFtfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzRhMDAwMCwgIzgwMDAwMCwgIzRhMDAwMCk7IGNvbG9yOiAjRkZENzAwOyBwYWRkaW5nOiAxMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjIpOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVG9kYXkgaW4gQ2hlbm5haTogJHtzdW5JbmZvfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuY2hhbmdfbG9hZGluZycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbmNoYW5nX2Rpc3BsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlN5bmMgRmFpbGVkIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIENhbGwgaXQgYXQgdGhlIHZlcnkgYm90dG9tIG9mIHlvdXIgc2NyaXB0IHRhZ3MNCiAgICAgICAgbG9hZERhaWx5UGFuY2hhbmcoKTsNCg0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAubHVuYXItc2VjdGlvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAubHVuYXItaGVhZCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgLyogTWF0Y2hlcyB5b3VyIGgzIGZvbnQtc2l6ZSBleGFjdGx5ICovDQogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2VlZTsNCiAgICAgICAgICAgIG1hcmdpbjogMCAwIDE1cHg7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLWZsZXggew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMTBweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci1pdGVtIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICAvKiBCcmlnaHQgQ29udHJhc3QgVGhlbWU6IERlZXAgTmF2eSBiYWNrZ3JvdW5kIHdpdGggR29sZC9XaGl0ZSB0ZXh0ICovDQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDAzMzY2Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggNHB4Ow0KICAgICAgICAgICAgbWluLWhlaWdodDogOTBweDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMTBweCByZ2JhKDAsMCwwLDAuNSk7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmx1bmFyLWl0ZW0gYiB7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgICAgIGNvbG9yOiAjZjBhZDRlOyAvKiBCcmlnaHQgR29sZCBmb3IgSGVhZGVyICovDQogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4Ow0KICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLXRleHQgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsgLyogSGlnaCBDb250cmFzdCBXaGl0ZSAqLw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci10aW1lIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMDBmZmZmOyAvKiBDeWFuIGZvciBUaW1pbmdzIHRvIHN0YW5kIG91dCAqLw0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9Imx1bmFyLXNlY3Rpb24iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1oZWFkIj7wn4yZIEhpbmR1IEx1bmFyIENhbGVuZGFyPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWZsZXgiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItaXRlbSI+DQogICAgICAgICAgICAgICAgPGI+QW1hdmFzeWE8L2I+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG4tMDEiIGNsYXNzPSJsdW5hci10ZXh0Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWl0ZW0iPg0KICAgICAgICAgICAgICAgIDxiPlBhdXJuaW1hPC9iPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImxuLTAyIiBjbGFzcz0ibHVuYXItdGV4dCI+U3luY2luZy4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1pdGVtIj4NCiAgICAgICAgICAgICAgICA8Yj5HcmFoYW5hPC9iPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImxuLTAzIiBjbGFzcz0ibHVuYXItdGV4dCI+U3luY2luZy4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEhpbmR1THVuYXIoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIG5vdy5zZXRIb3VycygwLCAwLCAwLCAwKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldHMgPSBbDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdsbi0wMScsIGZpbGU6ICcvUGFuY2hhbmcvSGluZHVMdW5hckNhbGVuZGFyLzAuMS5odG1sJywgdHlwZTogJ2RvdWJsZScgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2xuLTAyJywgZmlsZTogJy9QYW5jaGFuZy9IaW5kdUx1bmFyQ2FsZW5kYXIvMC4yLmh0bWwnLCB0eXBlOiAnZG91YmxlJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnbG4tMDMnLCBmaWxlOiAnL1BhbmNoYW5nL0hpbmR1THVuYXJDYWxlbmRhci8wLjMuaHRtbCcsIHR5cGU6ICdzaW5nbGUnIH0NCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgZm9yIChjb25zdCB4IG9mIHRhcmdldHMpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogeC5maWxlIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGggPSBhd2FpdCByZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFN0cmlwIHRhZ3MgYnV0IGtlZXAgc3RydWN0dXJhbCBzZXBhcmF0aW9uDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVGV4dCA9IGgucmVwbGFjZSgvPFtePl0qPi9nLCAnfCcpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gY2xlYW5UZXh0LnNwbGl0KCd8JykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihzID0+IHMgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgb3V0ID0gIk5vIFVwY29taW5nIjsNCg0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3NbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gcm93Lm1hdGNoKC8oXGR7Mn0pWy0vOl0oXGR7Mn18W2EtekEtWl0rKVstLzpdKFxkezR9KS8pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4obVsyXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHQgPSBuZXcgRGF0ZShtWzFdICsgIiAiICsgbVsyXSArICIgIiArIG1bM10pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0ID0gbmV3IERhdGUoYCR7bVszXX0tJHttWzJdfS0ke21bMV19YCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR0ID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC50eXBlID09PSAnZG91YmxlJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0ID0gYDxzcGFuPiR7cm93fTwvc3Bhbj48c3BhbiBjbGFzcz0ibHVuYXItdGltZSI+JHtyb3dzW2kgKyAxXSB8fCAnJ308L3NwYW4+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dCA9IGA8c3Bhbj4ke3Jvd308L3NwYW4+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoeC5pZCkuaW5uZXJIVE1MID0gb3V0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5sb2coIkx1bmFyIEVycm9yIiwgZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkSGluZHVMdW5hcigpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAubmF2LXNlY3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1tYWluLWhlYWQgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjJweDsgLyogU2xpZ2h0bHkgbGFyZ2VyIGZvciB0aGUgaWNvbiAqLw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IGRvdWJsZSAjODAwMDAwOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWdyaWQgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogOHB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1jb2wgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIG1pbi13aWR0aDogMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtY29sLXRpdGxlIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS4yOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiA0MnB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJnLXNoeWFtYWxhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0YjAwODI7DQogICAgICAgIH0NCg0KICAgICAgICAuYmctY2hhaXRyYSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYjIyMjIyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJnLWFzYWRoYSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDA2NDAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJnLXNoYXJhZGhhIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZjhjMDA7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOWYwOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCA0cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLm5hdi1ib3ggLmQtZGF0ZSB7DQogICAgICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7DQogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogM3B4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWJveCAuZC1kYXkgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjMDAwMGZmOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtZm9vdGVyIHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDE1cHg7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogMTJweDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgICAgIGdhcDogMTJweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmV2ZW50LXBpbGwgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjRmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMDMzNjY7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDE4cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBmb250LXNpemU6IDE1cHg7DQogICAgICAgICAgICBjb2xvcjogIzAwMDsNCiAgICAgICAgfQ0KDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA4MDBweCkgew0KICAgICAgICAgICAgLm5hdi1ncmlkIHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBncmlkOw0KICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsNCiAgICAgICAgICAgICAgICBnYXA6IDEwcHg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0ibmF2LXNlY3Rpb24iPg0KICAgICAgICA8ZGl2IGlkPSJuYXYteWVhci10aXRsZSIgY2xhc3M9Im5hdi1tYWluLWhlYWQiPvCfqrcgTmF2YXJhdGhyaTwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9Im5hdi1ncmlkIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wtdGl0bGUgYmctc2h5YW1hbGEiPlNoeWFtYWxhPGJyPk5hdmFyYXRocmk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb2wtc2h5YW1hbGEiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sLXRpdGxlIGJnLWNoYWl0cmEiPkNoYWl0cmE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1jaGFpdHJhIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1hc2FkaGEiPkFzYWRoYTxicj5OYXZhcmF0aHJpPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iY29sLWFzYWRoYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wtdGl0bGUgYmctc2hhcmFkaGEiPlNoYXJhZGhhPGJyPk5hdmFyYXRocmk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb2wtc2hhcmFkaGEiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9Im5hdi1mb290ZXIiPg0KICAgICAgICAgICAgPGRpdiBpZD0iZXYtdmFzYW50aGEiIGNsYXNzPSJldmVudC1waWxsIj5Mb2FkaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJldi1heXVkaGEiIGNsYXNzPSJldmVudC1waWxsIj5Mb2FkaW5nLi4uPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJldi12aWpheWEiIGNsYXNzPSJldmVudC1waWxsIj5Mb2FkaW5nLi4uPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZE5hdmFyYXRocmkoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogcCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdCA9IGQuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY3VyWWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXYteWVhci10aXRsZScpLmlubmVySFRNTCA9IGDwn6q3IE5hdmFyYXRocmkgLSAke2N1clllYXJ9YDsNCg0KICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldE5hdkxpbmVzKHBhdGgpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogcGF0aCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHh0LnJlcGxhY2UoLzxiclxzKlwvPz4vZ2ksICdcbicpLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpLnNwbGl0KCdcbicpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDUpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZ3MgPSBbDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb2wtc2h5YW1hbGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvMC4yLmh0bWwnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb2wtY2hhaXRyYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS8wLjMuaHRtbCcgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbC1hc2FkaGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvMC40Lmh0bWwnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb2wtc2hhcmFkaGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvMC4xLmh0bWwnIH0NCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb25mIG9mIGNvbmZpZ3MpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBhd2FpdCBnZXROYXZMaW5lcyhjb25mLnBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaHRtbCA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZXNbaV0uaW5jbHVkZXMoY3VyWWVhcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJuYXYtYm94Ij48c3BhbiBjbGFzcz0iZC1kYXRlIj4ke2xpbmVzW2ldfTwvc3Bhbj48c3BhbiBjbGFzcz0iZC1kYXkiPiR7bGluZXNbaSArIDFdIHx8ICcnfTwvc3Bhbj48L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25mLmlkKS5pbm5lckhUTUwgPSBodG1sIHx8ICI8ZGl2IHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoxMHB4OyBmb250LXNpemU6MTFweDsnPk5vIERhdGE8L2Rpdj4iOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGV2RmlsZXMgPSBbDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldi12YXNhbnRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS9FdmVudHMyLmh0bWwnLCBtYXRjaDogJ1ZBU0FOVEhBIFBBTkNIQU1JJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZXYtYXl1ZGhhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpL0V2ZW50czMuaHRtbCcsIG1hdGNoOiAnQVlVREhBIFBPT0pBJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZXYtdmlqYXlhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpL0V2ZW50czQuaHRtbCcsIG1hdGNoOiAnVklKQVlBIERBU0FNSScgfQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2IG9mIGV2RmlsZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZXYucGF0aCB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHR4dC5yZXBsYWNlKC9cbi9nLCAnJykuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZERhdGUgPSAiTi9BIjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRJZHggPSBwYXJ0cy5maW5kSW5kZXgocCA9PiBwLmluY2x1ZGVzKGV2Lm1hdGNoKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChzdGFydElkeCAhPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBzdGFydElkeDsgaiA8IHBhcnRzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzW2pdLmluY2x1ZGVzKGN1clllYXIpKSB7IGZvdW5kRGF0ZSA9IHBhcnRzW2pdOyBicmVhazsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGV2LmlkKS5pbm5lckhUTUwgPSBgPGI+JHtldi5tYXRjaH08L2I+IDogJHtmb3VuZERhdGV9YDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkTmF2YXJhdGhyaSgpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAuZ3VydS1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LWhlYWQgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOw0KICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTVweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuZ3VydS1saXN0IHsNCiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDQwMHB4Ow0KICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LXJvdy1pdGVtIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDMzNjY7DQogICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDZweCBzb2xpZCAjZjBhZDRlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LWRhdGUgew0KICAgICAgICAgICAgY29sb3I6ICNmMGFkNGU7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM0MTVhNzc7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtZXZlbnQtbGluZSB7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDsNCiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogU3R5bGUgZm9yIHRoZSBkeW5hbWljIEd1cnUgTGlua3MgKi8NCiAgICAgICAgLmd1cnUtbGluayB7DQogICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsNCiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOw0KICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiAjZjBhZDRlOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5ndXJ1LWxpbms6aG92ZXIgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjZjBhZDRlOw0KICAgICAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJndXJ1LXNlY3Rpb24iPg0KICAgICAgICA8ZGl2IGNsYXNzPSJndXJ1LWhlYWQiPvCflYnvuI8gR3VydSBBcmFkaGFuYXMgYW5kIEpheWFudGhpczwvZGl2Pg0KICAgICAgICA8ZGl2IGlkPSJndXJ1LWV2ZW50LWxpc3QiIGNsYXNzPSJndXJ1LWxpc3QiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MjBweDsgY29sb3I6IzY2NjsiPlN5bmNpbmcuLi48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCAyLWRpZ2l0IG51bWJlciBhbmQgY3JlYXRlIHRoZSBsaW5rDQogICAgICAgIGZ1bmN0aW9uIHdyYXBXaXRoR3VydUxpbmsodGV4dCkgew0KICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cZHsyfS8pOw0KICAgICAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICAgICAgY29uc3QgbnVtID0gbWF0Y2hbMF07DQogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vbXlsYWlwZXJpeWF2YS5naXRodWIuaW8vQWNoYXJ5YS9BJHtudW19Lmh0bWxgOw0KICAgICAgICAgICAgICAgIHJldHVybiBgPGEgaHJlZj0iJHt1cmx9IiB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9Imd1cnUtbGluayI+JHt0ZXh0fTwvYT5gOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRleHQ7DQogICAgICAgIH0NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkR3VydUFyYWRoYW5hcygpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgbm93LnNldEhvdXJzKDAsIDAsIDAsIDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvUGFuY2hhbmcvR3VydS9FdmVudHMuaHRtbCcgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd1RleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgY2xlYW5UZXh0ID0gcmF3VGV4dC5yZXBsYWNlKC88W14+XSo+L2csICdcbicpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY2xlYW5UZXh0LnNwbGl0KCdcbicpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDApOw0KDQogICAgICAgICAgICAgICAgbGV0IGdyb3VwZWRFdmVudHMgPSB7fTsNCg0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudExpbmUgPSBsaW5lc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbSA9IGN1cnJlbnRMaW5lLm1hdGNoKC8oXGR7Mn0pLShcZHsyfSktKFxkezR9KS8pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChtKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudERhdGVPYmogPSBuZXcgRGF0ZShwYXJzZUludChtWzNdKSwgcGFyc2VJbnQobVsyXSkgLSAxLCBwYXJzZUludChtWzFdKSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudERhdGVPYmogPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGN1cnJlbnRMaW5lOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IGxpbmVzW2kgKyAxXSB8fCAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ3JvdXBlZEV2ZW50c1tkYXRlU3RyXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cGVkRXZlbnRzW2RhdGVTdHJdID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwZWRFdmVudHNbZGF0ZVN0cl0ucHVzaChkZXRhaWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgbGV0IGxpc3RIdG1sID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIGluIGdyb3VwZWRFdmVudHMpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgdGhlIGxpbmsgd3JhcHBlciB0byBlYWNoIGV2ZW50IGxpbmUNCiAgICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50c0h0bWwgPSBncm91cGVkRXZlbnRzW2RhdGVdDQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGV2dCA9PiBgPHNwYW4gY2xhc3M9Imd1cnUtZXZlbnQtbGluZSI+4oCiICR7d3JhcFdpdGhHdXJ1TGluayhldnQpfTwvc3Bhbj5gKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJycpOw0KDQogICAgICAgICAgICAgICAgICAgIGxpc3RIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imd1cnUtcm93LWl0ZW0iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJndXJ1LWRhdGUiPiR7ZGF0ZX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3VydS1kZXRhaWwiPiR7ZXZlbnRzSHRtbH08L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d1cnUtZXZlbnQtbGlzdCcpLmlubmVySFRNTCA9IGxpc3RIdG1sIHx8ICI8ZGl2IHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoyMHB4Oyc+Tm8gdXBjb21pbmcgZXZlbnRzIGZvdW5kLjwvZGl2PiI7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3VydS1ldmVudC1saXN0JykuaW5uZXJIVE1MID0gIlN5bmMgRXJyb3IuIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkR3VydUFyYWRoYW5hcygpOw0KICAgIDwvc2NyaXB0Pg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KICAgIA0KICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLXRvcDogMzBweDsgbWFyZ2luLWJvdHRvbTogNTBweDsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7Ij4NCiAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjogIzU1NTsgZm9udC1zaXplOiAxOHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyI+SWYgYW55IGlzc3VlcyB3aXRoIHRoZSBhcHBsaWNhdGlvbiBjb250YWN0IEFkbWluPC9oMz4NCg0KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNvbnRhY3RBZG1pbldoYXRzQXBwKCkiIHN0eWxlPSINCiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI1RDM2NjsNCiAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgIHBhZGRpbmc6IDE1cHggMzBweDsNCiAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgYm9yZGVyLXJhZGl1czogNTBweDsNCiAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMzcsIDIxMSwgMTAyLCAwLjMpOw0KICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsNCiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnM7DQogICAgIiBvbm1vdXNlb3Zlcj0idGhpcy5zdHlsZS50cmFuc2Zvcm09J3NjYWxlKDEuMDUpJyIgb25tb3VzZW91dD0idGhpcy5zdHlsZS50cmFuc2Zvcm09J3NjYWxlKDEpJyI+DQogICAgICAgICAgICA8c3BhbiBzdHlsZT0ibWFyZ2luLXJpZ2h0OiAxMHB4OyI+8J+SrDwvc3Bhbj4gTWVzc2FnZSBBZG1pbg0KICAgICAgICA8L2J1dHRvbj4NCiAgICA8L2Rpdj4NCiAgICA8c2NyaXB0Pg0KICAgICAgICBmdW5jdGlvbiBjb250YWN0QWRtaW5XaGF0c0FwcCgpIHsNCiAgICAgICAgICAgIC8vIFVzZXMgdGhlIGR5bmFtaWMgZ2xvYmFsIHZhcmlhYmxlIEFkbWluUGhvbmVOdW1iZXINCiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGVuY29kZVVSSUNvbXBvbmVudCgiTmFtYXNrYXJhbSBBZG1pbiwgSSBuZWVkIGFzc2lzdGFuY2Ugd2l0aCB0aGUgTU1QVCBSZWNlaXB0IFN5c3RlbS4iKTsNCiAgICAgICAgICAgIGNvbnN0IHdhVXJsID0gYGh0dHBzOi8vd2EubWUvJHtBZG1pblBob25lTnVtYmVyfT90ZXh0PSR7bXNnfWA7DQogICAgICAgICAgICB3aW5kb3cub3Blbih3YVVybCwgJ19ibGFuaycpOw0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQoNCg0KDQogICAgDQogICAgPHNjcmlwdD4NCiAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRTZXR0aW5nc0ZpbGUoKSB7DQogICAgICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSAiIjsNCiAgICAgICAgICAgIGZlYXR1cmVzLmZvckVhY2goZmVhdCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBlcm1fJHtmZWF0fWApLnZhbHVlOw0KICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9IGAke2ZlYXR9fCR7dmFsfVxuYDsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBGb3Igbm93LCB3ZSBzaG93IGl0IGluIGFuIGFsZXJ0IG9yIGxvZy4NCiAgICAgICAgICAgIC8vIFlvdSBjYW4gY29weSB0aGlzIHRleHQgYW5kIHNhdmUgaXQgYXMgdXNlcm5hbWUudHh0DQogICAgICAgICAgICBjb25zb2xlLmxvZygiLS0tIFNFVFRJTkdTIEZJTEUgQ09OVEVOVCAtLS0iKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVDb250ZW50KTsNCg0KICAgICAgICAgICAgLy8gT3B0aW9uYWw6IFRyaWdnZXIgYW4gYWN0dWFsIGZpbGUgZG93bmxvYWQgZm9yIHRoZSB1c2VyDQogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2ZpbGVDb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7DQogICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSAidXNlcl9zZXR0aW5nc190ZW1wbGF0ZS50eHQiOw0KICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvL2Z1bmN0aW9uIGNvbnNlbnRBY3Rpb24oKSB7DQogICAgICAgIC8vICAgIGFsZXJ0KCJDb25zZW50IEdyYW50ZWQgZm9yICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZSk7DQogICAgICAgIC8vICAgIC8vIExvZ2ljIGZvciBzYXZlUmVjb3JkKCkgdXN1YWxseSBmb2xsb3dzIGhlcmUNCiAgICAgICAgLy99DQoNCiAgICAgICAgLy9mdW5jdGlvbiBzYXZlRGF0YSgpIHsNCiAgICAgICAgLy8gICAgYWxlcnQoIlJlY29yZCBTYXZlZCBMb2NhbGx5Iik7DQogICAgICAgIC8vICAgIC8vIE9yaWdpbmFsIHNhdmVSZWNvcmQoKSBsb2dpYyByZW1haW5zIGhlcmUNCiAgICAgICAgLy99DQoNCg0KICAgICAgICBmdW5jdGlvbiBtYXRjaFJlY29yZChpZHgsIHF1ZXJ5LCBjb2xJZHgpIHsNCiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBHTE9CQUxfREJfTElORVNbaWR4XS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgaWYgKGNvbElkeCA9PT0gLTEpIHJldHVybiBsaW5lLmluY2x1ZGVzKHF1ZXJ5KTsNCiAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICByZXR1cm4gKGNvbHNbY29sSWR4XSB8fCAiIikuaW5jbHVkZXMocXVlcnkpOw0KICAgICAgICB9DQoNCg0KICAgIDwvc2NyaXB0Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgLy8gQWRkIHRoaXMgdG8gc2hvdyB0aGUgU01TIGJ1dHRvbiBvbmx5IG9uIG1vYmlsZSBkZXZpY2VzDQogICAgICAgIGZ1bmN0aW9uIGNoZWNrRGV2aWNlRm9yU01TKCkgew0KICAgICAgICAgICAgY29uc3QgaXNNb2JpbGUgPSAvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsNCiAgICAgICAgICAgIGNvbnN0IHNtc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tc21zJyk7DQogICAgICAgICAgICBpZiAoaXNNb2JpbGUgJiYgc21zQnRuKSB7DQogICAgICAgICAgICAgICAgc21zQnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gc2VuZFNNUygpIHsNCiAgICAgICAgICAgIGNvbnN0IHBob25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9uYW1lJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWUudHJpbSgpOw0KICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWU7DQoNCiAgICAgICAgICAgIGlmICghcGhvbmUpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiUGxlYXNlIGVudGVyIGEgcGhvbmUgbnVtYmVyIGZpcnN0LiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gQ29tcG9zZSB0aGUgdGV4dCBtZXNzYWdlDQogICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYE1NUFQgUmVjZWlwdDogTmFtYXNrYXJhbSAke25hbWV9LCBUaGFuayB5b3UgZm9yIHlvdXIgY29udHJpYnV0aW9uIG9mIFJzLiR7YW1vdW50fSB0b3dhcmRzICR7dG93YXJkc30uIFJlY2VpcHQgTm86ICR7cmVjTm99LiAtIE15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0YDsNCg0KICAgICAgICAgICAgLy8gRW5jb2RlIGZvciBVUkwgc2FmZXR5DQogICAgICAgICAgICBjb25zdCBlbmNvZGVkTWVzc2FnZSA9IGVuY29kZVVSSUNvbXBvbmVudChtZXNzYWdlKTsNCg0KICAgICAgICAgICAgLy8gTGF1bmNoIHRoZSBTTVMgYXBwDQogICAgICAgICAgICAvLyBOb3RlOiBGb3IgaU9TIHVzZSAnJicsIGZvciBvdGhlcnMgdXNlICc/JyBmb3IgdGhlIHNlcGFyYXRvcg0KICAgICAgICAgICAgY29uc3Qgc2VwYXJhdG9yID0gL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpID8gJyYnIDogJz8nOw0KICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgc21zOiR7cGhvbmV9JHtzZXBhcmF0b3J9Ym9keT0ke2VuY29kZWRNZXNzYWdlfWA7DQoNCiAgICAgICAgICAgIC8vIExvZyB0aGUgYWN0aW9uIGZvciB5b3VyIGF1ZGl0IHRyYWlsDQogICAgICAgICAgICB3cml0ZVVzZXJMb2coYFNNUyBUUklHR0VSRUQ6IFRvICR7cGhvbmV9IGZvciBSZWMgJHtyZWNOb31gKTsNCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KDQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkQWRtaW5Db250YWN0KCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKE1NUFRfTElOS19BRE1JTl9DT05UQUNUKTsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3VGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gVHJpbSB3aGl0ZXNwYWNlIGFuZCByZW1vdmUgYW55IG5vbi1udW1lcmljIGNoYXJhY3RlcnMgZXhjZXB0ICcrJw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhbk51bWJlciA9IHJhd1RleHQudHJpbSgpLnJlcGxhY2UoL1teXGQrXS9nLCAiIik7DQogICAgICAgICAgICAgICAgICAgIGlmIChjbGVhbk51bWJlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgQWRtaW5QaG9uZU51bWJlciA9IGNsZWFuTnVtYmVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlNBTkdFRVRIQURIV0FOSTogQWRtaW4gUGhvbmUgTG9hZGVkIC0+ICIgKyBBZG1pblBob25lTnVtYmVyKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiU0FOR0VFVEhBREhXQU5JOiBDb3VsZCBub3QgbG9hZCBkeW5hbWljIGFkbWluIGNvbnRhY3QsIHVzaW5nIGRlZmF1bHQuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KICAgIDx2aWRlbyBpZD0ic2VjdXJpdHktdmlkZW8iIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiBhdXRvcGxheSBwbGF5c2lubGluZT48L3ZpZGVvPg0KICAgIDxjYW52YXMgaWQ9InNlY3VyaXR5LWNhbnZhcyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvY2FudmFzPg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICAoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY29uc3QgTU1QVF9BVVRIX0tFWSA9ICJBSXphU3lCZnJ0VXY0eFJJbHpvUlVMQ3ZKcFpZcE5IaWViZGhSTlEiOw0KICAgICAgICAgICAgY29uc3QgR0VNSU5JX1VSTCA9IGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzL2dlbWluaS0yLjAtZmxhc2g6Z2VuZXJhdGVDb250ZW50P2tleT0ke01NUFRfQVVUSF9LRVl9YDsNCg0KICAgICAgICAgICAgY29uc3QgZmlsZUlucCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbXB0X2ZpbGVfaW5wdXQnKTsNCiAgICAgICAgICAgIGNvbnN0IGxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbXB0X2xvYWRlcicpOw0KDQogICAgICAgICAgICBpZiAoIWZpbGVJbnApIHJldHVybjsNCg0KICAgICAgICAgICAgZmlsZUlucC5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBsb2NrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9sb2NrJyk7DQogICAgICAgICAgICAgICAgY29uc3QgcGhvbmVWYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKT8udmFsdWUgfHwgIiI7DQogICAgICAgICAgICAgICAgaWYgKGxvY2tCdG4gJiYgbG9ja0J0bi5kaXNhYmxlZCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgi4pqg77iPIFJlY2VpcHQgTG9ja2VkISBQbGVhc2UgdW5sb2NrIG9yIHN0YXJ0IGEgbmV3IGVudHJ5LiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChwaG9uZVZhbC50cmltKCkgIT09ICIiICYmIHBob25lVmFsICE9PSAiMCIpIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuKaoO+4jyBBbHJlYWR5IFJlY2VpcHQgRmlsbGVkLiBQbGVhc2UgY2xlYXIgdGhlIGZvcm0gZmlyc3QuIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBmaWxlSW5wLm9uY2hhbmdlID0gYXN5bmMgZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07DQogICAgICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7DQogICAgICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heCA9IDEwMjQ7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdyA9IGltZy53aWR0aCwgaCA9IGltZy5oZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodyA+IGgpIHsgaWYgKHcgPiBtYXgpIHsgaCAqPSBtYXggLyB3OyB3ID0gbWF4OyB9IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyBpZiAoaCA+IG1heCkgeyB3ICo9IG1heCAvIGg7IGggPSBtYXg7IH0gfQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gdzsgY2FudmFzLmhlaWdodCA9IGg7DQogICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3LCBoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCAwLjgpLnNwbGl0KCcsJylbMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChHRU1JTklfVVJMLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IFt7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiAiRXh0cmFjdCBkYXRhLiBJZiAnQ0FOQ0VMTEVEJyByZXR1cm4gT05MWSB7XCJpc19jYW5jZWxsZWRcIjogdHJ1ZX0uIERhdGUgREQtTU0tWVlZWS4gSlNPTjoge1wiaXNfY2FuY2VsbGVkXCI6IGZhbHNlLCBcIm5hbWVcIjogXCJcIiwgXCJwaG9uZVwiOiBcIlwiLCBcImRhdGVcIjogXCJcIiwgXCJhbW91bnRcIjogXCJcIiwgXCJwYW5cIjogXCJcIiwgXCJwdXJwb3NlXCI6IFwiXCIsIFwiYWRkcmVzc1wiOiBcIlwiLCBcImVtYWlsXCI6IFwiXCIsIFwicGluY29kZVwiOiBcIlwifSIgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpbmxpbmVfZGF0YTogeyBtaW1lX3R5cGU6ICJpbWFnZS9qcGVnIiwgZGF0YTogYmFzZTY0IH0gfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UoZGF0YS5jYW5kaWRhdGVzWzBdLmNvbnRlbnQucGFydHNbMF0udGV4dC5yZXBsYWNlKC9gYGBqc29ufGBgYC9nLCAiIikudHJpbSgpKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaXNfY2FuY2VsbGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLimqDvuI8gUmVjZWlwdCBpcyBDQU5DRUxMRUQuIElnbm9yaW5nLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgQ2FuY2VsIHVudGljaw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9uYW1lJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWVGaWVsZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lRmllbGQudmFsdWUgPSAiICI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVGaWVsZC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lRmllbGQudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaWxsIFBob25lICYgRmV0Y2gNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG9uZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBob25lRmllbGQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVGaWVsZC52YWx1ZSA9IHJlc3VsdC5waG9uZSA/IHJlc3VsdC5waG9uZS5yZXBsYWNlKC9bXjAtOV0vZywgJycpIDogIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmV0Y2hEb25vckRldGFpbHMgPT09ICdmdW5jdGlvbicpIGZldGNoRG9ub3JEZXRhaWxzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluYWwgTWFwcGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNSZXBlYXQgPSAoYWRkckZpZWxkICYmIGFkZHJGaWVsZC52YWx1ZS50cmltKCkgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gRklMTCBHQVBTIEZPUiBORVcgRE9OT1JTIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZUZpZWxkICYmICghbmFtZUZpZWxkLnZhbHVlIHx8IG5hbWVGaWVsZC52YWx1ZS50cmltKCkgPT09ICIiKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUZpZWxkLnZhbHVlID0gcmVzdWx0Lm5hbWUgfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBBZGRyZXNzIGlzIGVtcHR5IChOZXcgRG9ub3IpLCBmaWxsIEFJIEFkZHJlc3MsIEVtYWlsLCBQaW5jb2RlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXBlYXQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRyRmllbGQpIGFkZHJGaWVsZC52YWx1ZSA9IHJlc3VsdC5hZGRyZXNzIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9lbWFpbCcpKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZW1haWwnKS52YWx1ZSA9IHJlc3VsdC5lbWFpbCB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpLnZhbHVlID0gcmVzdWx0LnBpbmNvZGUgfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSA9IHJlc3VsdC5kYXRlIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWUgPSByZXN1bHQuYW1vdW50ID8gcmVzdWx0LmFtb3VudC5zcGxpdCgnLycpWzBdLnJlcGxhY2UoL1teMC05XS9nLCAnJykgOiAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wYW4nKSAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGFuJykudmFsdWUgPSByZXN1bHQucGFuIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvbW1lbnRzJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21tZW50RmllbGQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwdXJwb3NlU3RyID0gcmVzdWx0LnB1cnBvc2UgPyBgeyR7cmVzdWx0LnB1cnBvc2V9fSBgIDogIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50RmllbGQudmFsdWUgPSAoY29tbWVudEZpZWxkLnZhbHVlICsgIiAiICsgcHVycG9zZVN0ciArICIqRmlsbGVkIGJ5IEFJIE9DUiBmcm9tIEZvcm0qIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRlcikgbG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGlzUmVwZWF0ID8gIuKchSBSZXBlYXQgRG9ub3IgRm91bmQhIiA6ICLihLnvuI8gTmV3IERvbm9yIERldGVjdGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDk1MCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlSW5wLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiT0NSIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfSkoKTsNCiAgICA8L3NjcmlwdD4NCg0KDQoNCg0KDQogICAgPHN0eWxlPg0KICAgICAgICAjbW1wdF9tc2dfb3ZlcmxheSB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuOSk7DQogICAgICAgICAgICB6LWluZGV4OiAyMDAwMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ1NlZ29lIFVJJywgQXJpYWwsIHNhbnMtc2VyaWY7DQogICAgICAgIH0NCg0KICAgICAgICAubW1wdF9tc2dfYm94IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KICAgICAgICAgICAgd2lkdGg6IDkwJTsNCiAgICAgICAgICAgIG1heC13aWR0aDogNTAwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgLyogREFSSyBCUk9XTiBCT1JERVIgKi8NCiAgICAgICAgICAgIGJvcmRlcjogNHB4IHNvbGlkICMzZTI3MjM7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDIwcHggNTBweCByZ2JhKDAsMCwwLDAuNyk7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgLyogQVVUTyBFWFBBTkRJTkcgSEVJR0hUICovDQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGFuaW1hdGlvbjogbW1wdFBvcCAwLjNzIGN1YmljLWJlemllcigwLjE3NSwgMC44ODUsIDAuMzIsIDEuMjc1KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5tbXB0X21zZ19oZWFkZXIgew0KICAgICAgICAgICAgLyogREVFUCBCUk9XTiBHUkFESUVOVCAqLw0KICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzNlMjcyMyAwJSwgIzFiMDAwMCAxMDAlKTsNCiAgICAgICAgICAgIGNvbG9yOiAjRkZENzAwOyAvKiBHb2xkIHRleHQgKi8NCiAgICAgICAgICAgIHBhZGRpbmc6IDMwcHggMjBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjNWQ0MDM3Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm1tcHRfbXNnX2dyZWV0aW5nIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjZweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm1tcHRfbXNnX2JvZHkgew0KICAgICAgICAgICAgcGFkZGluZzogMzVweDsNCiAgICAgICAgICAgIGNvbG9yOiAjMmIxZDFhOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNzsNCiAgICAgICAgICAgIC8qIEJJR0dFUiBCT0xEIE1FU1NBR0UgKi8NCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTlweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmY2Y1OyAvKiBTbGlnaHRseSBhZ2VkIHBhcGVyIGxvb2sgKi8NCiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDcwdmg7DQogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOw0KICAgICAgICB9DQoNCiAgICAgICAgLm1tcHRfbXNnX2Zvb3RlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZWZlYmU5Ow0KICAgICAgICAgICAgcGFkZGluZzogMjVweDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjZDdjY2M4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLm1tcHRfbXNnX2J0biB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjM2UyNzIzOw0KICAgICAgICAgICAgY29sb3I6ICNGRkQ3MDA7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDUwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogOTAwOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsNCiAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAxcHg7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwwLDAsMC4zKTsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubW1wdF9tc2dfYnRuOmhvdmVyIHsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMmIxZDFhOw0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgQGtleWZyYW1lcyBtbXB0UG9wIHsNCiAgICAgICAgICAgIGZyb20gew0KICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjg1KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdG8gew0KICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGlkPSJtbXB0X21zZ19vdmVybGF5Ij4NCiAgICAgICAgPGRpdiBjbGFzcz0ibW1wdF9tc2dfYm94Ij4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1tcHRfbXNnX2hlYWRlciI+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0ibW1wdF9zYWx1dGUiIGNsYXNzPSJtbXB0X21zZ19ncmVldGluZyI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgaWQ9Im1tcHRfbXNnX2NvbnRlbnQiIGNsYXNzPSJtbXB0X21zZ19ib2R5Ij48L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1tcHRfbXNnX2Zvb3RlciI+DQogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiAxNHB4OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM1ZDQwMzc7IG1hcmdpbi1ib3R0b206IDIwcHg7Ij7igJQgRlJPTSBBRE1JTiBPRkZJQ0Ug4oCUPC9kaXY+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibW1wdF9tc2dfYnRuIiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW1wdF9tc2dfb3ZlcmxheScpLnN0eWxlLmRpc3BsYXk9J25vbmUnIj5PSyBUTyBQUk9DRUVEPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsYXVuY2hBZG1pbk5vdGlmaWNhdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IE1NUFRfTVNHX1BBVEggPSAiL1NldHRpbmdzL1VzZXJNZXNzYWdlLnR4dCI7DQogICAgICAgICAgICBpZiAodHlwZW9mIE1NUFRfQVVUSF9SRUZSRVNIID09PSAndW5kZWZpbmVkJykgcmV0dXJuOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIEZldGNoIHRva2VuIGFuZCBmaWxlIChsb2dpYyBwcmVzZXJ2ZWQgZnJvbSB5b3VyIHdvcmtpbmcgdmVyc2lvbikNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsNCiAgICAgICAgICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ3JlZnJlc2hfdG9rZW4nLCByZWZyZXNoX3Rva2VuOiBNTVBUX0FVVEhfUkVGUkVTSCwNCiAgICAgICAgICAgICAgICAgICAgY2xpZW50X2lkOiBNTVBUX0FVVEhfS0VZLCBjbGllbnRfc2VjcmV0OiBNTVBUX0FVVEhfU0VDUkVUDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgdFJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwYXJhbXMgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgdERhdGEgPSBhd2FpdCB0UmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IHREYXRhLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG1zZ1JlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9NU0dfUEFUSCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIW1zZ1Jlcy5vaykgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuTXNnID0gKGF3YWl0IG1zZ1Jlcy50ZXh0KCkpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBpZiAoIWNsZWFuTXNnKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyBJU1QgVGltZSBjYWxjdWxhdGlvbg0KICAgICAgICAgICAgICAgIGNvbnN0IGlzdCA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgKDMzMCAqIDYwMDAwKSk7DQogICAgICAgICAgICAgICAgY29uc3QgaHJzID0gaXN0LmdldFVUQ0hvdXJzKCk7DQogICAgICAgICAgICAgICAgbGV0IHNhbHV0ZSA9IChocnMgPCAxMikgPyAiR29vZCBNb3JuaW5nIiA6IChocnMgPCAxNikgPyAiR29vZCBBZnRlcm5vb24iIDogIkdvb2QgRXZlbmluZyI7DQoNCiAgICAgICAgICAgICAgICAvLyBJZGVudGlmeSB1c2VyIGZyb20geW91ciBnbG9iYWwgdmFyaWFibGUNCiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gKHR5cGVvZiBNTVBUX1VTRVJfTkFNRSAhPT0gJ3VuZGVmaW5lZCcgJiYgTU1QVF9VU0VSX05BTUUpID8gTU1QVF9VU0VSX05BTUUgOiAiVEVBTSI7DQoNCiAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSBVSQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbXB0X3NhbHV0ZScpLmlubmVySFRNTCA9IGAke3NhbHV0ZX0sIDxzcGFuIHN0eWxlPSJjb2xvcjogI0ZGRUIzQjsgZm9udC1zaXplOiAxLjFlbTsiPiR7dXNlcn08L3NwYW4+YDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW1wdF9tc2dfY29udGVudCcpLmlubmVyVGV4dCA9IGNsZWFuTXNnOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtbXB0X21zZ19vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLndhcm4oIkFkbWluIE1zZyBlcnJvciIsIGUpOyB9DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KDQo8L2JvZHk+DQo8L2h0bWw+DQo="))));</script>