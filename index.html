<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5NTVBUIFJlY2VpcHQgU3lzdGVtIHYzMC42IC0gUmVzdG9yZWQ8L3RpdGxlPg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2h0bWwycGRmLmpzLzAuMTAuMS9odG1sMnBkZi5idW5kbGUubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvaHRtbDJjYW52YXMvMS40LjEvaHRtbDJjYW52YXMubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYvMi41LjEvanNwZGYudW1kLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLWF1dG90YWJsZS8zLjUuMjUvanNwZGYucGx1Z2luLmF1dG90YWJsZS5taW4uanMiPjwvc2NyaXB0Pg0KICAgIDxzdHlsZT4NCg0KICAgICAgICAubW1wdC11bmlmaWVkLWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAyNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAzMHB4IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQgew0KICAgICAgICAgICAgd2lkdGg6IDE2MHB4OyAvKiBGaXhlZCB3aWR0aCBmb3IgcGVyZmVjdCBhbGlnbm1lbnQgKi8NCiAgICAgICAgICAgIGhlaWdodDogNDVweDsgLyogVW5pZmllZCBoZWlnaHQgKi8NCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuMnM7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuYnRuLWFkbWluLXVuaWZpZWQ6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsNCiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDZweCAxMnB4IHJnYmEoMCwwLDAsMC4xNSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC5idG4tYWRtaW4tdW5pZmllZDphY3RpdmUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgIC8qIFRoZSBNYXN0ZXIgSGlkZSBSdWxlICovDQogICAgICAgIC8qIFRoaXMgcnVsZSBzdGF5cyBhY3RpdmUgZXZlbiBpZiB0aGUgdGFibGUgcmUtcmVuZGVycyAqLw0KICAgICAgICAucGVybS1oaWRkZW4gew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgZGlzYWJsZWQgZWxlbWVudHMgZ2V0IHRoZSBncmV5ZWQtb3V0IGxvb2sgKi8NCiAgICAgICAgYnV0dG9uOmRpc2FibGVkLA0KICAgICAgICBpbnB1dDpkaXNhYmxlZCwNCiAgICAgICAgc2VsZWN0OmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjOTk5OTk5ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBvcGFjaXR5OiAwLjY7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTYXZlIGJ1dHRvbiBzcGVjaWFsIGNvbG9yIHdoZW4gaXQgYmVjb21lcyBhY3RpdmUgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCg0KDQoNCg0KICAgICAgICAvKiBDb250YWluZXIgZm9yIHRoZSAzLWNvbHVtbiB2aWV3ICovDQoNCiAgICAgICAgLyogVXBkYXRlZCBXb3Jrc3BhY2UgdG8gcHJldmVudCBvdmVybGFwcGluZyAqLw0KICAgICAgICAucmVjZWlwdC13b3Jrc3BhY2Ugew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAvKiBMT0NLIHRoZSBoZWlnaHQgaGVyZS4gU2lkZSBwYW5lbHMgd2lsbCBuZXZlciBiZSB0YWxsZXIgdGhhbiB0aGlzICovDQogICAgICAgICAgICBoZWlnaHQ6IDU1MHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnNpZGUtcGFuZWwgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgICAgLyogRm9yY2UgdGhlIHBhbmVsIHRvIG9iZXkgdGhlIHdvcmtzcGFjZSBoZWlnaHQgKi8NCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIC8qIFRoaXMgaGVpZ2h0OiAwIGlzIGEgdHJpY2sgdG8gbWFrZSBmbGV4Ym94IGlnbm9yZSB0aGUgaW1hZ2Uncw0KICAgICAgICBuYXR1cmFsIHNpemUgYW5kIGZvcmNlIGl0IHRvIHN0YXkgd2l0aGluIHRoZSBjb250YWluZXIgKi8NCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5ldmVudC1pbWctY29udGFpbmVyIGltZyB7DQogICAgICAgICAgICAgICAgLyogVGhlc2UgbGluZXMgZm9yY2UgdGhlIHNocmluayB3aXRob3V0IGxvc2luZyByYXRpbyAqLw0KICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICNyZWNlaXB0X2Rpc3BsYXlfYXJlYSB7DQogICAgICAgICAgICBmbGV4OiAwIDAgYXV0bzsNCiAgICAgICAgICAgIHdpZHRoOiA0ODBwdDsNCiAgICAgICAgICAgIC8qIFRoZSByZWNlaXB0IHNldHMgdGhlIGhlaWdodCBmb3IgdGhlIHdob2xlIHJvdyAqLw0KICAgICAgICB9DQoNCiAgICAgICAgLmV2ZW50LXBob3RvIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgfQ0KDQoNCg0KDQoNCiAgICAgICAgLmFjdGlvbi1mb290ZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1wZGYgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi13YSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjVkMzY2Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIENvbnNlbnQgU3BlY2lmaWMgU3R5bGVzICovDQogICAgICAgIC5idG4tY29uc2VudC1hY3RpdmUgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgb3BhY2l0eTogMTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tY29uc2VudC1kaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICAgICAgb3BhY2l0eTogMC4zOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvKiBBbGwgb3JpZ2luYWwgc3R5bGVzIHByZXNlcnZlZCBmcm9tIGQ0MyAqLw0KICAgICAgICAucmVjZWlwdC1wcmV2aWV3LXJvdyB7DQogICAgICAgICAgICBncmlkLWNvbHVtbjogc3BhbiAyOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMzBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZTA7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgfQ0KDQogICAgICAgIC5yZWNlaXB0LWNvbnRhaW5lciB7DQogICAgICAgICAgICB3aWR0aDogNDYwcHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAyLjVweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5oZWFkZXItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY29sIHsNCiAgICAgICAgICAgIHdpZHRoOiA3MHB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmFkZHJlc3MtY29sIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC50cnVzdC1uYW1lIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNwdDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCiAgICAgICAgLnRydXN0LWRldGFpbHMgew0KICAgICAgICAgICAgZm9udC1zaXplOiA3LjVwdDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjE7DQogICAgICAgIH0NCg0KICAgICAgICAudmFyaWFibGUtcm93IHsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDZwdDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMDAwOw0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMwMDA7DQogICAgICAgICAgICBwYWRkaW5nOiAzcHQgMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZGl2aWRlciB7DQogICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgIzAwMDsNCiAgICAgICAgICAgIG1hcmdpbjogNnB0IDA7DQogICAgICAgIH0NCg0KICAgICAgICAuZG9ub3ItdGFibGUgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxhYmVsLWNvbCB7DQogICAgICAgICAgICB3aWR0aDogODVwdDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogOS41cHQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHQgMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5kYXRhLWNvbCB7DQogICAgICAgICAgICBmb250LXNpemU6IDkuNXB0Ow0KICAgICAgICAgICAgcGFkZGluZzogMnB0IDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdHJ1c3Qtc2lnbiB7DQogICAgICAgICAgICBmb250LXNpemU6IDEwcHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVwdDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mb290ZXItdGF4LWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiA4cHQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMnB0Ow0KICAgICAgICB9DQoNCiAgICAgICAgOnJvb3Qgew0KICAgICAgICAgICAgLS1zYWZmcm9uOiAjRkY5OTMzOw0KICAgICAgICAgICAgLS1saWdodC1zYWZmcm9uOiAjRkZGNUU2Ow0KICAgICAgICAgICAgLS1kZWVwLXNhZmZyb246ICNGRjhDMDA7DQogICAgICAgICAgICAtLXRleHQtZGFyazogIzMzMzsNCiAgICAgICAgfQ0KDQogICAgICAgICogew0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtc2FmZnJvbik7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZGFyayk7DQogICAgICAgIH0NCg0KICAgICAgICAjYXV0aFNjcmVlbiB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBsZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMHZ3Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0LXNhZmZyb24pOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB6LWluZGV4OiA5OTk5Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmxvZ28tY2lyY2xlIHsNCiAgICAgICAgICAgIGhlaWdodDogNDBweDsNCiAgICAgICAgICAgIHdpZHRoOiA0MHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMik7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sb2dvLWxhcmdlIHsNCiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm1hc3Rlci1oZWFkZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsNCiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjIlIDU2JSAyMiU7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zYWZmcm9uKTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQoNCiAgICAgICAgLmhlYWRlci1zZWN0aW9uIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5oZWFkZXItc2VjdGlvbjpsYXN0LWNoaWxkIHsNCiAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IG5vbmU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLnNtYWxsLWluZm8gew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmlkLWJhZGdlIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICMzMzM7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29udGFpbmVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7DQogICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7DQogICAgICAgICAgICBnYXA6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjYWRkOGU2Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBBREQgVEhFIEZJWCBIRVJFICovDQogICAgICAgIC5lbnRyeS1jb250YWluZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwICFpbXBvcnRhbnQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZW50cnktY29sdW1uIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBtaW4td2lkdGg6IDMwMHB4Ow0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC5mb3JtLWdyb3VwIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDMzNjY7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCwgLmZvcm0tZ3JvdXAgc2VsZWN0LCAuZm9ybS1ncm91cCB0ZXh0YXJlYSB7DQogICAgICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuc3RhdHVzLWNoZWNrcyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmUwOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGdhcDogMjBweDsNCiAgICAgICAgICAgIGdyaWQtY29sdW1uOiBzcGFuIDI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFjdGlvbiB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ29uc2VudCBTcGVjaWZpYyBTdHlsZXMgKi8NCiAgICAgICAgLmJ0bi1jb25zZW50LWFjdGl2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYwMDAwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1jb25zZW50LWRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmNjY2MgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiAjNjY2Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDsNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuNjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tc2F2ZSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmU4YjU3Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi11bmxvY2sgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tbG9jayB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjN2Y4YzhkOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJ0bi1uYXYgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXJuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMjhiMjI7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KICAgICAgICAjZmllbGRfc2VhcmNoIHsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMyMjhiMjIgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8qIEFjdGlvbiBCdXR0b24gUm93IFN0eWxpbmcgKi8NCiAgICAgICAgLmJ0bi1hY3Rpb24sIC5idG4tc2F2ZSwgLmJ0bi1sb2NrLCAuYnRuLXVubG9jayB7DQogICAgICAgICAgICB3aWR0aDogMTAwcHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIHdpZHRoICovDQogICAgICAgICAgICBoZWlnaHQ6IDM1cHg7IC8qIEZvcmNlcyBhbGwgYnV0dG9ucyB0byBiZSBleGFjdCBzYW1lIGhlaWdodCAqLw0KICAgICAgICAgICAgbWFyZ2luOiA1cHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBISUdIIENPTlRSQVNUIFVOTE9DSzogQnJpZ2h0IEdvbGQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fdW5sb2NrOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkQ3MDAgIWltcG9ydGFudDsgLyogR29sZCAqLw0KICAgICAgICAgICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsgLyogQmxhY2sgdGV4dCBmb3IgY29udHJhc3QgKi8NCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNEQUE1MjA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBTQVZFOiBHcmVlbiB3aGVuIGVuYWJsZWQgKi8NCiAgICAgICAgI2J0bl9zYXZlOm5vdCg6ZGlzYWJsZWQpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzFlN2UzNDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIExPQ0s6IE9yYW5nZS9SZWQgd2hlbiBlbmFibGVkICovDQogICAgICAgICNidG5fbG9jazpub3QoOmRpc2FibGVkKSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmQ3ZTE0ICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNkOTZkMTI7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBESVNBQkxFRCBTVEFURTogVW5pdmVyc2FsIGxvb2sgZm9yIGFsbCBidXR0b25zICovDQogICAgICAgIGJ1dHRvbjpkaXNhYmxlZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7DQogICAgICAgICAgICBjb2xvcjogI2EwYTBhMCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYyAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgb3BhY2l0eTogMC41Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQ2hlY2tib3ggUm93IENvbnRhaW5lciAqLw0KICAgICAgICAjY2hlY2tib3hfcm93IHsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyogQWN0aW9uIEJ1dHRvbiBzaXppbmcgKi8NCiAgICAgICAgI2J0bl91bmxvY2ssICNidG5fbG9jaywgI2J0bl9zYXZlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMTBweDsNCiAgICAgICAgICAgIGhlaWdodDogMzhweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQoNCg0KDQogICAgICAgIC8qIEJpZyBXYWl0IE1lc3NhZ2UgT3ZlcmxheSAqLw0KICAgICAgICAjbG9hZGluZ092ZXJsYXkgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC43KTsNCiAgICAgICAgICAgIHotaW5kZXg6IDk5OTk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nLXRvcDogMjAlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyNHB0Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIH0NCg0KLyoNCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgTWFrZXMgcmVzcG9uaXZlIHNpemUgLSBmb3IgUk4sIFJlY29yZCBhbmQgUmVjZWlwdCBOdW1iZXINCiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KICAgICAgICAvKiBBREQgVEhJUyBMSU5FIFRPIEZJWCBUSEUgVE9QIFJPVyAmIFJFQ09SRCBOVU1CRVJTICovDQogICAgICAgIGRpdltzdHlsZSo9ImRpc3BsYXk6IGZsZXgiXSB7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXAgIWltcG9ydGFudDsNCiAgICAgICAgICAgIGdhcDogMTBweCAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQoNCiAgICA8ZGl2IGlkPSJsb2FkaW5nT3ZlcmxheSI+QXNzaWduaW5nIE5ldyBSZWNlaXB0IE51bWJlci4uLiBQbGVhc2UgV2FpdDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibG9hZGluZy1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC45KTsgei1pbmRleDogOTk5OTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGRpc3BsYXk6IG5vbmU7Ij4NCiAgICAgICAgPGRpdiBzdHlsZT0iYm9yZGVyOiA1cHggc29saWQgI2YzZjNmMzsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTsiPjwvZGl2Pg0KICAgICAgICA8cCBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMzMzM7Ij5QbGVhc2Ugd2FpdCAtIFdvcmtpbmcuLi48L3A+DQogICAgPC9kaXY+DQoNCiAgICA8c3R5bGU+DQogICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7DQogICAgICAgICAgICAwJSB7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIDEwMCUgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQoNCiAgICA8ZGl2IGlkPSJhdXRoU2NyZWVuIj4NCiAgICAgICAgPGRpdiBpZD0ibG9nb0NvbnRhaW5lciI+PC9kaXY+DQogICAgICAgIDxoMiBzdHlsZT0iY29sb3I6IHZhcigtLWRlZXAtc2FmZnJvbik7IG1hcmdpbjogNXB4IDA7Ij5NTVBUIFN5c3RlbTwvaDI+DQogICAgICAgIDxwIGlkPSJzdGF0dXNNc2ciPkNvbm5lY3RpbmcgdG8gQ2xvdWQuLi48L3A+DQogICAgICAgIDxwPkRldmljZSBJRDogPHNwYW4gaWQ9ImRpc3BsYXlEZXZpY2VJRCIgY2xhc3M9ImlkLWJhZGdlIj4uLi48L3NwYW4+PC9wPg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBpZD0ibWFpbkFwcENvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KDQoNCiAgICAgICAgPGhlYWRlciBjbGFzcz0ibWFzdGVyLWhlYWRlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItc2VjdGlvbiI+DQogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW46MDsgZm9udC1zaXplOjE0cHg7Ij5Vc2VycyBPbmxpbmU8L2gzPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFjdGl2ZVVzZXJMaXN0IiBjbGFzcz0ic21hbGwtaW5mbyI+LS0tPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZ2FwOjE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibG9nb0hlYWRlckNvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8aDEgc3R5bGU9Im1hcmdpbjowOyBmb250LXNpemU6MjBweDsiPk15bGFpIE1haGFwZXJpeWF2YSBBbnVzaGFtIFRydXN0PC9oMT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDRweDsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgb3BhY2l0eTogMC45OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVjZWlwdCBHZW5lcmF0aW9uIFNvZnR3YXJlIFZlcnNpb246IDxzcGFuIGlkPSJkaXNwbGF5VmVyc2lvbiI+PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGFzaGJvYXJkLWNvbnRhaW5lciI+DQogICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJzdGF0cy10YWJsZSI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1zZWN0aW9uIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsLWluZm8iIHN0eWxlPSJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMnB4IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pkxhc3QgUmVjOiA8c3BhbiBpZD0iZGFzaF9sYXN0X3JlYyI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+QmFuazogPHNwYW4gaWQ9ImRhc2hfYmFua19kYXRlIj4tLS08L3NwYW4+PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5MYXRlc3Q6IDxzcGFuIGlkPSJkYXNoX2xhdGVzdF9yZWMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkV4cDogPHNwYW4gaWQ9ImRhc2hfZXhwZW5zZXMiPi0tLTwvc3Bhbj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlJlYWR5OiA8c3BhbiBpZD0iZGFzaF9yZWFkeV9jb3VudCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+Q2FzaDogPHNwYW4gaWQ9ImRhc2hfY2FzaCI+LS0tPC9zcGFuPjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8L2hlYWRlcj4NCg0KDQogICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbnRhaW5lciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbnRyeS1jb2x1bW4iPg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyBiYWNrZ3JvdW5kOiAjMWEyMzdlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBzdHJldGNoOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyI+DQoNCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOyBwYWRkaW5nLWJvdHRvbTogOHB4OyBtYXJnaW4tYm90dG9tOiAxMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IkFMTCIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IEFMTDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjIxLTIyIiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjEtMjI8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyMi0yMyIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDIyLTIzPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjMtMjQiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyMy0yNDwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7Ij48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImZ5X2ZpbHRlciIgdmFsdWU9IjI0LTI1IiBvbmNsaWNrPSJhcHBseUZZRmlsdGVyKHRoaXMudmFsdWUpIj4gMjQtMjU8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OyI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJmeV9maWx0ZXIiIHZhbHVlPSIyNS0yNiIgb25jbGljaz0iYXBwbHlGWUZpbHRlcih0aGlzLnZhbHVlKSI+IDI1LTI2PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iMjYtMjciIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiAyNi0yNzwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6ICNGRkVCM0IgIWltcG9ydGFudDsiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZnlfZmlsdGVyIiB2YWx1ZT0iUlIiIG9uY2xpY2s9ImFwcGx5RllGaWx0ZXIodGhpcy52YWx1ZSkiPiBSUjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgtMSkiPiYjMTAwOTQ7PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgaWQ9InJlY19zbGlkZXIiIHN0eWxlPSJmbGV4OiAxOyIgb25pbnB1dD0iY2hlY2tVbnNhdmVkQ2hhbmdlcygoKSA9PiB7IGlmKHZhbGlkYXRlTmF2aWdhdGlvblNlY3VyaXR5KHRoaXMudmFsdWUpKSBuYXZpZ2F0ZURhdGFiYXNlKHRoaXMudmFsdWUpOyB9KSI+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYiIHN0eWxlPSJoZWlnaHQ6IDM4cHg7IG1pbi13aWR0aDogMzVweDsiIG9uY2xpY2s9Im1vdmVGWVJlY29yZCgxKSI+JiMxMDA5NTs8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWxlZnQ6IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRUIzQjsgbWFyZ2luLWJvdHRvbTogMnB4OyI+UkVDRUlQVCBOTzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3JlY25vIiBzdHlsZT0id2lkdGg6IDE0MHB4OyBoZWlnaHQ6IDM4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1zaXplOiAxNnB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlcjogMnB4IHNvbGlkICNGRjk5MzM7IGJhY2tncm91bmQ6ICNmZmY7IGNvbG9yOiAjMDAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDEwcHg7IG1hcmdpbi1ib3R0b206IDJweDsiPlJlYzwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJlY29yZE51bWJlckRpc3BsYXkiIHJlYWRvbmx5IHN0eWxlPSJ3aWR0aDogNDVweDsgaGVpZ2h0OiAzOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyOiBub25lOyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2UwZTBlMDsgY29sb3I6ICMxYTIzN2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im5ld19yZWNfYnRuIiBjbGFzcz0iYnRuLXJuIiBzdHlsZT0iaGVpZ2h0OiAzOHB4OyBtaW4td2lkdGg6IDUwcHg7IGJhY2tncm91bmQ6ICNmNDQzMzY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IiBvbmNsaWNrPSJnZW5lcmF0ZU5ld1JOKCkiPlJOPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQoNCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5OYW1lPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX25hbWUiIG9uaW5wdXQ9InZhbGlkYXRlQ29uc2VudCgpIj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QWRkcmVzczwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9hZGRyZXNzIiByb3dzPSI0Ij48L3RleHRhcmVhPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGluL0NvdW50cjwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBmbGV4OjE7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfcGluY29kZSIgc3R5bGU9IndpZHRoOiA1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfY291bnRyeSIgc3R5bGU9IndpZHRoOiA1MCU7IiB2YWx1ZT0iSU5ESUEiPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZW1haWwiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TdGFyPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3N0YXIiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Hb3RocmFtPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX2dvdGhyYW0iPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVudHJ5LWNvbHVtbiI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmllbGRfZGF0ZSI+PC9kaXY+DQogICAgICAgICAgICAgICAgDQoNCg0KICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDVweDsiPg0KICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxMDBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMDAzMzY2OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBwYWRkaW5nLWxlZnQ6IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZWxlcGhvbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IHBhZGRpbmctbGVmdDogMnB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9waG9uZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJmbGV4OiAxOyBoZWlnaHQ6IDI1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQtY29sb3I6ICNmZmZkZTY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJidG5fZmV0Y2giIGRpc2FibGVkIG9uY2xpY2s9ImZldGNoRG9ub3JEZXRhaWxzKCkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOiA1NXB4OyBoZWlnaHQ6IDI3cHg7IGZvbnQtc2l6ZTogMTFweDsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXItcmFkaXVzOiAzcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZldGNoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+QW1vdW50PC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZmllbGRfYW1vdW50IiBvbmlucHV0PSJ2YWxpZGF0ZUNvbnNlbnQoKSI+PC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk1vZGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImZpZWxkX21vZGUiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ub3dhcmRzPC9sYWJlbD48c2VsZWN0IGlkPSJmaWVsZF90b3dhcmRzIiBvbmNoYW5nZT0idmFsaWRhdGVDb25zZW50KCkiPjwvc2VsZWN0PjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5UcmFucy4gUmVmLjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9yZWYiPjwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Db21tZW50czwvbGFiZWw+PHRleHRhcmVhIGlkPSJmaWVsZF9jb21tZW50cyIgcm93cz0iMiI+PC90ZXh0YXJlYT48L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+UEFOPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpZWxkX3BhbiI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjaGVja2JveF9yb3ciIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmUwOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY2FuY2VsIj4gQ2FuY2VsDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByaW50ZWQiPiBQcmludGVkDQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImZpZWxkX3ByYXNhZGFtIj4gUHJhc2FkYW0NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iZmllbGRfY29ycHVzIj4gQ29ycHVzIFNpZ25lZA0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjogc3BhbiAyOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDEwcHg7IG1hcmdpbi10b3A6IDE1cHg7IHBhZGRpbmctdG9wOiAxNXB4OyBib3JkZXItdG9wOiAycHggc29saWQgIzY2NjsiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyI+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fc2F2ZSIgY2xhc3M9ImJ0bi1zYXZlIiBvbmNsaWNrPSJzYXZlUmVjb3JkKCkiIGRpc2FibGVkPlNhdmU8L2J1dHRvbj4NCg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9jb25zZW50IiBjbGFzcz0iYnRuLWFjdGlvbiBidG4tY29uc2VudC1kaXNhYmxlZCIgZGlzYWJsZWQgb25jbGljaz0iY29uc2VudEFjdGlvbigpIj5Db25zZW50PC9idXR0b24+DQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fdW5sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0idG9nZ2xlTG9jayhmYWxzZSkiPlVubG9jazwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9sb2NrIiBjbGFzcz0iYnRuLWFjdGlvbiIgb25jbGljaz0iY29uZmlybUxvY2soKSIgZGlzYWJsZWQ+TG9jazwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5TdW1tYXJ5IiBvbmNsaWNrPSJzaG93RG9uYXRpb25TdW1tYXJ5KCkiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1sZWZ0OiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgU3VtbWFyeQ0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJhbmstc3luYy1idG4iIG9uY2xpY2s9InVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHdpbmRvdy5BQ0NFU1NfVE9LRU4pIiBzdHlsZT0iYmFja2dyb3VuZDojMjdhZTYwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxMHB4OyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo0cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyI+QmFuayBVcGRhdGU8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1hY3Rpb24iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMTdhMmI4OyBjb2xvcjogd2hpdGU7IiBvbmNsaWNrPSJsb2NhdGlvbi5yZWxvYWQoKSI+UmVmcmVzaDwvYnV0dG9uPg0KDQoNCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tYWRtaW4tYWNjZXNzIiBjbGFzcz0iYnRuLWFjdGlvbiIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICMxN2EyYjg7IGNvbG9yOiB3aGl0ZTsiIG9uY2xpY2s9InRvZ2dsZUFkbWluVGFibGUoKSI+QWRtaW48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tZGV2b3RlZS1hY2Nlc3MiIGNsYXNzPSJidG4tYWN0aW9uIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzE3YTJiODsgY29sb3I6IHdoaXRlOyIgb25jbGljaz0id2luZG93Lm9wZW4oJ2h0dHBzOi8vbXlsYWlwZXJpeWF2YS5naXRodWIuaW8vRGV2b3RlZS8nLCAnX2JsYW5rJykiPkRldm90ZWU8L2J1dHRvbj4NCg0KDQogICAgICAgICAgICAgICAgPGJyPjxicj4NCg0KDQoNCg0KDQoNCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4LWdyb3c6IDE7Ij48L2Rpdj4NCg0KDQogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJmaWVsZF9zZWFyY2giIHBsYWNlaG9sZGVyPSJTZWFyY2guLi4iPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InNlYXJjaEJ0biIgY2xhc3M9ImJ0bi1ybiIgb25jbGljaz0icGVyZm9ybVNlYXJjaCgpIj5TZWFyY2g8L2J1dHRvbj4NCg0KDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM1NTU7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiA1cHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyI+DQogICAgICAgICAgICAgICAgKiBTZWFyY2ggTG9naWM6IFJldmVyc2Ugc2VhcmNoLiBObyBQcmVmaXg9RnVsbCwgTS09UGhvbmUsIE4tPU5hbWUsIFQtPVRyYW5zIFJlZiwgUC09UEFOLiBOb3QgZm91bmQgcmVzZXRzIHRvIGxhdGVzdCByZWNvcmQuDQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0icmVjZWlwdC1wcmV2aWV3LXJvdyI+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlY2VpcHQtd29ya3NwYWNlIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlLXBhbmVsIiBpZD0ibGVmdC1ldmVudHMiPg0KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iZXZlbnQxLmpwZyIgY2xhc3M9ImV2ZW50LXBob3RvIiBhbHQ9IlJlY2VudCBFdmVudCI+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJyZWNlaXB0X2Rpc3BsYXlfYXJlYSI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzaWRlLXBhbmVsIiBpZD0icmlnaHQtZXZlbnRzIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9ImV2ZW50Mi5qcGciIGNsYXNzPSJldmVudC1waG90byIgYWx0PSJSZWNlbnQgRXZlbnQiPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLWZvb3RlciIgc3R5bGU9ImdyaWQtY29sdW1uOiBzcGFuIDI7Ij4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1wZGYiIG9uY2xpY2s9ImRvd25sb2FkUmVjZWlwdFBERigpIj5Eb3dubG9hZCBQREY8L2J1dHRvbj4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi13YSIgb25jbGljaz0ic2VuZFdoYXRzQXBwKCkiPldoYXRzQXBwIFJlY2VpcHQ8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICA8ZGl2IGlkPSJzZWN1cml0eVBvcnRhbCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsgcG9zaXRpb246Zml4ZWQ7IHRvcDoxMCU7IGxlZnQ6MTAlOyB3aWR0aDo4MCU7IGhlaWdodDo4MCU7IGJhY2tncm91bmQ6d2hpdGU7IGJvcmRlcjoycHggc29saWQgIzMzMzsgei1pbmRleDo5OTk5OyBvdmVyZmxvdy15OmF1dG87IHBhZGRpbmc6MjBweDsgYm94LXNoYWRvdzogMHB4IDBweCAyMHB4IHJnYmEoMCwwLDAsMC41KTsiPg0KICAgICAgICAgICAgPGgzPlVzZXIgQWNjZXNzIENvbnRyb2wgTGlzdDwvaDM+DQogICAgICAgICAgICA8cD5Ub2dnbGUgYWNjZXNzIGZvciBmZWF0dXJlcy4gIlkiID0gVmlzaWJsZSwgIk4iID0gSGlkZGVuLjwvcD4NCiAgICAgICAgICAgIDx0YWJsZSBpZD0icGVybVRhYmxlIiBib3JkZXI9IjEiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ij4NCiAgICAgICAgICAgICAgICA8dGhlYWQ+PHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNlZWU7Ij48dGg+RmVhdHVyZS9PYmplY3Q8L3RoPjx0aD5BY2Nlc3MgKFkvTik8L3RoPjwvdHI+PC90aGVhZD4NCiAgICAgICAgICAgICAgICA8dGJvZHkgaWQ9InBlcm1Cb2R5Ij48L3Rib2R5Pg0KICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgIDxicj4NCiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG93bmxvYWRTZXR0aW5nc0ZpbGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6Z3JlZW47IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7Ij5HZW5lcmF0ZSBTZXR0aW5ncyBGaWxlPC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWN1cml0eVBvcnRhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnIj5DbG9zZTwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCg0KDQoNCg0KICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQoNCg0KICAgIDxkaXYgaWQ9ImFkbWluLXBhbmVsLWNvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsgbWFyZ2luLXRvcDoyMHB4OyBtYXgtd2lkdGg6IDgwMHB4OyI+DQogICAgICAgIDxoMyBzdHlsZT0iY29sb3I6ICMwMDMzNjY7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbTogMTBweDsiPkFkbWluaXN0cmF0aXZlIENvbnRyb2wgUGFuZWw8L2gzPg0KICAgICAgICA8dGFibGUgYm9yZGVyPSIwIiBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTsgYm9yZGVyLXNwYWNpbmc6IDEycHg7Ij4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTAlOyI+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bi1jb250cm9sLWxpc3QiIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogI2NjY2NjYzsgY29sb3I6ICM2NjY2NjY7IHdpZHRoOiAxMDAlOyBjdXJzb3I6IG5vdC1hbGxvd2VkOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJyZXR1cm4gZmFsc2U7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29udHJvbCBMaXN0DQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo1MCU7Ij4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmMDkzZmIgMCUsICNmNTU3NmMgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5Bbm9ueUZpbGwoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBBbm9ueUZpbGwNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNDNlOTdiIDAlLCAjMzhmOWQ3IDEwMCUpOyB3aWR0aDogMTAwJTsgY29sb3I6ICMwMDMzNjY7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bk1NUFRCYWNrdXAoKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBCYWNrdXAgU3lzdGVtDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2ZhNzA5YSAwJSwgI2ZlZTE0MCAxMDAlKTsgd2lkdGg6IDEwMCU7IGNvbG9yOiAjMDAzMzY2OyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5Db3VudHJ5RmllbGRDb3JyZWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBDb3VudHJ5IEZpZWxkDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzZhMTFjYiAwJSwgIzI1NzVmYyAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkNpdHlFeHRyYWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ2l0eSBOYW1lcw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNmZjA4NDQgMCUsICNmZmIxOTkgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5DaXR5Q29ycmVjdGlvbkFwcGx5KCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBDaXR5IE5hbWVzDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzJiNTg3NiAwJSwgIzRlNDM3NiAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkRvbm9yTmFtZUNoZWNrKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgRG9ub3IgTmFtZSBDaGVjaw0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNhNDQ1YjIgMCUsICNkNDE4NzIgMTAwJSk7IHdpZHRoOiAxMDAlOyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJydW5Eb25vck5hbWVDb3JyZWN0aW9uKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29ycmVjdCBEb25vciBOYW1lDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzMwY2ZkMCAwJSwgIzMzMDg2NyAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1bkFkZHJlc3NDaGVjaygpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEFkZHJlc3MgQ2hlY2sNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMDkyMDNmIDAlLCAjNTM3ODk1IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuQWRkcmVzc0NvcnJlY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IEFkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjOGU0NGFkIDAlLCAjNzMyZDkxIDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0idHJpZ2dlckZ1bGxBdWRpdCgpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIEF1ZGl0IERhdGFiYXNlDQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tYWRtaW4tdW5pZmllZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzJlY2M3MSAwJSwgIzI3YWU2MCAxMDAlKTsgd2lkdGg6IDEwMCU7Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InJ1blBBTkNvcnJlY3Rpb24oKSI+DQogICAgICAgICAgICAgICAgICAgICAgICBDb3JyZWN0IFBBTg0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkbWluLXVuaWZpZWQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMwMGIwOWIgMCUsICM5NmM5M2QgMTAwJSk7IHdpZHRoOiAxMDAlOyBjb2xvcjogIzAwMzM2NjsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0iZ2VuZXJhdGVBZGRyZXNzTGFiZWxzKCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgQWRkcmVzcyBMYWJlbHMNCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImxhYmVsLWNvdW50cnktZmlsdGVyIiBzdHlsZT0id2lkdGg6MTAwJTsgaGVpZ2h0OjQ1cHg7IGJvcmRlci1yYWRpdXM6OHB4OyBwYWRkaW5nOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoycHggc29saWQgIzAwYjA5YjsgYmFja2dyb3VuZDogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFMTCI+QWxsIENvdW50cmllczwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZG1pbi11bmlmaWVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMWUzYzcyIDAlLCAjMmE1Mjk4IDEwMCUpOyB3aWR0aDogMTAwJTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icnVuVW5pcXVlRG9ub3JMaXN0KCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgRG9ub3IgTGlzdA0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJkb25vci1zZWFyY2gtaW5wdXQiDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iU2VhcmNoIChlLmcuIFByYXNhZCwgQ2hlbm5haSBvciBQcmFzYWQgOyBDaGVubmFpKSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6NDVweDsgYm9yZGVyLXJhZGl1czo4cHg7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjMmE1Mjk4OyI+DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQoNCiAgICAgICAgICAgIDx0ciBpZD0iYWRtaW4tcGhvdG8tcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQgaWQ9InNuYXAtYm94LTEiIHN0eWxlPSJ3aWR0aDo1MCU7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjE1cHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBib3JkZXItcmFkaXVzOiA4cHg7Ij48L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBpZD0ic25hcC1ib3gtMiIgc3R5bGU9IndpZHRoOjUwJTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MTVweDsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IGJvcmRlci1yYWRpdXM6IDhweDsiPjwvdGQ+DQogICAgICAgICAgICA8L3RyPg0KDQogICAgICAgIDwvdGFibGU+DQogICAgPC9kaXY+DQoNCg0KICAgIDxociBzdHlsZT0ibWFyZ2luLXRvcDogNDBweDsgYm9yZGVyOiAwOyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsiPg0KDQogICAgPHNjcmlwdD4NCg0KDQogICAgICAgIHZhciBHTE9CQUxfQ0lUWV9SRVBPUlRfREFUQSA9ICIiOw0KICAgICAgICB2YXIgR0xPQkFMX0RPTk9SX05BTUVfREFUQSA9ICIiOw0KICAgICAgICB2YXIgR0xPQkFMX0FERFJFU1NfQ09SUkVDVElPTl9EQVRBID0gIiI7DQoNCiAgICAgICAgbGV0IHJlYWR5SW5kaWNlcyA9IFtdOyAvLyBIb2xkcyBpbmRpY2VzIGZvciB0aGUgUlIgZmlsdGVyDQoNCiAgICAgICAgLy8gLS0tIEdMT0JBTCBTVEFCTEUgSUQgU0VUVVAgLS0tDQogICAgICAgIGxldCBNTVBUX0dMT0JBTF9JRCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdNTVBUX1NUQUJMRV9JRCcpOw0KDQogICAgICAgIC8vIEZvcmNlIGEgbmV3IElEIGlmIGl0J3MgZW1wdHkgT1IgaWYgaXQgZG9lc24ndCBoYXZlIHlvdXIgcHJlZml4DQogICAgICAgIGlmICghTU1QVF9HTE9CQUxfSUQgfHwgIU1NUFRfR0xPQkFMX0lELnN0YXJ0c1dpdGgoIk1NUFQtREVWLVNXLSIpKSB7DQogICAgICAgICAgICBjb25zdCByYW5kb21TdWZmaXggPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIE1NUFRfR0xPQkFMX0lEID0gIk1NUFQtREVWLVNXLSIgKyByYW5kb21TdWZmaXg7DQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnTU1QVF9TVEFCTEVfSUQnLCBNTVBUX0dMT0JBTF9JRCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCg0KDQogICAgICAgIGNvbnN0IGZlYXR1cmVzID0gWw0KICAgICAgICAgICAgLy8gRmlzY2FsIFllYXJzDQogICAgICAgICAgICAiRlkyMDIxLTIwMjIiLCAiRlkyMDIyLTIwMjMiLCAiRlkyMDIzLTIwMjQiLCAiRlkyMDI0LTIwMjUiLCAiRlkyMDI1LTIwMjYiLA0KICAgICAgICAgICAgLy8gVUkgRWxlbWVudHMgKFJvd3MvU2VjdGlvbnMpDQogICAgICAgICAgICAiQWRtaW5fUm93IiwgIkRhc2hib2FyZF9TZWN0aW9uIiwgIkhpc3RvcnlfVGFiIiwNCiAgICAgICAgICAgIC8vIEJ1dHRvbnMNCiAgICAgICAgICAgICJidG5fc2F2ZSIsICJidG5fZGVsZXRlIiwgImJ0bl9wcmludCIsICJidG5fY2FuY2VsIiwgImJ0bl9zeW5jIiwgImJ0bl9leHBvcnQiDQogICAgICAgIF07DQoNCg0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUG9ydGFsIFNlbGVjdGlvbiBmb3IgYSBwYXJ0aWN1bGFyIHVzZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIG9wZW5TZWN1cml0eVBvcnRhbCh0YXJnZXRVc2VyKSB7DQogICAgICAgICAgICB1c2VyTGlzdCA9IHRleHQuc3BsaXQNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBgL1NldHRpbmdzLyR7dGFyZ2V0VXNlcn0udHh0YCB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSB7fTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICB0ZXh0LnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHNldHRpbmdzW3BhcnRzWzBdLnRyaW0oKV0gPSBwYXJ0c1sxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xzID0gWydidG5fdW5sb2NrJywgJ2J0bl9sb2NrJywgJ3NlYXJjaEJ0bicsICdiYW5rLXN5bmMtYnRuJywgJ2J0bl9jb25zZW50JywgJ2J0blN1bW1hcnknXTsNCiAgICAgICAgICAgICAgICBsZXQgcm93c0h0bWwgPSAiIjsNCg0KICAgICAgICAgICAgICAgIC8vIExvb3AgZm9yIFkvTiBkcm9wZG93bnMNCiAgICAgICAgICAgICAgICBjb250cm9scy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gc2V0dGluZ3NbaWRdIHx8ICJZIjsNCiAgICAgICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0cj48dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsgZm9udC1mYW1pbHk6QXJpYWw7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke2lkfTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij48c2VsZWN0IGlkPSJpbnB1dC0ke2lkfSIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6OHB4OyI+PG9wdGlvbiB2YWx1ZT0iWSIgJHt2YWwgPT09ICdZJyA/ICdzZWxlY3RlZCcgOiAnJ30+WTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik4iICR7dmFsID09PSAnTicgPyAnc2VsZWN0ZWQnIDogJyd9Pk48L29wdGlvbj48L3NlbGVjdD48L3RkPjwvdHI+YDsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICAgICAgICAgICAgICAgIC8vIFNUQVJUOiBUSElTIElTIFRIRSBGSUVMRCBUSEFUIFdBUyBNSVNTSU5HIEZST00gWU9VUiBTQ1JFRU4NCiAgICAgICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2VjdGlvbnMgPSBzZXR0aW5nc1snc2VjdGlvbnMnXSB8fCAiIjsNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtZmFtaWx5OkFyaWFsOyBmb250LXdlaWdodDpib2xkOyI+c2VjdGlvbnM8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5wdXQtc2VjdGlvbnMiIHZhbHVlPSIke2N1cnJlbnRTZWN0aW9uc30iIHBsYWNlaG9sZGVyPSJFbnRlciBkaWdpdHMgMTIzNDU2NyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgI2U5MWU2MzsgYm94LXNpemluZzpib3JkZXItYm94OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMXB4OyBjb2xvcjojNjY2OyBtYXJnaW4tdG9wOjVweDsiPlR5cGUgMS03IGhlcmUgdG8gc2hvdy9oaWRlIGFwcCBjb250YWluZXJzLjwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmA7DQogICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoNCiAgICAgICAgICAgICAgICAvLyBUaGUgZXhpc3RpbmcgTWluUmVjb3JkTnVtYmVyIHJvdw0KICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRNaW4gPSBzZXR0aW5nc1snTWluUmVjb3JkTnVtYmVyJ10gfHwgIiI7DQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0cj48dGQgc3R5bGU9InBhZGRpbmc6MTVweDsgZm9udC1mYW1pbHk6QXJpYWw7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5NaW5SZWNvcmROdW1iZXI8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzoxMHB4OyI+PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImlucHV0LU1pblJlY29yZE51bWJlciIgdmFsdWU9IiR7Y3VycmVudE1pbn0iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgI2U5MWU2MzsiPjwvdGQ+PC90cj5gOw0KDQogICAgICAgICAgICAgICAgLy8gVGhlIFVJIGNvbnRhaW5lcg0KICAgICAgICAgICAgICAgIGNvbnN0IHBvcnRhbEh0bWwgPSBgPGRpdiBpZD0icG9ydGFsLW92ZXJsYXkiIHN0eWxlPSJwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjUpOyB6LWluZGV4OjEwMDAwOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3cteTphdXRvOyI+PGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgd2lkdGg6ODAwcHg7IGFsaWduLXNlbGY6ZmxleC1zdGFydDsiPjx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyI+PHRib2R5PiR7cm93c0h0bWx9PC90Ym9keT48L3RhYmxlPjxkaXYgc3R5bGU9InBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpyaWdodDsiPjxidXR0b24gb25jbGljaz0ic2F2ZVBvcnRhbFNldHRpbmdzKCcke3RhcmdldFVzZXJ9JykiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHggMjBweDsgY3Vyc29yOnBvaW50ZXI7Ij5TQVZFIENIQU5HRVM8L2J1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj5gOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHBvcnRhbEh0bWwpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgiRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Qb3J0YWwgU2VsZWN0aW9uIFNhdmluZyBmb3IgIGEgcGFydGljdWxhciB1c2VyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzYXZlUG9ydGFsU2V0dGluZ3ModGFyZ2V0VXNlcikgew0KICAgICAgICAgICAgLy8gQ29sbGVjdCBhbGwgZmllbGRzIGluY2x1ZGluZyAnc2VjdGlvbnMnDQogICAgICAgICAgICBjb25zdCBpZHMgPSBbJ2J0bl91bmxvY2snLCAnYnRuX2xvY2snLCAnc2VhcmNoQnRuJywgJ2Jhbmstc3luYy1idG4nLCAnYnRuX2NvbnNlbnQnLCAnYnRuU3VtbWFyeScsICdzZWN0aW9ucycsICdNaW5SZWNvcmROdW1iZXInXTsNCiAgICAgICAgICAgIGxldCBmaWxlTGluZXMgPSBbXTsNCg0KICAgICAgICAgICAgaWRzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGlucHV0LSR7aWR9YCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSBmaWxlTGluZXMucHVzaChgJHtpZH0gfCAke2VsLnZhbHVlLnRyaW0oKX1gKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGZpbGVMaW5lcy5qb2luKCdcbicpOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt0YXJnZXRVc2VyfS50eHRgLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBmaWxlQ29udGVudA0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiVXBkYXRlZCBzdWNjZXNzZnVsbHkhIik7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3J0YWwtb3ZlcmxheScpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0VXNlciA9PT0gTU1QVF9VU0VSX05BTUUpIGFwcGx5VXNlclBlcm1pc3Npb25zKHRhcmdldFVzZXIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgYWxlcnQoIlNhdmUgZXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Db25zdGFudHMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGNvbnN0IHNjcmlwdFVSTCA9ICJodHRwczovL3NjcmlwdC5nb29nbGUuY29tL21hY3Jvcy9zL0FLZnljYnp6YmlaQzNfb3lBZFN1QVVnWFI2SUJRbU5aM2ZFUm1oSFVWeENNU3k3RUFZQ1g4alg2RmdlcTRNa3FoLXFiTUFaMC9leGVjIjsNCg0KICAgICAgICBjb25zdCBNTVBUX1ZFUlNJT04gPSAiMzAuNiI7DQogICAgICAgIC8vIEFsbCBvcmlnaW5hbCBBdXRoZW50aWNhdGlvbiBLZXlzIHByZXNlcnZlZCBmcm9tIGQ0Mw0KICAgICAgICBjb25zdCBNTVBUX0FVVEhfS0VZID0gJzJrZ3pkdmVpMTBjM3Jtaic7DQogICAgICAgIGNvbnN0IE1NUFRfQVVUSF9TRUNSRVQgPSAnN3dqbHFrM3Frb3M2a29yJzsNCiAgICAgICAgY29uc3QgTU1QVF9BVVRIX1JFRlJFU0ggPSAnSFdnNmtTVEVHc3NBQUFBQUFBQUFBWTZqWV83T3U3YndTOHBYQjMyY0MtU2dvSGRiVnhpRkQ3MFhpVTQ1elU5Mic7DQoNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0RCID0gJy9EYXRhQmFzZXMvTU1QVDIuS1AnOw0KICAgICAgICBjb25zdCBNTVBUX0ZJTEVfVVNFUlMgPSAnL1NldHRpbmdzL1VzZXJzLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9BUFBST1ZFRCA9ICcvU2V0dGluZ3MvQXBwcm92ZWQudHh0JzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0xPR08gPSAnL0ltYWdlcy9Mb2dvLmpwZyc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9EUk9QRE9XTlMgPSAnL1NldHRpbmdzL0Ryb3BEb3duLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9DQVNIID0gJy9TZXR0aW5ncy9DYXNoRGVwb3NpdGVkLnR4dCc7DQogICAgICAgIGNvbnN0IE1NUFRfRklMRV9CQU5LID0gJy9EYXRhQmFzZXMvTU1QVDMuS1AnOw0KICAgICAgICBjb25zdCBNTVBUX1VSTF9FWFBFTlNFUyA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2E1ZTg4dmp6YjZ3MnFtZWwzeXN5eC9FeHBlbnNlcy54bHN4P3Jsa2V5PWptZDhpMGpzMXNreGwydnlhdnM3cG84eXAmZGw9MSI7DQogICAgICAgIGNvbnN0IEJBTktfU1RBVEVNRU5UX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2YyN211eWxvYmRhanZ6bXhjaTg1ZC9CYW5rU3RhdGVtZW50Lnhscz9ybGtleT1yNDNqMHN2bm1saWczcW02aWFpcmJ0b2pkJmRsPTEiOw0KICAgICAgICBjb25zdCBFWEVNUFRfRklMRSA9ICIvU2V0dGluZ3MvRXhlbXB0LnR4dCI7DQogICAgICAgIGNvbnN0IE1NUFRfTE9HX0RJUiA9ICIvTG9ncy8iOyAvLyBUaGUgZm9sZGVyIGZvciB1c2VyIGxvZ3MNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX1NFUSA9ICcvRGF0YUJhc2VzL3NlcXVlbmNlLnR4dCc7DQogICAgICAgIGxldCBNTVBUX1JBRElPX0ZJTEUgPSAnJzsNCg0KICAgICAgICBjb25zdCBNTVBUX0xJTktfQU5PTlkgPSAnaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS8zdDVkNmoyYXExdmF6bmw1aTl6N3gvQW5vbnlGaWxsLnR4dD9ybGtleT1ueGZsOXkyN3BlZXF2MHRzemVqY2kzZmU2JmRsPTEnOw0KDQogICAgICAgIGNvbnN0IE1NUFRfREJfUkFXX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2o2dTNobzE0ZHh5ZHI1djZoNWhiaS9NTVBUMi5LUD9ybGtleT0zZWt1cnJxOHdrejA4YnNwaXh6Z2pqNXpyJnN0PWNwdHlubmJkJnJhdz0xIjsNCg0KICAgICAgICBjb25zdCBDSVRZX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpLzQ3ZmJxdzc5cW9seWNxYjM1czh1Zy9DaXR5Q29ycmVjdGlvbnMudHh0P3Jsa2V5PXp3M3ViN3IzdDJpbzRiZDJxcTNhdXk0NHkmZGw9MSI7DQoNCiAgICAgICAgY29uc3QgQ09VTlRSWV9DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9nbnIxbzJkNHJjYmRiejc1Znhma2IvQ291bnRyeUNvcnJlY3Rpb25zLnR4dD9ybGtleT03NGZsdHJ4eW04ZzBnODhxZWllamoxYnd6JmRsPTEiOw0KDQogICAgICAgIGNvbnN0IE5BTUVfQ09SUkVDVElPTlNfVVJMID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvYnFieHZ4YjFpMjNzOHJkb2Y3anYyL05hbWVDb3JyZWN0aW9ucy50eHQ/cmxrZXk9aHR4ZTUyZzhleW0wbmVwYXd2ZmlzNTJtaCZkbD0xIjsNCg0KICAgICAgICBjb25zdCBNTVBUX0JBQ0tVUF9ESVIgPSAnL0JhY2t1cC8nOw0KDQogICAgICAgIGNvbnN0IE1NUFRfSU1HX0VWRU5UMSA9ICcvSW1hZ2VzL0V2ZW50MS5qcGcnOw0KICAgICAgICBjb25zdCBNTVBUX0lNR19FVkVOVDIgPSAnL0ltYWdlcy9FdmVudDIuanBnJzsNCiAgICAgICAgY29uc3QgTU1QVF9GSUxFX0VWRU5UU19UWFQgPSAnL0ltYWdlcy9FdmVudHNEZXRhaWxzLnR4dCc7DQoNCiAgICAgICAgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPSAwOyAvLyBEZWZhdWx0OiBObyByZXN0cmljdGlvbg0KDQogICAgICAgIGNvbnN0IHBhbmVsQ29udGVudCA9ICh0aXRsZSwgdXJsKSA9PiBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICNmZjk5MzM7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsgZmxleC1zaHJpbms6IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGl0bGV9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJldmVudC1pbWctY29udGFpbmVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke3VybH0iIGFsdD0iRXZlbnQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCmA7DQoNCiAgICAgICAgbGV0IGlzRGlydHkgPSBmYWxzZTsgLy8gVHJhY2tzIGlmIHRoZSByZWNvcmQgaGFzIHVuc2F2ZWQgY2hhbmdlcw0KDQogICAgICAgIGxldCBNTVBUX1RFTVAxID0gIiI7DQogICAgICAgIGxldCBNTVBUX1RFTVAzID0gIiI7DQoNCiAgICAgICAgbGV0IE1NUFRfVVNFUl9OQU1FID0gIiI7DQogICAgICAgIGxldCBNTVBUX0RFVklDRV9JRCA9ICIiOw0KDQoNCiAgICAgICAgbGV0IEdMT0JBTF9EQl9MSU5FUyA9IFtdOw0KICAgICAgICBsZXQgY3VycmVudFJlY29yZEluZGV4ID0gMDsNCiAgICAgICAgbGV0IGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gLTE7DQogICAgICAgIGxldCB0ID0gIiI7DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQ29uc2VudCBsZXR0ZXIgZG93bmxvYWQgYnV0dG9uIGVuYWJsZSAvIGRpc2FibGUgbG9naWMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIC0tLSBORVcgQ09OU0VOVCBMT0dJQyAtLS0NCiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVDb25zZW50KCkgew0KICAgICAgICAgICAgY29uc3QgYW10ID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlKSB8fCAwOw0KICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fY29uc2VudCcpOw0KDQogICAgICAgICAgICAvLyBSdWxlOiBFbmFibGVkIChTb2xpZCBSZWQpIGlmIFRvd2FyZHMgaXMgQ29ycHVzIEFORCBBbW91bnQgPj0gMTAsMDAwDQogICAgICAgICAgICAvLyBPdGhlcndpc2U6IERpc2FibGVkIChGYWRlZCBSZWQpDQogICAgICAgICAgICBpZiAodG93YXJkcy5pbmNsdWRlcygiQ09SUFVTIikgJiYgYW10ID49IDEwMDAwKSB7DQogICAgICAgICAgICAgICAgYnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJidG4tYWN0aW9uIGJ0bi1jb25zZW50LWFjdGl2ZSI7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJidG4tYWN0aW9uIGJ0bi1jb25zZW50LWRpc2FibGVkIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1BvcHVsYXRlcyB0aGUgMjAgZmllbGRzIG9mIHJlY2VpcHRzIGZyb20gZGIgZm9yIHNlbGVjdGVkIHJlY2VpcHQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlSZWNvcmQoaW5kZXgpIHsNCiAgICAgICAgICAgIGlmICghR0xPQkFMX0RCX0xJTkVTW2luZGV4XSkgcmV0dXJuOw0KDQoNCiAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgIHJlc2V0U2lkZVBhbmVscygpOw0KDQoNCiAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBHTE9CQUxfREJfTElORVNbaW5kZXhdLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgIC8vIEhlbHBlciB0byBzYWZlbHkgc2V0IHZhbHVlcw0KICAgICAgICAgICAgY29uc3Qgc2V0VmFsID0gKGlkLCB2YWwpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLnZhbHVlID0gdmFsID8gdmFsLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgY29uc3Qgc2V0Q2hlY2sgPSAoaWQsIHZhbCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgZWwuY2hlY2tlZCA9ICh2YWw/LnRyaW0oKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIik7DQogICAgICAgICAgICB9Ow0KDQoNCiAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgIHdyaXRlVXNlckxvZygidmlld2VkIHJlY2VpcHQgbnVtYmVyOiAiICsgKGNvbHNbMF0gfHwgIkJMQU5LIikpOw0KDQogICAgICAgICAgICAvLyBFWEFDVCBNQVBQSU5HIEZPUiBNTVBUMi5LUCAoVjEuNyBTdGFuZGFyZHMpDQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3JlY25vJywgY29sc1swXSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2RhdGUnLCBjb2xzWzFdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfbmFtZScsIGNvbHNbMl0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9waG9uZScsIGNvbHNbM10pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9hZGRyZXNzJywgY29sc1s0XT8ucmVwbGFjZSgvfi9nLCAnXG4nKSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2VtYWlsJywgY29sc1s1XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3BhbicsIGNvbHNbNl0pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9zdGFyJywgY29sc1s3XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX2dvdGhyYW0nLCBjb2xzWzhdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfYW1vdW50JywgY29sc1s5XSk7DQogICAgICAgICAgICBzZXRWYWwoJ2ZpZWxkX3JlZicsIGNvbHNbMTBdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfbW9kZScsIGNvbHNbMTFdKTsNCg0KICAgICAgICAgICAgLy8gVG93YXJkcyBvZnRlbiBjb250YWlucyBhIHN1ZmZpeCAoZS5nLiwgIkNPUlBVUyAtIDgwRyIpLCB3ZSB0cmltIGl0IGZvciB0aGUgZHJvcGRvd24gbWF0Y2gNCiAgICAgICAgICAgIGNvbnN0IHRvd2FyZHNSYXcgPSBjb2xzWzEyXSB8fCAiIjsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfdG93YXJkcycsIHRvd2FyZHNSYXcuc3BsaXQoJy0nKVswXS50cmltKCkpOw0KDQogICAgICAgICAgICBzZXRDaGVjaygnZmllbGRfY2FuY2VsJywgY29sc1sxM10pOw0KICAgICAgICAgICAgc2V0VmFsKCdmaWVsZF9jb21tZW50cycsIGNvbHNbMTRdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfcGluY29kZScsIGNvbHNbMTVdKTsNCiAgICAgICAgICAgIHNldENoZWNrKCdmaWVsZF9wcmludGVkJywgY29sc1sxNl0pOw0KICAgICAgICAgICAgc2V0Q2hlY2soJ2ZpZWxkX3ByYXNhZGFtJywgY29sc1sxN10pOw0KICAgICAgICAgICAgc2V0Q2hlY2soJ2ZpZWxkX2NvcnB1cycsIGNvbHNbMThdKTsNCiAgICAgICAgICAgIHNldFZhbCgnZmllbGRfY291bnRyeScsIGNvbHNbMTldIHx8ICJJTkRJQSIpOw0KDQogICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0ZUNvbnNlbnQgPT09ICJmdW5jdGlvbiIpIHZhbGlkYXRlQ29uc2VudCgpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVSZWNlaXB0UHJldmlldyA9PT0gImZ1bmN0aW9uIikgdXBkYXRlUmVjZWlwdFByZXZpZXcoaW5kZXgpOw0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlID0gaW5kZXg7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9SZWNlaXB0IFByZXZpZXcNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlY2VpcHRQcmV2aWV3KGluZGV4KSB7DQogICAgICAgICAgICBjb25zdCBmID0gR0xPQkFMX0RCX0xJTkVTW2luZGV4XS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgY29uc3QgbG9nb1NyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluTG9nb0ltZycpPy5zcmMgfHwgIiI7DQoNCiAgICAgICAgICAgIC8vIEV4dHJhY3Qgc3BlY2lhbCB0b3dhcmRzIHticmFja2V0c30NCiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzID0gZlsxNF0gfHwgIiI7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsTWF0Y2ggPSBjb21tZW50cy5tYXRjaCgvXHsuKj9cfS8pOw0KICAgICAgICAgICAgY29uc3Qgc3BlY2lhbFRvd2FyZHMgPSBzcGVjaWFsTWF0Y2ggPyBzcGVjaWFsTWF0Y2hbMF0gOiAiIjsNCg0KICAgICAgICAgICAgLy8gRGF0YSBNYXBwaW5nDQogICAgICAgICAgICBjb25zdCBwaW5jb2RlID0gZlsxNV0gfHwgIiI7DQogICAgICAgICAgICBjb25zdCBjb3VudHJ5ID0gZlsxOV0gfHwgIklORElBIjsNCg0KICAgICAgICAgICAgLy8gLS0tIFdBVEVSTUFSSyBMT0dJQyAtLS0NCiAgICAgICAgICAgIGNvbnN0IGlzQ2FuY2VsbGVkID0gKGZbMTNdPy50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gIllFUyIpOw0KICAgICAgICAgICAgY29uc3Qgd2F0ZXJtYXJrSFRNTCA9IGlzQ2FuY2VsbGVkID8NCiAgICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB0b3A6IDUwJTsgbGVmdDogNTAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSByb3RhdGUoLTMwZGVnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogNjBwdDsgY29sb3I6IHJnYmEoMjU1LCAwLCAwLCAwLjI1KTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJvcmRlcjogMTBweCBzb2xpZCByZ2JhKDI1NSwgMCwgMCwgMC4yNSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7IHotaW5kZXg6IDEwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FOQ0VMTEVEDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmAgOiAiIjsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2VpcHRfZGlzcGxheV9hcmVhJykuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWNlaXB0LWNvbnRhaW5lciIgc3R5bGU9ImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBwb3NpdGlvbjogcmVsYXRpdmU7IG92ZXJmbG93OiBoaWRkZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7d2F0ZXJtYXJrSFRNTH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJoZWFkZXItdGFibGUiIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJsb2dvLWNvbCIgc3R5bGU9IndpZHRoOiA3MHB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtsb2dvU3JjfSIgc3R5bGU9IndpZHRoOiA3MHB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iYWRkcmVzcy1jb2wiIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRydXN0LW5hbWUiIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNHB0OyI+TVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1QgKFJFR0QuKTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idHJ1c3QtZGV0YWlscyIgc3R5bGU9ImZvbnQtc2l6ZTogOXB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmV3IE5vLiA0LCBPbGQgTm8uIDIzLCBQaXRjaHVwaWxsYWkgU3RyZWV0LCBNeWxhcG9yZSwgQ2hlbm5haS02MDAgMDA0Ljxicj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaG9uZTogNjM4MDg5ODIzMSwgODYxMDIxNDEzOC4gV2hhdHNBcHA6IDYzODA4OTgyMzENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ2YXJpYWJsZS1yb3ciIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi10b3A6IDE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5EYXRlOiAke2ZbMV19PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTJwdDsiPlJFQ0VJUFQ8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+Tm86ICR7ZlswXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMTBwdDsgZm9udC1zaXplOiAxMC41cHQ7IGxpbmUtaGVpZ2h0OiAxLjY7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWNlaXZlZCB3aXRoIHRoYW5rcyBScy4gPGI+JHtmWzldfTwvYj4gKDxiPlJ1cGVlcyAke3RvV29yZHMoZls5XSl9IG9ubHk8L2I+KSBmb3IgPGI+JHtmWzEyXX08L2I+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlhICR7ZlsxMV19IDxiPiR7ZlsxMF0gfHwgJyd9PC9iPiBmcm9tOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpdmlkZXIiIHN0eWxlPSJib3JkZXItdG9wOiAxcHggc29saWQgI2NjYzsgbWFyZ2luOiAxMHB4IDA7Ij48L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJkb25vci10YWJsZSIgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBsaW5lLWhlaWdodDogMS44OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAyMCU7IHZlcnRpY2FsLWFsaWduOiB0b3A7Ij5OYW1lPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxiPiR7ZlsyXX08L2I+PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+UEFOPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7Zls2XSB8fCAnTi9BJ308L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7Ij4ke3NwZWNpYWxUb3dhcmRzfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogdG9wOyI+UGhvbmU8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtmWzNdIHx8ICdOL0EnfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246IHRvcDsiPkFkZHJlc3M8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+JHtmWzRdfSAtICR7cGluY29kZX08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOiB0b3A7Ij5Db3VudHJ5PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPiR7Y291bnRyeX08L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkaXZpZGVyIiBzdHlsZT0iYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7IG1hcmdpbjogMTBweCAwOyI+PC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDdwdDsgZm9udC1zdHlsZTogaXRhbGljOyI+KkNvbXB1dGVyIEdlbmVyYXRlZCBSZWNlaXB0IC0gTm8gc2lnbmF0dXJlIFJlcXVpcmVkPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyLXRydXN0LXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogOXB0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBNWUxBSSBNQUhBUEVSSVlBVkEgQU5VU0hBTSBUUlVTVA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci10YXgtaW5mbyIgc3R5bGU9ImZvbnQtc2l6ZTogOHB0OyBtYXJnaW4tdG9wOiAxNXB4OyBib3JkZXItdG9wOiAxcHggZGFzaGVkICNlZWU7IHBhZGRpbmctdG9wOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWMgMTItQSBWYWxpZCB0aWxsIDMxLTAzLTIwMjYgfCBQQU4gQUFFVE01MTQ1Sg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KYDsNCg0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vRmV0Y2ggRHJvYm94IFRva2VuIGZyb20gYXBpDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBBbGwgQXV0aC9Ub2tlbi9Mb2FkIGxvZ2ljIHByZXNlcnZlZCBmcm9tIGQ0Mw0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXRNTVBUVG9rZW4oKSB7DQogICAgICAgICAgICBjb25zdCBoID0gYnRvYShNTVBUX0FVVEhfS0VZLnRyaW0oKSArICI6IiArIE1NUFRfQVVUSF9TRUNSRVQudHJpbSgpKTsNCiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vb2F1dGgyL3Rva2VuJywgew0KICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmFzaWMgJyArIGgsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9LA0KICAgICAgICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyAnZ3JhbnRfdHlwZSc6ICdyZWZyZXNoX3Rva2VuJywgJ3JlZnJlc2hfdG9rZW4nOiBNTVBUX0FVVEhfUkVGUkVTSC50cmltKCkgfSkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOyByZXR1cm4gZC5hY2Nlc3NfdG9rZW4gfHwgbnVsbDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0luaXRpYWxpemVzIGRhdGEgYXQgbGF1bmNoLiB2ZXJ5IGNydWNpYWwuIHByb2JsZW1hdGljIGZ1bmN0aW9uLiBub3QgdG8gYmUgZGlzdHVyYmVkLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZU1NUFQoKSB7DQogICAgICAgICAgICBjb25zdCBjdnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsgY29uc3QgZ2wgPSBjdnMuZ2V0Q29udGV4dCgnd2ViZ2wnKTsNCiAgICAgICAgICAgIGNvbnN0IGRJID0gZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvJyk7DQogICAgICAgICAgICBjb25zdCByZW4gPSBnbC5nZXRQYXJhbWV0ZXIoZEkuVU5NQVNLRURfUkVOREVSRVJfV0VCR0wpOw0KICAgICAgICAgICAgbGV0IGhhc2ggPSAwOyBjb25zdCBzdHIgPSBuYXZpZ2F0b3IudXNlckFnZW50ICsgcmVuICsgc2NyZWVuLndpZHRoICsgc2NyZWVuLmhlaWdodDsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7IGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIHN0ci5jaGFyQ29kZUF0KGkpOyBoYXNoIHw9IDA7IH0NCiAgICAgICAgICAgIC8vbGV0IGRldklEID0gIk1NUFQtREVWLVNXLSIgKyBNYXRoLmFicyhoYXNoKTsNCiAgICAgICAgICAgIC8vZGV2SUQgPSBNTVBUX0dMT0JBTF9JRDsNCg0KICAgICAgICAgICAgY29uc3QgZGV2SUQgPSBNTVBUX0dMT0JBTF9JRDsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlEZXZpY2VJRCcpLmlubmVyVGV4dCA9IGRldklEOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlWZXJzaW9uJykuaW5uZXJUZXh0ID0gTU1QVF9WRVJTSU9OOw0KICAgICAgICAgICAgTU1QVF9ERVZJQ0VfSUQgPSBkZXZJRDsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICB0ID0gYXdhaXQgZ2V0TU1QVFRva2VuKCk7DQogICAgICAgICAgICAgICAgY29uc3QgbFIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7IG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0xPR08gfSkgfSB9KTsNCiAgICAgICAgICAgICAgICBpZiAobFIub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IGF3YWl0IGxSLmJsb2IoKTsgY29uc3QgdSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYik7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvQ29udGFpbmVyJykuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSIke3V9IiBjbGFzcz0ibG9nby1jaXJjbGUgbG9nby1sYXJnZSI+YDsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29IZWFkZXJDb250YWluZXInKS5pbm5lckhUTUwgPSBgPGltZyBpZD0ibWFpbkxvZ29JbWciIHNyYz0iJHt1fSIgY2xhc3M9ImxvZ28tY2lyY2xlIj5gOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zdCBhUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQVBQUk9WRUQgfSkgfSB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBhVCA9IGF3YWl0IGFSLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIC8vIDEuIE1VU1QgQkUgT1VUU0lERTogRGVmaW5lIHRoZSBJRCBjbGVhcmx5DQogICAgICAgICAgICAgICAgTU1QVF9ERVZJQ0VfSUQgPSBkZXZJRDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIFRIRSBNQUlOIEdBVEUNCiAgICAgICAgICAgICAgICBpZiAoYVQgJiYgYVQuaW5jbHVkZXMoTU1QVF9ERVZJQ0VfSUQpICYmIE1NUFRfREVWSUNFX0lEICE9PSAiIikgew0KDQogICAgICAgICAgICAgICAgICAgIC8vIElOU0VSVCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgICAgICAgICAgcnVuUGVyc29uYWxTZWN1cml0eUdhdGUoYVQsIGRldklEKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU1VDQ0VTUyBQQVRIIC0tLQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQWNjZXNzIEdyYW50ZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhTY3JlZW4nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkFwcENvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KDQogICAgICAgICAgICAgICAgICAgIGxvYWREYXRhKHQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDEuIExvZyB0aGUgTGF1bmNoIHdpdGggdGhlIGRpdmlkZXINCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVVc2VyTG9nKCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZVVzZXJMb2coIkxBVU5DSEVEOiBTZXNzaW9uIFN0YXJ0ZWQiKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBQZXJmb3JtIHRoZSBTZXF1ZW5jZSBDcm9zcy1DaGVjaw0KICAgICAgICAgICAgICAgICAgICBpZiAoR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RMaW5lID0gR0xPQkFMX0RCX0xJTkVTW0dMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbExhc3RSTiA9IGxhc3RMaW5lLnNwbGl0KCd8JylbMF0udHJpbSgpOyAvLyBHZXQgUk4gZnJvbSBEQiAoZS5nLiwgQ0cwMDU5ODIpDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxDb3VudCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgd2l0aCB0aGUgc2VxdWVuY2UgdmFyaWFibGVzIGxvYWRlZCBkdXJpbmcgbG9hZERhdGEoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gKEluIHlvdXIgc2NyaXB0LCB0aGVzZSBhcmUgdXN1YWxseSAnbGFzdFJlY2VpcHRObycgYW5kICd0b3RhbFJlY29yZENvdW50JykNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3R1YWxMYXN0Uk4gIT09IGxhc3RSZWNlaXB0Tm8pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ2hvaWNlID0gY29uZmlybSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNFUVVFTkNFIE1JU01BVENIIERFVEVDVEVEIVxuXG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYERCIEFjdHVhbDogJHthY3R1YWxMYXN0Uk59XG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNlcXVlbmNlIEZpbGU6ICR7bGFzdFJlY2VpcHROb31cblxuYCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBXb3VsZCB5b3UgbGlrZSB0byBhdXRvLWNvcnJlY3QgdGhlIHNlcXVlbmNlIGZpbGUgdG8gbWF0Y2ggdGhlIGRhdGFiYXNlP2ANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJDaG9pY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29ycmVjdFNlcXVlbmNlKGFjdHVhbExhc3RSTiwgYWN0dWFsQ291bnQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiV0FSTklORzogU2VxdWVuY2UgTWlzbWF0Y2ggZGV0ZWN0ZWQgYnV0IGlnbm9yZWQgYnkgdXNlci4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAvLyAxLiBDb25maXJtIHdlIHJlYWNoZWQgdGhpcyBwb2ludA0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQmxvY2tpbmcgYWNjZXNzIGZvciBJRDogIiArIE1NUFRfREVWSUNFX0lEKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBUYXJnZXQgdGhlIEVOVElSRSBhdXRoIHNjcmVlbiB0byBwcmV2ZW50IGxheWVyaW5nIGlzc3Vlcw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtYWluQXV0aFNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRoU2NyZWVuJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKG1haW5BdXRoU2NyZWVuKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtYWluQXV0aFNjcmVlbi5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgaGVpZ2h0OiAxMDB2aDsgYmFja2dyb3VuZDogI2Y0ZjRmNDsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDMwcHg7IGJvcmRlci1yYWRpdXM6IDE1cHg7IGJvcmRlcjogMnB4IHNvbGlkICNmZjRkNGQ7IGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC4xKTsgbWF4LXdpZHRoOiA0NTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOiAjZDk1MzRmOyBtYXJnaW4tYm90dG9tOiAxMHB4OyI+8J+aqyBBQ0NFU1MgUkVTVFJJQ1RFRDwvaDI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJjb2xvcjogIzU1NTsiPlRoaXMgZGV2aWNlIGlzIG5vdCByZWdpc3RlcmVkIGluIHRoZSBzeXN0ZW0uPC9wPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6ICMxYTFhMWE7IGNvbG9yOiAjMzlmZjE0OyBwYWRkaW5nOiAxNXB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMjBweCAwOyBib3JkZXI6IDFweCBzb2xpZCAjNDQ0OyB3b3JkLWJyZWFrOiBicmVhay1hbGw7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7TU1QVF9ERVZJQ0VfSUR9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6IDEzcHg7IGNvbG9yOiAjODg4OyI+UHJvdmlkZSB0aGlzIElEIHRvIEFkbWluIGZvciA8Yj5DRyBSZWNlaXB0PC9iPiBhY3RpdmF0aW9uLjwvcD4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImxvY2F0aW9uLnJlbG9hZCgpIiBzdHlsZT0iYmFja2dyb3VuZDogI2Q5NTM0ZjsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEycHggMjVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyB3aWR0aDogMTAwJTsgbWFyZ2luLXRvcDogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkVUUlkgQ09OTkVDVElPTg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBFbWVyZ2VuY3kgZmFsbGJhY2sgaWYgZXZlbiBhdXRoU2NyZWVuIGlzIG1pc3NpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gIjxoMSBzdHlsZT0nY29sb3I6cmVkOyB0ZXh0LWFsaWduOmNlbnRlcjsgbWFyZ2luLXRvcDo1MHB4Oyc+QUNDRVNTIERFTklFRDogIiArIE1NUFRfREVWSUNFX0lEICsgIjwvaDE+IjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gSGFyZCBzdG9wDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gQWZ0ZXIgc3VjY2Vzc2Z1bGx5IGZldGNoaW5nIGV2ZXJ5dGhpbmcgYW5kIGlkZW50aWZ5aW5nIHRoZSB1c2VyOg0KICAgICAgICAgICAgICAgIGF3YWl0IGxvZ0xhdW5jaCgpOw0KDQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vUG9wdWxhdGVzIGRyb3Bkb3duIG1lbnVzIGZvciBUb3dhcmRzIGFuZCBNb2RlIC0gbGlzdCBmcm9tIERyb3BEb3duLnR4dCBpbiBzZXR0aW5ncyBmb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREcm9wZG93bnModG9rZW4pIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZHJSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfRFJPUERPV05TIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghZHJSLm9rKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCBkclIudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdHh0LnNwbGl0KCdcbicpLm1hcChsID0+IGwudHJpbSgpKS5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDApOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbVMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbW9kZScpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Rvd2FyZHMnKTsNCg0KICAgICAgICAgICAgICAgIC8vIENsZWFyIGV4aXN0aW5nIG9wdGlvbnMNCiAgICAgICAgICAgICAgICBtUy5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICB0Uy5pbm5lckhUTUwgPSAiIjsNCg0KICAgICAgICAgICAgICAgIGxldCBjdXJTZWMgPSAiIjsNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igc2VjdGlvbiBoZWFkZXJzIGxpa2UgW01PREVdIG9yIFtUT1dBUkRTXQ0KICAgICAgICAgICAgICAgICAgICBpZiAobC5zdGFydHNXaXRoKCdbJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1clNlYyA9IGwudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIHZhbHVlIChwYXJ0IGJlZm9yZSB0aGUgaHlwaGVuKQ0KICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gbC5zcGxpdCgnLScpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIG8udmFsdWUgPSB2YWw7DQogICAgICAgICAgICAgICAgICAgIG8udGV4dENvbnRlbnQgPSB2YWw7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNlYyA9PT0gIltNT0RFXSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1TLmFwcGVuZENoaWxkKG8pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1clNlYyA9PT0gIltUT1dBUkRTXSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRTLmFwcGVuZENoaWxkKG8pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkRyb3Bkb3ducyBQb3B1bGF0ZWQiKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkRyb3Bkb3duIGVycm9yOiIsIGVycik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9Db252ZXJ0cyBudW1iZXJzIHRvIHdvcmRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiB0b1dvcmRzKG4pIHsNCiAgICAgICAgICAgIGxldCBhID0gWycnLCAnT25lICcsICdUd28gJywgJ1RocmVlICcsICdGb3VyICcsICdGaXZlICcsICdTaXggJywgJ1NldmVuICcsICdFaWdodCAnLCAnTmluZSAnLCAnVGVuICcsICdFbGV2ZW4gJywgJ1R3ZWx2ZSAnLCAnVGhpcnRlZW4gJywgJ0ZvdXJ0ZWVuICcsICdGaWZ0ZWVuICcsICdTaXh0ZWVuICcsICdTZXZlbnRlZW4gJywgJ0VpZ2h0ZWVuICcsICdOaW5ldGVlbiAnXTsNCiAgICAgICAgICAgIGxldCBiID0gWycnLCAnJywgJ1R3ZW50eScsICdUaGlydHknLCAnRm9ydHknLCAnRmlmdHknLCAnU2l4dHknLCAnU2V2ZW50eScsICdFaWdodHknLCAnTmluZXR5J107DQogICAgICAgICAgICBsZXQgbnVtID0gKCcwMDAwMDAwMDAnICsgcGFyc2VJbnQobikpLnN1YnN0cigtOSkubWF0Y2goL14oXGR7Mn0pKFxkezJ9KShcZHsyfSkoXGR7MX0pKFxkezJ9KSQvKTsNCiAgICAgICAgICAgIGlmICghbnVtKSByZXR1cm4gIiI7DQogICAgICAgICAgICBsZXQgc3RyID0gJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVsxXSAhPSAwKSA/IChhW051bWJlcihudW1bMV0pXSB8fCBiW251bVsxXVswXV0gKyAnICcgKyBhW251bVsxXVsxXV0pICsgJ0Nyb3JlICcgOiAnJzsNCiAgICAgICAgICAgIHN0ciArPSAobnVtWzJdICE9IDApID8gKGFbTnVtYmVyKG51bVsyXSldIHx8IGJbbnVtWzJdWzBdXSArICcgJyArIGFbbnVtWzJdWzFdXSkgKyAnTGFraCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVszXSAhPSAwKSA/IChhW051bWJlcihudW1bM10pXSB8fCBiW251bVszXVswXV0gKyAnICcgKyBhW251bVszXVsxXV0pICsgJ1Rob3VzYW5kICcgOiAnJzsNCiAgICAgICAgICAgIHN0ciArPSAobnVtWzRdICE9IDApID8gKGFbTnVtYmVyKG51bVs0XSldIHx8IGJbbnVtWzRdWzBdXSArICcgJyArIGFbbnVtWzRdWzFdXSkgKyAnSHVuZHJlZCAnIDogJyc7DQogICAgICAgICAgICBzdHIgKz0gKG51bVs1XSAhPSAwKSA/ICgoc3RyICE9ICcnKSA/ICdhbmQgJyA6ICcnKSArIChhW051bWJlcihudW1bNV0pXSB8fCBiW251bVs1XVswXV0gKyAnICcgKyBhW251bVs1XVsxXV0pIDogJyc7DQogICAgICAgICAgICByZXR1cm4gc3RyLnRyaW0oKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIG5hdmlnYXRlRGF0YWJhc2UodikgeyBjdXJyZW50UmVjb3JkSW5kZXggPSB2OyBkaXNwbGF5UmVjb3JkKHYpOyB9DQogICAgICAgIGZ1bmN0aW9uIGNoYW5nZVJlY29yZChkKSB7IGxldCBuID0gcGFyc2VJbnQoY3VycmVudFJlY29yZEluZGV4KSArIGQ7IGlmIChuID49IDAgJiYgbiA8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGgpIHsgY3VycmVudFJlY29yZEluZGV4ID0gbjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKS52YWx1ZSA9IG47IGRpc3BsYXlSZWNvcmQobik7IH0gfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0NyZWF0ZXMgYSBOZXcgQ0cgUmVjZWlwdCAtIEFzc2luZ3MgYSBuZXcgdW5zZWQgQ0cgcmVjZWlwdCBudW1iZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlTmV3Uk4oKSB7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tcm4nKTsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTsNCg0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IHRydWU7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXROZXdSZWNlaXB0Jyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHNjcmlwdFVSTCwgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogZm9ybURhdGEgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlY2VpcHQgJiYgZGF0YS5pbmRleCkgew0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgICAgICAgICAgd3JpdGVVc2VyTG9nKCJHRU5FUkFURUQgTkVXIFJFQ0VJUFQ6ICIgKyBkYXRhLnJlY2VpcHQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMTogVXBkYXRlIHRoZSBnbG9iYWwgaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gcGFyc2VJbnQoZGF0YS5pbmRleCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCAyOiBGSVggVEhFIE1FTU9SWSBHQVANCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRhdGFiYXNlIGhhcyA1MDAgcmVjb3JkcyAoMC00OTkpLCBhbmQgbmV3IGluZGV4IGlzIDUwMCwNCiAgICAgICAgICAgICAgICAgICAgLy8gd2UgTVVTVCBncm93IHRoZSBhcnJheSBzbyBpbmRleCA1MDAgYWN0dWFsbHkgZXhpc3RzLg0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA8PSBjdXJyZW50UmVjb3JkSW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5wdXNoKCIiKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgMzogUkVTRVQgU0VBUkNIIFRSQUNLRVINCiAgICAgICAgICAgICAgICAgICAgLy8gWW91ciBzZWFyY2ggZW5naW5lIGxpa2VseSB1c2VzIGEgdmFyaWFibGUgdG8gcmVtZW1iZXIgd2hlcmUgaXQgd2FzLg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXNldHRpbmcgdGhpcyBmb3JjZXMgc2VhcmNoIHRvIHJlLXNjYW4gZnJvbSB0aGUgbmV3IGVuZC4NCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXN0Rm91bmRTZWFyY2hJbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gLTE7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gYCR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtub3cuZ2V0RnVsbFllYXIoKX1gOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIEZpZWxkcw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZSA9IGRhdGEucmVjZWlwdDsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZSA9IGZvcm1hdHRlZERhdGU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgZW50cnkgZmllbGRzDQogICAgICAgICAgICAgICAgICAgIFsnZmllbGRfbmFtZScsICdmaWVsZF9waG9uZScsICdmaWVsZF9hZGRyZXNzJywgJ2ZpZWxkX2VtYWlsJywgJ2ZpZWxkX3BhbicsICdmaWVsZF9zdGFyJywgJ2ZpZWxkX2dvdGhyYW0nLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3JlZicsICdmaWVsZF9jb21tZW50cyddLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwpIGVsLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSAiMDAwMDAwIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSA9ICJJTkRJQSI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUgPSAiQ2FzaCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUgPSAiT1RIRVJTIjsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbENoZWNrKSBjYW5jZWxDaGVjay5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3ByaW50ZWQnKS5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmFzYWRhbScpLmNoZWNrZWQgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIDQ6IFN5bmMgdGhlIHNwZWNpZmljIGxpbmUgaW4gbWVtb3J5DQogICAgICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdID0gYCR7ZGF0YS5yZWNlaXB0fXwke2Zvcm1hdHRlZERhdGV9fHx8fHx8fHx8fHxDYXNofE9USEVSU3xZRVN8fDAwMDAwMHxOT3xOT3x8SU5ESUFgOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgNTogVXBkYXRlIHRoZSBTbGlkZXINCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7IC8vIC0gMTsgLy8gRXhwbGljaXRseSB1c2UgdGhlIG5ldyBhcnJheSBsZW5ndGgNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IGN1cnJlbnRSZWNvcmRJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkTnVtYmVyRGlzcGxheScpLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KDQogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2soZmFsc2UpOw0KICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAoVGhlIHJlc3Qgb2YgeW91ciBldmVudCBsaXN0ZW5lciBsb2dpYyBmb3IgdW5jaGVja2luZyBjYW5jZWwgc3RheXMgZXhhY3RseSB0aGUgc2FtZSkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpZ2dlckZpZWxkcyA9IFsnZmllbGRfbmFtZScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcGhvbmUnLCAnZmllbGRfYWRkcmVzcyddOw0KICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyRmllbGRzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUudHJpbSgpICE9PSAiIiAmJiBjYW5jZWxDaGVjay5jaGVja2VkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxDaGVjay5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29scyA9IEdMT0JBTF9EQl9MSU5FU1tjdXJyZW50UmVjb3JkSW5kZXhdLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPj0gMTQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xzWzEzXSA9ICJOTyI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTW2N1cnJlbnRSZWNvcmRJbmRleF0gPSBjb2xzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZS5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgICAgICBybkJ0bi5pbm5lclRleHQgPSAiUk4iOw0KICAgICAgICAgICAgICAgIC8vIERvIG5vdCByZS1lbmFibGUgcm5CdG4gaGVyZSwgaXQgc3RheXMgZGlzYWJsZWQgdW50aWwgbG9ja2VkIGFzIHBlciB5b3VyIGxvZ2ljDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRG93bmxvYWRzIGEgUERGIFJlY2VpcHQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkUmVjZWlwdFBERigpIHsNCiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjZWlwdC1jb250YWluZXInKTsNCiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCByZWNObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlOw0KDQogICAgICAgICAgICBjb25zdCBvcHQgPSB7DQogICAgICAgICAgICAgICAgbWFyZ2luOiBbMC4yLCAwLjJdLCAvLyBbdG9wL2JvdHRvbSwgbGVmdC9yaWdodF0NCiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVjTm8gKyAnLnBkZicsDQogICAgICAgICAgICAgICAgaW1hZ2U6IHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAxIH0sDQogICAgICAgICAgICAgICAgaHRtbDJjYW52YXM6IHsNCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDIsDQogICAgICAgICAgICAgICAgICAgIHVzZUNPUlM6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIGxvZ2dpbmc6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAvLyBUaGVzZSB0d28gbGluZXMgYXJlIHRoZSBrZXkgdG8gZml4aW5nIHRoZSAiSGFsZiBQYWdlIiBjdXQtb2ZmOg0KICAgICAgICAgICAgICAgICAgICBzY3JvbGxZOiAwLA0KICAgICAgICAgICAgICAgICAgICB3aW5kb3dIZWlnaHQ6IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBqc1BERjogeyB1bml0OiAnaW4nLCBmb3JtYXQ6ICdhNCcsIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIC8vIE5ldyBsb2dpYzogVXNlICdodG1sMnBkZicgdG8gY2FwdHVyZSB0aGUgZnVsbCBzY3JvbGwgaGVpZ2h0DQogICAgICAgICAgICBodG1sMnBkZigpLmZyb20oZWxlbWVudCkuc2V0KG9wdCkudG9QZGYoKS5nZXQoJ3BkZicpLnRoZW4oZnVuY3Rpb24gKHBkZikgew0KICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgUERGIG9ubHkgaGFzIDEgcGFnZQ0KICAgICAgICAgICAgICAgIHZhciB0b3RhbFBhZ2VzID0gcGRmLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKTsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdG90YWxQYWdlczsgaSA+IDE7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBwZGYuZGVsZXRlUGFnZShpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KS5zYXZlKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU2VuZHMgYSB3aGF0c2FwcCB0ZXh0IG1lc3NhZ2UgYWxvbmcgd2l0aCBvcHRpb24gb2YgcGFzdGluZyBhY3R1YWwgcmVjZWlwdCAtIGRpcmVjdCB0byBkb25vciB0ZWxlcGhvbmUgbnVtYmVyDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzZW5kV2hhdHNBcHAoKSB7DQogICAgICAgICAgICBjb25zdCByZWNlaXB0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWNlaXB0LWNvbnRhaW5lcicpOw0KDQogICAgICAgICAgICAvLyAxLiBQRVJGT1JNIENMSVBCT0FSRCBDT1BZIChXYWl0IGZvciBpdCB0byBmaW5pc2gpDQogICAgICAgICAgICBpZiAocmVjZWlwdEVsZW1lbnQpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBhd2FpdCBodG1sMmNhbnZhcyhyZWNlaXB0RWxlbWVudCwgeyBzY2FsZTogMiwgdXNlQ09SUzogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2FudmFzLnRvQmxvYihyZXNvbHZlKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgQ2xpcGJvYXJkSXRlbSh7ICJpbWFnZS9wbmciOiBibG9iIH0pOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtpdGVtXSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDbGlwYm9hcmQgSW1hZ2UgUmVhZHkiKTsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQ2xpcGJvYXJkIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAyLiBDT0xMRUNUIERBVEEgRk9SIFRFWFQNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgdG93YXJkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBwaG9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waG9uZScpLnZhbHVlLnJlcGxhY2UoL1xEL2csICcnKTsNCg0KICAgICAgICAgICAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29tbWVudHMnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxNYXRjaCA9IGNvbW1lbnRzLm1hdGNoKC9cey4qP1x9Lyk7DQogICAgICAgICAgICBjb25zdCBzcGVjaWFsU3RyID0gc3BlY2lhbE1hdGNoID8gYCAoJHtzcGVjaWFsTWF0Y2hbMF19KWAgOiAiIjsNCg0KICAgICAgICAgICAgaWYgKCFwaG9uZSkgeyBhbGVydCgiTm8gcGhvbmUgbnVtYmVyISIpOyByZXR1cm47IH0NCg0KICAgICAgICAgICAgLy8gMy4gQlVJTEQgVEVYVCBVUkwNCiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPQ0KICAgICAgICAgICAgICAgIGAqTVlMQUkgTUFIQVBFUklZQVZBIEFOVVNIQU0gVFJVU1QqJTBBYCArDQogICAgICAgICAgICAgICAgYC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0lMEFgICsNCiAgICAgICAgICAgICAgICBgKlJlY2VpcHQgTm86KiAke3JlY05vfSUwQWAgKw0KICAgICAgICAgICAgICAgIGAqRGF0ZToqICR7ZGF0ZX0lMEElMEFgICsNCiAgICAgICAgICAgICAgICBgUmVjZWl2ZWQgd2l0aCB0aGFua3MgZnJvbSAqU2hyaS9TbXQuICR7bmFtZX0qJTBBYCArDQogICAgICAgICAgICAgICAgYGEgc3VtIG9mICpScy4gJHthbW91bnR9KiBvbmx5JTBBYCArDQogICAgICAgICAgICAgICAgYHRvd2FyZHMgKiR7dG93YXJkc30ke3NwZWNpYWxTdHJ9KiUwQSUwQWAgKw0KICAgICAgICAgICAgICAgIGBfVHJ1c3QgUmVnaXN0cmF0aW9uIHZhbGlkIHRpbGwgMzEtMDMtMjAyNl9gOw0KDQogICAgICAgICAgICBjb25zdCB3YVVybCA9IGBodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT05MSR7cGhvbmV9JnRleHQ9JHttZXNzYWdlfWA7DQoNCiAgICAgICAgICAgIC8vIDQuIE9QRU4gV0hBVFNBUFANCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHdhVXJsLCAnX2JsYW5rJyk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gRG93bmxvYWRzIGEgQ29uc2VudCBsZXR0ZXIgZm9yIGEgRG9ub3IgLSBmb3IgY29ycHVzIGFuZCBhbW91bnQgPj0xMDAwMA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gY29uc2VudEFjdGlvbigpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlY05vID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlY25vJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2RhdGUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9hbW91bnQnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcmVmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3JlZicpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BhbicpLnZhbHVlIDogIiI7DQoNCiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZEFkZHJlc3MgPSBhZGRyZXNzLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7DQogICAgICAgICAgICBjb25zdCBhbW91bnRJbldvcmRzID0gTnVtYmVyKGFtb3VudCkudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJykgKyAiIE9ubHkiOw0KDQogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAvLyBVc2luZyBhIHNsaWdodGx5IHNtYWxsZXIgcGFkZGluZyB0byBlbnN1cmUgMS1wYWdlIGZpdA0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAuNmluIDAuNzVpbic7DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnIlRpbWVzIE5ldyBSb21hbiIsIHNlcmlmJzsNCiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9ICcxLjQnOyAvLyBTbGlnaHRseSB0aWdodGVyIGxpbmUgaGVpZ2h0DQogICAgICAgICAgICBlbGVtZW50LnN0eWxlLmNvbG9yID0gJyMwMDAnOw0KICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9ICcxMnB0JzsNCg0KICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7IG1hcmdpbi1ib3R0b206IDMwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9IndpZHRoOiA1NSU7IHRleHQtYWxpZ246IGxlZnQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij48Yj5Gcm9tOjwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+JHtuYW1lfTwvYj48L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+JHtmb3JtYXR0ZWRBZGRyZXNzfTwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5QaDogJHtwaG9uZX08L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMzVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjowOyI+PGI+VG86PC9iPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPjxiPk1ZTEFJIE1BSEFQRVJJWUFWQSBBTlVTSEFNIFRSVVNUPC9iPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPlNocmVlIEdhbmVzaCBGbGF0cyw8L3A+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5OZXcgTm8uIDUyLzIsIE5vcnRoIE1hZGEgU3RyZWV0LDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MDsiPk15bGFwb3JlLCBDaGVubmFpIDYwMCAwMDQuPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogMzBweDsgZm9udC1zaXplOiAxM3B0OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdWI6IERvbmF0aW9uIFRvd2FyZHMgQ09SUFVTIG9mIHRoZSBUcnVzdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5TaXIsPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JIGhlcmVieSBjb25maXJtIHRoYXQgbXkgY29udHJpYnV0aW9uIGFzIHBlciBkZXRhaWxzIGdpdmVuIGJlbG93IGlzIHRvd2FyZHMgPGI+Q09SUFVTPC9iPiBvZiBNeWxhaSBNYWhhcGVyaXlhdmEgQW51c2hhbSBUcnVzdC48L3A+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luOiAyNXB4IDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJ3aWR0aDogMzUlOyBwYWRkaW5nOiA0cHggMDsiPkFtb3VudDwvdGQ+PHRkPjogUnMuIDxiPiR7YW1vdW50fTwvYj48L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5BbW91bnQgaW4gV29yZHM8L3RkPjx0ZD46IFJ1cGVlcyAke2Ftb3VudEluV29yZHN9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UGF5bWVudCBSZWZlcmVuY2U8L3RkPjx0ZD46ICR7cmVmfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA0cHggMDsiPlJlY2VpcHQgTnVtYmVyPC90ZD48dGQ+OiA8Yj4ke3JlY05vfTwvYj48L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNHB4IDA7Ij5EYXRlPC90ZD48dGQ+OiAke2RhdGV9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6IDRweCAwOyI+UGhvbmUgTnVtYmVyPC90ZD48dGQ+OiAke3Bob25lfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA0cHggMDsiPlBBTjwvdGQ+PHRkPjogJHtwYW59PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNDBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91cnMgc2luY2VyZWx5LDwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQ1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7Ij5fX19fX19fX19fX19fX19fX19fX19fX19fXzwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjA7IHBhZGRpbmctdG9wOiA1cHg7Ij4oPGI+JHtuYW1lfTwvYj4pPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KYDsNCg0KICAgICAgICAgICAgY29uc3Qgb3B0ID0gew0KICAgICAgICAgICAgICAgIG1hcmdpbjogMCwNCiAgICAgICAgICAgICAgICBmaWxlbmFtZTogJ0NvbnNlbnQgTGV0dGVyICcgKyByZWNObyArICcucGRmJywNCiAgICAgICAgICAgICAgICBpbWFnZTogeyB0eXBlOiAnanBlZycsIHF1YWxpdHk6IDAuOTggfSwNCiAgICAgICAgICAgICAgICBodG1sMmNhbnZhczogeyBzY2FsZTogMiwgbG9nZ2luZzogZmFsc2UgfSwNCiAgICAgICAgICAgICAgICBqc1BERjogeyB1bml0OiAnaW4nLCBmb3JtYXQ6ICdhNCcsIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnIH0NCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGh0bWwycGRmKCkuc2V0KG9wdCkuZnJvbShlbGVtZW50KS5zYXZlKCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBMb2FkcyBJbml0aWFsIERhdGEgZHVyaW5nIGxhdW5jaC4gIEltcG9ydGFudCBub3QgdG8gZGlzdHVyYmVkLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZERhdGEodCkgew0KICAgICAgICAgICAgLy8gMS4gS0lMTCBUSEUgU1BMQVNIIFNDUkVFTiBJTU1FRElBVEVMWQ0KICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIG5vICJTdHVjayBhdCBEZXZpY2UgSUQiIHNjcmVlbg0KICAgICAgICAgICAgLy8gU2hvdyBvdmVybGF5DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhTY3JlZW4nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5BcHBDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQXBwIHZpc2libGUuIExvYWRpbmcgZGF0YSB3aXRoIHRva2VuLi4uIik7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBJREVOVElGWSBVU0VSIChUaGUgRDI3IGZpeCkNCiAgICAgICAgICAgICAgICAvLyBXZSBmaW5kIHRoZSByZWFsIG5hbWUgc28gcG9sbGluZyBkb2Vzbid0IGp1c3Qgc2hvdyAiVXNlciINCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhcHBSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9GSUxFX0FQUFJPVkVEIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChhcHBSLm9rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcHBUeHQgPSBhd2FpdCBhcHBSLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gYXBwVHh0LnNwbGl0KCdcbicpLmZpbmQobCA9PiBsLmluY2x1ZGVzKE1NUFRfREVWSUNFX0lEKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNTVBUX1VTRVJfTkFNRSA9IG1hdGNoLnNwbGl0KCd8JylbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJXZWxjb21lICIgKyBNTVBUX1VTRVJfTkFNRSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIElOU0VSVCBTRUNVUklUWSBDQUxMIEhFUkUgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwbHlVc2VyUGVybWlzc2lvbnMoTU1QVF9VU0VSX05BTUUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1NUFRfUkFESU9fRklMRSA9IGAvU2V0dGluZ3MvJHtNTVBUX1VTRVJfTkFNRX1SYWRpb3MudHh0YDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRSYWRpb3ModCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUud2FybigiSWRlbnRpdHkgbG9va3VwIGZhaWxlZCwgZGVmYXVsdGluZyB0byBVbmtub3duIik7IH0NCg0KICAgICAgICAgICAgICAgIC8vIDMuIEZFVENIIERBVEFCQVNFICYgU0VDT05EQVJZIEZJTEVTDQogICAgICAgICAgICAgICAgY29uc3QgZGJSID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJUeHQgPSBhd2FpdCBkYlIudGV4dCgpOw0KICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUyA9IGRiVHh0LnNwbGl0KCdcbicpLm1hcChsID0+IGwudHJpbSgpKS5maWx0ZXIobCA9PiBsLmxlbmd0aCA+IDEwKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IFtjYXNoUiwgYmFua1JdID0gYXdhaXQgUHJvbWlzZS5hbGwoWw0KICAgICAgICAgICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9DQVNIIH0pIH0NCiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gKHsgb2s6IGZhbHNlIH0pKSwNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQkFOSyB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+ICh7IG9rOiBmYWxzZSB9KSkNCiAgICAgICAgICAgICAgICBdKTsNCg0KICAgICAgICAgICAgICAgIGxldCBjYXNoQ29udGVudCA9IGNhc2hSLm9rID8gKGF3YWl0IGNhc2hSLnRleHQoKSkudG9VcHBlckNhc2UoKSA6ICIiOw0KICAgICAgICAgICAgICAgIGxldCBiYW5rRGF0ZSA9ICItLS0iOw0KICAgICAgICAgICAgICAgIGlmIChiYW5rUi5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBibCA9IChhd2FpdCBiYW5rUi50ZXh0KCkpLnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJ3wnKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChibC5sZW5ndGggPiAwKSBiYW5rRGF0ZSA9IGJsW2JsLmxlbmd0aCAtIDFdLnNwbGl0KCd8JylbMF07DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gNC4gTE9BRCBEUk9QRE9XTlMgJiBEQVNIQk9BUkQNCiAgICAgICAgICAgICAgICBhd2FpdCBsb2FkRHJvcGRvd25zKHQpOw0KICAgICAgICAgICAgICAgIHVwZGF0ZURhc2hib2FyZFN0YXRzKGNhc2hDb250ZW50LCBiYW5rRGF0ZSk7DQoNCg0KICAgICAgICAgICAgICAgIGxvYWRFdmVudFBhbmVscyh0KTsgLy8gVHJpZ2dlciB0aGUgZXZlbnQgY29sdW1uIGxvYWRpbmcNCg0KICAgICAgICAgICAgICAgIC8vIDUuIFNFVFVQIFNMSURFUg0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOw0KDQogICAgICAgICAgICAgICAgLy8gU0FGRSBUUklHR0VSOiBPbmx5IHJ1biBpZiB0aGUgZnVuY3Rpb24gZXhpc3RzDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBidWlsZEZZSW5kZXggPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICAgICAgYnVpbGRGWUluZGV4KCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdXBkYXRlRGFzaGJvYXJkU3RhdHMoY2FzaENvbnRlbnQsIGJhbmtEYXRlKTsNCg0KICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IHNsaWRlci5tYXg7DQogICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gc2xpZGVyLm1heDsNCiAgICAgICAgICAgICAgICBjb25zdCBmbG9vciA9ICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiAmJiB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IDApID8gd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gOiAxOw0KICAgICAgICAgICAgICAgIHNsaWRlci5taW4gPSBmbG9vcjsNCiAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKGN1cnJlbnRSZWNvcmRJbmRleCk7DQoNCg0KDQogICAgICAgICAgICAgICAgLy8gNi4gU1RBUlQgQkFDS0dST1VORCBTRVJWSUNFUw0KICAgICAgICAgICAgICAgIGZldGNoRXhwZW5zZURhdGUoKTsgLy8gRXhjZWwgZmlsZQ0KICAgICAgICAgICAgICAgIHN0YXJ0QmFja2dyb3VuZFN5bmModCk7IC8vIFVzZXIgUG9sbGluZyAoVGhlIEQ3MSBTdHlsZSkNCg0KICAgICAgICAgICAgICAgIHdpbmRvdy5BQ0NFU1NfVE9LRU4gPSB0OyAvLyA8LS0tIEFERCBUSElTIExJTkUgT05MWQ0KDQogICAgICAgICAgICAgICAgLy8gSGlkZSBvdmVybGF5IG9uY2UgZXZlcnl0aGluZyBpcyByZW5kZXJlZA0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJsb2FkRGF0YSBDcml0aWNhbCBFcnJvcjoiLCBlcnIpOw0KICAgICAgICAgICAgICAgIGFsZXJ0KCJMb2FkIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFVwZGF0ZXMgRGFzaGJvYXJkIFZhbHVlcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGFzaGJvYXJkU3RhdHMoY2FzaEZpbGUsIGJEYXRlKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGxldCByQ291bnQgPSAwLCByQW10ID0gMCwgY0NvdW50ID0gMCwgY0FtdCA9IDA7DQoNCiAgICAgICAgICAgICAgICByZWFkeUluZGljZXMgPSBbXTsgLy8gPC0tLSBJTlNFUlQ6IFJlc2V0IHRoZSBsaXN0IGV2ZXJ5IHRpbWUgc3RhdHMgdXBkYXRlDQoNCiAgICAgICAgICAgICAgICBsZXQgbGF0RCA9IDAsIGxhdERpc3AgPSAiLS0tIjsNCiAgICAgICAgICAgICAgICBjb25zdCBjdXRPZmYgPSAyMDI2MDEwMTsNCiAgICAgICAgICAgICAgICBjb25zdCBzYWZlQ2FzaEZpbGUgPSBjYXNoRmlsZSB8fCAiIjsgLy8gU2FmZXR5IGFnYWluc3QgJ3VuZGVmaW5lZCcgaW5jbHVkZXMgZXJyb3INCg0KICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYy5sZW5ndGggPCAxNSkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJObyA9IChjWzBdIHx8ICIiKS50cmltKCkudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZFN0ciA9IChjWzFdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlRmxvYXQoY1s5XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZSA9IChjWzExXSB8fCAiIikudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuYyA9IChjWzEzXSB8fCAiIikudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkciA9IChjWzRdIHx8ICIiKS50cmltKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IGRTdHIucmVwbGFjZSgvXC8vZywgJy0nKS5zcGxpdCgnLScpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocC5sZW5ndGggPT09IDMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHl5eXkgPSBwWzJdLmxlbmd0aCA9PT0gMiA/ICIyMCIgKyBwWzJdIDogcFsyXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRDb21wID0gcGFyc2VJbnQoeXl5eSArIHBbMV0ucGFkU3RhcnQoMiwgJzAnKSArIHBbMF0ucGFkU3RhcnQoMiwgJzAnKSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkQ29tcCA+IGxhdEQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXREID0gZENvbXA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0RGlzcCA9IGNbMF0gKyAiICgiICsgZFN0ciArICIpIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRDb21wID49IGN1dE9mZiAmJiBjYW5jICE9PSAiWUVTIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhc2ggY2hlY2sgd2l0aCBzYWZldHkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByQ2xlYW4gPSByTm8ucmVwbGFjZSgiTVBTIiwgIiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAiQ0FTSCIgJiYgIXNhZmVDYXNoRmlsZS5pbmNsdWRlcyhyTm8pICYmICFzYWZlQ2FzaEZpbGUuaW5jbHVkZXMockNsZWFuKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY0FtdCArPSBhbXQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlYWR5IGNoZWNrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHIgIT09ICIiICYmICEoY1sxNl0gPT09ICJZRVMiICYmIGNbMTddID09PSAiWUVTIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgckNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJBbXQgKz0gYW10Ow0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFERCBUSElTIExJTkUgSEVSRToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHlJbmRpY2VzLnB1c2goaW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZm10ID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1JTicsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RSb3cgPSBHTE9CQUxfREJfTElORVNbR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDFdLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9sYXN0X3JlYycpLmlubmVyVGV4dCA9IGxhc3RSb3dbMF0gKyAiICgiICsgbGFzdFJvd1sxXSArICIpIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9sYXRlc3RfcmVjJykuaW5uZXJUZXh0ID0gbGF0RGlzcDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9yZWFkeV9jb3VudCcpLmlubmVyVGV4dCA9IHJDb3VudCArICIgKOKCuSIgKyBmbXQuZm9ybWF0KHJBbXQpICsgIikiOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2Nhc2gnKS5pbm5lclRleHQgPSBjQ291bnQgKyAiICjigrkiICsgZm10LmZvcm1hdChjQW10KSArICIpIjsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9iYW5rX2RhdGUnKS5pbm5lclRleHQgPSBiRGF0ZSB8fCAiLS0tIjsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJTVEFUUyBFUlJPUjogIiArIGUubWVzc2FnZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVXBkYXRlcyBMYXN0IGV4cGVuc2UgYWNjb3VudCBkYXRlIGZvciBkYXNoYm9hcmQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoRXhwZW5zZURhdGUoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGZXRjaGluZyBFeHBlbnNlcyBiYWNrZ3JvdW5kLi4uIik7DQogICAgICAgICAgICAgICAgY29uc3QgZVJlc3AgPSBhd2FpdCBmZXRjaChNTVBUX1VSTF9FWFBFTlNFUyk7DQogICAgICAgICAgICAgICAgaWYgKCFlUmVzcC5vaykgdGhyb3cgbmV3IEVycm9yKCJGZXRjaCBmYWlsZWQiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZVJlc3AuYXJyYXlCdWZmZXIoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChhcnJheUJ1ZmZlciwgeyB0eXBlOiAnYXJyYXknIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gd29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMF1dOw0KICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHNoZWV0LCB7IGhlYWRlcjogMSB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUm93cyA9IGpzb25EYXRhLmZpbHRlcihyb3cgPT4gcm93ICYmIHJvdy5sZW5ndGggPiAwICYmIHJvd1swXSk7DQogICAgICAgICAgICAgICAgaWYgKGNsZWFuUm93cy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cERhdGUgPSBjbGVhblJvd3NbY2xlYW5Sb3dzLmxlbmd0aCAtIDFdWzBdIHx8ICItLS0iOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaF9leHBlbnNlcycpLmlubmVyVGV4dCA9IGV4cERhdGU7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFeHBlbnNlIERhdGUgdXBkYXRlZDoiLCBleHBEYXRlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJFeHBlbnNlIGRhdGUgY291bGQgbm90IGJlIGxvYWRlZCAobGlrZWx5IENPUlMpLiBEZWZhdWx0aW5nIHRvIC0tLSIpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoX2V4cGVuc2VzJykuaW5uZXJUZXh0ID0gIi0tLSI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gU3luY3MgdXNlciBzdGF0dXMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFRIRSBTWU5DIEZVTkNUSU9OIChDb3JyZWN0ZWQgRDcxIGxvZ2ljKQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBzdGFydEJhY2tncm91bmRTeW5jKHRva2VuKSB7DQogICAgICAgICAgICBjb25zdCBydW5TeW5jID0gYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICghTU1QVF9VU0VSX05BTUUgfHwgTU1QVF9VU0VSX05BTUUgPT09ICJVbmtub3duIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfVVNFUlMgfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlTGluZXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVMaW5lcyA9IHR4dC5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IGwuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIGVudHJpZXMgZnJvbSBsYXN0IDMgbWlucw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwLmxlbmd0aCA+PSAzICYmIChub3cgLSBwYXJzZUludChwWzJdKSkgPCAxODAwMDA7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxpbmVzID0gYWN0aXZlTGluZXMuZmlsdGVyKGwgPT4gIWwuc3RhcnRzV2l0aChNTVBUX0RFVklDRV9JRCkpOw0KICAgICAgICAgICAgICAgICAgICBhY3RpdmVMaW5lcy5wdXNoKGAke01NUFRfREVWSUNFX0lEfXwke01NUFRfVVNFUl9OQU1FfXwke25vd31gKTsNCg0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfVVNFUlMsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGFjdGl2ZUxpbmVzLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmVVc2VyTGlzdCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGxheSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheS5pbm5lclRleHQgPSBhY3RpdmVMaW5lcy5tYXAobCA9PiBsLnNwbGl0KCd8JylbMV0pLmpvaW4oJywgJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsgY29uc29sZS5sb2coIlN5bmMgc2tpcHBlZCIpOyB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgcnVuU3luYygpOw0KICAgICAgICAgICAgc2V0SW50ZXJ2YWwocnVuU3luYywgNDUwMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vVXBkYXRlcyBFdmVudHMgaW1hZ2VzIGluIGNvbG91bW4gMSBhbmQgMw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEV2ZW50UGFuZWxzKHRva2VuKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9FVkVOVFNfVFhUIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCB0aXRsZTEgPSAiUmVjZW50IEV2ZW50IiwgdGl0bGUyID0gIlVwY29taW5nIEV2ZW50IjsNCiAgICAgICAgICAgICAgICBpZiAoci5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSBhd2FpdCByLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0eHQuc3BsaXQoL1xyP1xuLykubWFwKGwgPT4gbC50cmltKCkpLmZpbHRlcihsID0+IGwubGVuZ3RoID4gMCk7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlMSA9IGxpbmVzWzBdIHx8IHRpdGxlMTsNCiAgICAgICAgICAgICAgICAgICAgdGl0bGUyID0gbGluZXNbMV0gfHwgdGl0bGUyOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGdldEltZ1VybCA9IGFzeW5jIChwYXRoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2dldF90ZW1wb3JhcnlfbGluaycsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHBhdGggfSkNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5saW5rOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBjb25zdCBbdXJsMSwgdXJsMl0gPSBhd2FpdCBQcm9taXNlLmFsbChbZ2V0SW1nVXJsKE1NUFRfSU1HX0VWRU5UMSksIGdldEltZ1VybChNTVBUX0lNR19FVkVOVDIpXSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBwYW5lbENvbnRlbnQgPSAodGl0bGUsIHVybCkgPT4gYA0KPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogI2ZmOTkzMzsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxMHB4OyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDE0cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY4YzAwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGl0bGV9DQo8L2Rpdj4NCjxkaXYgY2xhc3M9ImV2ZW50LWltZy1jb250YWluZXIiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHt1cmx9Ij4NCjwvZGl2Pg0KYDsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTCA9IHBhbmVsQ29udGVudCh0aXRsZTEsIHVybDEpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUwgPSBwYW5lbENvbnRlbnQodGl0bGUyLCB1cmwyKTsNCiAgICAgICAgICAgICAgICBNTVBUX1RFTVAxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MOw0KICAgICAgICAgICAgICAgIE1NUFRfVEVNUDMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MOw0KDQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcigiRXZlbnQgcGFuZWxzIGZhaWxlZDoiLCBlKTsgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vVXBkYXRlcyB0aGUgbGF0ZXN0IEJhbmsgU3RhdGVtZW50cyBmcm9tIGFuIEV4Y2VsIEZpbGUgU3RhdGVtZW50cy54bHMgLSBDcmVhdGVzIG5ldyByY2VpcHRzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBBZGQgdGhpcyB0byB5b3VyIGdsb2JhbCB2YXJpYWJsZXMgYXQgdGhlIHRvcA0KICAgICAgICBsZXQgaXNCYW5rVXBkYXRlZCA9IGZhbHNlOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJhbmtTdGF0ZW1lbnRzKHRva2VuKSB7DQogICAgICAgICAgICBpZiAoIXRva2VuKSB7IGFsZXJ0KCJFcnJvcjogTm8gVG9rZW4gZm91bmQuIik7IHJldHVybjsgfQ0KICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jhbmstc3luYy1idG4nKTsNCiAgICAgICAgICAgIGlmIChidG4pIHsgYnRuLmlubmVyVGV4dCA9ICJTeW5jaW5nLi4uIjsgYnRuLmRpc2FibGVkID0gdHJ1ZTsgfQ0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIEV4Y2VsICYgQmFuayBTdGF0ZW1lbnQgKE1NUFQzLktQKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2VsUmVzID0gYXdhaXQgZmV0Y2goImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvZjI3bXV5bG9iZGFqdnpteGNpODVkL0JhbmtTdGF0ZW1lbnQueGxzP3Jsa2V5PXI0M2owc3ZubWxpZzNxbTZpYWlyYnRvamQmZGw9MSIsIHsgY2FjaGU6ICduby1zdG9yZScgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBleGNlbFJlcy5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGFycmF5QnVmZmVyLCB7IHR5cGU6ICdhcnJheScsIGNlbGxEYXRlczogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBleGNlbFJvd3MgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMF1dLCB7IGhlYWRlcjogMSB9KTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGJhbmtGaWxlUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfQkFOSyB9KSB9LA0KICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IGxvY2FsQmFua0NvbnRlbnQgPSBiYW5rRmlsZVJlcy5vayA/IChhd2FpdCBiYW5rRmlsZVJlcy50ZXh0KCkpLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgICAgIGxldCBiYW5rTGluZXMgPSBsb2NhbEJhbmtDb250ZW50LnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY3VycmVudEJhbCA9IDA7DQogICAgICAgICAgICAgICAgaWYgKGJhbmtMaW5lcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsYXN0TGluZSA9IGJhbmtMaW5lc1tiYW5rTGluZXMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCYWwgPSBwYXJzZUZsb2F0KGxhc3RMaW5lLnNwbGl0KCd8JylbNV0ucmVwbGFjZSgvW15cZC5dL2csICcnKSkgfHwgMDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgbmV3bHlBZGRlZEJhbmtMaW5lcyA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCB3b3JraW5nQmFua0NvbnRlbnQgPSBsb2NhbEJhbmtDb250ZW50Ow0KDQogICAgICAgICAgICAgICAgLy8gMi4gUHJvY2VzcyBFeGNlbCBSb3dzDQogICAgICAgICAgICAgICAgZm9yIChsZXQgcm93IG9mIGV4Y2VsUm93cykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgZGF0ZVZhbCA9IHJvd1swXTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzRGF0ZSA9IGRhdGVWYWwgaW5zdGFuY2VvZiBEYXRlOw0KICAgICAgICAgICAgICAgICAgICBsZXQgaXNEYXRlU3RyID0gdHlwZW9mIGRhdGVWYWwgPT09ICdzdHJpbmcnICYmIC9eXGR7MSwyfVwvXGR7MSwyfVwvXGR7NH0vLnRlc3QoZGF0ZVZhbC50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRGF0ZSAmJiAhaXNEYXRlU3RyKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgZFN0ciA9IGlzRGF0ZSA/IGAke1N0cmluZyhkYXRlVmFsLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX0vJHtTdHJpbmcoZGF0ZVZhbC5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0vJHtkYXRlVmFsLmdldEZ1bGxZZWFyKCl9YCA6IGRhdGVWYWwudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCByZWYgPSAocm93WzFdIHx8ICIiKS50b1N0cmluZygpLnJlcGxhY2UoL1xzKy9nLCAnICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNocSA9IChyb3dbMl0gfHwgIiIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZGViID0gcGFyc2VGbG9hdChyb3dbM10pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgIGxldCBjcmUgPSBwYXJzZUZsb2F0KHJvd1s0XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd0JhbCA9IHBhcnNlRmxvYXQocm93WzVdKSB8fCAwOw0KDQogICAgICAgICAgICAgICAgICAgIGxldCByb3dTdHJpbmcgPSBgJHtkU3RyfXwke3JlZn18JHtjaHF9fCR7ZGViIHx8ICIifXwke2NyZSB8fCAiIn18JHtyb3dCYWwudG9GaXhlZCgyKX18YDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmtpbmdCYW5rQ29udGVudC5pbmNsdWRlcyhyb3dTdHJpbmcudHJpbSgpKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgd29ya2luZ0JhbmtDb250ZW50ICs9ICh3b3JraW5nQmFua0NvbnRlbnQubGVuZ3RoID4gMCA/ICJcbiIgOiAiIikgKyByb3dTdHJpbmc7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCYWwgPSByb3dCYWw7DQogICAgICAgICAgICAgICAgICAgIG5ld2x5QWRkZWRCYW5rTGluZXMucHVzaChyb3dTdHJpbmcpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChuZXdseUFkZGVkQmFua0xpbmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU1RFUCBBOiBVUERBVEUgQkFOSyBGSUxFIChNTVBUMy5LUCkNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IE1NUFRfRklMRV9CQU5LLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHdvcmtpbmdCYW5rQ29udGVudA0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEI6IERPV05MT0FEIE1BSU4gREIgKE1NUFQyLktQKQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9LCBjYWNoZTogJ25vLXN0b3JlJw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnREQkNvbnRlbnQgPSAoYXdhaXQgZGJSZXMudGV4dCgpKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBkYkxpbmVzID0gY3VycmVudERCQ29udGVudC5zcGxpdCgnXG4nKTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgbWF4Q0cgPSAwOw0KICAgICAgICAgICAgICAgICAgICBkYkxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENvbCA9IGxpbmUuc3BsaXQoJ3wnKVswXSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdENvbC50b1VwcGVyQ2FzZSgpLnN0YXJ0c1dpdGgoIkNHIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IHBhcnNlSW50KGZpcnN0Q29sLnJlcGxhY2UoIkNHIiwgIiIpKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID4gbWF4Q0cpIG1heENHID0gbjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRmV0Y2ggRXhlbXB0IExpc3QNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBFWEVNUFRfRklMRSB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IG51bGwpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZXhlbXB0UGhyYXNlcyA9IChleFJlcyAmJiBleFJlcy5vaykgPyAoYXdhaXQgZXhSZXMudGV4dCgpKS5zcGxpdCgnXG4nKS5tYXAocCA9PiBwLnRyaW0oKS50b0xvd2VyQ2FzZSgpKS5maWx0ZXIocCA9PiBwKSA6IFtdOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNURVAgQzogR0VORVJBVEUgTkVXIFJFQ0VJUFRTDQogICAgICAgICAgICAgICAgICAgIGxldCBuZXdSID0gW107DQogICAgICAgICAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgdG9kYXlTdHIgPSBgJHtTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS0ke25vdy5nZXRGdWxsWWVhcigpfWA7DQogICAgICAgICAgICAgICAgICAgIGxldCBpbXBvcnRDb21tZW50ID0gIkF1dG8gSW1wb3J0ZWQ6IiArIHRvZGF5U3RyOw0KDQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGJMaW5lIG9mIG5ld2x5QWRkZWRCYW5rTGluZXMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJ0cyA9IGJMaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW10ID0gcGFyc2VGbG9hdChwYXJ0c1s0XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWZUZXh0ID0gcGFydHNbMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbXQgPD0gMCB8fCByZWZUZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoImNhc2giKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhlbXB0UGhyYXNlcy5zb21lKHAgPT4gcmVmVGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHApKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIG1heENHKys7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgck5vID0gIkNHIiArIFN0cmluZyhtYXhDRykucGFkU3RhcnQoNiwgJzAnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByRGF0ZSA9IHBhcnRzWzBdLnJlcGxhY2UoL1wvL2csICctJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgclRvdyA9IChhbXQgPj0gMTAwMDApID8gIkNPUlBVUyIgOiAiT1RIRVJTIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RlID0gcmVmVGV4dC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCJVUEkiKSA/ICJVUEkiIDogKHJlZlRleHQudG9VcHBlckNhc2UoKS5pbmNsdWRlcygiQ0hRIikgfHwgcmVmVGV4dC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCJDSEVRVUUiKSA/ICJDSEVRVUUiIDogIk9OTElORSIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Um93ID0gYCR7ck5vfXwke3JEYXRlfXx8fHx8fHx8JHthbXR9fCR7cmVmVGV4dH18JHttb2RlfXwke3JUb3d9fHwke2ltcG9ydENvbW1lbnR9fDAwMDAwMHx8fHxJTkRJQXxgOw0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3Ui5wdXNoKG5ld1Jvdyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAobmV3Ui5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTVEVQIEQ6IFVQTE9BRCBVUERBVEVEIE1BSU4gREINCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWREQiA9IGN1cnJlbnREQkNvbnRlbnQgKyAiXG4iICsgbmV3Ui5qb2luKCdcbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogTU1QVF9GSUxFX0RCLCAibW9kZSI6ICJvdmVyd3JpdGUiIH0pLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB1cGRhdGVkREINCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU1RFUCBFOiBDUklUSUNBTCBGSVggLSBVUERBVEUgU0VRVUVOQ0UuVFhUIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbXVzdCB1cGRhdGUgdGhlIENsb3VkIFNlcXVlbmNlIHNvIHRoZSBuZXh0ICJSTiIga25vd3MgdGhlIG5ldyBzdGFydGluZyBwb2ludC4NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdDogTGFzdFJlY2VpcHROdW1iZXJ8VG90YWxSZWNvcmRDb3VudA0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VG90YWxDb3VudCA9IGRiTGluZXMubGVuZ3RoICsgbmV3Ui5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmVjZWlwdE5vID0gIkNHIiArIFN0cmluZyhtYXhDRykucGFkU3RhcnQoNiwgJzAnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcXVlbmNlQ29udGVudCA9IGAke2xhc3RSZWNlaXB0Tm99fCR7bmV3VG90YWxDb3VudH1gOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiAiL3NlcXVlbmNlLnR4dCIsICJtb2RlIjogIm92ZXJ3cml0ZSIgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogc2VxdWVuY2VDb250ZW50DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFNVQ0NFU1MhXG5CYW5rIHVwZGF0ZWQuXG4ke25ld1IubGVuZ3RofSBSZWNlaXB0cyBhZGRlZC5cblNlcXVlbmNlIHVwZGF0ZWQgdG86ICR7bGFzdFJlY2VpcHROb31gKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJCYW5rIFVwZGF0ZWQuIE5vIERvbm9yIHJlY2VpcHRzIHdlcmUgbmVlZGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaXNCYW5rVXBkYXRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJBbHJlYWR5IHVwIHRvIGRhdGUuIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkNSSVRJQ0FMIEVSUk9SOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAoYnRuKSB7IGJ0bi5pbm5lclRleHQgPSAiQmFuayBVcGRhdGUiOyBidG4uZGlzYWJsZWQgPSBmYWxzZTsgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU3VtbWFyeSBNYWluIENhbGxzIGFsbA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gc2hvd0RvbmF0aW9uU3VtbWFyeSgpIHsNCiAgICAgICAgICAgIC8vIDEuIEluaXRpYWxpemUgdG90YWxzIGFzIG51bWJlcnMNCiAgICAgICAgICAgIGxldCB0b3RhbHMgPSB7IHRvZGF5OiAwLCB3ZWVrOiAwLCBtb250aDogMCwgeWVhcjogMCwgZmluWWVhcjogMCwgb3ZlcmFsbDogMCB9Ow0KDQogICAgICAgICAgICBNTVBUX1RFTVAxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnQtZXZlbnRzJykuaW5uZXJIVE1MOw0KICAgICAgICAgICAgTU1QVF9URU1QMyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUw7DQoNCg0KICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIC8vIEdldCB0aW1lc3RhbXBzIGZvciBtaWRuaWdodCB0b2RheSBhbmQgNyBkYXlzIGFnbyB0byBlbnN1cmUgYWNjdXJhdGUgIldlZWsiIGNvdW50aW5nDQogICAgICAgICAgICBjb25zdCB0b2RheU1pZG5pZ2h0ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk7DQogICAgICAgICAgICBjb25zdCBzZXZlbkRheXNBZ28gPSB0b2RheU1pZG5pZ2h0IC0gKDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsNCg0KICAgICAgICAgICAgY29uc3QgY3VyTSA9IG5vdy5nZXRNb250aCgpOyAvLyAwLTExDQogICAgICAgICAgICBjb25zdCBjdXJZID0gbm93LmdldEZ1bGxZZWFyKCk7DQoNCiAgICAgICAgICAgIC8vIEZpbmFuY2lhbCBZZWFyIExvZ2ljOiBTdGFydHMgQXByaWwgMXN0DQogICAgICAgICAgICAvLyBJbiBKYW4gMjAyNiwgdGhlIEZZIHN0YXJ0ZWQgQXByaWwgMSwgMjAyNQ0KICAgICAgICAgICAgY29uc3QgZnlTdGFydFllYXIgPSAoY3VyTSA+PSAzKSA/IGN1clkgOiBjdXJZIC0gMTsNCiAgICAgICAgICAgIGNvbnN0IGZ5U3RhcnREYXRlID0gbmV3IERhdGUoZnlTdGFydFllYXIsIDMsIDEpLmdldFRpbWUoKTsNCg0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFsaW5lLnRyaW0oKSB8fCBpbmRleCA9PT0gMCkgcmV0dXJuOyAvLyBTa2lwIGVtcHR5IGFuZCBoZWFkZXINCg0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBDYW5jZWxsYXRpb24gQ2hlY2sgKEZpZWxkIDEzIGlzIFlFUyBvciBOTykNCiAgICAgICAgICAgICAgICBpZiAoZlsxM10gJiYgZlsxM10udHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09ICJZRVMiKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBBbW91bnQgQ29udmVyc2lvbiAoRmllbGQgOSkNCiAgICAgICAgICAgICAgICAvLyBTdHJpcCBjb21tYXMvc3BhY2VzIGFuZCBmb3JjZSB0byBmbG9hdA0KICAgICAgICAgICAgICAgIGxldCBhbXQgPSAwOw0KICAgICAgICAgICAgICAgIGlmIChmWzldKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkFtdCA9IGZbOV0udG9TdHJpbmcoKS5yZXBsYWNlKC9bXlxkLl0vZywgJycpOw0KICAgICAgICAgICAgICAgICAgICBhbXQgPSBwYXJzZUZsb2F0KGNsZWFuQW10KSB8fCAwOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIERhdGUgUGFyc2luZyAoRmllbGQgMSkNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZlsxXSB8fCAiIjsNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVTdHIuc3BsaXQoL1tcL1wtXS8pOw0KICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDMpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIC8vIEREL01NL1lZWVkNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gcGFyc2VJbnQocGFydHNbMF0sIDEwKTsNCiAgICAgICAgICAgICAgICBjb25zdCBtID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKSAtIDE7DQogICAgICAgICAgICAgICAgY29uc3QgeSA9IHBhcnNlSW50KHBhcnRzWzJdLCAxMCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmVjRGF0ZSA9IG5ldyBEYXRlKHksIG0sIGQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlY1RpbWUgPSByZWNEYXRlLmdldFRpbWUoKTsNCg0KICAgICAgICAgICAgICAgIC8vIDUuIEFjY3VtdWxhdGUgVG90YWxzDQogICAgICAgICAgICAgICAgdG90YWxzLm92ZXJhbGwgKz0gYW10Ow0KDQogICAgICAgICAgICAgICAgLy8gVG9kYXkNCiAgICAgICAgICAgICAgICBpZiAocmVjVGltZSA9PT0gdG9kYXlNaWRuaWdodCkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMudG9kYXkgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgV2VlayAoNyBEYXlzIGluY2x1c2l2ZSBvZiBjdXJyZW50IHRpbWUpDQogICAgICAgICAgICAgICAgaWYgKHJlY1RpbWUgPj0gc2V2ZW5EYXlzQWdvICYmIHJlY1RpbWUgPD0gbm93LmdldFRpbWUoKSkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMud2VlayArPSBhbXQ7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gVGhpcyBNb250aCAoSmFuIDIwMjYpDQogICAgICAgICAgICAgICAgaWYgKG0gPT09IGN1ck0gJiYgeSA9PT0gY3VyWSkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMubW9udGggKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFRoaXMgWWVhciAoMjAyNikNCiAgICAgICAgICAgICAgICBpZiAoeSA9PT0gY3VyWSkgew0KICAgICAgICAgICAgICAgICAgICB0b3RhbHMueWVhciArPSBhbXQ7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRmluYW5jaWFsIFllYXIgKEFwcmlsIHRvIG5vdykNCiAgICAgICAgICAgICAgICBpZiAocmVjVGltZSA+PSBmeVN0YXJ0RGF0ZSAmJiByZWNUaW1lIDw9IG5vdy5nZXRUaW1lKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdG90YWxzLmZpblllYXIgKz0gYW10Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBkaXNwbGF5U3VtbWFyeVRhYmxlKHRvdGFscyk7DQogICAgICAgICAgICBzaG93RG9uYXRpb25TdW1tYXJ5MSgpOw0KICAgICAgICAgICAgc2hvd0RvbmF0aW9uU3VtbWFyeTMoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgQ29sb3VtIDIgTWlkZGxlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBkaXNwbGF5U3VtbWFyeVRhYmxlKGRhdGEpIHsNCiAgICAgICAgICAgIGNvbnN0IHRhYmxlSFRNTCA9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdW1tYXJ5LWNvbnRhaW5lciIgc3R5bGU9ImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyNXB4OyBib3JkZXI6IDJweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiAxMnB4OyBtYXJnaW46IDEwcHggYXV0bzsgbWF4LXdpZHRoOiA1MDBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOiAjZmY5OTMzOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtZmFtaWx5OiAnQXJpYWwgQmxhY2snLCBzYW5zLXNlcmlmOyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2ZmZjhmMDsgcGFkZGluZy1ib3R0b206IDEwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERPTkFUSU9OUyBTVU1NQVJZDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDI+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZjk5MzM7IGNvbG9yOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6IDEycHg7IHRleHQtYWxpZ246IGxlZnQ7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5DYXRlZ29yeTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5BbW91bnQgKOKCuSk8L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+VG9kYXk8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLnRvZGF5LnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5UaGlzIFdlZWs8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLndlZWsudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPlRoaXMgTW9udGg8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLm1vbnRoLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Ij5DYWxlbmRhciBZZWFyICgke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0pPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS55ZWFyLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOGYwOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjZDM1NDAwOyI+RmluYW5jaWFsIFllYXI8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNkMzU0MDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS5maW5ZZWFyLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBmb250LXdlaWdodDogYm9sZDsiPk9WRVJBTEwgVE9UQUw8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjJlbTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLm92ZXJhbGwudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZm9udC1zaXplOiAxMXB4OyBjb2xvcjogIzdmOGM4ZDsgdGV4dC1hbGlnbjogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZWQgb24gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfTxicj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChDYW5jZWxsZWQgcmVjZWlwdHMgZXhjbHVkZWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNlaXB0X2Rpc3BsYXlfYXJlYScpLmlubmVySFRNTCA9IHRhYmxlSFRNTDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1N1bW1hcnkgQ29sb3VtIDENCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHNob3dEb25hdGlvblN1bW1hcnkxKCkgew0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNhbGN1bGF0ZUJyZWFrZG93bkRhdGEoKS5tb2RlU3VtbWFyeTsNCiAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7DQogICAgICAgICAgICBsZXQgcm93c0h0bWwgPSAiIjsNCg0KICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHsNCiAgICAgICAgICAgICAgICB0b3RhbCArPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICByb3dzSHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsiPiR7a2V5fTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij4ke3ZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfTwvdGQ+PC90cj5gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVmdC1ldmVudHMnKS5pbm5lckhUTUwgPSBnZW5lcmF0ZVN0eWxlZFRhYmxlKCJQYXltZW50IE1vZGUiLCByb3dzSHRtbCwgdG90YWwpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vU3VtbWFyeSBDb2xvdW0gMw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gc2hvd0RvbmF0aW9uU3VtbWFyeTMoKSB7DQogICAgICAgICAgICBjb25zdCBkYXRhID0gY2FsY3VsYXRlQnJlYWtkb3duRGF0YSgpLnRvd2FyZHNTdW1tYXJ5Ow0KICAgICAgICAgICAgbGV0IHRvdGFsID0gMDsNCiAgICAgICAgICAgIGxldCByb3dzSHRtbCA9ICIiOw0KDQogICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkgew0KICAgICAgICAgICAgICAgIHRvdGFsICs9IHZhbHVlOw0KICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyI+JHtrZXl9PC90ZD48dGQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHRleHQtYWxpZ246IHJpZ2h0OyBmb250LXdlaWdodDogYm9sZDsiPiR7dmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJyl9PC90ZD48L3RyPmA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1ldmVudHMnKS5pbm5lckhUTUwgPSBnZW5lcmF0ZVN0eWxlZFRhYmxlKCJDb250cmlidXRpb24gVG93YXJkcyIsIHJvd3NIdG1sLCB0b3RhbCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9SZXNldHMgc2lkZSBwYW5lbHMgZXZlbnRzIGpwZyAtIGZpcnN0IGFuZCB0aGlyZCBjb2xvdW1uIGFmdGVyIHN1bW1hcnkgIGRpc3BsYXkNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHJlc2V0U2lkZVBhbmVscygpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWV2ZW50cycpLmlubmVySFRNTCA9IE1NUFRfVEVNUDE7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtZXZlbnRzJykuaW5uZXJIVE1MID0gTU1QVF9URU1QMzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0ZvciBTdW1tYXJ5IC0gQnJlYWtkb3duIGNhbGN1bGF0aW9uDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVCcmVha2Rvd25EYXRhKCkgew0KICAgICAgICAgICAgY29uc3QgbW9kZVN1bW1hcnkgPSB7ICJDYXNoIjogMCwgIkNoZXF1ZSI6IDAsICJVUEkiOiAwLCAiT25saW5lIjogMCwgIk90aGVycyI6IDAsICJQT1MiOiAwIH07DQogICAgICAgICAgICBjb25zdCB0b3dhcmRzU3VtbWFyeSA9IHsNCiAgICAgICAgICAgICAgICAiT1RIRVJTIjogMCwgIkNPUlBVUyI6IDAsICJLVU1CSEFCSElTSEVLSEFNIjogMCwgIkFOTkFESEFBTkFNIjogMCwNCiAgICAgICAgICAgICAgICAiQU5VU0hBIFBPT0pBIjogMCwgIkFBVkFIQU5USEkgSE9NQU0iOiAwLCAiWUFUSEkgTUFBTEFZQU0iOiAwLA0KICAgICAgICAgICAgICAgICJCVUlMRElORyI6IDAsICJOSVRIWUFQT09KQUkiOiAwDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBjb2xzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgIGlmIChjb2xzLmxlbmd0aCA8IDEzKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGNvbHNbOV0pIHx8IDA7DQogICAgICAgICAgICAgICAgY29uc3QgbW9kZSA9IChjb2xzWzExXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRvd2FyZHMgPSAoY29sc1sxMl0gfHwgIiIpLnNwbGl0KCctJylbMF0udHJpbSgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgaXNDYW5jZWxsZWQgPSAoY29sc1sxM10gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIjsNCg0KICAgICAgICAgICAgICAgIGlmICghaXNDYW5jZWxsZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gUG9wdWxhdGUgTW9kZSBEYXRhDQogICAgICAgICAgICAgICAgICAgIGlmIChtb2RlU3VtbWFyeS5oYXNPd25Qcm9wZXJ0eShtb2RlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbW9kZVN1bW1hcnlbbW9kZV0gKz0gYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbW9kZVN1bW1hcnlbIk90aGVycyJdICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIFBvcHVsYXRlIFRvd2FyZHMgRGF0YQ0KICAgICAgICAgICAgICAgICAgICBpZiAodG93YXJkc1N1bW1hcnkuaGFzT3duUHJvcGVydHkodG93YXJkcykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvd2FyZHNTdW1tYXJ5W3Rvd2FyZHNdICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvd2FyZHNTdW1tYXJ5WyJPVEhFUlMiXSArPSBhbW91bnQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHsgbW9kZVN1bW1hcnksIHRvd2FyZHNTdW1tYXJ5IH07DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL01haW4gVGFibGUgU3R5bGUNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEludGVybmFsIGhlbHBlciB0byBrZWVwIHRoZSBleGFjdCBmb3JtYXQgb2YgeW91ciBDb3B5ICg1KSBmaWxlDQogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlU3R5bGVkVGFibGUodGl0bGUsIHJvd3MsIHRvdGFsKSB7DQogICAgICAgICAgICByZXR1cm4gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGhlaWdodDoxMDAlOyBvdmVyZmxvdy15OmF1dG87IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzJjM2U1MDsgbWFyZ2luLWJvdHRvbTogMjBweDsgZm9udC1zaXplOiAxLjJlbTsiPiR7dGl0bGV9PC9oMj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgbWFyZ2luLWJvdHRvbTogMjBweDsgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7IGZvbnQtc2l6ZTogMTNweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMjsgY29sb3I6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogbGVmdDsiPkNhdGVnb3J5PC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB0ZXh0LWFsaWduOiByaWdodDsiPkFtb3VudCAo4oK5KTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtyb3dzfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij5UT1RBTDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEuMWVtOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RvdGFsLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9TaG93cyB1c2VycyBvbmxpbiBwaG90byBvbiB0aGUgbWFpbiBwYWdlDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvKioNCiAgICAgICAgICogUEhPVE8gTE9BREVSIEVOR0lORQ0KICAgICAgICAgKiBVc2VzIHRoZSBwcm92ZW4gWEhSIG1ldGhvZCBmcm9tIHRoZSBsb2dvIGxvZ2ljDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBsb2FkVXNlclBob3RvVmlhWEhSKHBhdGgsIHRhcmdldElkKSB7DQogICAgICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsNCiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJyk7DQogICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHQpOyAvLyBVc2VzIGdsb2JhbCB0b2tlbiAndCcNCiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdEcm9wYm94LUFQSS1BcmcnLCBKU09OLnN0cmluZ2lmeSh7ICJwYXRoIjogcGF0aCB9KSk7DQogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InOw0KDQogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IHhoci5yZXNwb25zZTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW1nKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gdXJsOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ0cmFuc3BhcmVudCI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJQaG90byBFcnJvciAiICsgeGhyLnN0YXR1cyArICI6ICIgKyBwYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW1nKSBpbWcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiM3NzciOyAvLyBGYWxsYmFjayBncmF5DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHhoci5zZW5kKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICogVUkgV0FUQ0hFUiAmIFBPTExJTkcgSEFORExFUg0KICAgICAgICAgKiBXYXRjaGVzICdhY3RpdmVVc2VyTGlzdCcgZm9yIGNoYW5nZXMgZnJvbSB5b3VyIDYwcyBwb2xsDQogICAgICAgICAqLw0KICAgICAgICBjb25zdCBwaG90b1dhdGNoZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7DQogICAgICAgICAgICBjb25zdCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmVVc2VyTGlzdCcpOw0KICAgICAgICAgICAgaWYgKCFsaXN0RWxlbWVudCkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCByYXdUZXh0ID0gbGlzdEVsZW1lbnQuaW5uZXJUZXh0LnRyaW0oKTsNCg0KICAgICAgICAgICAgLy8gU2FmZXR5OiBEb24ndCBydW4gaWYgZW1wdHksIGp1c3QgcG9sbGluZyBwbGFjZWhvbGRlciwgb3IgaWYgaW1hZ2VzIGFscmVhZHkgZXhpc3QNCiAgICAgICAgICAgIGlmICghcmF3VGV4dCB8fCByYXdUZXh0ID09PSAiLS0tIiB8fCBsaXN0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbWcnKSkgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyAxLiBQcmVwYXJlIENvbnRhaW5lciBmb3IgTXVsdGlwbGUgVXNlcnMNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5mbGV4V3JhcCA9ICJ3cmFwIjsNCiAgICAgICAgICAgIGxpc3RFbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gImNlbnRlciI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5nYXAgPSAiMTVweCI7DQogICAgICAgICAgICBsaXN0RWxlbWVudC5zdHlsZS5wYWRkaW5nID0gIjVweCI7DQoNCiAgICAgICAgICAgIC8vIDIuIENsZWFyIHRleHQgYW5kIGJ1aWxkIHBob3RvIGFycmF5DQogICAgICAgICAgICAvLyBTdXBwb3J0cyBzaW5nbGUgbmFtZSBvciBjb21tYS1zZXBhcmF0ZWQgbmFtZXMgZnJvbSB5b3VyIHBvbGxlcg0KICAgICAgICAgICAgY29uc3QgbmFtZXMgPSByYXdUZXh0LnNwbGl0KCcsJykubWFwKG4gPT4gbi50cmltKCkpOw0KICAgICAgICAgICAgbGlzdEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7DQoNCiAgICAgICAgICAgIG5hbWVzLmZvckVhY2goKG5hbWUsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICIiKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBwSWQgPSBgdXNlci1waWMtJHtpbmRleH0tJHtuYW1lLnJlcGxhY2UoL1xzKy9nLCAnJyl9YDsNCiAgICAgICAgICAgICAgICBjb25zdCBwUGF0aCA9ICIvSW1hZ2VzLyIgKyBuYW1lICsgIi5qcGciOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdXNlcldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KICAgICAgICAgICAgICAgIHVzZXJXcmFwcGVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAiY29sdW1uIjsNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5zdHlsZS5hbGlnbkl0ZW1zID0gImNlbnRlciI7DQogICAgICAgICAgICAgICAgdXNlcldyYXBwZXIuc3R5bGUubWluV2lkdGggPSAiNjBweCI7DQoNCiAgICAgICAgICAgICAgICB1c2VyV3JhcHBlci5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGlkPSIke3BJZH0iIHN0eWxlPSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDRweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDQ0cHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvdmVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4zKTsiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PSIke25hbWVbMF19Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Ig0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogM3B4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiAxcHggMXB4IDJweCBibGFjazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke25hbWV9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KDQogICAgICAgICAgICAgICAgbGlzdEVsZW1lbnQuYXBwZW5kQ2hpbGQodXNlcldyYXBwZXIpOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gVHJpZ2dlciBpbmRpdmlkdWFsIFhIUiBsb2FkDQogICAgICAgICAgICAgICAgbG9hZFVzZXJQaG90b1ZpYVhIUihwUGF0aCwgcElkKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyBJTklUSUFMSVpFIFdBVENIRVINCiAgICAgICAgY29uc3Qgb2JzZXJ2ZXJUYXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlVXNlckxpc3QnKTsNCiAgICAgICAgaWYgKG9ic2VydmVyVGFyZ2V0KSB7DQogICAgICAgICAgICBwaG90b1dhdGNoZXIub2JzZXJ2ZShvYnNlcnZlclRhcmdldCwgeyBjaGlsZExpc3Q6IHRydWUsIGNoYXJhY3RlckRhdGE6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7DQogICAgICAgIH0NCg0KDQogICAgICAgIGZ1bmN0aW9uIGNoZWNrVW5zYXZlZENoYW5nZXMoY2FsbGJhY2spIHsNCiAgICAgICAgICAgIGlmICghaXNEaXJ0eSkgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB1c2VyQ2hvaWNlID0gY29uZmlybSgiUmVjZWlwdCBOb3QgU2F2ZWQhIFxuXG5DbGljayBPSyB0byBESVNDQVJEIGNoYW5nZXMuIFxuQ2xpY2sgQ0FOQ0VMIHRvIFNUQVkgYW5kIFNhdmUuIik7DQoNCiAgICAgICAgICAgIGlmICh1c2VyQ2hvaWNlKSB7DQogICAgICAgICAgICAgICAgaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRvZ2dsZUxvY2sodHJ1ZSk7IC8vIFRoaXMgcmUtZW5hYmxlcyBzZWFyY2ggYW5kIG5hdiBhdXRvbWF0aWNhbGx5DQogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL1NhdmVzIGEgbW9kaWZpZWQgb3IgbmV3IHJlY2VpcHQgLSBhIGF1ZGl0IG9mIHJlY2VpcHQgaXMgcHJvbXB0ZWQgYmVmb3JlIHNhdmluZy4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNhdmVSZWNvcmQoKSB7DQogICAgICAgICAgICAvLyAxLiBSdW4gdGhlIEF1ZGl0IGZpcnN0DQogICAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCBydW5BdWRpdCgpOw0KICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpIHJldHVybjsgLy8gU3RvcCBpZiB1c2VyIGNhbmNlbHMNCg0KICAgICAgICAgICAgY29uc3QgcmVjb3JkSWR4VGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmROdW1iZXJEaXNwbGF5JykudmFsdWU7DQogICAgICAgICAgICBpZiAocmVjb3JkSWR4VGV4dCA9PT0gIi0tLSIpIHJldHVybjsNCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IHBhcnNlSW50KHJlY29yZElkeFRleHQpOw0KICAgICAgICAgICAgY29uc3Qgc2F2ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fc2F2ZScpOw0KDQogICAgICAgICAgICAvLyAyLiBHYXRoZXIgZGF0YSBpbiBleGFjdCBvcmRlciAoSW5kaWNlcyAwLTE5KQ0KICAgICAgICAgICAgY29uc3Qgcm93RGF0YSA9IFsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZSwgICAgICAgICAgIC8vIDANCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZGF0ZScpLnZhbHVlLCAgICAgICAgICAgIC8vIDENCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfbmFtZScpLnZhbHVlLCAgICAgICAgICAgIC8vIDINCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZSwgICAgICAgICAgIC8vIDMNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlLnJlcGxhY2UoL1xuL2csICd+JyksIC8vIDQNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZW1haWwnKS52YWx1ZSwgICAgICAgICAgIC8vIDUNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGFuJykudmFsdWUsICAgICAgICAgICAgIC8vIDYNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfc3RhcicpLnZhbHVlLCAgICAgICAgICAgIC8vIDcNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZ290aHJhbScpLnZhbHVlLCAgICAgICAgIC8vIDgNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYW1vdW50JykudmFsdWUsICAgICAgICAgIC8vIDkNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVmJykudmFsdWUsICAgICAgICAgICAgIC8vIDEwDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX21vZGUnKS52YWx1ZSwgICAgICAgICAgICAvLyAxMQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUsICAgICAgICAgLy8gMTINCiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NhbmNlbCcpLmNoZWNrZWQgPyAiWUVTIiA6ICJOTyIpLCAvLyAxMw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb21tZW50cycpLnZhbHVlLnJlcGxhY2UoL1xuL2csICd+JyksIC8vIDE0DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3BpbmNvZGUnKS52YWx1ZSwgICAgICAgICAgLy8gMTUNCiAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3ByaW50ZWQnKS5jaGVja2VkID8gIllFUyIgOiAiTk8iKSwgIC8vIDE2DQogICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9wcmFzYWRhbScpLmNoZWNrZWQgPyAiWUVTIiA6ICJOTyIpLCAvLyAxNw0KICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY29ycHVzJykuY2hlY2tlZCA/ICJZRVMiIDogIk5PIiksICAgLy8gMTgNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY291bnRyeScpLnZhbHVlICAgICAgICAgICAvLyAxOQ0KICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgY29uc3QgdXBkYXRlZExpbmUgPSByb3dEYXRhLmpvaW4oJ3wnKTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBzYXZlQnRuLmlubmVyVGV4dCA9ICJTeW5jaW5nLi4uIjsNCiAgICAgICAgICAgICAgICBzYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FU1tpZHhdID0gdXBkYXRlZExpbmU7DQoNCiAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgInBhdGgiOiBNTVBUX0ZJTEVfREIsICJtb2RlIjogIm92ZXJ3cml0ZSIgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogR0xPQkFMX0RCX0xJTkVTLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiTU9ESUZJRUQgUkVDT1JEOiAiICsgdXBkYXRlZExpbmUpOw0KICAgICAgICAgICAgICAgIGFsZXJ0KCJSZWNvcmQgU2F2ZWQgYW5kIFN5bmNlZC4iKTsNCiAgICAgICAgICAgICAgICB0b2dnbGVMb2NrKHRydWUpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiU3luYyBFcnJvcjogIiArIGVycm9yLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBzYXZlQnRuLmlubmVyVGV4dCA9ICJTYXZlIjsNCiAgICAgICAgICAgICAgICBzYXZlQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gUHJvbXB0IGZvciB1c2VyIHdoZW4gaGUgbGVhdmVzIHJlY2VpcHQgd2l0aG91dCBzYXZpbmcNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGNvbmZpcm1Mb2NrKCkgew0KICAgICAgICAgICAgaWYgKGlzRGlydHkpIHsNCiAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ2hvaWNlID0gY29uZmlybSgiUmVjZWlwdCBOb3QgU2F2ZWQhIFxuXG5DbGljayBPSyB0byBESVNDQVJEIGNoYW5nZXMgYW5kIExvY2suIFxuQ2xpY2sgQ0FOQ0VMIHRvIHN0YXkgYW5kIFNhdmUuIik7DQogICAgICAgICAgICAgICAgaWYgKCF1c2VyQ2hvaWNlKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVXNlciBjbGlja2VkIENhbmNlbCwgc28gZG8gbm90aGluZyAoc3RheSBpbiBlZGl0IG1vZGUpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gSWYgbm90IGRpcnR5LCBvciBpZiB1c2VyIGNob3NlIHRvIGRpc2NhcmQsIHByb2NlZWQgdG8gbG9jaw0KICAgICAgICAgICAgaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgdG9nZ2xlTG9jayh0cnVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBSTiBCdXR0b24gLSBDcmVhdGVzIGEgbmV3IHJlY2VpcHQgYnkgYXNzaWduaW5nIG5ldyByZWNlaXB0IG51bWJlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTmV3UmVjZWlwdCgpIHsNCiAgICAgICAgICAgIGNvbnN0IHJuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9ybicpOw0KDQogICAgICAgICAgICAvLyAxLiBEaXNhYmxlIGJ1dHRvbiB0byBwcmV2ZW50IGRvdWJsZS1jbGlja3MNCiAgICAgICAgICAgIHJuQnRuLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHJuQnRuLmlubmVyVGV4dCA9ICJBc3NpZ25pbmcuLi4iOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdhY3Rpb24nLCAnZ2V0TmV3UmVjZWlwdCcpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gQ2FsbCB0aGUgR29vZ2xlIFNjcmlwdA0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc2NyaXB0VVJMLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gUGFyc2UgdGhlIEpTT04gcmVzcG9uc2UNCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3VsdFRleHQpOw0KDQogICAgICAgICAgICAgICAgaWYgKGRhdGEucmVjZWlwdCAmJiBkYXRhLmluZGV4KSB7DQogICAgICAgICAgICAgICAgICAgIC8vIDQuIFVwZGF0ZSB0aGUgaGlkZGVuL2Rpc3BsYXkgcmVjb3JkIGluZGV4DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvcmROdW1iZXJEaXNwbGF5JykudmFsdWUgPSBkYXRhLmluZGV4Ow0KDQogICAgICAgICAgICAgICAgICAgIC8vIDUuIFBvcHVsYXRlIEZpZWxkcyB3aXRoIERlZmF1bHRzDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWNubycpLnZhbHVlID0gZGF0YS5yZWNlaXB0Ow0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZGF0ZScpLnZhbHVlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9uYW1lJykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX3Bob25lJykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2FkZHJlc3MnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZW1haWwnKS52YWx1ZSA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGFuJykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2Ftb3VudCcpLnZhbHVlID0gIiI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9yZWYnKS52YWx1ZSA9ICIiOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFlvdXIgcmVxdWVzdGVkIGRlZmF1bHRzDQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9waW5jb2RlJykudmFsdWUgPSAiMDAwMDAwIjsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2NvdW50cnknKS52YWx1ZSA9ICJJTkRJQSI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9tb2RlJykudmFsdWUgPSAiQ0FTSCI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF90b3dhcmRzJykudmFsdWUgPSAiT1RIRVJTIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdG8gQ2FuY2VsbGVkPVlFUyBpbml0aWFsbHkgYXMgYSBwbGFjZWhvbGRlcg0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY2FuY2VsJykuY2hlY2tlZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNi4gVW5sb2NrIGZvciBlbnRyeQ0KICAgICAgICAgICAgICAgICAgICB0b2dnbGVMb2NrKGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgaXNEaXJ0eSA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNy4gU3luYyBsb2NhbCBtZW1vcnkgc28gdGhlIG5ldyByb3cgZXhpc3RzIGluIHRoZSBicm93c2VyJ3MgbGlzdA0KICAgICAgICAgICAgICAgICAgICAvLyBXZSBjcmVhdGUgYSBibGFuayBwaXBlcyBzdHJpbmcgdG8gcmVwcmVzZW50IHRoZSBuZXcgcm93IGxvY2FsbHkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxhbmtSb3cgPSBgJHtkYXRhLnJlY2VpcHR9fHx8fHx8fHx8fHx8fFlFU3x8MDAwMDAwfHx8T3xJTkRJQWA7DQogICAgICAgICAgICAgICAgICAgIC8vY29uc3QgYmxhbmtSb3cgPSBgJHtkYXRhLnJlY2VpcHR9fHx8fHx8fHx8fHx8fFlFU3x8MDAwMDAwfE5PfE5PfE5PfElORElBYDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBHTE9CQUxfREJfTElORVMgIT09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVMucHVzaChibGFua1Jvdyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTmV3IFJlY2VpcHQgQXNzaWduZWQ6ICIgKyBkYXRhLnJlY2VpcHQgKyAiXG5SZWNvcmQgSW5kZXg6ICIgKyBkYXRhLmluZGV4KTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgZGF0YSByZWNlaXZlZCBmcm9tIHNlcnZlciIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlJOIEVycm9yOiIsIGUpOw0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvciBnZXR0aW5nIG5ldyBudW1iZXI6ICIgKyBlLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIHJuQnRuLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgcm5CdG4uaW5uZXJUZXh0ID0gIlJOIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBieSBkZWZhdWx0IGFsbCByZWNlaXB0IGZpZWxkcyBhcmUgbG9ja2VkLg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlTG9jayhzaG91bGRMb2NrKSB7DQogICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBbJ2ZpZWxkX3JlY25vJywgJ2ZpZWxkX2RhdGUnLCAnZmllbGRfbmFtZScsICdmaWVsZF9waG9uZScsICdmaWVsZF9hZGRyZXNzJywgJ2ZpZWxkX2VtYWlsJywgJ2ZpZWxkX3BhbicsICdmaWVsZF9zdGFyJywgJ2ZpZWxkX2dvdGhyYW0nLCAnZmllbGRfYW1vdW50JywgJ2ZpZWxkX3JlZicsICdmaWVsZF9tb2RlJywgJ2ZpZWxkX3Rvd2FyZHMnLCAnZmllbGRfY29tbWVudHMnLCAnZmllbGRfcGluY29kZScsICdmaWVsZF9jb3VudHJ5JywgJ2ZpZWxkX2NhbmNlbCcsICdmaWVsZF9wcmludGVkJywgJ2ZpZWxkX3ByYXNhZGFtJywgJ2ZpZWxkX2NvcnB1cyddOw0KDQogICAgICAgICAgICBjb25zdCBjaGVja2JveFJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGVja2JveF9yb3cnKTsNCiAgICAgICAgICAgIGNvbnN0IHNJbnAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfc2VhcmNoJyk7DQogICAgICAgICAgICBjb25zdCBzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEJ0bicpOw0KICAgICAgICAgICAgY29uc3QgbmF2QnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tbmF2Jyk7DQogICAgICAgICAgICBjb25zdCBzYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9zYXZlJyk7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tcm4nKTsgLy8gQWRkZWQNCg0KICAgICAgICAgICAgZmllbGRzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgICAgICAgIGlmIChlbCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZWwudHlwZSA9PT0gImNoZWNrYm94Iikgew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwuZGlzYWJsZWQgPSBzaG91bGRMb2NrOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVhZE9ubHkgPSBzaG91bGRMb2NrOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9IHNob3VsZExvY2sgPyAiI2ZmZmZlMCIgOiAiI2ZmZmZmZiI7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIXNob3VsZExvY2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtEaXJ0eSA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RpcnR5ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2F2ZUJ0bikgc2F2ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzSW5wKSBzSW5wLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc0J0bikgc0J0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2QnRucy5mb3JFYWNoKGIgPT4gYi5kaXNhYmxlZCA9IHRydWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLm9uaW5wdXQgPSBtYXJrRGlydHk7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5vbmNoYW5nZSA9IG1hcmtEaXJ0eTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBpZiAoY2hlY2tib3hSb3cpIHsNCiAgICAgICAgICAgICAgICBjaGVja2JveFJvdy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzaG91bGRMb2NrID8gIiNmZmZmZTAiIDogIiNmZmZmZmYiOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX3VubG9jaycpLmRpc2FibGVkID0gIXNob3VsZExvY2s7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuX2xvY2snKS5kaXNhYmxlZCA9IHNob3VsZExvY2s7DQogICAgICAgICAgICBpZiAoc2F2ZUJ0bikgc2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBpZiAocm5CdG4pIHJuQnRuLmRpc2FibGVkID0gIXNob3VsZExvY2s7IC8vIFJOIGFjdGl2ZSBvbmx5IHdoZW4gbG9ja2VkDQoNCiAgICAgICAgICAgIGlmIChzaG91bGRMb2NrKSB7DQogICAgICAgICAgICAgICAgaXNEaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGlmIChzSW5wKSBzSW5wLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKHNCdG4pIHNCdG4uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBuYXZCdG5zLmZvckVhY2goYiA9PiBiLmRpc2FibGVkID0gZmFsc2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEVzc2VudGlhbCBmaXhlcyAtIG1pc2MNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIC0tLSBJTklUSUFMSVpBVElPTiBBTkQgU0VBUkNIIEZJWCAtLS0NCiAgICAgICAgKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGNvbnN0IHBob25lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKTsNCiAgICAgICAgICAgIGNvbnN0IGZldGNoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9mZXRjaCcpOw0KICAgICAgICAgICAgY29uc3Qgc2VhcmNoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEJ0bicpOw0KDQogICAgICAgICAgICAvLyAxLiBUZWxlcGhvbmUgRmV0Y2ggQnV0dG9uIENvbG9yIExvZ2ljDQogICAgICAgICAgICBpZiAocGhvbmVJbnB1dCAmJiBmZXRjaEJ0bikgew0KICAgICAgICAgICAgICAgIHBob25lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUmVhZHkgPSB0aGlzLnZhbHVlLnRyaW0oKS5sZW5ndGggPj0gMTA7DQogICAgICAgICAgICAgICAgICAgIGZldGNoQnRuLmRpc2FibGVkID0gIWlzUmVhZHk7DQogICAgICAgICAgICAgICAgICAgIC8vIFR1cm5zIGdyZWVuIHdoZW4gMTAgZGlnaXRzIGFyZSBlbnRlcmVkDQogICAgICAgICAgICAgICAgICAgIGZldGNoQnRuLnN0eWxlLmJhY2tncm91bmQgPSBpc1JlYWR5ID8gIiM0Q0FGNTAiIDogIiNlMWUxZTEiOw0KICAgICAgICAgICAgICAgICAgICBmZXRjaEJ0bi5zdHlsZS5jb2xvciA9IGlzUmVhZHkgPyAid2hpdGUiIDogImJsYWNrIjsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMi4gU0VBUkNIIEJVVFRPTiBGSVg6IFJlc2V0IGluZGV4IGlmIGF0IHRoZSBlbmQgb2YgREINCiAgICAgICAgICAgIGlmIChzZWFyY2hCdG4pIHsNCiAgICAgICAgICAgICAgICAvLyBXZSBvdmVycmlkZSB0aGUgY2xpY2sgdG8gZW5zdXJlIGl0IGRvZXNuJ3QgZ2V0IHN0dWNrIGFmdGVyIGEgTmV3IFJODQogICAgICAgICAgICAgICAgc2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRSZWNvcmRJbmRleCAhPT0gJ3VuZGVmaW5lZCcgJiYgY3VycmVudFJlY29yZEluZGV4ID49IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhdCB0aGUgdmVyeSBsYXN0IHJlY29yZCwgcmVzZXQgdG8gc3RhcnQgc28gc2VhcmNoIGNhbiBmaW5kIG9sZGVyIHJlY29yZHMNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9yaWdpbmFsIHBlcmZvcm1TZWFyY2goKSBmcm9tIHlvdXIgZmlsZSB3aWxsIG5vdyBydW4gY29ycmVjdGx5DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIDMuIEF1dG8tVW5jaGVjayAnQ2FuY2VsJyBib3ggd2hlbiB1c2VyIHN0YXJ0cyB0eXBpbmcNCiAgICAgICAgICAgIFsnZmllbGRfbmFtZScsICdmaWVsZF9hbW91bnQnLCAnZmllbGRfcGhvbmUnXS5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgICAgICAgICBpZiAoZWwpIHsNCiAgICAgICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxDaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jYW5jZWwnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxDaGVjayAmJiBjYW5jZWxDaGVjay5jaGVja2VkKSBjYW5jZWxDaGVjay5jaGVja2VkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KSgpOw0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBGZXRjaCBkb25vciBiYXNpYyBkZXRhaWxzIGZyb20gcGFzdCAobGF0ZXN0KSByZWNlaXB0cyB3aXRoIHRoZSBoZWxwIG9mIHRlbGVwb25lIG51bWJlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gLS0tIERBVEEgRkVUQ0hJTkcgTE9HSUMgLS0tDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoRG9ub3JEZXRhaWxzKCkgew0KICAgICAgICAgICAgY29uc3QgcGhvbmVUb0ZpbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGhvbmUnKS52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KDQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KDQogICAgICAgICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgb3ZlcmxheSBpcyB2aXNpYmxlDQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAvLyBTZWFyY2ggZnJvbSBuZXdlc3QgdG8gb2xkZXN0IChSZXZlcnNlIExvb3ApDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxOyBpID49IDE7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgVGVsZXBob25lIENvbHVtbiAoSW5kZXggMykNCiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbWF0Y2ggdGhlIGxhc3QgMTAgZGlnaXRzIHRvIGlnbm9yZSArOTEgb3IgbGVhZGluZyB6ZXJvcw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5EYlBob25lID0gKGNvbHNbM10gfHwgIiIpLnJlcGxhY2UoL1xEL2csICIiKS5zbGljZSgtMTApOw0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5JbnB1dFBob25lID0gcGhvbmVUb0ZpbmQucmVwbGFjZSgvXEQvZywgIiIpLnNsaWNlKC0xMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFuRGJQaG9uZSA9PT0gY2xlYW5JbnB1dFBob25lICYmIGNsZWFuRGJQaG9uZS5sZW5ndGggPj0gMTApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCB0aGUgZGF0YSB0byB5b3VyIGZpZWxkcw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX25hbWUnKS52YWx1ZSA9IGNvbHNbMl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfYWRkcmVzcycpLnZhbHVlID0gKGNvbHNbNF0gfHwgIiIpLnJlcGxhY2UoL34vZywgJ1xuJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfZW1haWwnKS52YWx1ZSA9IGNvbHNbNV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGFuJykudmFsdWUgPSBjb2xzWzZdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkX2dvdGhyYW0nKS52YWx1ZSA9IGNvbHNbOF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcGluY29kZScpLnZhbHVlID0gY29sc1sxNV0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfY291bnRyeScpLnZhbHVlID0gY29sc1sxOV0gfHwgIklORElBIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGEgbm90ZSBpbiBjb21tZW50cw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RheSA9IGAke1N0cmluZyhkLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKX0tJHtTdHJpbmcoZC5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtkLmdldEZ1bGxZZWFyKCl9YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZF9jb21tZW50cycpLnZhbHVlID0gYEF1dG8tRmV0Y2hlZCBmcm9tIFJOOiAke2NvbHNbMF19IG9uICR7dG9kYXl9YDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KDQogICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTmV3IERvbm9yIC0gTm8gcHJldmlvdXMgcmVjb3JkcyBmb3VuZCBmb3IgdGhpcyBudW1iZXIuIik7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gVW5sb2NrIHRoZSBmb3JtIHNvIHRoZSB1c2VyIGNhbiBlZGl0IHRoZSBmZXRjaGVkIGRhdGENCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2dnbGVMb2NrID09PSAiZnVuY3Rpb24iKSB0b2dnbGVMb2NrKGZhbHNlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCAzMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFNlYXJjaCBSZWNvcmRzIC0gUm91bmQgUm9iaW4gTWV0aG9kDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAtLS0gRklOQUwgU0VBUkNIIEZJWDogUFJFVkVOVFMgR0VUVElORyBTVFVDSyBBVCBFTkQgLS0tDQogICAgICAgIGZ1bmN0aW9uIHBlcmZvcm1TZWFyY2goKSB7DQogICAgICAgICAgICBjb25zdCByYXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfc2VhcmNoJykudmFsdWUudHJpbSgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICBpZiAoIXJhdykgcmV0dXJuOw0KDQogICAgICAgICAgICAvLyBGT1JDRSBTVEVQLUJBQ0s6IElmIHdlIGFyZSBhdCB0aGUgZW5kLCBzdGFydCBsb29raW5nIGZyb20gdGhlIHJlY29yZCBCRUZPUkUgaXQuDQogICAgICAgICAgICBsZXQgc3RhcnRJbmRleCA9IChjdXJyZW50UmVjb3JkSW5kZXggPiAwKSA/IGN1cnJlbnRSZWNvcmRJbmRleCAtIDEgOiBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsNCg0KICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7DQogICAgICAgICAgICBsZXQgaSA9IHN0YXJ0SW5kZXg7DQogICAgICAgICAgICBsZXQgY291bnQgPSAwOw0KDQogICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggdGhlIHdob2xlIGRhdGFiYXNlIG9uY2UNCiAgICAgICAgICAgIHdoaWxlIChjb3VudCA8IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBpZiAoY2hlY2tTZWFyY2hNYXRjaChpLCByYXcpKSB7DQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRJbmRleCA9IGk7DQogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGktLTsNCiAgICAgICAgICAgICAgICBpZiAoaSA8IDApIGkgPSBHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMTsgLy8gV3JhcCBhcm91bmQgdG8gZW5kDQogICAgICAgICAgICAgICAgY291bnQrKzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGZvdW5kKSB7DQogICAgICAgICAgICAgICAgZGlzcGxheVJlY29yZChjdXJyZW50UmVjb3JkSW5kZXgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICAgICAgaWYgKHNsaWRlcikgc2xpZGVyLnZhbHVlID0gY3VycmVudFJlY29yZEluZGV4Ow0KICAgICAgICAgICAgICAgIC8vIFN5bmMgdGhlIHNlYXJjaCB0cmFja2luZw0KICAgICAgICAgICAgICAgIGxhc3RGb3VuZFNlYXJjaEluZGV4ID0gY3VycmVudFJlY29yZEluZGV4Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiTm8gb3RoZXIgbWF0Y2hlcyBmb3VuZC4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gRW5zdXJlIHlvdXIgaGVscGVyIGlzIHN0cmljdGx5IGNoZWNraW5nIGRhdGENCiAgICAgICAgZnVuY3Rpb24gY2hlY2tTZWFyY2hNYXRjaChpZHgsIHF1ZXJ5KSB7DQogICAgICAgICAgICBjb25zdCBsaW5lID0gR0xPQkFMX0RCX0xJTkVTW2lkeF07DQogICAgICAgICAgICBpZiAoIWxpbmUpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIHJldHVybiBsaW5lLnRvVXBwZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFVzZXIgbmFtZSByZWdpc3RlcmVkIGFzIGxvZ2dlZCBpbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gd3JpdGVVc2VyTG9nKGFjdGlvbikgew0KICAgICAgICAgICAgaWYgKCFNTVBUX1VTRVJfTkFNRSkgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtNTVBUX0xPR19ESVJ9JHtNTVBUX1VTRVJfTkFNRX0udHh0YDsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTsNCiAgICAgICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0gYFske3RpbWVzdGFtcH1dICR7YWN0aW9ufVxuYDsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgZXhpc3RpbmdDb250ZW50ID0gIiI7DQogICAgICAgICAgICAgICAgLy8gVXNlICd0JyBhcyBwZXIgeW91ciBCYXNlIGZpbGUNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZmlsZU5hbWUgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGlmIChyZXMub2spIGV4aXN0aW5nQ29udGVudCA9IGF3YWl0IHJlcy50ZXh0KCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGV4aXN0aW5nQ29udGVudCArIGxvZ0VudHJ5Ow0KICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBmaWxlTmFtZSwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogdXBkYXRlZENvbnRlbnQNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKCJMb2dnaW5nIGZhaWxlZDoiLCBlcnIpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9yZW1vdmUgdXNlciBmcm9tIGxpc3QgaWYgbm90IHBvbGxlZCBmb3IgMiBtaW51dGVzDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB5b3UgYXNrZWQgZm9yIC0gcGxhY2UgaXQgd2l0aCB5b3VyIG90aGVyIHVzZXItaGFuZGxpbmcgZnVuY3Rpb25zDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJlbW92ZVVzZXJGcm9tUG9sbGluZyh1c2VyTmFtZSkgew0KICAgICAgICAgICAgLy8gMS4gTG9nIHRoZSBldmVudCBiZWZvcmUgdGhleSBhcmUgcmVtb3ZlZA0KICAgICAgICAgICAgYXdhaXQgd3JpdGVVc2VyTG9nKGBTRVNTSU9OIEVORDogVXNlciAke3VzZXJOYW1lfSBkaXNjb25uZWN0ZWQvcmVtb3ZlZCBmcm9tIHBvbGxpbmcuYCk7DQoNCiAgICAgICAgICAgIC8vIDIuIFlvdXIgZXhpc3RpbmcgbG9naWMgdG8gYWN0dWFsbHkgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgVUkgb3IgbGlzdA0KICAgICAgICAgICAgY29uc29sZS5sb2coYFVzZXIgJHt1c2VyTmFtZX0gaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGFjdGl2ZSBwb2xsaW5nLmApOw0KDQogICAgICAgICAgICAvLyBJZiB5b3UgaGF2ZSBhIHNwZWNpZmljIFVJIGVsZW1lbnQgZm9yIHRoZSB1c2VyIGxpc3QsIHVwZGF0ZSBpdCBoZXJlDQogICAgICAgICAgICAvLyB1cGRhdGVBY3RpdmVVc2VyTGlzdCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gTG9jYXRlIHRoaXMgaW4geW91ciA8c2NyaXB0PiBzZWN0aW9uDQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnYnV0dG9uJyk7DQogICAgICAgICAgICBpZiAodGFyZ2V0KSB7DQogICAgICAgICAgICAgICAgLy8gUFJPQkU6IEFkZCB0aGlzIGxpbmUgdG8gaWdub3JlIHRoZSBzYXZlIGJ1dHRvbnMNCiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmlkID09PSAnYnRuX3NhdmUnIHx8IHRhcmdldC5pZCA9PT0gJ2Jhbmstc3luYy1idG4nKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBidG5UZXh0ID0gdGFyZ2V0LmlubmVyVGV4dCB8fCB0YXJnZXQudmFsdWUgfHwgIkljb24gQnV0dG9uIjsNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coYENMSUNLRUQgQlVUVE9OOiBbJHtidG5UZXh0fV1gKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCg0KICAgICAgICAvLyAyLiBMQVVOQ0ggTE9HIChJbnNpZGUgeW91ciBleGlzdGluZyBpbml0aWFsaXplTU1QVCBvciByaWdodCBhZnRlcikNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9nTGF1bmNoKCkgew0KICAgICAgICAgICAgLy8gV2FpdCBhIHRpbnkgYml0IGZvciB0aGUgbmFtZSB0byBiZSBhdmFpbGFibGUNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIHdyaXRlVXNlckxvZygiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iKTsNCiAgICAgICAgICAgICAgICB3cml0ZVVzZXJMb2coIkxBVU5DSEVEOiBIVE1MIFNlc3Npb24gU3RhcnRlZCIpOw0KICAgICAgICAgICAgfSwgMjAwMCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIFRoaXMgcnVucyA1IHNlY29uZHMgYWZ0ZXIgbGF1bmNoIGFzIGEgc2VwYXJhdGUgIkhlYWx0aCBDaGVjayINCiAgICAgICAgLy8gQnVsbGV0cHJvb2YgSW50ZWdyaXR5IENoZWNrDQogICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyA9PT0gJ3VuZGVmaW5lZCcgfHwgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA9PT0gMCkgcmV0dXJuOw0KDQogICAgICAgICAgICAgICAgLy8gMS4gR2V0IEFjdHVhbCBEQiBEYXRhDQogICAgICAgICAgICAgICAgY29uc3QgbGFzdERCTGluZSA9IEdMT0JBTF9EQl9MSU5FU1tHTE9CQUxfREJfTElORVMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsUk4gPSBsYXN0REJMaW5lLnNwbGl0KCd8JylbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbENvdW50ID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aDsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZldGNoIFNlcXVlbmNlIHdpdGggQ0FDSEUgQlVTVEVSDQogICAgICAgICAgICAgICAgLy8gQWRkaW5nIGEgdGltZXN0YW1wIGVuc3VyZXMgRHJvcGJveC9Ccm93c2VyIGNhbm5vdCBzZXJ2ZSBhbiBvbGQgdmVyc2lvbg0KICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQnVzdGVyID0gRGF0ZS5ub3coKTsNCiAgICAgICAgICAgICAgICBjb25zdCBzZXFSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL0RhdGFCYXNlcy9zZXF1ZW5jZS50eHQnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0N1c3RvbS1CdXN0ZXInOiBjYWNoZUJ1c3RlciAvLyBTb21lIGJyb3dzZXJzIG5lZWQgdGhpcyBpbiBoZWFkZXINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHNlcVJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXFUZXh0ID0gKGF3YWl0IHNlcVJlcy50ZXh0KCkpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2ZpbGVSTiwgZmlsZUNvdW50XSA9IHNlcVRleHQuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiSW50ZWdyaXR5IENoZWNrIC0+IERCOiIsIGFjdHVhbFJOLCAiRmlsZToiLCBmaWxlUk4pOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDMuIENvbXBhcmUNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdHVhbFJOICE9PSBmaWxlUk4pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGFpciA9IGNvbmZpcm0oDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYE1JU01BVENIIERFVEVDVEVEIVxuXG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRGF0YWJhc2U6ICR7YWN0dWFsUk59XG5gICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU2VxdWVuY2UgRmlsZTogJHtmaWxlUk59XG5cbmAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBUaGUgc2VxdWVuY2UgZmlsZSBpcyBvdXRkYXRlZC4gU3luYyBpdCBub3c/YA0KICAgICAgICAgICAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGFpcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcmZvcm1TZXF1ZW5jZUZpeChhY3R1YWxSTiwgYWN0dWFsQ291bnQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkludGVncml0eSBjaGVjayBlcnJvcjoiLCBlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgNDAwMCk7IC8vIFNob3J0ZXIgd2FpdCB0aW1lDQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQWRtaW4gUGFuZWwNCiAgICAgICAgLy8gVXBkYXRlcyBjb250cm9sLWxpc3QgLSBzZWxlY3QgYWxsb3dlZCBjb250cm9scyBmb3IgYSBwYXJ0aWN1bGFyIHVzZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIDEuIFVQREFURUQgRkVBVFVSRVMgTElTVA0KICAgICAgICBjb25zdCBwcm9qZWN0RmVhdHVyZXMgPSBbDQogICAgICAgICAgICAiYnRuLWFkbWluLWFjY2VzcyIsICJidG4tZGV2b3RlZS1hY2Nlc3MiLCAibWFzdGVyLWhlYWRlciIsICJkYXNoYm9hcmQtY29udGFpbmVyIiwgImVudHJ5LWNvbnRhaW5lciIsICJyZWNlaXB0LXByZXZpZXctcm93IiwNCiAgICAgICAgICAgICJidG5fc2F2ZSIsICJidG5fcm4iLCAiYnRuX3VubG9jayIsICJidG5fbG9jayIsICJzZWFyY2hCdG4iLCAiYmFuay1zeW5jLWJ0biIsICJidG5fY29uc2VudCIsICJidG5TdW1tYXJ5IiwNCiAgICAgICAgICAgICJzZWN0aW9ucyIsICJNaW5SZWNvcmROdW1iZXIiDQogICAgICAgIF07DQoNCiAgICAgICAgLy8gMi4gT1BFTiBQT1JUQUwgKENvcnJlY3RseSBwYXJzaW5nIERldmljZSBJRCB8IFVzZXJuYW1lIHwgUGFzc3dvcmQpDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIG9wZW5TZWN1cml0eVBvcnRhbCgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdXNlclJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL1NldHRpbmdzL0FwcHJvdmVkLnR4dCcgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgbGV0IHVzZXJMaXN0ID0gW107DQogICAgICAgICAgICAgICAgaWYgKHVzZXJSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHVzZXJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGVtcHR5IGxpbmVzLCBjb21tZW50cyBzdGFydGluZyB3aXRoICMsIGFuZCBsaW5lcyB3aXRob3V0IHBpcGVzDQogICAgICAgICAgICAgICAgICAgIHVzZXJMaXN0ID0gdGV4dC5zcGxpdCgnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCh1ID0+IHUudHJpbSgpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih1ID0+IHUgIT09ICIiICYmICF1LnN0YXJ0c1dpdGgoJyMnKSAmJiB1LmluY2x1ZGVzKCd8JykpDQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHRha2UgdGhlIG1pZGRsZSBwYXJ0IChVc2VybmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMubGVuZ3RoID49IDIgPyBwYXJ0c1sxXS50cmltKCkgOiBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodSA9PiB1ICE9PSBudWxsKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBsZXQgaHRtbEhlYWRlciA9IGANCjxkaXYgaWQ9InBvcnRhbC1vdmVybGF5IiBzdHlsZT0icG9zaXRpb246Zml4ZWQ7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTsgei1pbmRleDoxMDAwMDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgd2lkdGg6ODAwcHg7IGFsaWduLXNlbGY6ZmxleC1zdGFydDsgYm94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuNCk7IGJvcmRlci1yYWRpdXM6NHB4OyBmb250LWZhbWlseTpBcmlhbDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6MjBweDsgYmFja2dyb3VuZDojODAwMDAwOyBjb2xvcjp3aGl0ZTsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0ibWFyZ2luOjA7Ij5TZWN1cml0eSBQb3J0YWw8L2gyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlNlbGVjdCBVc2VyOiA8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icG9ydGFsLXVzZXItc2VsZWN0b3IiIG9uY2hhbmdlPSJsb2FkVXNlclNldHRpbmdzKHRoaXMudmFsdWUpIiBzdHlsZT0icGFkZGluZzo1cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgVXNlciAtLTwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dXNlckxpc3QubWFwKHUgPT4gYDxvcHRpb24gdmFsdWU9IiR7dX0iPiR7dX08L29wdGlvbj5gKS5qb2luKCcnKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwb3J0YWwtY29udGVudC1hcmVhIiBzdHlsZT0ibWluLWhlaWdodDoyMDBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0icGFkZGluZzo0MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgY29sb3I6IzY2NjsiPlNlbGVjdCBhIHVzZXJuYW1lIHRvIGxvYWQgdGhlIHNlY3VyaXR5IGZpbGUuPC9wPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpyaWdodDsgYm9yZGVyLXRvcDoxcHggc29saWQgI2VlZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNhdmVTZWN1cml0eUZpbGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzgwMDAwMDsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTJweCAzMHB4OyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo0cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyI+U0FWRSBDSEFOR0VTPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC1vdmVybGF5JykucmVtb3ZlKCkiIHN0eWxlPSJtYXJnaW4tbGVmdDoxMHB4OyBwYWRkaW5nOjEycHggMjVweDsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBiYWNrZ3JvdW5kOm5vbmU7IGN1cnNvcjpwb2ludGVyOyI+Q0FOQ0VMPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCjwvZGl2PmA7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGh0bWxIZWFkZXIpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgiRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyAzLiBMT0FEIERBVEEgKFBhdGggaXMgbm93IGNvcnJlY3RseSAvU2V0dGluZ3MvVXNlcm5hbWUudHh0KQ0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkVXNlclNldHRpbmdzKHRhcmdldFVzZXIpIHsNCiAgICAgICAgICAgIGlmICghdGFyZ2V0VXNlcikgcmV0dXJuOw0KICAgICAgICAgICAgY29uc3QgY29udGVudEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9ydGFsLWNvbnRlbnQtYXJlYScpOw0KICAgICAgICAgICAgY29udGVudEFyZWEuaW5uZXJIVE1MID0gJzxwIHN0eWxlPSJwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+TG9hZGluZyAnICsgdGFyZ2V0VXNlciArICcudHh0Li4uPC9wPic7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSAodHlwZW9mIHQgIT09ICd1bmRlZmluZWQnKSA/IHQgOiBNTVBUX0FVVEhfS0VZOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBgL1NldHRpbmdzLyR7dGFyZ2V0VXNlcn0udHh0YCB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSB7fTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgICAgICB0ZXh0LnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3BsaXQoJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHNldHRpbmdzW3BhcnRzWzBdLnRyaW0oKV0gPSBwYXJ0c1sxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGxldCByb3dzSHRtbCA9IGA8dGFibGUgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsiPjx0Ym9keT5gOw0KDQogICAgICAgICAgICAgICAgcHJvamVjdEZlYXR1cmVzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZXR0aW5nc1tpZF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gIk1pblJlY29yZE51bWJlciIgfHwgaWQgPT09ICJzZWN0aW9ucyIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke2lkfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaW5wdXQtJHtpZH0iIHZhbHVlPSIke3ZhbH0iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgI2U5MWU2MzsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRZID0gKHZhbCA9PT0gJ1knIHx8IHZhbCA9PT0gJycpID8gJ3NlbGVjdGVkJyA6ICcnOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWROID0gKHZhbCA9PT0gJ04nKSA/ICdzZWxlY3RlZCcgOiAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NIdG1sICs9IGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjE1cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke2lkfTwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImlucHV0LSR7aWR9IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzo4cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iWSIgJHtzZWxlY3RlZFl9Plk8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTiIgJHtzZWxlY3RlZE59Pk48L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgcm93c0h0bWwgKz0gYDwvdGJvZHk+PC90YWJsZT5gOw0KICAgICAgICAgICAgICAgIGNvbnRlbnRBcmVhLmlubmVySFRNTCA9IHJvd3NIdG1sOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb250ZW50QXJlYS5pbm5lckhUTUwgPSAiPHAgc3R5bGU9J3BhZGRpbmc6MjBweDsnPkVycm9yIGxvYWRpbmcgc2V0dGluZ3MuPC9wPiI7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIDQuIFNBVkUgKFBhdGggZml4ZWQgdG8gL1NldHRpbmdzL1VzZXJuYW1lLnR4dCkNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2F2ZVNlY3VyaXR5RmlsZSgpIHsNCiAgICAgICAgICAgIGNvbnN0IHRhcmdldFVzZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9ydGFsLXVzZXItc2VsZWN0b3InKS52YWx1ZTsNCiAgICAgICAgICAgIGlmICghdGFyZ2V0VXNlcikgcmV0dXJuIGFsZXJ0KCJTZWxlY3QgdXNlciEiKTsNCg0KICAgICAgICAgICAgbGV0IGZpbGVMaW5lcyA9IFtdOw0KICAgICAgICAgICAgcHJvamVjdEZlYXR1cmVzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGlucHV0LSR7aWR9YCk7DQogICAgICAgICAgICAgICAgaWYgKGVsKSBmaWxlTGluZXMucHVzaChgJHtpZH0gfCAke2VsLnZhbHVlLnRyaW0oKX1gKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGZpbGVMaW5lcy5qb2luKCdcbicpOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY3RpdmVUb2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGAvU2V0dGluZ3MvJHt0YXJnZXRVc2VyfS50eHRgLCBtb2RlOiAnb3ZlcndyaXRlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBib2R5OiBmaWxlQ29udGVudA0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHJlcy5vaykgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiU2F2ZWQ6ICIgKyB0YXJnZXRVc2VyICsgIi50eHQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcnRhbC1vdmVybGF5JykucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBhbGVydCgiU2F2ZSBFcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBDaGVja3MgaWYgb3VyIG1haW4gREIgaXMgcmVhZHkgZm9yIHVzZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgZnVuY3Rpb24gc3RhcnRJbnRlZ3JpdHlQcm9iZShhdHRlbXB0cykgew0KICAgICAgICAgICAgaWYgKGF0dGVtcHRzIDw9IDApIHJldHVybjsgLy8gU3RvcCB0cnlpbmcgYWZ0ZXIgMTAgYXR0ZW1wdHMNCg0KICAgICAgICAgICAgLy8gMS4gQ2hlY2sgaWYgWU9VUiBjb3JlIGRhdGEgaXMgcmVhZHkNCiAgICAgICAgICAgIGlmICh0eXBlb2YgR0xPQkFMX0RCX0xJTkVTICE9PSAndW5kZWZpbmVkJyAmJiBHTE9CQUxfREJfTElORVMubGVuZ3RoID4gMCAmJiB0eXBlb2YgdCAhPT0gJ3VuZGVmaW5lZCcpIHsNCg0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTeXN0ZW0gUmVhZHkuIFByb2JpbmcgU2VxdWVuY2UuLi4iKTsNCiAgICAgICAgICAgICAgICBwZXJmb3JtU2VxdWVuY2VDaGVjaygpOw0KDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIDIuIE5vdCByZWFkeSB5ZXQ/IFdhaXQgMiBzZWNvbmRzIGFuZCB0cnkgYWdhaW4NCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU3lzdGVtIGJ1c3kuLi4gcmV0cnlpbmcgcHJvYmUgaW4gMnMiKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHN0YXJ0SW50ZWdyaXR5UHJvYmUoYXR0ZW1wdHMgLSAxKSwgMjAwMCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gTG9va3MgZm9yIHNlcXVlbmNlLnR4dCBhbmQgY2hlY2tzIGxhc3QgcmVjb3JkIGFuZCByZWNlaXB0IENHIG51bWJlciAtIGlmIG5vdCBvayAtIHByb21wdHMgZm9yIGF1dG8gY29ycmVjdGlvbg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcGVyZm9ybVNlcXVlbmNlQ2hlY2soKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEdldCB0aGUgdG90YWwgY291bnQgKGlycmVzcGVjdGl2ZSBvZiBwcmVmaXgpDQogICAgICAgICAgICAgICAgY29uc3QgZGJDb3VudCA9IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGg7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGaW5kIHRoZSBsYXRlc3QgQ0cgcmVjZWlwdCBieSBzZWFyY2hpbmcgYmFja3dhcmQgZnJvbSB0aGUgZW5kDQogICAgICAgICAgICAgICAgbGV0IGRiUk4gPSAiIjsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpcHROdW1iZXIgPSBHTE9CQUxfREJfTElORVNbaV0uc3BsaXQoJ3wnKVswXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZWNlaXB0TnVtYmVyLnN0YXJ0c1dpdGgoIkNHIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRiUk4gPSByZWNlaXB0TnVtYmVyOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIEZvdW5kIHRoZSBoaWdoZXN0L2xhdGVzdCBDRyBudW1iZXIsIHN0b3Agc2VhcmNoaW5nDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogSWYgbm8gQ0cgZm91bmQgYXQgYWxsLCB1c2UgdGhlIGxhc3QgbGluZSdzIG51bWJlcg0KICAgICAgICAgICAgICAgIGlmICghZGJSTiAmJiBHTE9CQUxfREJfTElORVMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBkYlJOID0gR0xPQkFMX0RCX0xJTkVTW0dMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxXS5zcGxpdCgnfCcpWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL0RhdGFCYXNlcy9zZXF1ZW5jZS50eHQnIH0pDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tc3RvcmUnDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSAoYXdhaXQgcmVzLnRleHQoKSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBbZmlsZVJOLCBmaWxlQ291bnRdID0gdGV4dC5zcGxpdCgnfCcpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgZm91bmQgQ0cgbnVtYmVyIHdpdGggd2hhdCBpcyBpbiBzZXF1ZW5jZS50eHQNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRiUk4gIT09IGZpbGVSTikgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwYWlyID0gY29uZmlybShgU0VRVUVOQ0UgTUlTTUFUQ0ghXG5cbkxhdGVzdCBDRyBpbiBEQjogJHtkYlJOfVxuRmlsZSBzYXlzOiAke2ZpbGVSTn1cblRvdGFsIFJlY29yZHM6ICR7ZGJDb3VudH1cblxuVXBkYXRlIHNlcXVlbmNlIGZpbGU/YCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwYWlyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvRGF0YUJhc2VzL3NlcXVlbmNlLnR4dCcsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGRiUk4gKyAifCIgKyBkYkNvdW50DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJQcm9iZSBmZXRjaCBmYWlsZWQuIE5ldHdvcmsgbWlnaHQgYmUgYnVzeS4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBMb29rcyBmb3IgVXNlck5hbWUudHh0IGFuZCBjaGVja3Mgd2hhdCBhcmUgdGhlIGNvbnRyb2xzIHRvIGJlIGFsbG93ZWQgLSBmdWxsIGFjY2VzcyBpZiBmaWxlIG5vdCBmb3VuZC4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIFN0YXJ0IHRoZSBwcm9iZSAodHJ5IDEwIHRpbWVzLCBldmVyeSAyIHNlY29uZHMpDQogICAgICAgIHN0YXJ0SW50ZWdyaXR5UHJvYmUoMTApOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRBbmRBcHBseVNlY3VyaXR5KHVzZXJOYW1lKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBgL1NldHRpbmdzLyR7dXNlck5hbWV9LnR4dGAgfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHJldHVybjsgLy8gSWYgbm8gZmlsZSBleGlzdHMsIHVzZXIgaGFzIGZ1bGwgYWNjZXNzDQoNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAvL2NvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXG4nKTsNCg0KDQogICAgICAgICAgICAgICAgLy8gU2tpcCBjb21tZW50cyBhbmQgZm9ybWF0dGluZyBsaW5lcw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXG4nKS5maWx0ZXIobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGwgPSBsaW5lLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwgIT09ICIiICYmICFsLnN0YXJ0c1dpdGgoJyMnKSAmJiBsLmluY2x1ZGVzKCd8Jyk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBbaWQsIGFjY2Vzc10gPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChpZCAmJiBhY2Nlc3MgJiYgYWNjZXNzLnRyaW0oKSA9PT0gIk4iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQudHJpbSgpKSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGlkLnRyaW0oKSlbMF07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgLy8gRElTQVBQRUFSDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFNlY3VyaXR5OiBIaWRkZW4gJHtpZH1gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiU2VjdXJpdHkgZmlsZSBub3QgZm91bmQgZm9yIHVzZXIsIGdyYW50aW5nIGRlZmF1bHQgYWNjZXNzLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIGlmIG1pbnJlY29yZCBudW1iZXIgc3BlY2lmaWVkIGluIHVzZXJuYW1lLnR4dCB0aGVuIGJsb2NrcyB1c2VyIHRvIHZpZXcgcHJldmlvdXMgcmVjb3Jkcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLyoqDQoqIFNlY3VyaXR5IEdhdGUgZm9yIE5hdmlnYXRpb24NCiogQHBhcmFtIHtudW1iZXJ9IHRhcmdldEluZGV4IC0gVGhlIGluZGV4IHRoZSB1c2VyIGlzIHRyeWluZyB0byBtb3ZlIHRvDQoqLw0KICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZU5hdmlnYXRpb25TZWN1cml0eSh0YXJnZXRJbmRleCkgew0KICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCBpbmRleCBpcyBhY3R1YWxseSBhIHJlY29yZCBudW1iZXIgKDEtYmFzZWQpLA0KICAgICAgICAgICAgLy8gd2UgdXNlIGl0IGRpcmVjdGx5LiBPdGhlcndpc2UsIHdlIGFzc3VtZSBpdCdzIGEgMC1iYXNlZCBhcnJheSBpbmRleC4NCiAgICAgICAgICAgIGNvbnN0IHRhcmdldFJOID0gdGFyZ2V0SW5kZXggKyAxOw0KDQogICAgICAgICAgICBpZiAod2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gPiAwICYmIHRhcmdldFJOIDwgd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4pIHsNCiAgICAgICAgICAgICAgICBhbGVydCgi8J+bkSBTRUNVUklUWSBCTE9DS1xuXG5Zb3VyIGFjY2VzcyBsZXZlbCBkb2VzIG5vdCBwZXJtaXQgdmlld2luZyByZWNvcmRzIGJlZm9yZTogIiArIHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOKTsNCg0KICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBzbGlkZXIgdmlzdWFsIGlmIGl0IG1vdmVkDQogICAgICAgICAgICAgICAgY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY19zbGlkZXInKTsNCiAgICAgICAgICAgICAgICBpZiAoc2xpZGVyKSBzbGlkZXIudmFsdWUgPSBjdXJyZW50UmVjb3JkSW5kZXg7DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIERlbnkgbmF2aWdhdGlvbg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEFsbG93IG5hdmlnYXRpb24NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIElmIGEgZmxvb3IgaXMgc2V0LCBhbmQgd2UgYXJlIGN1cnJlbnRseSBhdCBhIGxvd2VyIHJlY29yZCwganVtcCB0byB0aGUgZmxvb3INCiAgICAgICAgaWYgKHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOID4gMCkgew0KICAgICAgICAgICAgLy8gSWYgY3VycmVudCBpbmRleCBpcyAwIG9yIGxlc3MgdGhhbiB0aGUgZmxvb3IsIGxvYWQgdGhlIGZsb29yIHJlY29yZA0KICAgICAgICAgICAgaWYgKChjdXJyZW50UmVjb3JkSW5kZXggKyAxKSA8IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOKSB7DQogICAgICAgICAgICAgICAgY3VycmVudFJlY29yZEluZGV4ID0gd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4gLSAxOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQoY3VycmVudFJlY29yZEluZGV4KTsNCiAgICAgICAgICAgICAgICB1cGRhdGVTbGlkZXIoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyBsb29rcyBmb3IgYXBwcm92ZWQudHh0IGFuZCBhbGxvd3MgdXNlciB0byBlbnRlciBzdyAtIGJhc2VkIG9uIGRldmljZSBpZCBhbmQgcGFzc3dvcmQNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1blBlcnNvbmFsU2VjdXJpdHlHYXRlKGFwcHJvdmVkTGlzdFRleHQsIGN1cnJlbnREZXZJRCkgew0KICAgICAgICAgICAgLy8gMS4gSWRlbnRpZnkgdGhlIHNwZWNpZmljIHJvdyBmb3IgdGhpcyBkZXZpY2UNCiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gYXBwcm92ZWRMaXN0VGV4dC5zcGxpdCgnXG4nKS5maWx0ZXIobCA9PiBsLnRyaW0oKSAhPT0gIiIpOw0KICAgICAgICAgICAgY29uc3QgbXlSb3cgPSBsaW5lcy5maW5kKGxpbmUgPT4gbGluZS5pbmNsdWRlcyhjdXJyZW50RGV2SUQpKTsNCg0KICAgICAgICAgICAgaWYgKCFteVJvdykgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCBwYXJ0cyA9IG15Um93LnNwbGl0KCd8JykubWFwKHAgPT4gcC50cmltKCkpOw0KICAgICAgICAgICAgY29uc3QgdU5hbWUgPSBwYXJ0c1sxXTsNCiAgICAgICAgICAgIGNvbnN0IHVQYXNzID0gcGFydHNbMl0gfHwgIjAiOw0KDQogICAgICAgICAgICBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCgpOw0KDQogICAgICAgICAgICAvLyAyLiBJZiBQYXNzd29yZCBpcyAiMCIsIHNraXAgdGhlIHdpbmRvdyBhbmQganVzdCBsb2NrIHRoZSB1c2VyDQogICAgICAgICAgICBpZiAodVBhc3MgPT09ICIwIikgew0KICAgICAgICAgICAgICAgIGxvY2tBbmRSZWZyZXNoVXNlcih1TmFtZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAzLiBPdGhlcndpc2UsIHBvcCB0aGUgd2luZG93DQogICAgICAgICAgICBjb25zdCBnYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICBnYXRlLmlkID0gInNlY3VyaXR5X2hpamFjayI7DQogICAgICAgICAgICBnYXRlLnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDI1NSwyNTAsMjQwLDAuOTgpOyB6LWluZGV4Ojk5OTk5OTsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZm9udC1mYW1pbHk6c2Fucy1zZXJpZjsgdHJhbnNpdGlvbjogMC4zczsiOw0KDQogICAgICAgICAgICBnYXRlLmlubmVySFRNTCA9IGANCjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6NDBweDsgYm9yZGVyLXJhZGl1czoxNXB4OyBib3JkZXI6M3B4IHNvbGlkICNGRjk5MzM7IHRleHQtYWxpZ246Y2VudGVyOyBib3gtc2hhZG93OjAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC4xKTsgd2lkdGg6MzIwcHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImdhdGVfcGhvdG9fY29udGFpbmVyIj48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBzdHlsZT0iY29sb3I6IzMzMzsgbWFyZ2luOjEwcHggMDsiPiR7dU5hbWV9PC9oMj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgaWQ9ImdhdGVfaW5wdXQiIHBsYWNlaG9sZGVyPSJFbnRlciBQSU4iIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjE1cHg7IGJvcmRlcjoycHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czo4cHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXNpemU6MjJweDsgb3V0bGluZTpub25lOyBtYXJnaW4tYm90dG9tOjE1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImdhdGVfdmVyaWZ5IiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMnB4OyBiYWNrZ3JvdW5kOiMyOGE3NDU7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo4cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGN1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MTZweDsiPlVOTE9DSyBBUFA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPSJnYXRlX2VyciIgc3R5bGU9ImNvbG9yOnJlZDsgbWFyZ2luLXRvcDoxMHB4OyBkaXNwbGF5Om5vbmU7Ij5JbnZhbGlkIFBhc3N3b3JkPC9wPg0KPC9kaXY+YDsNCg0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChnYXRlKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2lucHV0JykuZm9jdXMoKTsNCg0KICAgICAgICAgICAgLy8gRmV0Y2ggUGhvdG8gKE5vbi1ibG9ja2luZykNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcGhvdG9QYXRoID0gYC9JbWFnZXMvJHt1TmFtZX0uanBnYDsNCiAgICAgICAgICAgICAgICBjb25zdCBwUiA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBwaG90b1BhdGggfSkgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGlmIChwUi5vaykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gYXdhaXQgcFIuYmxvYigpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV9waG90b19jb250YWluZXInKS5pbm5lckhUTUwgPSBgPGltZyBzcmM9IiR7VVJMLmNyZWF0ZU9iamVjdFVSTChiKX0iIHN0eWxlPSJ3aWR0aDoxMjBweDsgaGVpZ2h0OjEyMHB4OyBib3JkZXItcmFkaXVzOjUwJTsgYm9yZGVyOjNweCBzb2xpZCAjRkY5OTMzOyBvYmplY3QtZml0OmNvdmVyOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij5gOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5sb2coIk5vIGN1c3RvbSBwaG90by4iKTsgfQ0KDQogICAgICAgICAgICBjb25zdCB2ZXJpZnkgPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2lucHV0JykudmFsdWUgPT09IHVQYXNzKSB7DQogICAgICAgICAgICAgICAgICAgIGdhdGUucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2tBbmRSZWZyZXNoVXNlcih1TmFtZSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfZXJyJykuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYXRlX2lucHV0JykudmFsdWUgPSAiIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2F0ZV92ZXJpZnknKS5vbmNsaWNrID0gdmVyaWZ5Ow0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhdGVfaW5wdXQnKS5vbmtleXByZXNzID0gKGUpID0+IHsgaWYgKGUua2V5ID09PSAnRW50ZXInKSB2ZXJpZnkoKTsgfTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBUaGUgIkhhbW1lciIgLSBmb3JjZXMgdGhlIGFwcCB0byBhY2tub3dsZWRnZSBUSElTIHVzZXIgYW5kIG5vIG9uZSBlbHNlLg0KICAgICAgICAgKi8NCiAgICAgICAgZnVuY3Rpb24gbG9ja0FuZFJlZnJlc2hVc2VyKGZpbmFsTmFtZSkgew0KICAgICAgICAgICAgd2luZG93Lk1NUFRfVVNFUl9OQU1FID0gZmluYWxOYW1lOw0KDQogICAgICAgICAgICAvLyBGb3JjZSBoZWFkZXIvc2lkZWJhciB1cGRhdGUNCiAgICAgICAgICAgIGNvbnN0IHVzZXJMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwbGF5VXNlcicpOw0KICAgICAgICAgICAgaWYgKHVzZXJMYWJlbCkgdXNlckxhYmVsLmlubmVyVGV4dCA9IGZpbmFsTmFtZTsNCg0KICAgICAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmVVc2VyTGlzdCcpOw0KICAgICAgICAgICAgaWYgKGFjdGl2ZUxpc3QpIGFjdGl2ZUxpc3QuaW5uZXJUZXh0ID0gZmluYWxOYW1lOw0KDQogICAgICAgICAgICAvLyBSZS1ydW4gcGVybWlzc2lvbiBsb2dpYyBmb3IgVEhJUyB1c2VyIHNwZWNpZmljYWxseQ0KICAgICAgICAgICAgaWYgKHR5cGVvZiBhcHBseVVzZXJQZXJtaXNzaW9ucyA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICAgICAgICAgIGFwcGx5VXNlclBlcm1pc3Npb25zKGZpbmFsTmFtZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIGhpZGUgbG9naWMgcnVucyBBRlRFUiB0aGUgcGFnZSBhbmQgYWxsIGRhdGEgKGltYWdlcy9zdGF0cykgYXJlIHJlYWR5DQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgLy8gMS1zZWNvbmQgZGVsYXkgdG8gZW5zdXJlIGFueSBpbnRlcm5hbCAnbG9hZFJlY29yZCcgZnVuY3Rpb25zIGhhdmUgZmluaXNoZWQgcmVuZGVyaW5nIHJvd3MNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgJ2N1cnJlbnRVc2VyJyB3aXRoIHdoYXRldmVyIHZhcmlhYmxlIHN0b3JlcyB5b3VyIGxvZ2dlZC1pbiBuYW1lDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50VXNlciAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgYXBwbHlVc2VyUGVybWlzc2lvbnMoY3VycmVudFVzZXIpOw0KICAgICAgICAgICAgICAgICAgICBjYXB0dXJlU2VjdXJpdHlTbmFwc2hvdCgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIDEwMDApOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gbG9va3MgZm9yIHVzZXJuYW1lLnR4dCBhbmQgZW5hYmxlcyAvIGRpc2FibGVzIGNvbnRyb2xzIGZvciB0aGF0IHBhcnRpY3VsYXIgdXNlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gYXBwbHlVc2VyUGVybWlzc2lvbnModXNlck5hbWUpIHsNCiAgICAgICAgICAgIC8vIDEuIEluaXRpYWwgZGVidWcgYWxlcnQNCiAgICAgICAgICAgIC8vYWxlcnQoIkZ1bmN0aW9uIFN0YXJ0ZWQgZm9yOiAiICsgdXNlck5hbWUpOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRva2VuID0gKHR5cGVvZiB0ICE9PSAndW5kZWZpbmVkJykgPyB0IDogTU1QVF9BVVRIX0tFWTsNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9ICIvU2V0dGluZ3MvIiArIHVzZXJOYW1lLnRyaW0oKSArICIudHh0IjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyAicGF0aCI6IGZpbGVQYXRoIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmICghcmVzLm9rKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJyk7DQoNCiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBbaWQsIGFjY2Vzc10gPSBsaW5lLnNwbGl0KCd8JykubWFwKHMgPT4gcy50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlkKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEEuIE1pbiBSZWNvcmQgTG9naWMgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gIk1pblJlY29yZE51bWJlciIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsb29yVmFsdWUgPSBwYXJzZUludChhY2Nlc3MpIHx8IDE7DQogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA9IGZsb29yVmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjb3JkU2xpZGVyJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnNldEF0dHJpYnV0ZSgnbWluJywgZmxvb3JWYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHNsaWRlci52YWx1ZSkgPCBmbG9vclZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IGZsb29yVmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbG9hZFJlY29yZEJ5SW5kZXggPT09ICJmdW5jdGlvbiIpIGxvYWRSZWNvcmRCeUluZGV4KGZsb29yVmFsdWUgLSAxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQi4gU2VjdGlvbnMgTG9naWMgKDEtNykgLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gInNlY3Rpb25zIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgiU2VjdGlvbnMgcmVhZDogWyIgKyBhY2Nlc3MgKyAiXSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlTZWN0aW9uQWNjZXNzKGFjY2Vzcyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQy4gU3RhbmRhcmQgVUkgVG9nZ2xlcyAoTiA9IEhpZGUpIC0tLQ0KICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCMke2lkfSwgLiR7aWR9YCk7DQogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2VzcyA9PT0gIk4iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnbm9uZScsICdpbXBvcnRhbnQnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGFsZXJ0KCJFcnJvcjogIiArIGUubWVzc2FnZSk7IH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGFwcGx5U2VjdGlvbkFjY2VzcyhhbGxvd2VkU3RyaW5nKSB7DQogICAgICAgICAgICAvLyBXZSB0YXJnZXQgdGhlIGNvbnRhaW5lcnMgZXhhY3RseSBhcyB5b3UgZGVmaW5lZCB0aGVtDQogICAgICAgICAgICBjb25zdCBzZWN0aW9uTWFwID0gew0KICAgICAgICAgICAgICAgICcwJzogJyNyYWRpby1kb2NrJywgLy9JbnRlcm5ldCBSYWRpbw0KICAgICAgICAgICAgICAgICcxJzogJy5wYW5jaGFuZy1vdXRlcicsDQogICAgICAgICAgICAgICAgJzInOiAnLmZsYXNoYmFjay1jb250YWluZXInLA0KICAgICAgICAgICAgICAgICczJzogJy5jaGl0cmFtLWNvbnRhaW5lcicsDQogICAgICAgICAgICAgICAgJzQnOiAnLm1tcHQtYXJjaGl2ZS1ib3gnLA0KICAgICAgICAgICAgICAgICc1JzogJyNhdWRpb19hcmNoaXZlX3NlY3Rpb24nLA0KICAgICAgICAgICAgICAgICc2JzogJyN2aWRlby1hcmNoaXZlLWJveCcsIC8vIFRhcmdldGVkIHZpYSB0aGUgSUQgd2UgYWRkZWQgaW4gU3RlcCAxDQogICAgICAgICAgICAgICAgJzcnOiAnI3BhbmNoYW5nX3NlY3Rpb24nLA0KICAgICAgICAgICAgICAgICc4JzogJy5sdW5hci1zZWN0aW9uJywNCiAgICAgICAgICAgICAgICAnOCc6ICcubmF2LXNlY3Rpb24nLA0KICAgICAgICAgICAgICAgICdHJzogJy5ndXJ1LXNlY3Rpb24nDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBPYmplY3Qua2V5cyhzZWN0aW9uTWFwKS5mb3JFYWNoKG51bSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBzZWN0aW9uTWFwW251bV07DQogICAgICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsNCg0KICAgICAgICAgICAgICAgIGlmIChlbCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBJRiB0aGUgbnVtYmVyIGlzIGluIHRoZSBzdHJpbmcgKGUuZy4gJzEyMycpLCBrZWVwL3Nob3cgaXQuDQogICAgICAgICAgICAgICAgICAgIC8vIElGIE5PVCAoZS5nLiAnNicgaXMgbWlzc2luZyksIGhpZGUgaXQgaW1tZWRpYXRlbHkuDQogICAgICAgICAgICAgICAgICAgIGlmIChhbGxvd2VkU3RyaW5nLmluY2x1ZGVzKG51bSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gVGFrZXMgYSBzbmFwIG9mIHVzZXIgd2hpbGUgbGF1bmNoIGFuZCBwdXRzIGluIGxvZyBmb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIElOREVQRU5ERU5UIFNFQ1VSSVRZIFNOQVBTSE9UDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNhcHR1cmVTZWN1cml0eVNuYXBzaG90KCkgew0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEdldCBDYW1lcmENCiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IHZpZGVvOiB0cnVlIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsNCiAgICAgICAgICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07DQogICAgICAgICAgICAgICAgYXdhaXQgdmlkZW8ucGxheSgpOw0KDQogICAgICAgICAgICAgICAgLy8gMi4gQ2FwdHVyZSBJbWFnZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOw0KICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHZpZGVvLnZpZGVvV2lkdGg7DQogICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHZpZGVvLnZpZGVvSGVpZ2h0Ow0KICAgICAgICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZSh2aWRlbywgMCwgMCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG5ldyBQcm9taXNlKHJlcyA9PiBjYW52YXMudG9CbG9iKHJlcywgJ2ltYWdlL2pwZWcnLCAwLjgpKTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFNpbXBsZSBGaWxlbmFtZSAoVXNlcl9EYXRlX1RpbWUuanBnKQ0KICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbm93LmdldEZ1bGxZZWFyKCkgKyAiLSIgKw0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpICsgIi0iICsNCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJykgKyAiXyIgKw0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJykgKyAiLSIgKw0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcobm93LmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7TU1QVF9MT0dfRElSfVVzZXJfJHt0aW1lc3RhbXB9LmpwZ2A7DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBVcGxvYWQgdG8gRHJvcGJveCAoVXNlcyB0aGUgZ2xvYmFsIHRva2VuICd0JykNCiAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0Ryb3Bib3gtQVBJLUFyZyc6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogZmlsZU5hbWUsIG1vZGU6ICdhZGQnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IGJsb2INCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDUuIFR1cm4gb2ZmIENhbWVyYQ0KICAgICAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIC8vIFNpbGVudCBmYWlsIC0gcHJldmVudHMgdGhlIGFwcCBmcm9tIGhhbmdpbmcgaWYgbm8gY2FtZXJhIGlzIGZvdW5kDQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJTbmFwc2hvdCBza2lwcGVkLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQWRtaW4gUGFuZWwNCiAgICAgICAgLy8gU2hvd3MgbGF0ZXN0IHR3byBwaG90b3Mgb2YgdXNlcnMgbG9nZ2VkIGluIGFkbWluIHBhbmVsDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkQWRtaW5TbmFwcygpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gMS4gRmV0Y2ggdGhlIGxpc3Qgb2YgZmlsZXMNCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9saXN0X2ZvbGRlcicsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogTU1QVF9MT0dfRElSIH0pDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBTb3J0IGJ5IGRhdGUgYW5kIHRha2UgbGF0ZXN0IDINCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlcyA9IGRhdGEuZW50cmllcw0KICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGYgPT4gZi5uYW1lLmVuZHNXaXRoKCcuanBnJykpDQogICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmNsaWVudF9tb2RpZmllZCkgLSBuZXcgRGF0ZShhLmNsaWVudF9tb2RpZmllZCkpDQogICAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCAyKTsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFBvcHVsYXRlIHRoZSBjZWxscw0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgc25hcC1ib3gtJHtpICsgMX1gKTsNCiAgICAgICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSAiIjsgLy8gQ2xlYXIgZXhpc3RpbmcNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZXNbaV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveGFwaS5jb20vMi9maWxlcy9nZXRfdGVtcG9yYXJ5X2xpbmsnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGZpbGVzW2ldLnBhdGhfbG93ZXIgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua0RhdGEgPSBhd2FpdCBsaW5rUmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCB0aW1lIGZyb20gZmlsZW5hbWUgVXNlcl9ZWVlZLU1NLUREX0hILU1NLmpwZw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IGZpbGVzW2ldLm5hbWUuc3BsaXQoJ18nKVsyXT8ucmVwbGFjZSgnLmpwZycsICcnKSB8fCAiTG9nIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojNjY2OyBtYXJnaW4tYm90dG9tOjJweDsiPiR7dGltZX08L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bGlua0RhdGEubGlua30iIHN0eWxlPSJ3aWR0aDo3MHB4OyBoZWlnaHQ6NzBweDsgb2JqZWN0LWZpdDpjb3ZlcjsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOjRweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJDb3VsZCBub3QgbG9hZCBzZWN1cml0eSBzbmFwc2hvdHMuIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy8gQXVkaXRzIHRoZSBlbnRyaWVzIG9mIFJlY2VpcHQgZmlsbGVkIGp1c3QgYmVmb3JlIHNhdmluZyBhbmQgcG9pbnRzIG91dCBwb3NzaWJsZSBlcnJvcnMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHJ1bkF1ZGl0KCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaXNDaGVja2VkID0gKGlkKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2hlY2tlZDsNCiAgICAgICAgICAgICAgICBjb25zdCBnZXRWYWwgPSAoaWQpID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS52YWx1ZS50cmltKCk7DQoNCiAgICAgICAgICAgICAgICAvLyAxLiBEQVRBIFZBTElEQVRJT04NCiAgICAgICAgICAgICAgICBjb25zdCBwaG9uZSA9IGdldFZhbCgnZmllbGRfcGhvbmUnKS5yZXBsYWNlKC9cRC9nLCAnJyk7DQogICAgICAgICAgICAgICAgY29uc3QgcGFuID0gZ2V0VmFsKCdmaWVsZF9wYW4nKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGVtYWlsID0gZ2V0VmFsKCdmaWVsZF9lbWFpbCcpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQoZ2V0VmFsKCdmaWVsZF9hbW91bnQnKSkgfHwgMDsNCiAgICAgICAgICAgICAgICBjb25zdCBpc0NhbmNlbGxlZCA9IGlzQ2hlY2tlZCgnZmllbGRfY2FuY2VsJyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgZXJyb3JzID0gW107DQogICAgICAgICAgICAgICAgbGV0IGJsYW5rcyA9IFtdOw0KDQogICAgICAgICAgICAgICAgLy8gQ29tcHJlaGVuc2l2ZSBCbGFuayBDaGVjayAoQWxsIHRleHQvdGV4dGFyZWEgZmllbGRzKQ0KICAgICAgICAgICAgICAgIGNvbnN0IHRleHRGaWVsZHMgPSB7DQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9yZWNubyc6ICdSZWNlaXB0IE5vJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2RhdGUnOiAnRGF0ZScsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9uYW1lJzogJ05hbWUnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfcGhvbmUnOiAnUGhvbmUnLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfYWRkcmVzcyc6ICdBZGRyZXNzJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2VtYWlsJzogJ0VtYWlsJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3Bhbic6ICdQQU4nLA0KICAgICAgICAgICAgICAgICAgICAnZmllbGRfc3Rhcic6ICdTdGFyJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2dvdGhyYW0nOiAnR290aHJhbScsDQogICAgICAgICAgICAgICAgICAgICdmaWVsZF9hbW91bnQnOiAnQW1vdW50JywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3JlZic6ICdSZWZlcmVuY2UvQ2hxIE5vJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX2NvbW1lbnRzJzogJ0NvbW1lbnRzJywNCiAgICAgICAgICAgICAgICAgICAgJ2ZpZWxkX3BpbmNvZGUnOiAnUGluY29kZScNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaWQgaW4gdGV4dEZpZWxkcykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWdldFZhbChpZCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsYW5rcy5wdXNoKHRleHRGaWVsZHNbaWRdKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEZvcm1hdCAmIExvZ2ljYWwgVmFsaWRhdGlvbnMNCiAgICAgICAgICAgICAgICBpZiAocGhvbmUubGVuZ3RoID4gMCAmJiBwaG9uZS5sZW5ndGggIT09IDEwKSB7DQogICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCLimqDvuI8gUGhvbmUgbnVtYmVyIG11c3QgYmUgZXhhY3RseSAxMCBkaWdpdHMuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHBhbi5sZW5ndGggPiAwICYmICEvW0EtWl17NX1bMC05XXs0fVtBLVpdezF9Ly50ZXN0KHBhbikpIHsNCiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goIuKaoO+4jyBQQU4gZm9ybWF0IGlzIGludmFsaWQgKEV4cGVjdGVkOiBBQUFBQTExMTFBKS4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gTkVXIEVNQUlMIFZBTElEQVRJT04gLS0tDQogICAgICAgICAgICAgICAgaWYgKGVtYWlsLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cc0BdK0BbXlxzQF0rXC5bXlxzQF0rJC87DQogICAgICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGVtYWlsKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goIuKaoO+4jyBFbWFpbCBmb3JtYXQgaXMgaW52YWxpZCAoRXhwZWN0ZWQ6IG5hbWVAZG9tYWluLmNvbSkuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBaZXJvIEFtb3VudCBIaWdobGlnaHQgTG9naWMNCiAgICAgICAgICAgICAgICBsZXQgYW1vdW50V2FybmluZyA9ICIiOw0KICAgICAgICAgICAgICAgIGlmICghaXNDYW5jZWxsZWQgJiYgYW1vdW50ID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGFtb3VudFdhcm5pbmcgPSBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZmZmMmYyOyBjb2xvcjojZDkzMDI1OyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgI2Q5MzAyNTsgYm9yZGVyLXJhZGl1czo1cHg7IG1hcmdpbi1ib3R0b206MTVweDsgZm9udC13ZWlnaHQ6Ym9sZDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDimqDvuI8gQ1JJVElDQUw6IEFtb3VudCBpcyAwLiBQbGVhc2UgdmVyaWZ5IGlmIHRoaXMgaXMgaW50ZW50aW9uYWwuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgi4pqg77iPIEFtb3VudCBpcyB6ZXJvLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgLy8gMi4gQlVJTEQgVEhFIEFVRElUIFVJDQogICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsSGVhZGVyID0gaXNDYW5jZWxsZWQgPw0KICAgICAgICAgICAgICAgICAgICBgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDpyZWQ7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MS4yZW07IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7Ij4hISEgUkVDRUlQVCBJUyBDQU5DRUxMRUQgISEhPC9kaXY+YCA6ICIiOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzR3JpZCA9IGANCjxkaXYgc3R5bGU9ImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgZ2FwOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7Ij4NCjxkaXY+Q2FuY2VsbGVkOiAke2lzQ2FuY2VsbGVkID8gJzxiIHN0eWxlPSJjb2xvcjpyZWQ7Ij5ZRVM8L2I+JyA6ICdOTyd9PC9kaXY+DQo8ZGl2PlByaW50ZWQ6ICR7aXNDaGVja2VkKCdmaWVsZF9wcmludGVkJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5QcmFzYWRhbTogJHtpc0NoZWNrZWQoJ2ZpZWxkX3ByYXNhZGFtJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPGRpdj5Db3JwdXMgU2lnbmVkOiAke2lzQ2hlY2tlZCgnZmllbGRfY29ycHVzJykgPyAnPGIgc3R5bGU9ImNvbG9yOmdyZWVuOyI+WUVTPC9iPicgOiAnTk8nfTwvZGl2Pg0KPC9kaXY+YDsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICAgICAgICBvdmVybGF5LnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuODUpOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgei1pbmRleDoxMDAwMTsgZm9udC1mYW1pbHk6c2Fucy1zZXJpZjsiOw0KDQoNCiAgICAgICAgICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IGANCjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6MjVweDsgYm9yZGVyLXJhZGl1czoxMnB4OyB3aWR0aDo1ODBweDsgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLDAsMCwwLjUpOyBtYXgtaGVpZ2h0OiA5MHZoOyBvdmVyZmxvdy15OiBhdXRvOyI+DQoke2NhbmNlbEhlYWRlcn0NCiR7YW1vdW50V2FybmluZ30NCg0KPGgyIHN0eWxlPSJtYXJnaW4tdG9wOjA7IGJvcmRlci1ib3R0b206MnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjEwcHg7Ij5SZWNlaXB0IEF1ZGl0IFJlcG9ydDwvaDI+DQoNCjxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTVweDsgbGluZS1oZWlnaHQ6MS41OyI+DQo8Yj5SZWNlaXB0OjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX3JlY25vJyl9IHwgPGI+RGF0ZTo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9kYXRlJyl9PGJyPg0KPGI+TmFtZTo8L2I+ICR7Z2V0VmFsKCdmaWVsZF9uYW1lJyl9PGJyPg0KPGI+QW1vdW50OjwvYj4gPHNwYW4gc3R5bGU9IiR7YW1vdW50ID09PSAwID8gJ2NvbG9yOnJlZDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMmVtOycgOiAnJ30iPuKCuSR7YW1vdW50fTwvc3Bhbj4gfCA8Yj5Ub3dhcmRzOjwvYj4gJHtnZXRWYWwoJ2ZpZWxkX3Rvd2FyZHMnKX0NCjwvZGl2Pg0KDQo8aDQgc3R5bGU9Im1hcmdpbjogMTVweCAwIDVweCAwOyBjb2xvcjojNTU1OyI+RGF0YWJhc2UgU3RhdHVzIEZsYWdzOjwvaDQ+DQoke3N0YXR1c0dyaWR9DQoNCiR7YmxhbmtzLmxlbmd0aCA+IDAgPyBgDQo8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7IGJhY2tncm91bmQ6I2U4ZjRmZDsgcGFkZGluZzoxMHB4OyBib3JkZXItbGVmdDo1cHggc29saWQgIzIxOTZGMzsiPg0KPGIgc3R5bGU9ImNvbG9yOiMwZDQ3YTE7Ij5UaGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgYmxhbms6PC9iPjxicj4NCjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC45ZW07IGNvbG9yOiMzMzM7Ij4ke2JsYW5rcy5qb2luKCcsICcpfTwvc3Bhbj4NCjwvZGl2Pg0KYCA6ICIifQ0KDQoke2Vycm9ycy5sZW5ndGggPiAwID8gYA0KPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBiYWNrZ3JvdW5kOiNmZmYzY2Q7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWxlZnQ6NXB4IHNvbGlkICNmZmMxMDc7Ij4NCjxiIHN0eWxlPSJjb2xvcjojODU2NDA0OyI+VmFsaWRhdGlvbiBBbGVydHM6PC9iPjxicj4NCiR7ZXJyb3JzLmpvaW4oJzxicj4nKX0NCjwvZGl2Pg0KYCA6ICIifQ0KDQo8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBtYXJnaW4tdG9wOjI1cHg7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLXRvcDogMTVweDsiPg0KPGJ1dHRvbiBpZD0iYXVkaXRfYmFjayIgc3R5bGU9InBhZGRpbmc6MTBweCAyMHB4OyBtYXJnaW4tcmlnaHQ6MTBweDsgY3Vyc29yOnBvaW50ZXI7IGJvcmRlci1yYWRpdXM6NXB4OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6IHdoaXRlOyI+R28gQmFjayAmIEVkaXQ8L2J1dHRvbj4NCjxidXR0b24gaWQ9ImF1ZGl0X2NvbmZpcm0iIHN0eWxlPSJwYWRkaW5nOjEwcHggMzBweDsgYmFja2dyb3VuZDojMjhhNzQ1OyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NXB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOiAxLjFlbTsiPkNPTkZJUk0gJiBTWU5DPC9idXR0b24+DQo8L2Rpdj4NCjwvZGl2PmA7DQoNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGl0X2JhY2snKS5vbmNsaWNrID0gKCkgPT4geyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpOyByZXNvbHZlKGZhbHNlKTsgfTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaXRfY29uZmlybScpLm9uY2xpY2sgPSAoKSA9PiB7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheSk7IHJlc29sdmUodHJ1ZSk7IH07DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8gRW5zdXJlIGl0IHJ1bnMgYWZ0ZXIgdGhlIHBhZ2UgaGFzIGZpbmlzaGVkIGFsbCBpdHMgaW50ZXJuYWwgZGF0YS1sb2FkaW5nDQogICAgICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRVc2VyICE9PSAndW5kZWZpbmVkJykgYXBwbHlVc2VyUGVybWlzc2lvbnMoY3VycmVudFVzZXIpOw0KICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgIH07DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQW5vbnkgUmVjZWlwdHMgQXV0b2ZpbGwgZnJvbSBrbm93biByZWNlaXB0IHRvIGFub255IC0gaW5wdXQgZnJvbSBNTVBUX0xJTktfQU5PTlkgQW5vbnlGaWxsLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkFub255RmlsbCgpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU1QVF9MSU5LX0FOT05ZKTsNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoIkxpbmsgdW5yZWFjaGFibGUiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBpbmdUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IG1hcHBpbmdUZXh0LnNwbGl0KCdcbicpLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlTWFkZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3RhcmdldFJOLCBzb3VyY2VSTl0gPSBsaW5lLnNwbGl0KCd8JykubWFwKHAgPT4gcC50cmltKCkpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVJvdyA9IEdMT0JBTF9EQl9MSU5FUy5maW5kKHIgPT4gci5zdGFydHNXaXRoKHNvdXJjZVJOICsgInwiKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4ID0gR0xPQkFMX0RCX0xJTkVTLmZpbmRJbmRleChyID0+IHIuc3RhcnRzV2l0aCh0YXJnZXRSTiArICJ8IikpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VSb3cgJiYgdGFyZ2V0SW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gc291cmNlUm93LnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IEdMT0JBTF9EQl9MSU5FU1t0YXJnZXRJbmRleF0uc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDEuIERJUkVDVCBSRVBMSUNBVElPTiAtLS0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMl0gPSBzWzJdOyAgLy8gTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFszXSA9IHNbM107ICAvLyBQaG9uZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdFs0XSA9IHNbNF07ICAvLyBBZGRyZXNzDQogICAgICAgICAgICAgICAgICAgICAgICB0WzVdID0gc1s1XTsgIC8vIEVtYWlsDQogICAgICAgICAgICAgICAgICAgICAgICB0WzZdID0gc1s2XTsgIC8vIFBBTg0KICAgICAgICAgICAgICAgICAgICAgICAgdFs3XSA9IHNbN107ICAvLyBTdGFyDQogICAgICAgICAgICAgICAgICAgICAgICB0WzhdID0gc1s4XTsgIC8vIEdvdGhyYW0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMTVdID0gc1sxNV07IC8vIFBpbiBDb2RlDQogICAgICAgICAgICAgICAgICAgICAgICB0WzE5XSA9IHNbMTldOyAvLyBDb3VudHJ5DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSAyLiBESVJFQ1QgQ09NTUVOVCBBUFBFTkQgLS0tDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBjaGVja3MsIG5vICJpZiIgYmxvY2tzLiBKdXN0IGFwcGVuZCB0byBpbmRleCAxNC4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGUgPSAiRGV0YWlscyBJbXBvcnRlZCBmcm9tICIgKyBzb3VyY2VSTjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZENvbW1lbnQgPSAodFsxNF0gfHwgIiIpLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBvbGQgY29tbWVudCwgYWRkIHBpcGU7IG90aGVyd2lzZSBqdXN0IHRoZSBub3RlLg0KICAgICAgICAgICAgICAgICAgICAgICAgdFsxNF0gPSBvbGRDb21tZW50ID8gKG9sZENvbW1lbnQgKyAiIDogIiArIG5vdGUpIDogbm90ZTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIDMuIFJFLUpPSU4gLS0tDQogICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbdGFyZ2V0SW5kZXhdID0gdC5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VNYWRlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VNYWRlKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFVVEhFTlRJQ0FUSU9ODQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogdG9rZW5QYXJhbXMNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBVUExPQUQNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdG9rZW5EYXRhLmFjY2Vzc190b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEdMT0JBTF9EQl9MSU5FUy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICh1cGxvYWRSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJBbm9ueUZpbGw6IERvbmUuICIgKyB1cGRhdGVDb3VudCArICIgcmVjb3JkcyB1cGRhdGVkLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQW5vbnlGaWxsIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgLy9BRE1JTiBQQU5FTA0KICAgICAgICAvLyBCYWNrdXBzIENvbXBsZXRlIEFwcCBGb2xkZXIgd2l0aCBhbGwgZmlsZXMgYW5kIHB1dHMgaW4gQmFja3VwIEZvbGRlciB3aXRoIFRpbWVzdGFtcA0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuTU1QVEJhY2t1cCgpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBHZW5lcmF0ZSBUaW1lc3RhbXAgZm9yIEZvbGRlciBOYW1lDQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBub3cudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdICsgIl8iICsNCiAgICAgICAgICAgICAgICAgICAgbm93LmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgIi0iICsNCiAgICAgICAgICAgICAgICAgICAgbm93LmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREaXIgPSBNTVBUX0JBQ0tVUF9ESVIgKyB0aW1lc3RhbXA7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBHZXQgQWNjZXNzIFRva2VuIHVzaW5nIHlvdXIgY3JlZGVudGlhbHMNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdG9rZW5SZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgYm9keTogdG9rZW5QYXJhbXMNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgbGV0IGNvcHlFbnRyaWVzID0gW107DQoNCiAgICAgICAgICAgICAgICAvLyAzLiBTVEVQIEE6IENvcHkgQ29yZSBJbmRpdmlkdWFsIEZpbGVzIChSZWFkLW9ubHkgbGlua3MpDQogICAgICAgICAgICAgICAgY29uc3QgY29yZUZpbGVzID0gWw0KICAgICAgICAgICAgICAgICAgICBNTVBUX0ZJTEVfREIsIE1NUFRfRklMRV9VU0VSUywgTU1QVF9GSUxFX0FQUFJPVkVELA0KICAgICAgICAgICAgICAgICAgICBNTVBUX0ZJTEVfTE9HTywgTU1QVF9GSUxFX0RST1BET1dOUywgTU1QVF9GSUxFX0NBU0gsDQogICAgICAgICAgICAgICAgICAgIE1NUFRfRklMRV9CQU5LLCBFWEVNUFRfRklMRSwgTU1QVF9GSUxFX1NFUQ0KICAgICAgICAgICAgICAgIF07DQoNCiAgICAgICAgICAgICAgICBjb3JlRmlsZXMuZm9yRWFjaChwYXRoID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29weUVudHJpZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICBmcm9tX3BhdGg6IHBhdGgsDQogICAgICAgICAgICAgICAgICAgICAgICB0b19wYXRoOiB0YXJnZXREaXIgKyAiLyIgKyBwYXRoLnNwbGl0KCcvJykucG9wKCkNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBTVEVQIEI6IER5bmFtaWMgRm9sZGVyIENvcHkgKEV4Y2x1ZGluZyBQYW5jaGFuZykNCiAgICAgICAgICAgICAgICAvLyBTY2FucyB0aGUgcm9vdCBvZiB5b3VyIEFwcCBmb2xkZXINCiAgICAgICAgICAgICAgICBjb25zdCBsaXN0UmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvbGlzdF9mb2xkZXInLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4sICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAiIiB9KQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKGxpc3RSZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdERhdGEgPSBhd2FpdCBsaXN0UmVzLmpzb24oKTsNCiAgICAgICAgICAgICAgICAgICAgbGlzdERhdGEuZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVMb3dlciA9IGVudHJ5Lm5hbWUudG9Mb3dlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSBhbGwgZm9sZGVycyBFWENFUFQgJ3BhbmNoYW5nJw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5WyIudGFnIl0gPT09ICJmb2xkZXIiICYmIG5hbWVMb3dlciAhPT0gInBhbmNoYW5nIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlFbnRyaWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tX3BhdGg6IGVudHJ5LnBhdGhfbG93ZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvX3BhdGg6IHRhcmdldERpciArICIvIiArIGVudHJ5Lm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gY2F0Y2ggYW55IGxvb3NlIGZpbGVzIGluIHJvb3QgKGxpa2UgdmlkZW9zLnR4dCkgbm90IGFscmVhZHkgaW4gY29yZUZpbGVzDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlbnRyeVsiLnRhZyJdID09PSAiZmlsZSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FscmVhZHlMaXN0ZWQgPSBjb3JlRmlsZXMuc29tZShjZiA9PiBjZi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5hbWVMb3dlcikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNBbHJlYWR5TGlzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlFbnRyaWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9wYXRoOiBlbnRyeS5wYXRoX2xvd2VyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9fcGF0aDogdGFyZ2V0RGlyICsgIi8iICsgZW50cnkubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgQmF0Y2ggQ29weQ0KICAgICAgICAgICAgICAgIGlmIChjb3B5RW50cmllcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS8yL2ZpbGVzL2NvcHlfYmF0Y2hfdjInLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbiwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlbnRyaWVzOiBjb3B5RW50cmllcyB9KQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA1LiBTVEVQIEM6IFByb2Nlc3MgRXh0ZXJuYWwgT25saW5lIExpbmtzIChEb3dubG9hZC9VcGxvYWQpDQogICAgICAgICAgICAgICAgY29uc3Qgb25saW5lTGlua3MgPSBbDQogICAgICAgICAgICAgICAgICAgIHsgdXJsOiBNTVBUX1VSTF9FWFBFTlNFUywgbmFtZTogIkV4cGVuc2VzLnhsc3giIH0sDQogICAgICAgICAgICAgICAgICAgIHsgdXJsOiBCQU5LX1NUQVRFTUVOVF9VUkwsIG5hbWU6ICJCYW5rU3RhdGVtZW50LnhscyIgfSwNCiAgICAgICAgICAgICAgICAgICAgeyB1cmw6IE1NUFRfTElOS19BTk9OWSwgbmFtZTogIkFub255RmlsbC50eHQiIH0NCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG9ubGluZUxpbmtzKSB7DQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlUmVzID0gYXdhaXQgZmV0Y2goaXRlbS51cmwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IGZpbGVSZXMuYmxvYigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWNjZXNzVG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHRhcmdldERpciArICIvIiArIGl0ZW0ubmFtZSwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogYmxvYg0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcigiTGluayBiYWNrdXAgZmFpbGVkOiAiICsgaXRlbS5uYW1lKTsgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGFsZXJ0KCJCYWNrdXAgU3VjY2VzcyFcbkFsbCBmb2xkZXJzIChleGNlcHQgUGFuY2hhbmcpIHNhdmVkIHRvOiAiICsgdGFyZ2V0RGlyKTsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIkJhY2t1cCBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFRleHQgRG93bmxvYWQgRnVuY3Rpb24gZm9yIHRoZSBhZG1pbiBwYW5lbCBmdW5jdGlvbnMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkVHh0KHRleHQsIGZpbGVuYW1lKSB7DQogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3RleHRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsNCiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOw0KICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsNCiAgICAgICAgICAgIGEuY2xpY2soKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7DQogICAgICAgIH0NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ2l0eSBOYW1lIEVycm9yIGFuZCBTdWdnZXN0aW9ucyBmb3IgQ29ycmVjdGlvbnMgZG93bmxvYWRzIDYgdGV4dCBmaWxlcw0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQ2l0eUV4dHJhY3Rpb24obW9kZSA9ICdub3JtYWwnKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKE1NUFRfREJfUkFXX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgcmF3Q29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHJhd0NvbnRlbnQuc3BsaXQoL1xyP1xufFxyLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbGlzdDFfQWxsID0gW107DQogICAgICAgICAgICAgICAgbGV0IGxpc3QzX01hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGxldCBsaXN0Nl9NYXAgPSB7fTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlZkNpdGllcyA9IFsiTXVtYmFpIiwgIkRlbGhpIiwgIkJlbmdhbHVydSIsICJCYW5nYWxvcmUiLCAiSHlkZXJhYmFkIiwgIkFobWVkYWJhZCIsICJDaGVubmFpIiwgIktvbGthdGEiLCAiU3VyYXQiLCAiUHVuZSIsICJKYWlwdXIiLCAiTHVja25vdyIsICJLYW5wdXIiLCAiTmFncHVyIiwgIkluZG9yZSIsICJUaGFuZSIsICJCaG9wYWwiLCAiVmlzYWtoYXBhdG5hbSIsICJQYXRuYSIsICJWYWRvZGFyYSIsICJHaGF6aWFiYWQiLCAiTHVkaGlhbmEiLCAiQWdyYSIsICJOYXNoaWsiLCAiRmFyaWRhYmFkIiwgIk1lZXJ1dCIsICJSYWprb3QiLCAiVmFyYW5hc2kiLCAiU3JpbmFnYXIiLCAiQXVyYW5nYWJhZCIsICJBbXJpdHNhciIsICJSYW5jaGkiLCAiR3dhbGlvciIsICJKYWJhbHB1ciIsICJDb2ltYmF0b3JlIiwgIlZpamF5YXdhZGEiLCAiTWFkdXJhaSIsICJSYWlwdXIiLCAiS290YSIsICJDaGFuZGlnYXJoIiwgIkd1d2FoYXRpIiwgIlNvbGFwdXIiLCAiS2FuY2hpcHVyYW0iLCAiTXlzb3JlIiwgIlRpcnVjaGlyYXBwYWxsaSIsICJUcmljaHkiLCAiU2FsZW0iLCAiVGlydXBwdXIiLCAiU3JpcmFuZ2FtIiwgIlNlY3VuZGVyYWJhZCIsICJUaGlydXZlZGFnYW0iLCAiQ2FsaWZvcm5pYSIsICJUYW1pbG5hZHUiLCAiQmV0aGxlaGVtIiwgIkRvaGEiXTsNCiAgICAgICAgICAgICAgICBjb25zdCByZWZDb3VudHJpZXMgPSBbIlVBRSIsICJVSyIsICJVU0EiLCAiU2luZ2Fwb3JlIiwgIk1hbGF5c2lhIiwgIkF1c3RyYWxpYSIsICJDYW5hZGEiLCAiR2VybWFueSIsICJGcmFuY2UiLCAiSmFwYW4iLCAiRHViYWkiLCAiUWF0YXIiLCAiS3V3YWl0IiwgIk9tYW4iLCAiQmFocmFpbiIsICJTYXVkaSBBcmFiaWEiLCAiVW5pdGVkIEtpbmdkb20iLCAiVW5pdGVkIEFyYWIgRW1pcmF0ZXMiLCAiVW5pdGVkIFN0YXRlcyIsICJTd2l0emVybGFuZCIsICJOZXRoZXJsYW5kcyJdOw0KDQogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U2ltaWxhcml0eShzMSwgczIpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxvbmdlciA9IHMxLnRvTG93ZXJDYXNlKCksIHNob3J0ZXIgPSBzMi50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoczEubGVuZ3RoIDwgczIubGVuZ3RoKSB7IGxvbmdlciA9IHMyLnRvTG93ZXJDYXNlKCk7IHNob3J0ZXIgPSBzMS50b0xvd2VyQ2FzZSgpOyB9DQogICAgICAgICAgICAgICAgICAgIGxldCBsb25nZXJMZW5ndGggPSBsb25nZXIubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICBpZiAobG9uZ2VyTGVuZ3RoID09IDApIHJldHVybiAxLjA7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXREaXN0YW5jZSA9IChzMSwgczIpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb3N0cyA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gczEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdFZhbHVlID0gaTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBzMi5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSBjb3N0c1tqXSA9IGo7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGogPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBjb3N0c1tqIC0gMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoczEuY2hhckF0KGkgLSAxKSAhPSBzMi5jaGFyQXQoaiAtIDEpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gTWF0aC5taW4oTWF0aC5taW4obmV3VmFsdWUsIGxhc3RWYWx1ZSksIGNvc3RzW2pdKSArIDE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3N0c1tqIC0gMV0gPSBsYXN0VmFsdWU7IGxhc3RWYWx1ZSA9IG5ld1ZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkgY29zdHNbczIubGVuZ3RoXSA9IGxhc3RWYWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3N0c1tzMi5sZW5ndGhdOw0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGxvbmdlckxlbmd0aCAtIGVkaXREaXN0YW5jZShzaG9ydGVyLCBsb25nZXIpKSAvIHBhcnNlRmxvYXQobG9uZ2VyTGVuZ3RoKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBzdGFydExpbmUgPSBsaW5lc1swXS5pbmNsdWRlcygnfCcpICYmIGxpbmVzWzBdLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInJlY2VpcHQiKSA/IDEgOiAwOw0KDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0TGluZTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbaV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUgJiYgaSA9PT0gbGluZXMubGVuZ3RoIC0gMSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IGxpbmUuc3BsaXQoJ3wnKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRzWzEzXSA9PT0gIllFUyIpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpcHRObyA9IGZpZWxkc1swXSB8fCAiVU5LTk9XTiI7DQogICAgICAgICAgICAgICAgICAgIGxldCBjaXR5ID0gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkc1s0XSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgdGlsZGVzIHRvIHNwYWNlIGNvbnZlcnNpb24NCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbkFkZHJlc3MgPSBmaWVsZHNbNF0ucmVwbGFjZSgvfi9nLCAiICIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3b3JkcyA9IGNsZWFuQWRkcmVzcy5zcGxpdCgvXHMrLyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgcmF3IGxhc3Qgd29yZCAod2hpY2ggbWlnaHQgY29udGFpbiBjb2xvbnMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eSA9IHdvcmRzW3dvcmRzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgbGlzdDFfQWxsLnB1c2goYCR7Y2l0eX0sICR7cmVjZWlwdE5vfWApOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjaXR5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZENvdW50cnkgPSByZWZDb3VudHJpZXMuZmluZChjID0+IGMudG9Mb3dlckNhc2UoKSA9PT0gY2l0eS50b0xvd2VyQ2FzZSgpIHx8IGdldFNpbWlsYXJpdHkoY2l0eSwgYykgPiAwLjg1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkQ291bnRyeSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlzdDZfTWFwW21hdGNoZWRDb3VudHJ5XSkgbGlzdDZfTWFwW21hdGNoZWRDb3VudHJ5XSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q2X01hcFttYXRjaGVkQ291bnRyeV0ucHVzaChyZWNlaXB0Tm8pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3QzX01hcFtjaXR5XSkgbGlzdDNfTWFwW2NpdHldID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDNfTWFwW2NpdHldLnB1c2gocmVjZWlwdE5vKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGxpc3QyX1VuaXF1ZSA9IE9iamVjdC5rZXlzKGxpc3QzX01hcCkuc29ydCgpOw0KICAgICAgICAgICAgICAgIGxldCBsaXN0M19TdHJpbmdzID0gbGlzdDJfVW5pcXVlLm1hcChjID0+IGAke2N9LCAke2xpc3QzX01hcFtjXS5qb2luKCcsICcpfWApOw0KDQogICAgICAgICAgICAgICAgbGV0IGxpc3Q0X0FsbFN1Z2dlc3Rpb25zID0gW107DQogICAgICAgICAgICAgICAgbGV0IGxpc3Q1X0FjdGlvbnNPbmx5ID0gW107DQoNCiAgICAgICAgICAgICAgICBsaXN0Ml9VbmlxdWUuZm9yRWFjaChvcmlnaW5hbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0aW9uID0gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVyBDT0xPTiBMT0dJQyAtLS0NCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlICJvcmlnaW5hbCIgaGFzIGEgY29sb24sIHdlIHN1Z2dlc3QgcmVwbGFjaW5nIGNvbG9uIHdpdGggY29tbWErc3BhY2UNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsLmluY2x1ZGVzKCc6JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24gPSBvcmlnaW5hbC5zcGxpdCgnOicpLm1hcChwYXJ0ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYXBpdGFsaXplIGVhY2ggcGFydCBmb3IgYSBjbGVhbiBzdWdnZXN0aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwYXJ0LnNsaWNlKDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkuam9pbignLCAnKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YW5kYXJkIFNpbWlsYXJpdHkgTG9naWMgZm9yIHNpbmdsZSB3b3Jkcw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJlc3RTY29yZSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCByZWYgb2YgcmVmQ2l0aWVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gZ2V0U2ltaWxhcml0eShvcmlnaW5hbCwgcmVmKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiAwLjc1ICYmIHNjb3JlID4gYmVzdFNjb3JlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uID0gcmVmOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWdnZXN0aW9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkUmVmID0gWy4uLnJlZkNpdGllc10uc29ydCgoYSwgYikgPT4gYi5sZW5ndGggLSBhLmxlbmd0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcmVmIG9mIHNvcnRlZFJlZikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKGAoLis/KSgke3JlZn0pJGAsICdpJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KG9yaWdpbmFsKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gb3JpZ2luYWwubWF0Y2gocmVnZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZWZpeCA9IG1hdGNoWzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbWF0Y2hbMV0uc2xpY2UoMSkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtekEtWl0vZywgIiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbiA9IGAke3ByZWZpeH0sICR7cmVmfWA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGxldCBpc0p1c3RDYXNpbmcgPSBzdWdnZXN0aW9uLnRvTG93ZXJDYXNlKCkgPT09IG9yaWdpbmFsLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbE91dCA9IChpc0p1c3RDYXNpbmcgfHwgIXN1Z2dlc3Rpb24gfHwgb3JpZ2luYWwubGVuZ3RoIDwgNCkgPyAiIiA6IHN1Z2dlc3Rpb247DQoNCiAgICAgICAgICAgICAgICAgICAgbGlzdDRfQWxsU3VnZ2VzdGlvbnMucHVzaChvcmlnaW5hbC5wYWRFbmQoMzAsICcgJykgKyAiIHwgIiArIGZpbmFsT3V0KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0ICE9PSAiIikgbGlzdDVfQWN0aW9uc09ubHkucHVzaChvcmlnaW5hbC5wYWRFbmQoMzAsICcgJykgKyAiIHwgIiArIGZpbmFsT3V0KTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGxldCBsaXN0Nl9TdHJpbmdzID0gT2JqZWN0LmtleXMobGlzdDZfTWFwKS5zb3J0KCkubWFwKGNvdW50cnkgPT4gYCR7Y291bnRyeX0sICR7bGlzdDZfTWFwW2NvdW50cnldLmpvaW4oJywgJyl9YCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0NV9BY3Rpb25zT25seSkpIHsNCiAgICAgICAgICAgICAgICAgICAgd2luZG93LkdMT0JBTF9DSVRZX0FVRElUX0RBVEEgPSBsaXN0NV9BY3Rpb25zT25seS5qb2luKCdcbicpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5HTE9CQUxfQ0lUWV9BVURJVF9EQVRBID0gbGlzdDVfQWN0aW9uc09ubHk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdhdWRpdCcpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9ICJPUklHSU5BTCBOQU1FIi5wYWRFbmQoMzAsICcgJykgKyAiIHwgU1VHR0VTVEVEIENPUlJFQ1RJT05cbiIgKyAiLSIucmVwZWF0KDYwKSArICJcbiI7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQobGlzdDFfQWxsLmpvaW4oJ1xuJyksICIxX0NpdGllc19SZWNvcmRzLnR4dCIpOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZG93bmxvYWRUeHQobGlzdDJfVW5pcXVlLmpvaW4oJ1xuJyksICIyX0NpdGllc19VbmlxdWVfTGlzdC50eHQiKSwgNjAwKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRvd25sb2FkVHh0KGxpc3QzX1N0cmluZ3Muam9pbignXG4nKSwgIjNfQ2l0aWVzX0NvcnJlY3Rpb25fTWFwLnR4dCIpLCAxMjAwKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRvd25sb2FkVHh0KGhlYWRlciArIGxpc3Q0X0FsbFN1Z2dlc3Rpb25zLmpvaW4oJ1xuJyksICI0X0NpdGllc19GdWxsX0F1ZGl0LnR4dCIpLCAxODAwKTsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGRvd25sb2FkVHh0KGhlYWRlciArIGxpc3Q1X0FjdGlvbnNPbmx5LmpvaW4oJ1xuJyksICI1X0NpdGllc19BY3Rpb25zX09ubHkudHh0IiksIDI0MDApOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChsaXN0Nl9TdHJpbmdzLmpvaW4oJ1xuJyksICI2X0NvdW50cmllc19NYXAudHh0Iik7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJBdWRpdCBDb21wbGV0ZSFcblxuQ29sb25zIGRldGVjdGVkOiBTdWdnZXN0aW9ucyBub3cgY29ycmVjdGx5IHVzZSBjb21tYXMuIik7DQogICAgICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICAgICAgfSwgMzAwMCk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ291bnRyeSBjb3JyZWN0aW9uIGluIHRoZSBEQiBiYXNlZCBvbiBpbnB1dCBDSVRZX0NPUlJFQ1RJT05TX1VSTCBDaXR5Q29ycmVjdGlvbnMudHh0IGluIFNldHRpbmdzIEZvbGRlcg0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQ2l0eUNvcnJlY3Rpb25BcHBseShpc0F1ZGl0ID0gZmFsc2UpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIC8vIDEuIEZldGNoIHlvdXIgYXBwcm92ZWQgY29ycmVjdGlvbnMgZmlsZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJSZXMgPSBhd2FpdCBmZXRjaChDSVRZX0NPUlJFQ1RJT05TX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclRleHQgPSBhd2FpdCBjb3JyUmVzLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIC8vIFBhcnNlIGludG8gYSBNYXAgeyAic29jaWV0eTpBdW5kaDpQdW5lIjogIlNvY2lldHksIEF1bmRoLCBQdW5lIiB9DQogICAgICAgICAgICAgICAgY29uc3QgY29ycmVjdGlvbk1hcCA9IHt9Ow0KICAgICAgICAgICAgICAgIGNvcnJUZXh0LnNwbGl0KC9ccj9cbi8pLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCd8JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtqdW5rLCBjb3JyZWN0XSA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAocyA9PiBzLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoanVuaykgY29ycmVjdGlvbk1hcFtqdW5rXSA9IGNvcnJlY3Q7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZldGNoIHRoZSBsaXZlIGRhdGFiYXNlICh1c2luZyB0aGUgQXV0aGVudGljYXRlZCBsb2dpYykNCiAgICAgICAgICAgICAgICBjb25zdCBkYlJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGxldCBkYkxpbmVzID0gZGJDb250ZW50LnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICAgICAgbGV0IGNoYW5nZUNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFByb2Nlc3MgZXZlcnkgbGluZSBpbiB0aGUgREINCiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbmVkTGluZXMgPSBkYkxpbmVzLm1hcChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lLnRyaW0oKSkgcmV0dXJuIGxpbmU7DQogICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzcyBpcyBpbmRleCA0DQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRyZXNzID0gZmllbGRzWzRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYWRkcmVzcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BsaXQgYWRkcmVzcyBieSBzcGFjZSBvciB0aWxkZSB0byBpc29sYXRlIHRoZSBsYXN0ICJjaHVuayINCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3b3JkcyA9IGFkZHJlc3MudHJpbSgpLnNwbGl0KC9bXHN+XSsvKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFRIRSBGSVg6IFByZXNlcnZlIGNvbG9ucyBkdXJpbmcgbG9va3VwIC0tLQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugbm8gbG9uZ2VyIHN0cmlwIGNvbG9ucyBoZXJlLCBzbyBvcmlnaW5hbENpdHkgPSAic29jaWV0eTpBdW5kaDpQdW5lIg0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yaWdpbmFsQ2l0eSA9IHdvcmRzW3dvcmRzLmxlbmd0aCAtIDFdOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHJhdyBjaHVuayAod2l0aCBjb2xvbnMpIGlzIGluIG91ciBjb3JyZWN0aW9uIGxpc3QNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0aW9uTWFwLmhhc093blByb3BlcnR5KG9yaWdpbmFsQ2l0eSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZW1lbnQgPSBjb3JyZWN0aW9uTWFwW29yaWdpbmFsQ2l0eV07DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIZWxwZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyBmb3IgUmVnZXgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlc2NhcGVkSnVuayA9IG9yaWdpbmFsQ2l0eS5yZXBsYWNlKC9bLiorP14ke30oKXxbXF1cXF0vZywgJ1xcJCYnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gIiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RyaXAgdGhlIGp1bmsgd29yZCBmcm9tIHRoZSBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzRdID0gYWRkcmVzcy5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlZEp1bmsgKyAiJCIpLCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3YXAgdGhlIGp1bmsgKHdpdGggY29sb25zKSB3aXRoIHRoZSBjb3JyZWN0IHN0cmluZyAod2l0aCBjb21tYXMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s0XSA9IGFkZHJlc3MucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZWRKdW5rICsgIiQiKSwgcmVwbGFjZW1lbnQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy8gNC4gSWYgY2hhbmdlcyBvY2N1cnJlZCwgdXBsb2FkIGJhY2sgdG8gRHJvcGJveA0KICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VDb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGNsZWFuZWRMaW5lcy5qb2luKCdcbicpOw0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogbmV3Q29udGVudA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoYFN1Y2Nlc3MhIEFwcGxpZWQgJHtjaGFuZ2VDb3VudH0gY29ycmVjdGlvbnMgdG8gdGhlIGRhdGFiYXNlLlxuXG5Db2xvbnMgd2VyZSBjb3JyZWN0bHkgaWRlbnRpZmllZCBhbmQgcmVwbGFjZWQuYCk7DQogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBtYXRjaGluZyBlbnRyaWVzIChpbmNsdWRpbmcgdGhvc2Ugd2l0aCBjb2xvbnMpIGZvdW5kIHRvIGNvcnJlY3QuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQ29ycmVjdGlvbiBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENvdW50cnkgY29ycmVjdGlvbiBpbiB0aGUgREIgYmFzZWQgb24gaW5wdXQgQ291bnRyeUNvcnJlY3Rpb25zLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkNvdW50cnlGaWVsZENvcnJlY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgY29uc3QgQ09VTlRSWV9DT1JSRUNUSU9OU19VUkwgPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9nbnIxbzJkNHJjYmRiejc1Znhma2IvQ291bnRyeUNvcnJlY3Rpb25zLnR4dD9ybGtleT03NGZsdHJ4eW04ZzBnODhxZWllamoxYnd6JmRsPTEiOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJSZXMgPSBhd2FpdCBmZXRjaChDT1VOVFJZX0NPUlJFQ1RJT05TX1VSTCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yclRleHQgPSBhd2FpdCBjb3JyUmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gY29yclRleHQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKGwgPT4gbC50cmltKCkgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGxldCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbW92ZUNvdW50ID0gMDsNCiAgICAgICAgICAgICAgICBsZXQgZ2xvYmFsVXBwZXJDb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gU1RFUCAxOiBTdXJnaWNhbCBNb3ZlL0NsZWFuIC0tLQ0KICAgICAgICAgICAgICAgIGluc3RydWN0aW9uTGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDb3VudHJ5ID0gcGFydHNbMF0udG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SURzID0gcGFydHMuc2xpY2UoMSk7DQoNCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SURzLmZvckVhY2goaWQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoQW5jaG9yID0gaWQudG9VcHBlckNhc2UoKSArICJ8IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGJSb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRiUm93c1tpXS50cmltKCkudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKHNlYXJjaEFuY2hvcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkcyA9IGRiUm93c1tpXS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZmllbGRzLmxlbmd0aCA8IDIwKSBmaWVsZHMucHVzaCgiIik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHIgPSBmaWVsZHNbNF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUmVnZXggPSBuZXcgUmVnRXhwKHRhcmdldENvdW50cnksICdnaScpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGVhblJlZ2V4LnRlc3QoYWRkcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s0XSA9IGFkZHIucmVwbGFjZShjbGVhblJlZ2V4LCAiIikucmVwbGFjZSgvW34sOiBdKyQvLCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzE5XSA9IHRhcmdldENvdW50cnk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYlJvd3NbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBTVEVQIDI6IFRoZSBEZWVwLUNsZWFuIEdsb2JhbCBTd2VlcCAtLS0NCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRiUm93cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWRiUm93c1tpXS50cmltKCkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gZGJSb3dzW2ldLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgMjAgZmllbGRzIGZvciBldmVyeSByb3cNCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGZpZWxkcy5sZW5ndGggPCAyMCkgZmllbGRzLnB1c2goIiIpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBGSVg6IFN0cmlwIEFMTCBoaWRkZW4gY2hhcmFjdGVycyB1c2luZyByZWdleCBccysNCiAgICAgICAgICAgICAgICAgICAgbGV0IHJhd1ZhbHVlID0gZmllbGRzWzE5XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuVmFsdWUgPSByYXdWYWx1ZS5yZXBsYWNlKC9bXHJcblx0XSsvZywgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHVwcGVyVmFsdWUgPSBjbGVhblZhbHVlLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZpZWxkIGlzbid0IGVtcHR5IGFuZCBkb2Vzbid0IG1hdGNoIHRoZSBjbGVhbiBVcHBlcmNhc2UgdmVyc2lvbg0KICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5WYWx1ZSAhPT0gIiIgJiYgY2xlYW5WYWx1ZSAhPT0gdXBwZXJWYWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWzE5XSA9IHVwcGVyVmFsdWU7DQogICAgICAgICAgICAgICAgICAgICAgICBkYlJvd3NbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVXBwZXJDb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gLS0tIEZJTkFMIFNBVkUgLS0tDQogICAgICAgICAgICAgICAgaWYgKG1vdmVDb3VudCA+IDAgfHwgZ2xvYmFsVXBwZXJDb3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGRiUm93cy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBhbGVydChgREFUQUJBU0UgU1lOQ0VEXG5cbjEuIEFkZHJlc3MgQ2xlYW51cHM6ICR7bW92ZUNvdW50fVxuMi4gSGlkZGVuLUNoYXIgJiBVcHBlcmNhc2UgRml4ZXM6ICR7Z2xvYmFsVXBwZXJDb3VudH1gKTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlN1Y2Nlc3M6IERhdGFiYXNlIGlzIDEwMCUgc3RhbmRhcmRpemVkLiBObyBtaXhlZC1jYXNlIG9yIGhpZGRlbiBjaGFyYWN0ZXJzIHJlbWFpbi4iKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENoZWNrcyBOYW1lcyBvZiBhbGwgZG9ub3JzIGFuZCBwcmVwYXJlcyBsaXN0IGFuZCBzdWdnZXN0aW9ucyBmb3IgY29ycmVjdGlvbnMuIERvd25sb2FkcyA0IHRleHQgZmlsZXMuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBydW5Eb25vck5hbWVDaGVjayhtb2RlID0gJ25vcm1hbCcpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIocm93ID0+IHJvdy50cmltKCkgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgIGxldCBhbGxOYW1lcyA9IGRiUm93cy5tYXAocm93ID0+IChyb3cuc3BsaXQoJ3wnKVsyXSB8fCAiIikudHJpbSgpKTsNCiAgICAgICAgICAgICAgICBsZXQgdW5pcXVlTmFtZXMgPSBbLi4ubmV3IFNldChhbGxOYW1lcyldLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXRJbmRpYW5OYW1lID0gKG5hbWUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYW1lKSByZXR1cm4gIiI7DQogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJygnKSkgcmV0dXJuIG5hbWU7IC8vIFNraXAgb3Jncw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLmluY2x1ZGVzKCcmJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lLnNwbGl0KCcmJykubWFwKG4gPT4gZm9ybWF0SW5kaWFuTmFtZShuLnRyaW0oKSkpLmpvaW4oJyAmICcpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnRzID0gbmFtZS5zcGxpdCgvXHMrLykuZmlsdGVyKHAgPT4gcC5sZW5ndGggPiAwKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGluaXRpYWxzID0gW107DQogICAgICAgICAgICAgICAgICAgIGxldCBtYWluTmFtZXMgPSBbXTsNCg0KICAgICAgICAgICAgICAgICAgICBwYXJ0cy5mb3JFYWNoKHBhcnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbHM6IDEtMyBjaGFycywgbm8gZG91YmxlIHZvd2Vscw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQubGVuZ3RoIDw9IDMgJiYgIS9bYWVpb3V5XXsyLH0vaS50ZXN0KHBhcnQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHMucHVzaChwYXJ0LnRvVXBwZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluTmFtZXMucHVzaChwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5tYWluTmFtZXMsIC4uLmluaXRpYWxzXS5qb2luKCcgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAvLyBBcnJheXMgZm9yIEZpbGUgMyBhbmQgRmlsZSA0DQogICAgICAgICAgICAgICAgbGV0IGFsbENvbXBhcmlzb25zID0gW107DQogICAgICAgICAgICAgICAgbGV0IGNvcnJlY3Rpb25zT25seSA9IFtdOw0KDQogICAgICAgICAgICAgICAgdW5pcXVlTmFtZXMuZm9yRWFjaChvcmlnaW5hbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0ZWQgPSBmb3JtYXRJbmRpYW5OYW1lKG9yaWdpbmFsKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBgJHtvcmlnaW5hbC5wYWRFbmQoNDApfSB8ICR7c3VnZ2VzdGVkfWA7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRmlsZSAzIGdldHMgZXZlcnl0aGluZw0KICAgICAgICAgICAgICAgICAgICBhbGxDb21wYXJpc29ucy5wdXNoKGxpbmUpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEZpbGUgNCBnZXRzIG9ubHkgdGhlIG9uZXMgdGhhdCBjaGFuZ2VkDQogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbCAhPT0gc3VnZ2VzdGVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uc09ubHkucHVzaChsaW5lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZG93bmxvYWRUeHQgPSAoY29udGVudCwgZmlsZU5hbWUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAvLyBUSEUgQlJJREdFOiBDb252ZXJ0IGFycmF5IHRvIHN0cmluZyBhbmQgc3RvcmUgZ2xvYmFsbHkNCiAgICAgICAgICAgICAgICB3aW5kb3cuR0xPQkFMX0RPTk9SX05BTUVfREFUQSA9IEFycmF5LmlzQXJyYXkoY29ycmVjdGlvbnNPbmx5KSA/IGNvcnJlY3Rpb25zT25seS5qb2luKCdcbicpIDogY29ycmVjdGlvbnNPbmx5Ow0KDQogICAgICAgICAgICAgICAgLy8gVEhFIEVYSVQ6IEJ5cGFzcyBkb3dubG9hZHMgaWYgaW4gYXVkaXQgbW9kZQ0KICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAnYXVkaXQnKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEb25vciBOYW1lIGRhdGEgY2FwdHVyZWQuIFNraXBwaW5nIEZpbGUgNCBkb3dubG9hZC4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFNlcXVlbmNlIG9mIDQgZmlsZXMNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChhbGxOYW1lcy5zb3J0KCkuam9pbignXG4nKSwgIjEuIENHX0FsbF9Eb25vcl9OYW1lcy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dCh1bmlxdWVOYW1lcy5qb2luKCdcbicpLCAiMi4gQ0dfVW5pcXVlX0Rvbm9yX05hbWVzLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGFsbENvbXBhcmlzb25zLmpvaW4oJ1xuJyksICIzLiBDR19OYW1lX0Zvcm1hdF9TdWdnZXN0aW9ucy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dChjb3JyZWN0aW9uc09ubHkuam9pbignXG4nKSwgIjQuIENHX0NvcnJlY3Rpb25zX09ubHkudHh0Iik7DQoNCiAgICAgICAgICAgICAgICBhbGVydChgQXVkaXQgQ29tcGxldGUhXG5cblVuaXF1ZSBOYW1lczogJHt1bmlxdWVOYW1lcy5sZW5ndGh9XG5SZWNvcmRzIE5lZWRpbmcgQ29ycmVjdGlvbjogJHtjb3JyZWN0aW9uc09ubHkubGVuZ3RofVxuXG5DaGVjayBGaWxlIDQgZm9yIHRoZSBhY3Rpb24gaXRlbXMuYCk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIE5hbWUgY29ycmVjdGlvbiBpbiB0aGUgREIgYmFzZWQgb24gaW5wdXQgTkFNRV9DT1JSRUNUSU9OU19VUkwgTmFtZUNvcnJlY3Rpb25zLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkRvbm9yTmFtZUNvcnJlY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCB0aGUgQ29ycmVjdGlvbiBNYXANCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyUmVzID0gYXdhaXQgZmV0Y2goTkFNRV9DT1JSRUNUSU9OU19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJUZXh0ID0gYXdhaXQgY29yclJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgY29yckxpbmVzID0gY29yclRleHQuc3BsaXQoL1xyP1xuLykuZmlsdGVyKGxpbmUgPT4gbGluZS5pbmNsdWRlcygnfCcpKTsNCg0KICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGEgbG9va3VwIG9iamVjdDogeyAiT3JpZ2luYWwgTmFtZSI6ICJTdWdnZXN0ZWQgTmFtZSIgfQ0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJlY3Rpb25NYXAgPSB7fTsNCiAgICAgICAgICAgICAgICBjb3JyTGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgW29yaWdpbmFsLCBzdWdnZXN0ZWRdID0gbGluZS5zcGxpdCgnfCcpLm1hcChpdGVtID0+IGl0ZW0udHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsICYmIHN1Z2dlc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGlvbk1hcFtvcmlnaW5hbF0gPSBzdWdnZXN0ZWQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIDIuIEZldGNoIHRoZSBEYXRhYmFzZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGxldCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgY29ycmVjdGlvbkNvdW50ID0gMDsNCg0KICAgICAgICAgICAgICAgIC8vIDMuIFN3ZWVwIGFuZCBSZXBsYWNlDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYlJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYlJvd3NbaV0udHJpbSgpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gZGJSb3dzW2ldLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50TmFtZSA9IChmaWVsZHNbMl0gfHwgIiIpLnRyaW0oKTsgLy8gTmFtZSBpcyBGaWVsZCAyDQoNCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5hbWUgZXhpc3RzIGluIG91ciBjb3JyZWN0aW9uIG1hcCAoUGVyZmVjdCBNYXRjaCkNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcnJlY3Rpb25NYXAuaGFzT3duUHJvcGVydHkoY3VycmVudE5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNbMl0gPSBjb3JyZWN0aW9uTWFwW2N1cnJlbnROYW1lXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRiUm93c1tpXSA9IGZpZWxkcy5qb2luKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIFNhdmUgYmFjayB0byBEcm9wYm94IGlmIGNoYW5nZXMgd2VyZSBtYWRlDQogICAgICAgICAgICAgICAgaWYgKGNvcnJlY3Rpb25Db3VudCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL3VwbG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIsIG1vZGU6ICdvdmVyd3JpdGUnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGRiUm93cy5qb2luKCdcbicpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBhbGVydChgU1VDQ0VTUzogRGF0YWJhc2UgdXBkYXRlZC5cblxuVG90YWwgRG9ub3IgTmFtZXMgY29ycmVjdGVkOiAke2NvcnJlY3Rpb25Db3VudH1gKTsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIk5vIG1hdGNoaW5nIG5hbWVzIGZvdW5kIGZvciBjb3JyZWN0aW9uLiIpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIk5hbWUgQ29ycmVjdGlvbiBFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIENoZWNrcyBBZGRyZXNzIG9mIGFsbCBkb25vcnMgYW5kIHByZXBhcmVzIGxpc3QgYW5kIHN1Z2dlc3Rpb25zIGZvciBjb3JyZWN0aW9ucy4gRG93bmxvYWRzIDQgdGV4dCBmaWxlcy4NCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bkFkZHJlc3NDaGVjayhtb2RlID0gJ25vcm1hbCcpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIocm93ID0+IHJvdy50cmltKCkgIT09ICIiKTsNCg0KICAgICAgICAgICAgICAgIGxldCBhbGxBZGRyZXNzZXMgPSBkYlJvd3MubWFwKHJvdyA9PiAocm93LnNwbGl0KCd8JylbNF0gfHwgIiIpLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgbGV0IHVuaXF1ZUFkZHJlc3NlcyA9IFsuLi5uZXcgU2V0KGFsbEFkZHJlc3NlcyldLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXRBZGRyZXNzID0gKGFkZHIpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFhZGRyKSByZXR1cm4gIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gRmxhdHRlbiBsaW5lIGJyZWFrcyB3aXRoIH4NCiAgICAgICAgICAgICAgICAgICAgbGV0IGZsYXR0ZW5lZCA9IGFkZHIucmVwbGFjZSgvW1xyXG5dKy9nLCAnIH4gJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMi4gU3BsaXQgaW50byB3b3Jkcw0KICAgICAgICAgICAgICAgICAgICBsZXQgd29yZHMgPSBmbGF0dGVuZWQuc3BsaXQoL1xzKy8pOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybWF0dGVkV29yZHMgPSB3b3Jkcy5tYXAod29yZCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdvcmQpIHJldHVybiAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1BFQ0lBTCBUV0VBSzogV29yZHMgc3RhcnRpbmcgd2l0aCAkDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZC5zdGFydHNXaXRoKCckJykgJiYgd29yZC5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1haW5QYXJ0ID0gd29yZC5zbGljZSgxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyQnICsgbWFpblBhcnQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBtYWluUGFydC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBSdWxlIDE6IEFsd2F5cyBVUFBFUkNBU0UgZm9yIDMgY2hhcnMgb3IgbGVzcw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQubGVuZ3RoIDw9IDMpIHJldHVybiB3b3JkLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJ1bGUgMjogU2VudGVuY2UgQ2FzZSBmb3IgZXZlcnl0aGluZyBlbHNlIChpbmNsdWRpbmcgQXBhcnRtZW50OjI3KQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRXb3Jkcy5qb2luKCcgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBsZXQgYWxsQ29tcGFyaXNvbnMgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgY29ycmVjdGlvbnNPbmx5ID0gW107DQoNCiAgICAgICAgICAgICAgICB1bmlxdWVBZGRyZXNzZXMuZm9yRWFjaChvcmlnaW5hbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0ZWQgPSBmb3JtYXRBZGRyZXNzKG9yaWdpbmFsKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3BsYXlMaW5lID0gYCR7b3JpZ2luYWwucGFkRW5kKDEyMCl9IHwgJHtzdWdnZXN0ZWR9YDsNCg0KICAgICAgICAgICAgICAgICAgICBhbGxDb21wYXJpc29ucy5wdXNoKGRpc3BsYXlMaW5lKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsICE9PSBzdWdnZXN0ZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25zT25seS5wdXNoKGRpc3BsYXlMaW5lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZG93bmxvYWRUeHQgPSAoY29udGVudCwgZmlsZU5hbWUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAgICAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsNCiAgICAgICAgICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAvLyBUSEUgQlJJREdFOiBVc2UgdGhlIGNvcnJlY3QgdmFyaWFibGUgbmFtZSB3ZSBqdXN0IGlkZW50aWZpZWQNCiAgICAgICAgICAgICAgICB3aW5kb3cuR0xPQkFMX0FERFJFU1NfQ09SUkVDVElPTl9EQVRBID0gQXJyYXkuaXNBcnJheShjb3JyZWN0aW9uc09ubHkpID8gY29ycmVjdGlvbnNPbmx5LmpvaW4oJ1xuJykgOiBjb3JyZWN0aW9uc09ubHk7DQoNCiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2F1ZGl0Jykgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQWRkcmVzcyBkYXRhIGNhcHR1cmVkIHN1Y2Nlc3NmdWxseSB2aWEgY29ycmVjdGlvbnNPbmx5LiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICAgICAvLyBGaWxlIFNlcXVlbmNlDQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoYWxsQWRkcmVzc2VzLnNvcnQoKS5qb2luKCdcbicpLCAiMS4gQ0dfQWxsX0FkZHJlc3Nlcy50eHQiKTsNCiAgICAgICAgICAgICAgICBkb3dubG9hZFR4dCh1bmlxdWVBZGRyZXNzZXMuam9pbignXG4nKSwgIjIuIENHX1VuaXF1ZV9BZGRyZXNzZXMudHh0Iik7DQogICAgICAgICAgICAgICAgZG93bmxvYWRUeHQoYWxsQ29tcGFyaXNvbnMuam9pbignXG4nKSwgIjMuIENHX0FkZHJlc3NfRm9ybWF0X1N1Z2dlc3Rpb25zLnR4dCIpOw0KICAgICAgICAgICAgICAgIGRvd25sb2FkVHh0KGNvcnJlY3Rpb25zT25seS5qb2luKCdcbicpLCAiNC4gQ0dfQWRkcmVzc19Db3JyZWN0aW9uc19Pbmx5LnR4dCIpOw0KDQogICAgICAgICAgICAgICAgYWxlcnQoYEF1ZGl0IENvbXBsZXRlIVxuXG5SZXZpZXcgRmlsZSA0IGZvciB0aGUgJHtjb3JyZWN0aW9uc09ubHkubGVuZ3RofSBpdGVtcyBuZWVkaW5nIGNoYW5nZXMuYCk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIEFERFJFU1MgY29ycmVjdGlvbiBpbiB0aGUgREIgYmFzZWQgb24gaW5wdXQgQWRkcmVzc0NvcnJlY3Rpb25zLnR4dCBpbiBTZXR0aW5ncyBGb2xkZXINCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vIEdsb2JhbCBDb25zdGFudCBmb3IgQWRkcmVzcyBDb3JyZWN0aW9ucw0KICAgICAgICBjb25zdCBBRERSRVNTX0NPUlJFQ1RJT05TX1VSTCA9ICJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vc2NsL2ZpL2RjbDd2NjBxYnVodXVnczFmN203cC9BZGRyZXNzQ29ycmVjdGlvbnMudHh0P3Jsa2V5PWpid3c0bGZnZDkwcmprdDFrc3NsMTZsOGQmZGw9MSI7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuQWRkcmVzc0NvcnJlY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCB0aGUgQ29ycmVjdGlvbiBNYXAgZnJvbSBEcm9wYm94DQogICAgICAgICAgICAgICAgY29uc3QgY29yclJlcyA9IGF3YWl0IGZldGNoKEFERFJFU1NfQ09SUkVDVElPTlNfVVJMKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjb3JyVGV4dCA9IGF3YWl0IGNvcnJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvcnJMaW5lcyA9IGNvcnJUZXh0LnNwbGl0KC9ccj9cbi8pLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSk7DQoNCiAgICAgICAgICAgICAgICAvLyBCdWlsZCBsb29rdXA6IHsgIk9yaWdpbmFsIEFkZHJlc3MiOiAiU3VnZ2VzdGVkIEFkZHJlc3MiIH0NCiAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzTWFwID0ge307DQogICAgICAgICAgICAgICAgY29yckxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID49IDIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gcGFydHNbMF0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGVkID0gcGFydHNbMV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsICYmIHN1Z2dlc3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NNYXBbb3JpZ2luYWxdID0gc3VnZ2VzdGVkOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBGZXRjaCB0aGUgTWFpbiBEYXRhYmFzZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRiUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZGJDb250ZW50ID0gYXdhaXQgZGJSZXMudGV4dCgpOw0KICAgICAgICAgICAgICAgIGxldCBkYlJvd3MgPSBkYkNvbnRlbnQuc3BsaXQoL1xyP1xuLyk7DQoNCiAgICAgICAgICAgICAgICBsZXQgdXBkYXRlQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgLy8gMy4gU3dlZXAgRGF0YWJhc2UgYW5kIEFwcGx5IENvcnJlY3Rpb25zDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYlJvd3MubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYlJvd3NbaV0udHJpbSgpKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gZGJSb3dzW2ldLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QWRkcmVzcyA9IChmaWVsZHNbNF0gfHwgIiIpLnRyaW0oKTsgLy8gQWRkcmVzcyBpcyBGaWVsZCA0DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZmVjdCBNYXRjaCBDaGVjaw0KICAgICAgICAgICAgICAgICAgICBpZiAoYWRkcmVzc01hcC5oYXNPd25Qcm9wZXJ0eShjdXJyZW50QWRkcmVzcykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s0XSA9IGFkZHJlc3NNYXBbY3VycmVudEFkZHJlc3NdOw0KICAgICAgICAgICAgICAgICAgICAgICAgZGJSb3dzW2ldID0gZmllbGRzLmpvaW4oJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyA0LiBTYXZlIHRvIERyb3Bib3ggaWYgdXBkYXRlcyB3ZXJlIGZvdW5kDQogICAgICAgICAgICAgICAgaWYgKHVwZGF0ZUNvdW50ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvdXBsb2FkJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogZGJSb3dzLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBTVUNDRVNTOiBEYXRhYmFzZSB1cGRhdGVkLlxuXG5Ub3RhbCBBZGRyZXNzZXMgY29ycmVjdGVkOiAke3VwZGF0ZUNvdW50fWApOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gbWF0Y2hpbmcgYWRkcmVzc2VzIGZvdW5kIHRvIGNvcnJlY3QuIik7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQWRkcmVzcyBDb3JyZWN0aW9uIEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gUEFORUwgU0hPVyBBTkQgSElERSB0b2dnbGUNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUFkbWluVGFibGUoKSB7DQogICAgICAgICAgICBpbml0Q291bnRyeURyb3Bkb3duKCk7DQogICAgICAgICAgICBjb25zdCBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZG1pbi1wYW5lbC1jb250YWluZXInKTsNCiAgICAgICAgICAgIGNvbnN0IGlzT3BlbmluZyA9IChwYW5lbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpOw0KICAgICAgICAgICAgcGFuZWwuc3R5bGUuZGlzcGxheSA9IGlzT3BlbmluZyA/ICdibG9jaycgOiAnbm9uZSc7DQoNCiAgICAgICAgICAgIGlmIChpc09wZW5pbmcpIHsNCiAgICAgICAgICAgICAgICBsb2FkQWRtaW5TbmFwcygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gQ291bnRyeSBTZWxlY3Rpb24gZm9yIExhYmVsIENyZWF0aW9uDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAxLiBQb3B1bGF0ZSBEcm9wZG93biBpbW1lZGlhdGVseQ0KICAgICAgICBmdW5jdGlvbiBpbml0Q291bnRyeURyb3Bkb3duKCkgew0KICAgICAgICAgICAgY29uc3QgY291bnRyaWVzID0gWyJJTkRJQSIsICJVU0EiLCAiVUFFIiwgIlVLIiwgIlNJTkdBUE9SRSIsICJBVVNUUkFMSUEiLCAiQ0FOQURBIiwgIlVOSVRFRCBBUkFCIEVNSVJBVEVTIiwgIk1BTEFZU0lBIiwgIk9NQU4iLCAiS1VXQUlUIl07DQogICAgICAgICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtY291bnRyeS1maWx0ZXInKTsNCiAgICAgICAgICAgIHNlbGVjdC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5BbGwgQ291bnRyaWVzPC9vcHRpb24+JzsNCiAgICAgICAgICAgIGNvdW50cmllcy5mb3JFYWNoKGMgPT4gew0KICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBjOw0KICAgICAgICAgICAgICAgIG9wdC50ZXh0Q29udGVudCA9IGM7DQogICAgICAgICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFBERiBHZW5lcmF0aW9uIGZvciBBbGwgVW5pcXVlIERvbm9ycyBMYWJlbHMuDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvLyAyLiBUaGUgUERGIEdlbmVyYXRpb24gTG9naWMNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVBZGRyZXNzTGFiZWxzKCkgew0KICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOw0KICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ291bnRyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1jb3VudHJ5LWZpbHRlcicpLnZhbHVlOw0KDQogICAgICAgICAgICAgICAgY29uc3QgZGJSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsDQogICAgICAgICAgICAgICAgICAgICAgICAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiBNTVBUX0ZJTEVfREIgfSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGRiQ29udGVudCA9IGF3YWl0IGRiUmVzLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIC8vIFJldmVyc2UgdG8gZ2V0IExBVEVTVCByZWNvcmRzIGZpcnN0DQogICAgICAgICAgICAgICAgbGV0IGRiUm93cyA9IGRiQ29udGVudC5zcGxpdCgvXHI/XG4vKS5maWx0ZXIocm93ID0+IHJvdy50cmltKCkgIT09ICIiKS5yZXZlcnNlKCk7DQoNCiAgICAgICAgICAgICAgICBsZXQgbGFiZWxzVG9DcmVhdGUgPSBbXTsNCiAgICAgICAgICAgICAgICBsZXQgcHJvY2Vzc2VkUGhvbmVzID0gbmV3IFNldCgpOw0KDQogICAgICAgICAgICAgICAgLy8gTElNSVQgUkVNT1ZFRDogUHJvY2Vzc2luZyB0aGUgZW50aXJlIGRhdGFiYXNlDQogICAgICAgICAgICAgICAgZm9yIChsZXQgcm93IG9mIGRiUm93cykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgZiA9IHJvdy5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgcGhvbmUgPSAoZlszXSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IChmWzJdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRyID0gKGZbNF0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGlzQ2FuY2VsbGVkID0gKGZbMTNdIHx8ICIiKS50b1VwcGVyQ2FzZSgpID09PSAiWUVTIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50cnkgPSAoZlsxOV0gfHwgIiIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChpc0NhbmNlbGxlZCB8fCAhbmFtZSB8fCAhYWRkcikgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZENvdW50cnkgIT09ICJBTEwiICYmIGNvdW50cnkgIT09IHNlbGVjdGVkQ291bnRyeSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChwaG9uZSAmJiBwcm9jZXNzZWRQaG9uZXMuaGFzKHBob25lKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgbGFiZWxzVG9DcmVhdGUucHVzaChmKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBob25lKSBwcm9jZXNzZWRQaG9uZXMuYWRkKHBob25lKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobGFiZWxzVG9DcmVhdGUubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyByZWNvcmRzIGZvdW5kIGZvciB0aGUgc2VsZWN0aW9uLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGFiZWxXaWR0aCA9IDEwNTsNCiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbEhlaWdodCA9IDc0LjI1Ow0KDQogICAgICAgICAgICAgICAgbGFiZWxzVG9DcmVhdGUuZm9yRWFjaCgoZiwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCAmJiBpbmRleCAlIDggPT09IDApIGRvYy5hZGRQYWdlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zID0gaW5kZXggJSA4Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gKHBvcyAlIDIpICogbGFiZWxXaWR0aDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IocG9zIC8gMikgKiBsYWJlbEhlaWdodDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDdXR0aW5nIGd1aWRlcw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0RHJhd0NvbG9yKDIwMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5yZWN0KHgsIHksIGxhYmVsV2lkdGgsIGxhYmVsSGVpZ2h0KTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VyWSA9IHkgKyA4Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWRYID0geCArIDEwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodFBhZFggPSB4ICsgbGFiZWxXaWR0aCAtIDEwOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IGxhYmVsV2lkdGggLSAyMDsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAxLiBSRUZFUkVOQ0UgKFJpZ2h0IEFsaWduZWQpDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoOCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBSZWYgOiAke2ZbMF0gfHwgIiJ9YCwgcmlnaHRQYWRYLCBjdXJZLCB7IGFsaWduOiAicmlnaHQiIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gNjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBOQU1FICgxNHB0IEJvbGQsIFdyYXBwZWQpDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTQpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZnVsbE5hbWUgPSBgU210LlNocmkuICR7ZlsyXX1gOw0KICAgICAgICAgICAgICAgICAgICBsZXQgd3JhcHBlZE5hbWUgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGZ1bGxOYW1lLCBhdmFpbGFibGVXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHdyYXBwZWROYW1lLCBwYWRYLCBjdXJZKTsNCg0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9ICh3cmFwcGVkTmFtZS5sZW5ndGggKiA2KSArIDI7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gMy4gQUREUkVTUyAmIENJVFkgRVhUUkFDVElPTg0KICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5GdWxsQWRkciA9IChmWzRdIHx8ICIiKS5yZXBsYWNlKC9+L2csICcgJykudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgYWRkcldvcmRzID0gY2xlYW5GdWxsQWRkci5zcGxpdCgvXHMrLyk7DQogICAgICAgICAgICAgICAgICAgIGxldCBjaXR5ID0gYWRkcldvcmRzLmxlbmd0aCA+IDAgPyBhZGRyV29yZHMucG9wKCkgOiAiIjsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZHJCb2R5ID0gYWRkcldvcmRzLmpvaW4oIiAiKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyA0LiBBRERSRVNTIEJPRFkgKDExcHQgTm9ybWFsLCBXcmFwcGVkKQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTEpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgd3JhcHBlZEFkZHIgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGFkZHJCb2R5LCBhdmFpbGFibGVXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHdyYXBwZWRBZGRyLCBwYWRYLCBjdXJZKTsNCg0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9ICh3cmFwcGVkQWRkci5sZW5ndGggKiA1KSArIDE7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gNS4gQ0lUWSAtIFBJTkNPREUgKDExcHQgQm9sZCkNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGAke2NpdHkudG9VcHBlckNhc2UoKX0gLSAkeyhmWzE1XSB8fCAiIikudHJpbSgpfWAsIHBhZFgsIGN1clkpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDYuIENPVU5UUlkgKDExcHQgTm9ybWFsKQ0KICAgICAgICAgICAgICAgICAgICBjdXJZICs9IDY7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KChmWzE5XSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCksIHBhZFgsIGN1clkpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIDcuIFBIT05FICgxMXB0IEJvbGQpDQogICAgICAgICAgICAgICAgICAgIGN1clkgKz0gOTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBQaG9uZSA6ICR7KGZbM10gfHwgIiIpLnRyaW0oKX1gLCBwYWRYLCBjdXJZKTsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIC8vIERZTkFNSUMgRklMRU5BTUUNCiAgICAgICAgICAgICAgICBjb25zdCBjb3VudHJ5TmFtZSA9IHNlbGVjdGVkQ291bnRyeSA9PT0gIkFMTCIgPyAiQWxsIENvdW50cmllcyIgOiBzZWxlY3RlZENvdW50cnk7DQogICAgICAgICAgICAgICAgZG9jLnNhdmUoYE1NUFQgRG9ub3IgQWRkcmVzcyBMYWJlbHMtICR7Y291bnRyeU5hbWV9LnBkZmApOw0KDQogICAgICAgICAgICAgICAgYWxlcnQoYFN1Y2Nlc3MhIEdlbmVyYXRlZCAke2xhYmVsc1RvQ3JlYXRlLmxlbmd0aH0gdW5pcXVlIGxhYmVscyBmb3IgJHtjb3VudHJ5TmFtZX0uYCk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIEZVTEwgRmxlZ2VkIEF1ZGl0IG9mIFRoZSBEYXRhYmFzZQ0KICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuRGF0YWJhc2VBdWRpdFBERigpIHsNCiAgICAgICAgICAgIGxldCBzdGF0cyA9IHsNCiAgICAgICAgICAgICAgICB0b3RhbDogMCwgY2FuY2VsbGVkOiAwLCBub05hbWU6IDAsIG5vUGhvbmU6IDAsIG5vQWRkcjogMCwNCiAgICAgICAgICAgICAgICBub1BpbjogMCwgbm9FbWFpbDogMCwgbm9QYW46IDAsIG5vUmVmOiAwLCBub0NvbW06IDAsDQogICAgICAgICAgICAgICAgbm9BbXQ6IDAsIG5vUHJhc2FkYW06IDAsIG5vUHJpbnQ6IDAsIHBlbmRpbmdDb25zZW50OiAwDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBjb25zdCBjbGVhblN0ciA9IChzdHIpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIXN0cikgcmV0dXJuICIiOw0KICAgICAgICAgICAgICAgIHJldHVybiBzdHIudG9TdHJpbmcoKS5ub3JtYWxpemUoIk5GRCIpLnJlcGxhY2UoL1teXHgyMC1ceDdFXS9nLCAiIik7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyAxLiBEQVRBIFBST0NFU1NJTkcgKExvY2tlZCBDb3JlIExvZ2ljIC0gSWdub3JlcyBDQU5DRUxMRUQpDQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgIGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZlsxM10gPT09ICJZRVMiKSBzdGF0cy5jYW5jZWxsZWQrKzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzdGF0cy50b3RhbCsrOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlRmxvYXQoZls5XSkgfHwgMDsNCiAgICAgICAgICAgICAgICBjb25zdCB0b3dhcmRzID0gKGZbMTJdIHx8ICIiKS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBpbiA9IChmWzE1XSB8fCAiIikudHJpbSgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd1Bob25lID0gKGZbM10gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblBob25lID0gcmF3UGhvbmUucmVwbGFjZSgvXEQvZywgJycpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGlzUGxhY2Vob2xkZXIgPSBjbGVhblBob25lLnN0YXJ0c1dpdGgoIjg4ODg4IikgfHwgY2xlYW5QaG9uZS5zdGFydHNXaXRoKCI5OTk5OSIpOw0KDQogICAgICAgICAgICAgICAgaWYgKCFmWzJdIHx8IGZbMl0udHJpbSgpID09PSAiIikgc3RhdHMubm9OYW1lKys7DQogICAgICAgICAgICAgICAgaWYgKCFyYXdQaG9uZSB8fCBpc1BsYWNlaG9sZGVyKSBzdGF0cy5ub1Bob25lKys7DQogICAgICAgICAgICAgICAgaWYgKCFmWzRdIHx8IGZbNF0udHJpbSgpID09PSAiIiB8fCBmWzRdID09PSAifiIpIHN0YXRzLm5vQWRkcisrOw0KICAgICAgICAgICAgICAgIGlmICghcGluIHx8IHBpbiA9PT0gIjAwMDAwMCIgfHwgcGluLmxlbmd0aCAhPT0gNiB8fCAhL15bMS05XVswLTldezV9JC8udGVzdChwaW4pKSBzdGF0cy5ub1BpbisrOw0KICAgICAgICAgICAgICAgIGlmICghZls1XSB8fCBmWzVdLnRyaW0oKSA9PT0gIiIpIHN0YXRzLm5vRW1haWwrKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbNl0gfHwgZls2XS50cmltKCkgPT09ICIiKSBzdGF0cy5ub1BhbisrOw0KICAgICAgICAgICAgICAgIGlmICghZlsxMF0gfHwgZlsxMF0udHJpbSgpID09PSAiIikgc3RhdHMubm9SZWYrKzsNCiAgICAgICAgICAgICAgICBpZiAoIWZbMTRdIHx8IGZbMTRdLnRyaW0oKSA9PT0gIiIgfHwgZlsxNF0gPT09ICJ+Iikgc3RhdHMubm9Db21tKys7DQogICAgICAgICAgICAgICAgaWYgKGFtdCA8IDEpIHN0YXRzLm5vQW10Kys7DQogICAgICAgICAgICAgICAgaWYgKGZbMTddID09PSAiTk8iKSBzdGF0cy5ub1ByYXNhZGFtKys7DQogICAgICAgICAgICAgICAgaWYgKGZbMTZdID09PSAiTk8iKSBzdGF0cy5ub1ByaW50Kys7DQogICAgICAgICAgICAgICAgaWYgKGFtdCA+PSAxMDAwMCAmJiB0b3dhcmRzLmluY2x1ZGVzKCJDT1JQVVMiKSAmJiBmWzE4XSA9PT0gIk5PIikgc3RhdHMucGVuZGluZ0NvbnNlbnQrKzsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7DQogICAgICAgICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoew0KICAgICAgICAgICAgICAgIHB1dE9ubHlVc2VkRm9udHM6IHRydWUsDQogICAgICAgICAgICAgICAgY29tcHJlc3M6IHRydWUNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBJZiB0aGUgZW5jcnlwdGlvbiBwbHVnaW4gaXMgbG9hZGVkLCB0aGlzIHdpbGwgbm93IHdvcmsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jLnNldEVuY3J5cHRpb24gPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgICAgICBkb2Muc2V0RW5jcnlwdGlvbih7DQogICAgICAgICAgICAgICAgICAgIHVzZXJQYXNzd29yZDogIk1NUFQiLA0KICAgICAgICAgICAgICAgICAgICBvd25lclBhc3N3b3JkOiAiTU1QVCIsDQogICAgICAgICAgICAgICAgICAgIHVzZXJQZXJtaXNzaW9uczogWyJwcmludCIsICJtb2RpZnkiLCAiY29weSIsICJhbm5vdC1mb3JtcyJdDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVuY3J5cHRpb24gcGx1Z2luIG1pc3NpbmcgZnJvbSB0aGUgbG9hZGVkIGpzUERGIGxpYnJhcnkuIik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IHRvdGFsUGFnZXNFeHAgPSAie3RvdGFsX3BhZ2VzX2NvdW50X3N0cmluZ30iOw0KICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBub3cudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1JTicsIHsgZGF5OiAnMi1kaWdpdCcsIG1vbnRoOiAnc2hvcnQnLCB5ZWFyOiAnbnVtZXJpYycgfSk7DQogICAgICAgICAgICBjb25zdCB0aW1lU3RhbXAgPSBub3cudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJykuc2xpY2UoMCwgMTYpOw0KICAgICAgICAgICAgbGV0IHBNYXAgPSB7IHN1bW1hcnk6IDAsIHBhbjogMCwgY291bnRyeTogMCwgcGhvbmU6IDAsIHBpbmNvZGU6IDAsIGRvbGxhcjogMCwgY2l0eTogMCwgZG9ub3JOYW1lczogMCwgYWRkckNvcnI6IDAgfTsNCg0KICAgICAgICAgICAgY29uc3QgZHJhd0JyYW5kaW5nID0gKHBhZ2VUaXRsZSwgaXNJbmRleCA9IGZhbHNlKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gU0xBVEUgQkxVRSBIRUFERVINCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDcwLCAxMzAsIDE4MCk7IGRvYy5yZWN0KDAsIDAsIDIxMCwgNDAsICdGJyk7DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUsIDI1NSwgMjU1KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7IGRvYy5zZXRGb250U2l6ZSgyMik7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIocGFnZVRpdGxlKSwgMTA1LCAxOCwgeyBhbGlnbjogImNlbnRlciIgfSk7DQogICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsNCiAgICAgICAgICAgICAgICBkb2MudGV4dChjbGVhblN0cihgTU1QVCBJbnRlcm5hbCBBdWRpdCB8IEdlbmVyYXRlZDogJHtkYXRlU3RyfSAke25vdy50b0xvY2FsZVRpbWVTdHJpbmcoKX1gKSwgMTA1LCAyOCwgeyBhbGlnbjogImNlbnRlciIgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyBDT09MIEdSRVkgRk9PVEVSDQogICAgICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcigxNDksIDE2NSwgMTY2KTsgZG9jLnJlY3QoMCwgMjgyLCAyMTAsIDE1LCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7IGRvYy5zZXRGb250U2l6ZSg4LjUpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJJTlRFUk5BTCBTRUNVUklUWSBET0NVTUVOVCAtIE1NUFQgQURNSU5JU1RSQVRJT04iLCAxNSwgMjkyKTsNCg0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDApOyAvLyBZZWxsb3cgZm9yIHZpc2liaWxpdHkNCiAgICAgICAgICAgICAgICBkb2MudGV4dChkb2MuaW50ZXJuYWwuZ2V0Q3VycmVudFBhZ2VJbmZvKCkucGFnZU51bWJlciArICIgLyAiICsgdG90YWxQYWdlc0V4cCwgMjAwLCAyOTIsIHsgYWxpZ246ICJyaWdodCIgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWlzSW5kZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUsIDI1NSwgMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoIkJhY2sgdG8gSW5kZXgiLCAxMzAsIDI5MiwgeyBhbGlnbjogImNlbnRlciIgfSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5saW5rKDEyMCwgMjg1LCAyMCwgMTAsIHsgcGFnZU51bWJlcjogMSB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAvLyBQQUdFIDE6IElOREVYDQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkFVRElUIE5BVklHQVRJT04gSU5ERVgiLCB0cnVlKTsNCg0KICAgICAgICAgICAgLy8gUEFHRSAyOiBTVU1NQVJZDQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLnN1bW1hcnkgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJFWEVDVVRJVkUgQVVESVQgU1VNTUFSWSIpOw0KICAgICAgICAgICAgbGV0IHN5ID0gNTU7DQogICAgICAgICAgICBjb25zdCBkYXRhUm93cyA9IFsNCiAgICAgICAgICAgICAgICBbIlRvdGFsIEFjdGl2ZSBSZWNlaXB0cyAoRXhjbC4gQ2FuY2VsbGVkKSIsIHN0YXRzLnRvdGFsLCAiIzJjM2U1MCJdLA0KICAgICAgICAgICAgICAgIFsiVG90YWwgQ2FuY2VsbGVkIChJZ25vcmVkKSIsIHN0YXRzLmNhbmNlbGxlZCwgIiNlNzRjM2MiXSwNCiAgICAgICAgICAgICAgICBbIk5vIE5hbWUgRm91bmQiLCBzdGF0cy5ub05hbWUsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBUZWxlcGhvbmUgLyBQbGFjZWhvbGRlciIsIHN0YXRzLm5vUGhvbmUsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBBZGRyZXNzIC8gRW1wdHkiLCBzdGF0cy5ub0FkZHIsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJJbnZhbGlkIFBpbmNvZGUiLCBzdGF0cy5ub1BpbiwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIEVtYWlsIElEIiwgc3RhdHMubm9FbWFpbCwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIFBBTiBOdW1iZXIiLCBzdGF0cy5ub1BhbiwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIFJlZmVyZW5jZSBEZXRhaWxzIiwgc3RhdHMubm9SZWYsICIjMzQ0OTVlIl0sDQogICAgICAgICAgICAgICAgWyJObyBDb21tZW50cyBQcm92aWRlZCIsIHN0YXRzLm5vQ29tbSwgIiMzNDQ5NWUiXSwNCiAgICAgICAgICAgICAgICBbIk5vIEFtb3VudCBGb3VuZCIsIHN0YXRzLm5vQW10LCAiI2MwMzkyYiJdLA0KICAgICAgICAgICAgICAgIFsiUHJhc2FkYW0gU3RhdHVzIChOTykiLCBzdGF0cy5ub1ByYXNhZGFtLCAiI2QzNTQwMCJdLA0KICAgICAgICAgICAgICAgIFsiTm90IFByaW50ZWQgKE5PKSIsIHN0YXRzLm5vUHJpbnQsICIjZDM1NDAwIl0sDQogICAgICAgICAgICAgICAgWyJQZW5kaW5nIENvbnNlbnQgTGV0dGVycyoiLCBzdGF0cy5wZW5kaW5nQ29uc2VudCwgIiNmZjAwMDAiXQ0KICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIGRhdGFSb3dzLmZvckVhY2goKHIsIGkpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaSAlIDIgPT09IDApIHsgZG9jLnNldEZpbGxDb2xvcigyNDUpOyBkb2MucmVjdCgxNSwgc3kgLSA4LCAxODAsIDEyLCAnRicpOyB9DQogICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcihyWzJdKTsgZG9jLnNldEZvbnRTaXplKDExKTsgZG9jLnRleHQoY2xlYW5TdHIoclswXSksIDI1LCBzeSk7DQogICAgICAgICAgICAgICAgZG9jLnRleHQoclsxXS50b1N0cmluZygpLCAxODUsIHN5LCB7IGFsaWduOiAicmlnaHQiIH0pOyBzeSArPSAxMjsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDM6IFBBTg0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5wYW4gPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJEZWZlY3RpdmUgUEFOIE51bWJlcnMiKTsNCiAgICAgICAgICAgIGxldCBwbnkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigxNTUsIDg5LCAxODIpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJJbnZhbGlkIFBBTiBWYWx1ZSIsIDEwMCwgNTkpOw0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgcGFuID0gKGZbNl0gfHwgIiIpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBpZiAocGFuICYmICEvXltBLVpdezV9WzAtOV17NH1bQS1aXXsxfSQvLnRlc3QocGFuKSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAocG55ID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiUEFOIChDb250LikiKTsgcG55ID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCBwbnkpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChwYW4sIDEwMCwgcG55KTsgcG55ICs9IDk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgNDogQ09VTlRSSUVTIChVc2luZyBSZXZlcnNlIFNlYXJjaCkNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuY291bnRyeSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkNvdW50cmllcyBpbiBBZGRyZXNzIEZpZWxkIik7DQogICAgICAgICAgICBsZXQgY3lZID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMzksIDE3NCwgOTYpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KCJSZWNlaXB0IE5vLiIsIDI1LCA1OSk7IGRvYy50ZXh0KCJBZGRyZXNzIEVudHJ5IiwgODAsIDU5KTsNCg0KICAgICAgICAgICAgY29uc3QgY291bnRyaWVzID0gWyJVU0EiLCAiVUsiLCAiVU5JVEVEIEtJTkdET00iLCAiVUFFIiwgIkNBTkFEQSIsICJBVVNUUkFMSUEiLCAiU0lOR0FQT1JFIl07DQoNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgLy8gRmllbGQgMTMgaXMgQ2FuY2VsbGVkLiBKYW4gMjYgaW5zdHJ1Y3Rpb246IElnbm9yZSBDQU5DRUxMRUQgcmVjZWlwdHMuDQogICAgICAgICAgICAgICAgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBhZHIgPSAoZls0XSB8fCAiIikudHJpbSgpLnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgaWYgKCFhZHIpIHJldHVybjsNCg0KICAgICAgICAgICAgICAgIC8vIFJFVkVSU0UgU0VBUkNIIExPR0lDOg0KICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IGNvbW1vbiBkZWxpbWl0ZXJzIGFuZCBsb29rIGF0IHRoZSB2ZXJ5IGxhc3Qgc2VnbWVudA0KICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gYWRyLnNwbGl0KC9bXHMsXSsvKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsYXN0U2VnbWVudCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdOyAvLyBHZXQgdGhlIGxhc3Qgd29yZA0KICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZExhc3RTZWdtZW50ID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDJdIDogIiI7DQoNCiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbGFzdCBzZWdtZW50IChvciBsYXN0IHR3byBmb3IgIlVOSVRFRCBLSU5HRE9NIikgbWF0Y2hlcyBvdXIgbGlzdA0KICAgICAgICAgICAgICAgIGNvbnN0IGlzRm9yZWlnbiA9IGNvdW50cmllcy5zb21lKGMgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gIlVOSVRFRCBLSU5HRE9NIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFkci5lbmRzV2l0aCgiVU5JVEVEIEtJTkdET00iKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdFNlZ21lbnQgPT09IGM7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoaXNGb3JlaWduKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChjeVkgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJDb3VudHJpZXMgKENvbnQuKSIpOyBjeVkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIGN5WSk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSg5KTsNCiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGxheWluZyBvbmx5IHRoZSBlbmQgb2YgdGhlIGFkZHJlc3MgdG8gaGlnaGxpZ2h0IHRoZSBjb3VudHJ5DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKGZbNF0uc2xpY2UoLTU1KSksIDgwLCBjeVkpOw0KICAgICAgICAgICAgICAgICAgICBjeVkgKz0gOTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KDQogICAgICAgICAgICAvLyBQQUdFIDU6IFBIT05FUw0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5waG9uZSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkluY29ycmVjdCBUZWxlcGhvbmUgTnVtYmVycyIpOw0KICAgICAgICAgICAgbGV0IHR5ID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoNTIsIDczLCA5NCk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkludmFsaWQgUGhvbmUgVmFsdWUiLCAxMDAsIDU5KTsNCiAgICAgICAgICAgIEdMT0JBTF9EQl9MSU5FUy5mb3JFYWNoKGwgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBsLnNwbGl0KCd8Jyk7IGlmIChmLmxlbmd0aCA8IDE1IHx8IGZbMTNdID09PSAiWUVTIikgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBoID0gKGZbM10gfHwgIiIpLnRyaW0oKTsgY29uc3QgY3AgPSBwaC5yZXBsYWNlKC9cRC9nLCAnJyk7DQogICAgICAgICAgICAgICAgaWYgKHBoICYmICFjcC5zdGFydHNXaXRoKCI4ODg4OCIpICYmICFjcC5zdGFydHNXaXRoKCI5OTk5OSIpICYmIGNwLmxlbmd0aCAhPT0gMTApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5ID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiUGhvbmVzIChDb250LikiKTsgdHkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIHR5KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQocGgsIDEwMCwgdHkpOyB0eSArPSA5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDY6IFBJTkNPREUNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAucGluY29kZSA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkludmFsaWQgUElOQ09ERSBSZWNvcmRzIik7DQogICAgICAgICAgICBsZXQgcGN5ID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoMjQzLCAxNTYsIDE4KTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2MudGV4dCgiUmVjZWlwdCBOby4iLCAyNSwgNTkpOyBkb2MudGV4dCgiSW52YWxpZCBQaW5jb2RlIiwgMTAwLCA1OSk7DQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaChsID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBmID0gbC5zcGxpdCgnfCcpOyBpZiAoZi5sZW5ndGggPCAxNSB8fCBmWzEzXSA9PT0gIllFUyIpIHJldHVybjsNCiAgICAgICAgICAgICAgICBpZiAoKGZbMTldIHx8ICJJTkRJQSIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpICE9PSAiSU5ESUEiKSByZXR1cm47DQogICAgICAgICAgICAgICAgY29uc3QgcGluID0gKGZbMTVdIHx8ICIiKS50cmltKCk7DQogICAgICAgICAgICAgICAgaWYgKCFmWzRdIHx8IGZbNF0gPT09ICJ+IiB8fCAhZlsyXSkgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGlmICghL15bMS05XVswLTldezV9JC8udGVzdChwaW4pKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwY3kgPiAyNzApIHsgZG9jLmFkZFBhZ2UoKTsgZHJhd0JyYW5kaW5nKCJQaW5jb2RlIChDb250LikiKTsgcGN5ID0gNjA7IH0NCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGZbMF0sIDI1LCBwY3kpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChwaW4gfHwgIltFTVBUWV0iLCAxMDAsIHBjeSk7IHBjeSArPSA5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBQQUdFIDc6IERPTExBUiBTSUdOICgkKQ0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5kb2xsYXIgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJJbnZhbGlkIE5hbWVzIG9yIEFkZHJlc3MgKCQpIik7DQogICAgICAgICAgICBsZXQgZHkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigyMzEsIDc2LCA2MCk7IGRvYy5yZWN0KDIwLCA1MiwgMTcwLCAxMCwgJ0YnKTsNCiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlJlY2VpcHQgTm8uIiwgMjUsIDU5KTsgZG9jLnRleHQoIkRldGFpbHMiLCA3MCwgNTkpOw0KICAgICAgICAgICAgR0xPQkFMX0RCX0xJTkVTLmZvckVhY2gobCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgZiA9IGwuc3BsaXQoJ3wnKTsgaWYgKGYubGVuZ3RoIDwgMTUgfHwgZlsxM10gPT09ICJZRVMiKSByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKCgoZlsyXSB8fCAiIikgKyAoZls0XSB8fCAiIikpLmluY2x1ZGVzKCIkIikpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IFtgTmFtZTogJHtmWzJdfWAsIGBBZGRyOiAke2ZbNF19YF07DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0VHh0ID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShpbmZvLmpvaW4oIlxuIiksIDExNSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChkeSArIDE1ID4gMjc1KSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiRG9sbGFyIENoZWNrIChDb250LikiKTsgZHkgPSA2NTsgfQ0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoZlswXSwgMjUsIGR5KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnNldEZvbnRTaXplKDkpOyBkb2MudGV4dChzcGxpdFR4dCwgNzAsIGR5KTsgZHkgKz0gMTU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFBBR0UgODogQ0lUWSBDT1JSRUNUSU9ODQogICAgICAgICAgICBkb2MuYWRkUGFnZSgpOyBwTWFwLmNpdHkgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpOw0KICAgICAgICAgICAgZHJhd0JyYW5kaW5nKCJDaXR5IE5hbWUgVmFsaWRhdGlvbiIpOw0KICAgICAgICAgICAgbGV0IGN0eVkgPSA3MDsgZG9jLnNldEZpbGxDb2xvcigxNDIsIDY4LCAxNzMpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy50ZXh0KCJPcmlnaW5hbCIsIDI1LCA1OSk7IGRvYy50ZXh0KCJTdWdnZXN0ZWQiLCAxMTAsIDU5KTsNCiAgICAgICAgICAgIGxldCBjaXR5UmF3ID0gd2luZG93LkdMT0JBTF9DSVRZX0FVRElUX0RBVEEgfHwgIiI7DQogICAgICAgICAgICBpZiAoY2l0eVJhdykgew0KICAgICAgICAgICAgICAgIFN0cmluZyhjaXR5UmF3KS5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwdHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwdHMubGVuZ3RoID49IDIgJiYgIWxpbmUuaW5jbHVkZXMoJ09SSUdJTkFMJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHlZID4gMjcwKSB7IGRvYy5hZGRQYWdlKCk7IGRyYXdCcmFuZGluZygiQ2l0eSAoQ29udC4pIik7IGN0eVkgPSA2MDsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwKTsgZG9jLnNldEZvbnRTaXplKDkpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGNsZWFuU3RyKHB0c1swXS50cmltKCkpLCAyNSwgY3R5WSk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dChjbGVhblN0cihwdHNbMV0udHJpbSgpKSwgMTEwLCBjdHlZKTsgY3R5WSArPSA3Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFBBR0UgOTogRE9OT1IgTkFNRVMNCiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7IHBNYXAuZG9ub3JOYW1lcyA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkRvbm9yIE5hbWUgQ29ycmVjdGlvbnMiKTsNCiAgICAgICAgICAgIGxldCBkbnlZID0gNzA7IGRvYy5zZXRGaWxsQ29sb3IoNDEsIDEyOCwgMTg1KTsgZG9jLnJlY3QoMjAsIDUyLCAxNzAsIDEwLCAnRicpOw0KICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyNTUpOyBkb2MudGV4dCgiT3JpZ2luYWwiLCAyNSwgNTkpOyBkb2MudGV4dCgiQ29ycmVjdGVkIiwgMTEwLCA1OSk7DQogICAgICAgICAgICBsZXQgZG9ub3JSYXcgPSB3aW5kb3cuR0xPQkFMX0RPTk9SX05BTUVfREFUQSB8fCAiIjsNCiAgICAgICAgICAgIGlmIChkb25vclJhdykgew0KICAgICAgICAgICAgICAgIFN0cmluZyhkb25vclJhdykuc3BsaXQoJ1xuJykuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBpZiAocHRzLmxlbmd0aCA+PSAyICYmICFsaW5lLmluY2x1ZGVzKCdPUklHSU5BTCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG55WSA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIk5hbWVzIChDb250LikiKTsgZG55WSA9IDYwOyB9DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udFNpemUoOSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoY2xlYW5TdHIocHRzWzBdLnRyaW0oKSksIDI1LCBkbnlZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy50ZXh0KGNsZWFuU3RyKHB0c1sxXS50cmltKCkpLCAxMTAsIGRueVkpOyBkbnlZICs9IDc7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gUEFHRSAxMDogQUREUkVTUyBDT1JSRUNUSU9OUw0KICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsgcE1hcC5hZGRyQ29yciA9IGRvYy5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKCk7DQogICAgICAgICAgICBkcmF3QnJhbmRpbmcoIkFkZHJlc3MgQ29ycmVjdGlvbnMiKTsNCiAgICAgICAgICAgIGxldCBhZHlZID0gNzA7DQogICAgICAgICAgICBjb25zdCBjb2xXaWR0aCA9IDc1Ow0KICAgICAgICAgICAgZG9jLnNldEZpbGxDb2xvcigyMiwgMTYwLCAxMzMpOyBkb2MucmVjdCgyMCwgNTIsIDE3MCwgMTAsICdGJyk7DQogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSk7IGRvYy50ZXh0KCJPcmlnaW5hbCBBZGRyZXNzIiwgMjUsIDU5KTsgZG9jLnRleHQoIkNvcnJlY3RlZCBBZGRyZXNzIiwgMTE1LCA1OSk7DQogICAgICAgICAgICBsZXQgYWRkclJhdyA9IHdpbmRvdy5HTE9CQUxfQUREUkVTU19DT1JSRUNUSU9OX0RBVEEgfHwgIiI7DQogICAgICAgICAgICBpZiAoYWRkclJhdykgew0KICAgICAgICAgICAgICAgIFN0cmluZyhhZGRyUmF3KS5zcGxpdCgnXG4nKS5mb3JFYWNoKGxpbmUgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwdHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwdHMubGVuZ3RoID49IDIgJiYgIWxpbmUuaW5jbHVkZXMoJ09SSUdJTkFMJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdXID0gZG9jLnNwbGl0VGV4dFRvU2l6ZShjbGVhblN0cihwdHNbMF0udHJpbSgpKSwgY29sV2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29yclcgPSBkb2Muc3BsaXRUZXh0VG9TaXplKGNsZWFuU3RyKHB0c1sxXS50cmltKCkpLCBjb2xXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dIID0gTWF0aC5tYXgob3JpZ1cubGVuZ3RoLCBjb3JyVy5sZW5ndGgpICogNTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZHlZICsgcm93SCA+IDI3MCkgeyBkb2MuYWRkUGFnZSgpOyBkcmF3QnJhbmRpbmcoIkFkZHJlc3MgKENvbnQuKSIpOyBhZHlZID0gNzA7IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMCk7IGRvYy5zZXRGb250U2l6ZSg4KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChvcmlnVywgMjUsIGFkeVkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQoY29yclcsIDExNSwgYWR5WSk7IGFkeVkgKz0gcm93SCArIDY7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0RHJhd0NvbG9yKDIzMCk7IGRvYy5saW5lKDIwLCBhZHlZIC0gMywgMTkwLCBhZHlZIC0gMyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gVVBEQVRFIElOREVYIExJTktTDQogICAgICAgICAgICBkb2Muc2V0UGFnZSgxKTsNCiAgICAgICAgICAgIGNvbnN0IG5hdiA9IFsNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiRXhlY3V0aXZlIEF1ZGl0IFN1bW1hcnkiLCB0YXJnZXQ6IHBNYXAuc3VtbWFyeSwgY29sb3I6IFs0NCwgNjIsIDgwXSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJEZWZlY3RpdmUgUEFOIE51bWJlcnMiLCB0YXJnZXQ6IHBNYXAucGFuLCBjb2xvcjogWzE1NSwgODksIDE4Ml0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiQ291bnRyaWVzIGluIEFkZHJlc3MgRmllbGQiLCB0YXJnZXQ6IHBNYXAuY291bnRyeSwgY29sb3I6IFszOSwgMTc0LCA5Nl0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiSW5jb3JyZWN0IFRlbGVwaG9uZSBOdW1iZXJzIiwgdGFyZ2V0OiBwTWFwLnBob25lLCBjb2xvcjogWzUyLCA3MywgOTRdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkludmFsaWQgUElOQ09ERSBSZWNvcmRzIiwgdGFyZ2V0OiBwTWFwLnBpbmNvZGUsIGNvbG9yOiBbMjQzLCAxNTYsIDE4XSB9LA0KICAgICAgICAgICAgICAgIHsgbGFiZWw6ICJJbnZhbGlkIE5hbWVzIG9yIEFkZHJlc3MgKCQpIiwgdGFyZ2V0OiBwTWFwLmRvbGxhciwgY29sb3I6IFsyMzEsIDc2LCA2MF0gfSwNCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAiQ2l0eSBOYW1lIFZhbGlkYXRpb24iLCB0YXJnZXQ6IHBNYXAuY2l0eSwgY29sb3I6IFsxNDIsIDY4LCAxNzNdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkRvbm9yIE5hbWUgQ29ycmVjdGlvbnMiLCB0YXJnZXQ6IHBNYXAuZG9ub3JOYW1lcywgY29sb3I6IFs0MSwgMTI4LCAxODVdIH0sDQogICAgICAgICAgICAgICAgeyBsYWJlbDogIkFkZHJlc3MgQ29ycmVjdGlvbnMiLCB0YXJnZXQ6IHBNYXAuYWRkckNvcnIsIGNvbG9yOiBbMjIsIDE2MCwgMTMzXSB9DQogICAgICAgICAgICBdOw0KICAgICAgICAgICAgbGV0IGl5ID0gNjU7DQogICAgICAgICAgICBuYXYuZm9yRWFjaChpdCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKCFpdC50YXJnZXQpIHJldHVybjsNCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDI0OCk7IGRvYy5yZWN0KDIwLCBpeSwgMTcwLCAxNCwgJ0YnKTsNCiAgICAgICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKGl0LmNvbG9yWzBdLCBpdC5jb2xvclsxXSwgaXQuY29sb3JbMl0pOyBkb2MucmVjdCgyMCwgaXksIDQsIDE0LCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoaXQuY29sb3JbMF0sIGl0LmNvbG9yWzFdLCBpdC5jb2xvclsyXSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyBkb2Muc2V0Rm9udFNpemUoMTIpOw0KICAgICAgICAgICAgICAgIGRvYy50ZXh0KGl0LmxhYmVsLCAzMiwgaXkgKyA5LjUpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoaXQuY29sb3JbMF0sIGl0LmNvbG9yWzFdLCBpdC5jb2xvclsyXSk7IGRvYy5yZWN0KDE3MiwgaXkgKyAyLjUsIDEyLCA5LCAnRicpOw0KICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1KTsgZG9jLnRleHQoaXQudGFyZ2V0LnRvU3RyaW5nKCksIDE3OCwgaXkgKyA4LjUsIHsgYWxpZ246ICJjZW50ZXIiIH0pOw0KICAgICAgICAgICAgICAgIGRvYy5saW5rKDIwLCBpeSwgMTcwLCAxNCwgeyBwYWdlTnVtYmVyOiBpdC50YXJnZXQgfSk7IGl5ICs9IDE4Ow0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jLnB1dFRvdGFsUGFnZXMgPT09ICdmdW5jdGlvbicpIGRvYy5wdXRUb3RhbFBhZ2VzKHRvdGFsUGFnZXNFeHApOw0KICAgICAgICAgICAgZG9jLnNhdmUoYE1NUFRfRGF0YWJhc2VfQXVkaXRfJHt0aW1lU3RhbXB9LnBkZmApOw0KICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctb3ZlcmxheScpOyBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gdHJpZ2dlckZ1bGxBdWRpdCgpIHsNCiAgICAgICAgICAgIGNvbnN0IGxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nLW92ZXJsYXknKTsNCiAgICAgICAgICAgIGlmIChsb2FkZXIpIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGF3YWl0IHJ1bkNpdHlFeHRyYWN0aW9uKCdhdWRpdCcpOw0KICAgICAgICAgICAgICAgIGF3YWl0IHJ1bkRvbm9yTmFtZUNoZWNrKCdhdWRpdCcpOw0KICAgICAgICAgICAgICAgIGF3YWl0IHJ1bkFkZHJlc3NDaGVjaygnYXVkaXQnKTsgLy8gQWRkZWQNCg0KICAgICAgICAgICAgICAgIGF3YWl0IHJ1bkRhdGFiYXNlQXVkaXRQREYoKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkF1ZGl0IEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgYWxlcnQoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gUEFOIE51bWJlcnMgQXV0byBDb3JyZWN0IC0gKFVwcGVyY2FzZSBmb3IgYWxsIFBBTiBGSUVMRFMpDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1blBBTkNvcnJlY3Rpb24oKSB7DQogICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCg0KICAgICAgICAgICAgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIHRoZSBvdmVybGF5IHJlbmRlcnMgYmVmb3JlIHRoZSBDUFUgd29ya3MNCiAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0aW9uQ291bnQgPSAwOw0KDQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gUHJvY2VzcyB0aGUgZ2xvYmFsIGFycmF5IGRpcmVjdGx5DQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IEdMT0JBTF9EQl9MSU5FU1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGluZSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBBTiBpcyBJbmRleCA2ICg3dGggY29sdW1uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPiA2KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbCA9IGZpZWxkc1s2XSB8fCAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXBwZXJWYWwgPSB2YWwudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgIT09IHVwcGVyVmFsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1s2XSA9IHVwcGVyVmFsOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUxfREJfTElORVNbaV0gPSBmaWVsZHMuam9pbignfCcpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0aW9uQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyAyLiBTeW5jIHRvIENsb3VkIGlmIGNoYW5nZXMgd2VyZSBtYWRlDQogICAgICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0aW9uQ291bnQgPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBVVRIRU5USUNBVElPTjogVXNpbmcgeW91ciBNTVBUX0FVVEggc3lzdGVtIHRvIGdldCBhIGZyZXNoIHRva2VuDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBNTVBUX0FVVEhfUkVGUkVTSCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0b2tlblBhcmFtcy5hcHBlbmQoJ2NsaWVudF9pZCcsIE1NUFRfQVVUSF9LRVkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB0b2tlblBhcmFtcw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVQTE9BRDogU2F2aW5nIHRoZSBtb2RpZmllZCBHTE9CQUxfREJfTElORVMNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwbG9hZFJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy91cGxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuRGF0YS5hY2Nlc3NfdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfRklMRV9EQiwgbW9kZTogJ292ZXJ3cml0ZScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogR0xPQkFMX0RCX0xJTkVTLmpvaW4oJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBsb2FkUmVzLm9rKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgc2NyZWVuIGRpc3BsYXkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dSZWNvcmQgPT09ICdmdW5jdGlvbicpIHNob3dSZWNvcmQoY3VycmVudFJlY29yZEluZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgUEFOIENvcnJlY3Rpb24gU3VjY2VzcyFcblRvdGFsIFJlY29yZHMgVXBkYXRlZDogJHtjb3JyZWN0aW9uQ291bnR9YCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2xvdWQgU3luYyBGYWlsZWQuIik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiU2NhbiBDb21wbGV0ZTogTm8gbG93ZXJjYXNlIFBBTiBlbnRyaWVzIGZvdW5kLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUEFOIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJvcjogIiArIGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVyKSBsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCAxMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIC8vQURNSU4gUEFORUwNCiAgICAgICAgLy8gVW5pcXVlIERvbm9yIExpc3QgQ3JlYXRpb24gTG9naWMNCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJ1blVuaXF1ZURvbm9yTGlzdCgpIHsNCiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZy1vdmVybGF5Jyk7DQogICAgICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvbm9yLXNlYXJjaC1pbnB1dCcpLnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChNTVBUX0RCX1JBV19VUkwpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHJhd0NvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSByYXdDb250ZW50LnNwbGl0KC9ccj9cbnxcci8pOw0KDQogICAgICAgICAgICAgICAgLy8gVXNlIGEgTWFwIHRvIHN0b3JlIGFnZ3JlZ2F0ZWQgZGF0YQ0KICAgICAgICAgICAgICAgIGxldCBkb25vck1hcCA9IG5ldyBNYXAoKTsNCg0KICAgICAgICAgICAgICAgIC8vIFNjYW4gQUxMIHJlY29yZHMgKG5vdCBqdXN0IHJldmVyc2UpIHRvIGVuc3VyZSB3ZSBtaXNzIG5vdGhpbmcNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbaV0udHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGhlYWRlciBvciBlbXB0eSBsaW5lcw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmUgfHwgbGluZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJyZWNlaXB0fGRhdGUiKSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRzID0gbGluZS5zcGxpdCgnfCcpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlaXB0Tm8gPSBmaWVsZHNbMF0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmaWVsZHNbMl0gfHwgIiI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBob25lID0gZmllbGRzWzNdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRyZXNzID0gZmllbGRzWzRdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGZpZWxkc1s5XSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsID0gZmllbGRzWzEzXSB8fCAiTk8iOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwaW4gPSBmaWVsZHNbMTVdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudHJ5ID0gZmllbGRzWzE5XSB8fCAiIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU1RSSUNUIElHTk9SRSBMT0dJQyAtLS0NCiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbCA9PT0gIllFUyIpIGNvbnRpbnVlOyAvLyBJZ25vcmUgQUxMIGNhbmNlbGxlZCByZWNvcmRzDQogICAgICAgICAgICAgICAgICAgIGlmICghcGhvbmUudHJpbSgpIHx8IHBob25lLnN0YXJ0c1dpdGgoIjg4ODg4IikgfHwgcGhvbmUuc3RhcnRzV2l0aCgiOTk5OTkiKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCIkIikpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWUudHJpbSgpICYmIGFtb3VudCA8PSAwKSBjb250aW51ZTsgLy8gU2tpcCBnaG9zdCByZWNvcmRzDQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIFNFQVJDSCBGSUxURVIgKGlmIGFwcGxpY2FibGUpIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoVGVybSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG93ZXJMaW5lID0gbGluZS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFRlcm0uaW5jbHVkZXMoJzsnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1zID0gc2VhcmNoVGVybS5zcGxpdCgnOycpLm1hcCh0ID0+IHQudHJpbSgpLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybXMuc29tZSh0ID0+IGxvd2VyTGluZS5pbmNsdWRlcyh0KSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hUZXJtLmluY2x1ZGVzKCcsJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtcyA9IHNlYXJjaFRlcm0uc3BsaXQoJywnKS5tYXAodCA9PiB0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1zLmV2ZXJ5KHQgPT4gbG93ZXJMaW5lLmluY2x1ZGVzKHQpKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbG93ZXJMaW5lLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEFHR1JFR0FUSU9OIExPR0lDIC0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIWRvbm9yTWFwLmhhcyhwaG9uZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvbm9yTWFwLnNldChwaG9uZSwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsIHBob25lLCBhZGRyZXNzLCBwaW4sIGNvdW50cnksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0ZXN0UmVjZWlwdDogcmVjZWlwdE5vLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQW1vdW50OiBhbW91bnQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDENCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4aXN0aW5nID0gZG9ub3JNYXAuZ2V0KHBob25lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnRvdGFsQW1vdW50ICs9IGFtb3VudDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmNvdW50ICs9IDE7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgcmVjZWlwdCBudW1iZXIgaXMgaGlnaGVyIHRoYW4gd2hhdCB3ZSBoYXZlLCB1cGRhdGUgdGhlICJMYXRlc3QiIGRldGFpbHMNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBoYXZlIHRoZSBtb3N0IHJlY2VudCBOYW1lL0FkZHJlc3MgZXZlbiBpZiB3ZSBwcm9jZXNzIG91dCBvZiBvcmRlcg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHJlY2VpcHROby5yZXBsYWNlKC9cRC9nLCAnJykpID4gcGFyc2VJbnQoZXhpc3RpbmcubGF0ZXN0UmVjZWlwdC5yZXBsYWNlKC9cRC9nLCAnJykpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubmFtZSA9IG5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcuYWRkcmVzcyA9IGFkZHJlc3M7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcucGluID0gcGluOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmNvdW50cnkgPSBjb3VudHJ5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxhdGVzdFJlY2VpcHQgPSByZWNlaXB0Tm87DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVEb25vcnMgPSBBcnJheS5mcm9tKGRvbm9yTWFwLnZhbHVlcygpKTsNCg0KICAgICAgICAgICAgICAgIGlmICh1bmlxdWVEb25vcnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJObyBkb25vcnMgZm91bmQgbWF0Y2hpbmcgdGhlIGNyaXRlcmlhLiIpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRlVW5pcXVlRG9ub3JQREYodW5pcXVlRG9ub3JzLCBzZWFyY2hUZXJtKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJEb25vciBMaXN0IEVycm9yOiAiICsgZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICAvL0FETUlOIFBBTkVMDQogICAgICAgIC8vIFBERiBmaWxlIEdlbmVyYXRpb24gZm9yIFVuaXF1ZSBEb25vciBMaXN0DQogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVVuaXF1ZURvbm9yUERGKGRvbm9ycywgc2VhcmNoVGVybSkgew0KICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOw0KICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKCdwJywgJ21tJywgJ2E0Jyk7DQogICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7DQoNCiAgICAgICAgICAgIC8vIDEuIFNvcnQgYnkgVG90YWwgQW1vdW50IChIaWdoZXN0IG9uIHRvcCkNCiAgICAgICAgICAgIGRvbm9ycy5zb3J0KChhLCBiKSA9PiBiLnRvdGFsQW1vdW50IC0gYS50b3RhbEFtb3VudCk7DQoNCiAgICAgICAgICAgIGxldCB0aXRsZTMgPSAiIjsNCiAgICAgICAgICAgIGlmIChzZWFyY2hUZXJtKSB7DQogICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHNlYXJjaFRlcm0uaW5jbHVkZXMoJzsnKSA/ICJPUiIgOiAiQU5EIjsNCiAgICAgICAgICAgICAgICB0aXRsZTMgPSBgU2VhcmNoIFJlc3VsdHMgZm9yOiAke3NlYXJjaFRlcm0ucmVwbGFjZSgvWzssXS9nLCAiICIgKyB0eXBlICsgIiAiKX1gOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCB0YWJsZURhdGEgPSBkb25vcnMubWFwKGQgPT4gew0KICAgICAgICAgICAgICAgIC8vIEFkdmFuY2VkIEFkZHJlc3MgTG9naWM6IFNwbGl0IGJ5IHNwYWNlLCB0aWxkZSwgb3IgY29sb24gdG8gZmluZCB0aGUgY2l0eQ0KICAgICAgICAgICAgICAgIGNvbnN0IGFkZHJQYXJ0cyA9IGQuYWRkcmVzcy50cmltKCkuc3BsaXQoL1tcc346XSsvKTsNCiAgICAgICAgICAgICAgICBjb25zdCBjaXR5ID0gYWRkclBhcnRzLmxlbmd0aCA+IDAgPyBhZGRyUGFydHNbYWRkclBhcnRzLmxlbmd0aCAtIDFdIDogIiI7DQogICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHJlbWFpbmluZyBhZGRyZXNzIGZvciBkaXNwbGF5DQogICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nQWRkciA9IGQuYWRkcmVzcy5yZXBsYWNlKC9bOn5dL2csICcsICcpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBtYWluQWRkciA9IHJlbWFpbmluZ0FkZHIuc3BsaXQoJywgJykuc2xpY2UoMCwgLTEpLmpvaW4oJywgJyk7DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAgICAgICAgICAvLyBDb2x1bW4gMTogTmFtZSAmIENvbnRhY3QNCiAgICAgICAgICAgICAgICAgICAgLy97IGNvbnRlbnQ6IGAke2QubmFtZX1cbiR7ZC5waG9uZX1cbiR7ZC5yZWNlaXB0Tm99YCwgc3R5bGVzOiB7IGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwNCiAgICAgICAgICAgICAgICAgICAgeyBjb250ZW50OiBgJHtkLm5hbWV9XG4ke2QucGhvbmV9XG4ke2QubGF0ZXN0UmVjZWlwdH1gLCBzdHlsZXM6IHsgZm9udFN0eWxlOiAnYm9sZCcgfSB9LA0KICAgICAgICAgICAgICAgICAgICAvLyBDb2x1bW4gMjogQ29udHJpYnV0aW9uDQogICAgICAgICAgICAgICAgICAgIHsgY29udGVudDogYFJzLiAke2QudG90YWxBbW91bnQudG9Mb2NhbGVTdHJpbmcoJ2VuLUlOJywgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIsIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMiB9KX1cbiR7ZC5jb3VudH0gVGltZXNgLCBzdHlsZXM6IHsgaGFsaWduOiAnY2VudGVyJywgZm9udFN0eWxlOiAnYm9sZCcgfSB9LA0KICAgICAgICAgICAgICAgICAgICAvL3sgY29udGVudDogYFJzLiAke2QudG90YWxBbW91bnQudG9Mb2NhbGVTdHJpbmcoKX1cbiR7ZC5jb3VudH0gVGltZXNgLCBzdHlsZXM6IHsgaGFsaWduOiAnY2VudGVyJywgZm9udFN0eWxlOiAnYm9sZCcgfSB9LA0KICAgICAgICAgICAgICAgICAgICAvLyBDb2x1bW4gMzogQWRkcmVzcyBEZXRhaWxzIChDaXR5IC0gUGluY29kZSAtIENvdW50cnkgb24gbGFzdCBsaW5lKQ0KICAgICAgICAgICAgICAgICAgICB7IGNvbnRlbnQ6IGAke21haW5BZGRyfVxuJHtjaXR5LnRvVXBwZXJDYXNlKCl9IC0gJHtkLnBpbn0gLSAke2QuY291bnRyeS50b1VwcGVyQ2FzZSgpfWAsIHN0eWxlczogeyBmb250U3R5bGU6ICdib2xkJyB9IH0NCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGRvYy5hdXRvVGFibGUoew0KICAgICAgICAgICAgICAgIGhlYWQ6IFtbJ05hbWUgJiBDb250YWN0JywgJ0NvbnRyaWJ1dGlvbicsICdBZGRyZXNzIERldGFpbHMnXV0sDQogICAgICAgICAgICAgICAgYm9keTogdGFibGVEYXRhLA0KICAgICAgICAgICAgICAgIHN0YXJ0WTogNTAsIC8vIFB1c2hlZCBkb3duIHNpZ25pZmljYW50bHkgdG8gcHJldmVudCBhbnkgb3ZlcmxhcA0KICAgICAgICAgICAgICAgIG1hcmdpbjogeyB0b3A6IDUwIH0sIC8vIEVuc3VyZXMgc3Vic2VxdWVudCBwYWdlcyBkb24ndCBvdmVybGFwIGhlYWRlcg0KICAgICAgICAgICAgICAgIHRoZW1lOiAnZ3JpZCcsDQogICAgICAgICAgICAgICAgaGVhZFN0eWxlczogew0KICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IFswLCA1MSwgMTAyXSwNCiAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiAyNTUsDQogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxMSwNCiAgICAgICAgICAgICAgICAgICAgZm9udFN0eWxlOiAnYm9sZCcsDQogICAgICAgICAgICAgICAgICAgIGNlbGxQYWRkaW5nOiA0LA0KICAgICAgICAgICAgICAgICAgICBoYWxpZ246ICdjZW50ZXInDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBib2R5U3R5bGVzOiB7DQogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxMCwNCiAgICAgICAgICAgICAgICAgICAgY2VsbFBhZGRpbmc6IDQsDQogICAgICAgICAgICAgICAgICAgIGxpbmVDb2xvcjogWzE4MCwgMTgwLCAxODBdLA0KICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IFswLCAwLCAwXSAvLyBTaGFycCBibGFjayB0ZXh0DQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBjb2x1bW5TdHlsZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgMDogeyBjZWxsV2lkdGg6IDU1IH0sDQogICAgICAgICAgICAgICAgICAgIDE6IHsgY2VsbFdpZHRoOiA0MCB9LA0KICAgICAgICAgICAgICAgICAgICAyOiB7IGNlbGxXaWR0aDogJ2F1dG8nIH0NCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGRpZERyYXdQYWdlOiBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBQZXJtYW5lbnQgSGVhZGVyIGZvciBBbGwgUGFnZXMNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDE4KTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigwLCA1MSwgMTAyKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQodW5kZWZpbmVkLCAnYm9sZCcpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dCgiTXlsYWkgTWFoYSBQZXJpYXlhdmEgQW51c2hhbSBUcnVzdCIsIDEwNSwgMTUsIHsgYWxpZ246ICdjZW50ZXInIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFN0YXRzICYgVGltZXN0YW1wDQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7DQogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMTAwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQodW5kZWZpbmVkLCAnYm9sZCcpOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgVW5pcXVlIERvbm9yIExpc3QgQ3JlYXRlZCBvbjogJHt0aW1lc3RhbXB9YCwgMTQsIDI1KTsNCg0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTMpOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDAsIDEwMiwgMCk7IC8vIERhcmsgR3JlZW4gZm9yIHRvdGFsIGNvdW50DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBUb3RhbCBVbmlxdWUgRG9ub3JzOiAke2Rvbm9ycy5sZW5ndGh9YCwgMTQsIDMzKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAodGl0bGUzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigxNTAsIDAsIDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQodGl0bGUzLCAxNCwgNDApOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gU3R5bGlzaCBEaXZpZGVyIExpbmUNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldERyYXdDb2xvcigwLCA1MSwgMTAyKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldExpbmVXaWR0aCgxKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLmxpbmUoMTQsIDQzLCAxOTYsIDQzKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBGb290ZXINCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZVNpemUgPSBkb2MuaW50ZXJuYWwucGFnZVNpemU7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VIZWlnaHQgPSBwYWdlU2l6ZS5oZWlnaHQgPyBwYWdlU2l6ZS5oZWlnaHQgOiBwYWdlU2l6ZS5nZXRIZWlnaHQoKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigxNTApOw0KICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCh1bmRlZmluZWQsICdib2xkJyk7DQogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJJbnRlcm5hbCBEb2N1bWVudCIsIDE0LCBwYWdlSGVpZ2h0IC0gMTApOw0KICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgUGFnZSAke2RhdGEucGFnZU51bWJlcn1gLCAxOTYsIHBhZ2VIZWlnaHQgLSAxMCwgeyBhbGlnbjogJ3JpZ2h0JyB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgY29uc3QgZmlsZVN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKS5zbGljZSgwLCAxOSk7DQogICAgICAgICAgICBkb2Muc2F2ZShgTU1QVF9Eb25vcl9MaXN0XyR7ZmlsZVN0YW1wfS5wZGZgKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgd2luZG93Lm9ubG9hZCA9IGluaXRpYWxpemVNTVBUOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHNjcmlwdD4NCiAgICAgICAgZnVuY3Rpb24gYnVpbGRGWUluZGV4KCkgew0KICAgICAgICAgICAgLy8gMS4gSW5pdGlhbCBEYXRhIENoZWNrDQogICAgICAgICAgICBpZiAodHlwZW9mIEdMT0JBTF9EQl9MSU5FUyA9PT0gJ3VuZGVmaW5lZCcgfHwgR0xPQkFMX0RCX0xJTkVTLmxlbmd0aCA8PSAxKSByZXR1cm47DQoNCiAgICAgICAgICAgIC8vIDIuIFNFQ1VSSVRZIENIRUNLOiBPbmx5IGRpc2FibGUgaWYgcmVzdHJpY3RlZCBhYm92ZSByZWNvcmQgMQ0KICAgICAgICAgICAgLy8gSWYgTWluUmVjb3JkTnVtYmVyIGlzIDEsIGl0IG1lYW5zICJzdGFydCBmcm9tIGJlZ2lubmluZyIsIHNvIHRoZXkgYXJlIE5PVCByZXN0cmljdGVkLg0KICAgICAgICAgICAgY29uc3QgbWluQWxsb3dlZCA9IHdpbmRvdy5NTVBUX01JTl9BTExPV0VEX1JOIHx8IDA7DQogICAgICAgICAgICBjb25zdCByYWRpb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgnZnlfZmlsdGVyJyk7DQoNCiAgICAgICAgICAgIGlmIChtaW5BbGxvd2VkID4gMSkgeyAvLyA8LS0tIEZJWEVEOiBPbmx5IGxvY2sgaWYgbnVtYmVyIGlzIGdyZWF0ZXIgdGhhbiAxDQogICAgICAgICAgICAgICAgcmFkaW9zLmZvckVhY2gociA9PiB7DQogICAgICAgICAgICAgICAgICAgIHIuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICByLnBhcmVudEVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICIwLjUiOw0KICAgICAgICAgICAgICAgICAgICByLnBhcmVudEVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICJub25lIjsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU2VjdXJpdHk6IEZZIEZpbHRlciBkaXNhYmxlZCAoUmVzdHJpY3RlZCBVc2VyIGxvY2tlZCB0byBpbmRleDogIiArIG1pbkFsbG93ZWQgKyAiKSIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gRW5zdXJlIGJ1dHRvbnMgYXJlIEVOQUJMRUQgaWYgdGhleSBhcmVuJ3QgcmVzdHJpY3RlZA0KICAgICAgICAgICAgICAgIHJhZGlvcy5mb3JFYWNoKHIgPT4gew0KICAgICAgICAgICAgICAgICAgICByLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIHIucGFyZW50RWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICAgICAgICAgICAgICByLnBhcmVudEVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICJhdXRvIjsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gMy4gSW5pdGlhbGl6ZSBSYW5nZXMgZm9yIGZ1bGwgYWNjZXNzIHVzZXJzDQogICAgICAgICAgICBmeVJhbmdlcyA9IHsgIkFMTCI6IHsgbWluOiAxLCBtYXg6IEdMT0JBTF9EQl9MSU5FUy5sZW5ndGggLSAxIH0gfTsNCg0KICAgICAgICAgICAgLy8gNC4gQnVpbGQgdGhlIFllYXIgTWFwDQogICAgICAgICAgICBHTE9CQUxfREJfTElORVMuZm9yRWFjaCgobGluZSwgaWR4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gMCkgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGNvbHNbMV0gPyBjb2xzWzFdLnRyaW0oKSA6ICIiOw0KDQogICAgICAgICAgICAgICAgaWYgKGRhdGVTdHIuaW5jbHVkZXMoJy0nKSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVTdHIuc3BsaXQoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gcGFyc2VJbnQocGFydHNbMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IHBhcnNlSW50KHBhcnRzWzJdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0WSA9IChtIDw9IDMpID8geSAtIDEgOiB5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnlLZXkgPSBzdGFydFkudG9TdHJpbmcoKS5zbGljZSgtMikgKyAiLSIgKyAoc3RhcnRZICsgMSkudG9TdHJpbmcoKS5zbGljZSgtMik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZnlSYW5nZXNbZnlLZXldKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnlSYW5nZXNbZnlLZXldID0geyBtaW46IGlkeCwgbWF4OiBpZHggfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnlSYW5nZXNbZnlLZXldLm1heCA9IGlkeDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyA1LiBBVVRPLVNFTEVDVCBDVVJSRU5UIEZZIChKYW4gMjAyNiBpcyBGWSAyNS0yNikNCiAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGNvbnN0IGN1ck1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7DQogICAgICAgICAgICBjb25zdCBjdXJZZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WSA9IChjdXJNb250aCA8PSAzKSA/IGN1clllYXIgLSAxIDogY3VyWWVhcjsNCiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGWUtleSA9IHN0YXJ0WS50b1N0cmluZygpLnNsaWNlKC0yKSArICItIiArIChzdGFydFkgKyAxKS50b1N0cmluZygpLnNsaWNlKC0yKTsNCg0KICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7DQogICAgICAgICAgICByYWRpb3MuZm9yRWFjaChyID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoci52YWx1ZSA9PT0gY3VycmVudEZZS2V5KSB7DQogICAgICAgICAgICAgICAgICAgIHIuY2hlY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGFwcGx5RllGaWx0ZXIoY3VycmVudEZZS2V5KTsNCiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBGYWxsYmFjayBpZiBjdXJyZW50IHllYXIgaXMgZW1wdHkNCiAgICAgICAgICAgIGlmICghZm91bmQpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBhbGxSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImZ5X2ZpbHRlciJdW3ZhbHVlPSJBTEwiXScpOw0KICAgICAgICAgICAgICAgIGlmIChhbGxSYWRpbykgew0KICAgICAgICAgICAgICAgICAgICBhbGxSYWRpby5jaGVja2VkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYXBwbHlGWUZpbHRlcigiQUxMIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gYXBwbHlGWUZpbHRlcih2YWwpIHsNCiAgICAgICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNfc2xpZGVyJyk7DQogICAgICAgICAgICBjb25zdCBybkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdfcmVjX2J0bicpOw0KICAgICAgICAgICAgaWYgKCFzbGlkZXIpIHJldHVybjsNCg0KICAgICAgICAgICAgLy8gMS4gQ0FMQ1VMQVRFIENVUlJFTlQgRlkgKEphbiAyMDI2IGlzIEZZIDI1LTI2KQ0KICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgY3VyTW9udGggPSB0b2RheS5nZXRNb250aCgpICsgMTsNCiAgICAgICAgICAgIGNvbnN0IGN1clllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgY29uc3Qgc3RhcnRZID0gKGN1ck1vbnRoIDw9IDMpID8gY3VyWWVhciAtIDEgOiBjdXJZZWFyOw0KICAgICAgICAgICAgY29uc3QgY3VycmVudEZZS2V5ID0gc3RhcnRZLnRvU3RyaW5nKCkuc2xpY2UoLTIpICsgIi0iICsgKHN0YXJ0WSArIDEpLnRvU3RyaW5nKCkuc2xpY2UoLTIpOw0KDQogICAgICAgICAgICAvLyAyLiBSTiBCVVRUT04gU0FGRVRZDQogICAgICAgICAgICBpZiAocm5CdG4pIHsNCiAgICAgICAgICAgICAgICBpZiAodmFsID09PSAiQUxMIiB8fCB2YWwgPT09IGN1cnJlbnRGWUtleSkgew0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcm5CdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICBybkJ0bi5zdHlsZS5vcGFjaXR5ID0gIjAuMyI7DQogICAgICAgICAgICAgICAgICAgIHJuQnRuLnN0eWxlLmN1cnNvciA9ICJub3QtYWxsb3dlZCI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyAzLiBGSUxURVIgTE9HSUMNCiAgICAgICAgICAgIGlmICh2YWwgPT09ICJSUiIpIHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlYWR5SW5kaWNlcyA9PT0gJ3VuZGVmaW5lZCcgfHwgcmVhZHlJbmRpY2VzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBhbGVydCgiTm8gUmVhZHkgUmVjZWlwdHMgZm91bmQhIik7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZnlfZmlsdGVyIl1bdmFsdWU9IkFMTCJdJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChhbGxSYWRpbykgYWxsUmFkaW8uY2hlY2tlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGFwcGx5RllGaWx0ZXIoIkFMTCIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gLS0tIENIQU5HRSBIRVJFOiBESVNBQkxFIElOU1RFQUQgT0YgSElERSAtLS0NCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIjsgLy8gS2VlcCBpdCB2aXNpYmxlDQogICAgICAgICAgICAgICAgc2xpZGVyLmRpc2FibGVkID0gdHJ1ZTsgICAgICAgICAgICAgIC8vIE1ha2UgaXQgdW5jbGlja2FibGUNCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUub3BhY2l0eSA9ICIwLjQiOyAgICAgICAgLy8gR3JheSBpdCBvdXQgdmlzdWFsbHkNCiAgICAgICAgICAgICAgICBzbGlkZXIuc3R5bGUuY3Vyc29yID0gIm5vdC1hbGxvd2VkIjsNCg0KICAgICAgICAgICAgICAgIHNsaWRlci5taW4gPSAwOw0KICAgICAgICAgICAgICAgIHNsaWRlci5tYXggPSByZWFkeUluZGljZXMubGVuZ3RoIC0gMTsNCiAgICAgICAgICAgICAgICBzbGlkZXIudmFsdWUgPSAwOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQocmVhZHlJbmRpY2VzWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIC0tLSBSRVNUT1JFIFNMSURFUiBGT1IgTk9STUFMIFZJRVdTIC0tLQ0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOw0KICAgICAgICAgICAgICAgIHNsaWRlci5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS5vcGFjaXR5ID0gIjEiOw0KICAgICAgICAgICAgICAgIHNsaWRlci5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7DQoNCiAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IChmeVJhbmdlcyAmJiBmeVJhbmdlc1t2YWxdKSA/IGZ5UmFuZ2VzW3ZhbF0gOiAoZnlSYW5nZXMgPyBmeVJhbmdlc1siQUxMIl0gOiBudWxsKTsNCg0KICAgICAgICAgICAgICAgIGlmIChyYW5nZSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmbG9vciA9ICh3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiAmJiB3aW5kb3cuTU1QVF9NSU5fQUxMT1dFRF9STiA+IHJhbmdlLm1pbikNCiAgICAgICAgICAgICAgICAgICAgICAgID8gd2luZG93Lk1NUFRfTUlOX0FMTE9XRURfUk4NCiAgICAgICAgICAgICAgICAgICAgICAgIDogcmFuZ2UubWluOw0KDQogICAgICAgICAgICAgICAgICAgIHNsaWRlci5taW4gPSBmbG9vcjsNCiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm1heCA9IHJhbmdlLm1heDsNCiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnZhbHVlID0gcmFuZ2UubWF4Ow0KICAgICAgICAgICAgICAgICAgICBkaXNwbGF5UmVjb3JkKHNsaWRlci52YWx1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gRml4ZWQgQXJyb3cgTmF2aWdhdGlvbiBmb3IgUlIgTW9kZQ0KICAgICAgICBmdW5jdGlvbiBtb3ZlRllSZWNvcmQoZGlyZWN0aW9uKSB7DQogICAgICAgICAgICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjX3NsaWRlcicpOw0KICAgICAgICAgICAgY29uc3QgcmFkaW9DaGVja2VkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZnlfZmlsdGVyIl06Y2hlY2tlZCcpOw0KICAgICAgICAgICAgaWYgKCFzbGlkZXIgfHwgIXJhZGlvQ2hlY2tlZCkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZE1vZGUgPSByYWRpb0NoZWNrZWQudmFsdWU7DQogICAgICAgICAgICBjb25zdCBuZXdWYWwgPSBwYXJzZUludChzbGlkZXIudmFsdWUpICsgZGlyZWN0aW9uOw0KDQogICAgICAgICAgICBpZiAobmV3VmFsID49IHBhcnNlSW50KHNsaWRlci5taW4pICYmIG5ld1ZhbCA8PSBwYXJzZUludChzbGlkZXIubWF4KSkgew0KICAgICAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IG5ld1ZhbDsNCiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRNb2RlID09PSAiUlIiKSB7DQogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQocmVhZHlJbmRpY2VzW25ld1ZhbF0pOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGRpc3BsYXlSZWNvcmQobmV3VmFsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLyogQ29tcHJlc3NlZCBwYWRkaW5nIGZvciB0aGUgbWFpbiB3b3Jrc3BhY2UgKi8NCiAgICAgICAgYm9keSB7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNjBweCAhaW1wb3J0YW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgI3JhZGlvLWRvY2sgew0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgICAgICAgYm90dG9tOiAwOw0KICAgICAgICAgICAgbGVmdDogMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMDAyMjQ0LCAjMDA0NDg4KTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAyMHB4OyAvKiBSZWR1Y2VkIHZlcnRpY2FsIHBhZGRpbmcgKi8NCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgLTJweCAxMHB4IHJnYmEoMCwwLDAsMC4zKTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93OyAvKiBSb3cgaW5zdGVhZCBvZiBDb2x1bW4gKi8NCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IC8qIFRpdGxlIGxlZnQsIENvbnRyb2xzIHJpZ2h0ICovDQogICAgICAgICAgICB6LWluZGV4OiAxMDAwMDsNCiAgICAgICAgICAgIGhlaWdodDogNDVweDsgLyogRml4ZWQgc21hbGwgaGVpZ2h0ICovDQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnJhZGlvLXRpdGxlIHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICNmZjk5MzM7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgICAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLnJhZGlvLWNvbnRyb2xzIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAjcmFkaW9TZWxlY3Qgew0KICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgd2lkdGg6IDE4MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAyOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnJhZGlvLWJ0biB7DQogICAgICAgICAgICBwYWRkaW5nOiAwIDEycHg7DQogICAgICAgICAgICBoZWlnaHQ6IDI4cHg7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDExcHg7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLXBsYXkgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzI4YTc0NTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5idG4tc3RvcCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZDk1MzRmOw0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgaWQ9InJhZGlvLWRvY2siPg0KICAgICAgICA8ZGl2IGNsYXNzPSJyYWRpby10aXRsZSI+SGluZHUgRGV2b3Rpb25hbCBSYWRpbzwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InJhZGlvLWNvbnRyb2xzIj4NCiAgICAgICAgICAgIDxzZWxlY3QgaWQ9InJhZGlvU2VsZWN0Ij4NCiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIExvYWRpbmcgLS08L29wdGlvbj4NCiAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icmFkaW8tYnRuIGJ0bi1wbGF5IiBvbmNsaWNrPSJwbGF5UmFkaW8oKSI+UExBWTwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icmFkaW8tYnRuIGJ0bi1zdG9wIiBvbmNsaWNrPSJzdG9wUmFkaW8oKSI+U1RPUDwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICANCiAgICAgICAgPGF1ZGlvIGlkPSJyYWRpb1BsYXllciIgY3Jvc3NvcmlnaW49ImFub255bW91cyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvYXVkaW8+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KDQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFJhZGlvcyh0b2tlbikgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vY29udGVudC5kcm9wYm94YXBpLmNvbS8yL2ZpbGVzL2Rvd25sb2FkJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IE1NUFRfUkFESU9fRklMRSB9KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjazogSWYgcGVyc29uYWxpemVkIGZpbGUgaXMgbWlzc2luZywgZmV0Y2ggdGhlIGRlZmF1bHQgb25lDQogICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlBlcnNvbmFsaXplZCByYWRpbyBub3QgZm91bmQsIGxvYWRpbmcgZGVmYXVsdC4uLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRva2VuLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6ICcvU2V0dGluZ3MvUmFkaW9zLnR4dCcgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcigiTm8gUmFkaW8gRmlsZSIpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7DQogICAgICAgICAgICAgICAgY29uc3Qgc3RhdGlvbnMgPSB0ZXh0LnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJywnKSk7DQogICAgICAgICAgICAgICAgY29uc3QgcmFkaW9Ecm9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvU2VsZWN0Jyk7DQoNCiAgICAgICAgICAgICAgICByYWRpb0Ryb3AuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IFN0YXRpb24gLS08L29wdGlvbj4nICsNCiAgICAgICAgICAgICAgICAgICAgc3RhdGlvbnMubWFwKHMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW25hbWUsIHVybF0gPSBzLnNwbGl0KCcsJyk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxvcHRpb24gdmFsdWU9IiR7dXJsLnRyaW0oKX0iPiR7bmFtZS50cmltKCl9PC9vcHRpb24+YDsNCiAgICAgICAgICAgICAgICAgICAgfSkuam9pbignJyk7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFkaW9TZWxlY3QnKS5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj5SYWRpbyBVbmF2YWlsYWJsZTwvb3B0aW9uPic7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIGZ1bmN0aW9uIHBsYXlSYWRpbygpIHsNCiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1BsYXllcicpOw0KICAgICAgICAgICAgY29uc3Qgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvU2VsZWN0Jyk7DQogICAgICAgICAgICBjb25zdCB1cmwgPSBzZWwudmFsdWU7DQogICAgICAgICAgICBjb25zdCBuYW1lID0gc2VsLm9wdGlvbnNbc2VsLnNlbGVjdGVkSW5kZXhdLnRleHQ7DQoNCiAgICAgICAgICAgIGlmICghdXJsKSByZXR1cm47DQoNCiAgICAgICAgICAgIHBsYXllci5zcmMgPSB1cmw7DQogICAgICAgICAgICBwbGF5ZXIucGxheSgpDQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAvLyBPcHRpb25hbDogVXBkYXRlIHlvdXIgYXBwJ3MgbWFpbiBzdGF0dXMgdGV4dCBpZiB5b3UgaGF2ZSBvbmUNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlBsYXlpbmc6ICIgKyBuYW1lKTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IGFsZXJ0KCJTdGF0aW9uIG9mZmxpbmUuIFRyeSBhbm90aGVyLiIpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHN0b3BSYWRpbygpIHsNCiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1BsYXllcicpOw0KICAgICAgICAgICAgcGxheWVyLnBhdXNlKCk7DQogICAgICAgICAgICBwbGF5ZXIuc3JjID0gIiI7DQogICAgICAgIH0NCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLnBhbmNoYW5nLW91dGVyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDE1cHg7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLnBhbmNoYW5nLWhhbGYgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnBhbmNoYW5nLW1haW4tdGl0bGUgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7DQogICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICB9DQoNCiAgICAgICAgLnAtc3ViLWhlYWQgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4Ow0KICAgICAgICAgICAgY29sb3I6ICMwMDMzNjY7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIG1hcmdpbjogMTVweCAwIDhweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAzcHg7DQogICAgICAgIH0NCg0KICAgICAgICAucC1ldmVudC1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjlmMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgICAgIC8qIERhdGEgc3BlY2lmaWMgc3R5bGluZyAqLw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgICAgICB9DQoNCiAgICAgICAgLnAtY2VudGVyLWJveCB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmNGZmOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzAwMzM2NjsNCiAgICAgICAgfQ0KICAgICAgICAvKiBCb2xkIENvbG9yIENvZGluZyBmb3IgRGF0YSAqLw0KICAgICAgICAuYy1kYXRlIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuYy1uYW1lIHsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwMGZmOw0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogICAgICAgIH0NCg0KICAgICAgICAuYy1leHRyYSB7DQogICAgICAgICAgICBjb2xvcjogIzJlN2QzMjsNCiAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICAgICAgfQ0KDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkgew0KICAgICAgICAgICAgLnBhbmNoYW5nLW91dGVyIHsNCiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAucC1ldmVudC1ib3ggew0KICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9InBhbmNoYW5nLW91dGVyIj4NCiAgICAgICAgPGRpdiBjbGFzcz0icGFuY2hhbmctaGFsZiI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1tYWluLXRpdGxlIj5VcGNvbWluZyBBbnVzaGFtIERhdGVzPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJkaXNwLWFudXNoYW0iPjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0icC1zdWItaGVhZCI+8J+Vie+4jyBQZXJpeWF2YSBKYXlhbnRoaTwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGlzcC1qYXlhbnRoaSI+PC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLXN1Yi1oZWFkIj7wn5WJ77iPIFBlcml5YXZhIEFyYWRoYW5hPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGlkPSJkaXNwLWFyYWRoYW5hIj48L2Rpdj4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0icGFuY2hhbmctaGFsZiI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW5jaGFuZy1tYWluLXRpdGxlIj5VcGNvbWluZyBFa2FkYXNoaSBEYXRlczwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZGlzcC1la2FkYXNoaSI+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZFBhbmNoYW5nU3VpdGUoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogcCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdCA9IGQuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBub3cuc2V0SG91cnMoMCwgMCwgMCwgMCk7DQoNCiAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXRMaW5lcyhwYXRoKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHBhdGggfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR4dC5yZXBsYWNlKC88YnJccypcLz8+L2dpLCAnXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKS5zcGxpdCgnXG4nKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiAwKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyAxLiBBTlVTSEFNDQogICAgICAgICAgICAgICAgY29uc3Qgcm93czEgPSBhd2FpdCBnZXRMaW5lcygnL1BhbmNoYW5nL0FudXNoYW0vMC4xLmh0bWwnKTsNCiAgICAgICAgICAgICAgICBsZXQgaDEgPSAiIjsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyb3dzMVtpXS5tYXRjaCgvXGR7MSwyfS1cdystXGR7NH0vKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKHJvd3MxW2ldKSA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoMSArPSBgPGRpdiBjbGFzcz0icC1ldmVudC1ib3giPjxzcGFuIGNsYXNzPSJjLWRhdGUiPiR7cm93czFbaV19PC9zcGFuPiA8c3BhbiBjbGFzcz0iYy1leHRyYSI+JHtyb3dzMVtpICsgMV0gfHwgJyd9PC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3AtYW51c2hhbScpLmlubmVySFRNTCA9IGgxIHx8ICJObyBVcGNvbWluZyI7DQoNCiAgICAgICAgICAgICAgICAvLyAyLiBKQVlBTlRISQ0KICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MzID0gYXdhaXQgZ2V0TGluZXMoJy9QYW5jaGFuZy9BbnVzaGFtLzAuMy5odG1sJyk7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzMy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAocm93czNbaV0ubWF0Y2goL1xkezEsMn0tXHcrLVxkezR9LykgJiYgbmV3IERhdGUocm93czNbaV0pID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSAocm93czNbaSArIDFdIHx8ICIiKS5yZXBsYWNlKC9cL1xkezJ9XC9cZHs0fS9nLCAnJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcC1qYXlhbnRoaScpLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJwLWV2ZW50LWJveCBwLWNlbnRlci1ib3giPjxzcGFuIGNsYXNzPSJjLWRhdGUiPiR7cm93czNbaV19IChTYXQpPC9zcGFuPiA8c3BhbiBjbGFzcz0iYy1leHRyYSI+VGltaW5nOiAke3RpbWV9PC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDMuIEFSQURIQU5BDQogICAgICAgICAgICAgICAgY29uc3Qgcm93czQgPSBhd2FpdCBnZXRMaW5lcygnL1BhbmNoYW5nL0FudXNoYW0vMC40Lmh0bWwnKTsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3M0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyb3dzNFtpXS5tYXRjaCgvXGR7MSwyfS1cdystXGR7NH0vKSAmJiBuZXcgRGF0ZShyb3dzNFtpXSkgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcC1hcmFkaGFuYScpLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJwLWV2ZW50LWJveCBwLWNlbnRlci1ib3giPjxzcGFuIGNsYXNzPSJjLWRhdGUiPiR7cm93czRbaV19IChNb24pPC9zcGFuPjwvZGl2PmA7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIDQuIEVLQURBU0hJDQogICAgICAgICAgICAgICAgY29uc3Qgcm93c0UgPSBhd2FpdCBnZXRMaW5lcygnL1BhbmNoYW5nL0VrYWRhc2hpLzAuMS5odG1sJyk7DQogICAgICAgICAgICAgICAgbGV0IGhFID0gIiI7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzRS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHJvd3NFW2ldLm1hdGNoKC8oXGR7MSwyfSktKFxkezJ9fFthLXpBLVpdKyktKFxkezR9KS8pOw0KICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRQYXJ0cyA9IHJvd3NFW2ldLnNwbGl0KCcgJylbMF0uc3BsaXQoJy0nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR0ID0gbmV3IERhdGUoZFBhcnRzWzJdLCBuZXcgRGF0ZShEYXRlLnBhcnNlKGRQYXJ0c1sxXSArICIgMSwgMjAxMiIpKS5nZXRNb250aCgpLCBkUGFydHNbMF0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHQgPj0gbm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaEUgKz0gYDxkaXYgY2xhc3M9InAtZXZlbnQtYm94Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImMtZGF0ZSI+JHtyb3dzRVtpXX08L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJjLW5hbWUiPiR7cm93c0VbaSArIDFdIHx8ICcnfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImMtZXh0cmEiPiR7cm93c0VbaSArIDJdIHx8ICcnfTwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAyOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwLWVrYWRhc2hpJykuaW5uZXJIVE1MID0gaEUgfHwgIk5vIFVwY29taW5nIjsNCg0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygiTG9hZCBGYWlsIiwgZSk7IH0NCiAgICAgICAgfQ0KICAgICAgICBsb2FkUGFuY2hhbmdTdWl0ZSgpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAuZmxhc2hiYWNrLWNvbnRhaW5lciB7DQogICAgICAgICAgICBtYXJnaW46IDIwcHggYXV0bzsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmYWZhOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDk1JTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2staGVhZGVyLXdyYXBwZXIgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtY29udHJvbHMgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgICAgIGdhcDogMTVweDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2staGVhZGVyIHsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdHZW9yZ2lhJywgc2VyaWY7DQogICAgICAgICAgICBmb250LXNpemU6IDI2cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgIH0NCg0KICAgICAgICAvKiBKdW1wIHRvIERhdGUgU3R5bGluZyAqLw0KICAgICAgICAuanVtcC1ib3ggew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBnYXA6IDhweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgICAgICAgICBwYWRkaW5nOiA1cHggMTJweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5qdW1wLWJveCBzZWxlY3Qgew0KICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgICAgICBvdXRsaW5lOiBub25lOw0KICAgICAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAudmlldy10b2dnbGUgew0KICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmRmMmYyOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4IDE1cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDE1cHg7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLnZpZXctdG9nZ2xlIGxhYmVsIHsNCiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgICAgIGdhcDogNXB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtYnRuIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM4MDAwMDA7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogMzVweDsNCiAgICAgICAgICAgIGhlaWdodDogMzVweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWJ0bjpob3ZlciB7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmOTkzMzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAuZmxhc2hiYWNrLWdyaWQgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgICAgIGdhcDogMjVweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5mbGFzaGJhY2stY2FyZCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgbWF4LXdpZHRoOiA4NTBweDsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDIwcHggcmdiYSgwLDAsMCwwLjEpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5mbGFzaGJhY2stY2FyZCBoNCB7DQogICAgICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDEycHggMDsNCiAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICNmZjk5MzM7DQogICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4Ow0KICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1pbWctd3JhcHBlciB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxMnB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmZsYXNoYmFjay1pbWcgew0KICAgICAgICAgICAgd2lkdGg6IDE5MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxNTBweDsNCiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IDAuM3M7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmZsYXNoYmFjay1pbWc6aG92ZXIgew0KICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7DQogICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZmY5OTMzOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgew0KICAgICAgICAgICAgLmZsYXNoYmFjay1oZWFkZXIgew0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLmZsYXNoYmFjay1pbWcgew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxNDBweDsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDExMHB4Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAubmF2LWNvbnRyb2xzIHsNCiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9ImZsYXNoYmFjay1jb250YWluZXIiIGlkPSJmbGFzaGJhY2tTZWN0aW9uIiBzdHlsZT0iZGlzcGxheTpub25lOyI+DQogICAgICAgIDxkaXYgY2xhc3M9ImZsYXNoYmFjay1oZWFkZXItd3JhcHBlciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29udHJvbHMiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9ImNoYW5nZUZsYXNoYmFja0RhdGUoLTEpIj7il4A8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJmbGFzaGJhY2tUaXRsZSIgY2xhc3M9ImZsYXNoYmFjay1oZWFkZXIiPvCfjp7vuI8gVHJ1c3QgTWVtb3JpZXM6IE9uIFRoaXMgRGF5PC9kaXY+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgb25jbGljaz0iY2hhbmdlRmxhc2hiYWNrRGF0ZSgxKSI+4pa2PC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBmbGV4LXdyYXA6IHdyYXA7IGp1c3RpZnktY29udGVudDogY2VudGVyOyI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ianVtcC1ib3giPg0KICAgICAgICAgICAgICAgICAgICDwn5OFIEp1bXAgdG86DQogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imp1bXBEYXkiPjwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJqdW1wTW9udGgiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMCI+SmFuPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxIj5GZWI8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjIiPk1hcjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMyI+QXByPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI0Ij5NYXk8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjUiPkp1bjwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNiI+SnVsPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI3Ij5BdWc8L29wdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjgiPlNlcDwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iOSI+T2N0PC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMCI+Tm92PC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxMSI+RGVjPC9vcHRpb24+DQogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InRlbGVwb3J0VG9EYXRlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4MDAwMDA7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czoxMHB4OyBwYWRkaW5nOjJweCA4cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MTJweDsiPkdPPC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ2aWV3LXRvZ2dsZSI+DQogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InZpZXdNb2RlIiB2YWx1ZT0iMyIgY2hlY2tlZCBvbmNsaWNrPSJzZXRWaWV3TW9kZSgzKSI+IFN1bW1hcnk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJ2aWV3TW9kZSIgdmFsdWU9ImFsbCIgb25jbGljaz0ic2V0Vmlld01vZGUoJ2FsbCcpIj4gQWxsPC9sYWJlbD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBpZD0iZmxhc2hiYWNrR3JpZCIgY2xhc3M9ImZsYXNoYmFjay1ncmlkIj48L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGxldCBmbGFzaGJhY2tPZmZzZXQgPSAwOw0KICAgICAgICBsZXQgY3VycmVudFZpZXdMaW1pdCA9IDM7DQoNCiAgICAgICAgLy8gSW5pdGlhbGl6ZSBEYXkgZHJvcGRvd24gKDEtMzEpDQogICAgICAgIGNvbnN0IGRheVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wRGF5Jyk7DQogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDMxOyBpKyspIHsNCiAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgIG9wdC52YWx1ZSA9IGk7IG9wdC5pbm5lckhUTUwgPSBpOw0KICAgICAgICAgICAgZGF5U2VsZWN0LmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzZXRWaWV3TW9kZShtb2RlKSB7DQogICAgICAgICAgICBjdXJyZW50Vmlld0xpbWl0ID0gbW9kZTsNCiAgICAgICAgICAgIGxvYWREeW5hbWljRmxhc2hiYWNrcygpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gY2hhbmdlRmxhc2hiYWNrRGF0ZShvZmZzZXQpIHsNCiAgICAgICAgICAgIGZsYXNoYmFja09mZnNldCArPSBvZmZzZXQ7DQogICAgICAgICAgICBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHRlbGVwb3J0VG9EYXRlKCkgew0KICAgICAgICAgICAgY29uc3QgZCA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wRGF5JykudmFsdWUpOw0KICAgICAgICAgICAgY29uc3QgbSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqdW1wTW9udGgnKS52YWx1ZSk7DQogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG0sIGQpOw0KDQogICAgICAgICAgICAvLyBDYWxjdWxhdGUgZGlmZmVyZW5jZSBpbiBkYXlzIHRvIHNldCB0aGUgb2Zmc2V0DQogICAgICAgICAgICBjb25zdCBkaWZmVGltZSA9IHRhcmdldC5nZXRUaW1lKCkgLSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkpLmdldFRpbWUoKTsNCiAgICAgICAgICAgIGZsYXNoYmFja09mZnNldCA9IE1hdGgucm91bmQoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpOw0KICAgICAgICAgICAgbG9hZER5bmFtaWNGbGFzaGJhY2tzKCk7DQogICAgICAgIH0NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkRHluYW1pY0ZsYXNoYmFja3MoKSB7DQogICAgICAgICAgICBjb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYXNoYmFja0dyaWQnKTsNCiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2hiYWNrU2VjdGlvbicpOw0KICAgICAgICAgICAgY29uc3QgdGl0bGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmxhc2hiYWNrVGl0bGUnKTsNCiAgICAgICAgICAgIGNvbnN0IGRvbWFpbiA9ICJodHRwczovL3d3dy5nYW5lc2FzYXJtYS5jb20iOw0KICAgICAgICAgICAgY29uc3QgVGltZWxpbmVVUkxfRmxhc2ggPSAiaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3NjbC9maS9yZjg1ZWxrejVmYzNjbDFoOGtjY2MvVGltZUxpbmUudHh0P3Jsa2V5PXVta2gwcjd3dGY3dWx1M3J6cXpjZ2IxeWMmZGw9MSI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICB0YXJnZXREYXRlLnNldERhdGUodGFyZ2V0RGF0ZS5nZXREYXRlKCkgKyBmbGFzaGJhY2tPZmZzZXQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgbW0gPSBTdHJpbmcodGFyZ2V0RGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkZCA9IFN0cmluZyh0YXJnZXREYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkb3RQYXR0ZXJuID0gYC4ke21tfS4ke2RkfWA7DQogICAgICAgICAgICAgICAgY29uc3QgZGFzaFBhdHRlcm4gPSBgLSR7bW19LSR7ZGR9YDsNCg0KICAgICAgICAgICAgICAgIC8vIFN5bmMgRHJvcGRvd25zIHdpdGggY3VycmVudCB2aWV3aW5nIGRhdGUNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanVtcERheScpLnZhbHVlID0gdGFyZ2V0RGF0ZS5nZXREYXRlKCk7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2p1bXBNb250aCcpLnZhbHVlID0gdGFyZ2V0RGF0ZS5nZXRNb250aCgpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgaXNUb2RheSA9ICh0YXJnZXREYXRlLmdldE1vbnRoKCkgPT09IG5vdy5nZXRNb250aCgpICYmIHRhcmdldERhdGUuZ2V0RGF0ZSgpID09PSBub3cuZ2V0RGF0ZSgpKTsNCiAgICAgICAgICAgICAgICB0aXRsZURpdi5pbm5lclRleHQgPSBpc1RvZGF5ID8gYPCfjp7vuI8gVHJ1c3QgTWVtb3JpZXM6IE9uIFRoaXMgRGF5YCA6IGDwn46e77iPIE1lbW9yaWVzOiAke3RhcmdldERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1JTicsIHsgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycgfSl9YDsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goVGltZWxpbmVVUkxfRmxhc2gpOw0KICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gZGF0YS5zcGxpdCgvXHI/XG4vKTsNCg0KICAgICAgICAgICAgICAgIGdyaWQuaW5uZXJIVE1MID0gIiI7DQogICAgICAgICAgICAgICAgY29uc3QgZXZlbnRzTWFwID0ge307DQogICAgICAgICAgICAgICAgbGV0IGZvdW5kTWF0Y2ggPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICgobGluZS5pbmNsdWRlcyhkb3RQYXR0ZXJuKSB8fCBsaW5lLmluY2x1ZGVzKGRhc2hQYXR0ZXJuKSkgJiYgbGluZS5tYXRjaCgvXC4oanBnfGpwZWd8cG5nKSQvaSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdlYlBhdGggPSBsaW5lLnRyaW0oKS5yZXBsYWNlKC9cXC9nLCAnLycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbFVybCA9IGRvbWFpbiArIGVuY29kZVVSSSh3ZWJQYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gd2ViUGF0aC5zcGxpdCgnLycpLnBvcCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IGZpbGVuYW1lLm1hdGNoKC9eKFxkezR9KS8pID8gZmlsZW5hbWUubWF0Y2goL14oXGR7NH0pLylbMV0gOiAiUGFzdCI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBldmVudE5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKC9eXGR7NH1bLi1dXGR7Mn1bLi1dXGR7Mn0tLywgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xzKlxkKlxzKlwuKGpwZ3xqcGVnfHBuZykkL2ksICcnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9eXGQrXHMrLywgJycpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgJyAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnROYW1lKSBldmVudE5hbWUgPSAiVHJ1c3QgQWN0aXZpdHkiOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cEtleSA9IGAke3llYXJ9fCR7ZXZlbnROYW1lfWA7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50c01hcFtncm91cEtleV0pIGV2ZW50c01hcFtncm91cEtleV0gPSB7IHllYXIsIGV2ZW50TmFtZSwgcGhvdG9zOiBbXSB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzTWFwW2dyb3VwS2V5XS5waG90b3MucHVzaChmdWxsVXJsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kTWF0Y2ggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kTWF0Y2gpIHsNCiAgICAgICAgICAgICAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0icGFkZGluZzo0MHB4OyB3aWR0aDoxMDAlOyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDpib2xkOyBiYWNrZ3JvdW5kOndoaXRlOyBib3JkZXItcmFkaXVzOjEwcHg7Ij5ObyByZWNvcmRzIGZvdW5kIGZvciAke3RhcmdldERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1JTicsIHsgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycgfSl9LjwvZGl2PmA7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXZlbnRzTWFwKS5zb3J0KChhLCBiKSA9PiBiLnNwbGl0KCd8JylbMF0gLSBhLnNwbGl0KCd8JylbMF0pLmZvckVhY2goa2V5ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gZXZlbnRzTWFwW2tleV07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjYXJkLmNsYXNzTmFtZSA9ICdmbGFzaGJhY2stY2FyZCc7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5UGhvdG9zID0gY3VycmVudFZpZXdMaW1pdCA9PT0gJ2FsbCcgPyBncm91cC5waG90b3MgOiBncm91cC5waG90b3Muc2xpY2UoMCwgMyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+JHtncm91cC5ldmVudE5hbWV9ICR7aXNUb2RheSA/IGAoJHtncm91cC55ZWFyfSlgIDogYC0gJHtncm91cC55ZWFyfWB9PC9oND4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxhc2hiYWNrLWltZy13cmFwcGVyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGlzcGxheVBob3Rvcy5tYXAoc3JjID0+IGA8aW1nIHNyYz0iJHtzcmN9IiBjbGFzcz0iZmxhc2hiYWNrLWltZyIgb25jbGljaz0id2luZG93Lm9wZW4odGhpcy5zcmMpIiBvbmVycm9yPSJ0aGlzLnN0eWxlLmRpc3BsYXk9J25vbmUnIj5gKS5qb2luKCcnKX0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQuYXBwZW5kQ2hpbGQoY2FyZCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyB9DQogICAgICAgIH0NCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBsb2FkRHluYW1pY0ZsYXNoYmFja3MpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQoNCiAgICA8c3R5bGU+DQogICAgICAgIC5jaGl0cmFtLWNvbnRhaW5lciB7DQogICAgICAgICAgICBtYXJnaW46IDIwcHggYXV0bzsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmYWZhOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDk1JTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jaGl0cmFtLWhlYWRlciB7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnR2VvcmdpYScsIHNlcmlmOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyNnB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCAjZmY5OTMzOw0KICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jaGl0cmFtLWdyaWQgew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgICAgIGdhcDogMjBweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5jaGl0cmFtLWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgwLDAsMCwwLjEpOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjhzIGVhc2UtaW4tb3V0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmxhbmRzY2FwZS1ib3ggew0KICAgICAgICAgICAgd2lkdGg6IDQ1MHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLnBvcnRyYWl0LWJveCB7DQogICAgICAgICAgICB3aWR0aDogMzIwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1pbWcgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IGF1dG87DQogICAgICAgICAgICBtYXgtaGVpZ2h0OiA0MDBweDsNCiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW47DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAuY2hpdHJhbS1sYWJlbCB7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgfQ0KDQogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA4MDBweCkgew0KICAgICAgICAgICAgLmxhbmRzY2FwZS1ib3gsIC5wb3J0cmFpdC1ib3ggew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgICAgIG1heC13aWR0aDogNDAwcHg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1jb250YWluZXIiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWhlYWRlciI+8J+Vie+4jyBDaGl0cmEgUHVyYW5hbTwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWdyaWQiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hpdHJhbS1ib3ggbGFuZHNjYXBlLWJveCI+DQogICAgICAgICAgICAgICAgPGltZyBpZD0iaW1nX2xhbmRzY2FwZSIgc3JjPSIiIGNsYXNzPSJjaGl0cmFtLWltZyIgb25jbGljaz0id2luZG93Lm9wZW4odGhpcy5zcmMpIiB0aXRsZT0iVmlldyBGdWxsIEltYWdlIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWxhYmVsIiBpZD0ibGJsX2xhbmRzY2FwZSI+Q29ubmVjdGluZyB0byBEaXZpbmUgR2FsbGVyeS4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWJveCBwb3J0cmFpdC1ib3giPg0KICAgICAgICAgICAgICAgIDxpbWcgaWQ9ImltZ19wb3J0cmFpdCIgc3JjPSIiIGNsYXNzPSJjaGl0cmFtLWltZyIgb25jbGljaz0id2luZG93Lm9wZW4odGhpcy5zcmMpIiB0aXRsZT0iVmlldyBGdWxsIEltYWdlIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGl0cmFtLWxhYmVsIiBpZD0ibGJsX3BvcnRyYWl0Ij5Db25uZWN0aW5nIHRvIERpdmluZSBHYWxsZXJ5Li4uPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8c2NyaXB0Pg0KICAgICAgICBjb25zdCBDSElUUkFNX0NPTkZJRyA9IHsNCiAgICAgICAgICAgIGZvbGRlcjogIi9QYW5jaGFuZy9DaGl0aHJhUHVyYW5hbS8iLA0KICAgICAgICAgICAgbGFuZHNjYXBlQ291bnQ6IDQxLA0KICAgICAgICAgICAgcG9ydHJhaXRDb3VudDogODAsDQogICAgICAgICAgICBpbnRlcnZhbDogNzAwMA0KICAgICAgICB9Ow0KDQogICAgICAgIGxldCBjdXJyZW50TCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIENISVRSQU1fQ09ORklHLmxhbmRzY2FwZUNvdW50KSArIDE7DQogICAgICAgIGxldCBjdXJyZW50UCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIENISVRSQU1fQ09ORklHLnBvcnRyYWl0Q291bnQpICsgMTsNCiAgICAgICAgbGV0IGRyb3Bib3hUb2tlbiA9ICIiOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldERyb3Bib3hMaW5rKGZpbGVOYW1lKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZ2V0X3RlbXBvcmFyeV9saW5rJywgew0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywNCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBkcm9wYm94VG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aDogQ0hJVFJBTV9DT05GSUcuZm9sZGVyICsgZmlsZU5hbWUgfSkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOw0KICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmxpbms7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiTGluayBGZXRjaCBGYWlsOiIsIGZpbGVOYW1lKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gIiI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGVDaGl0cmFtKCkgew0KICAgICAgICAgICAgLy8gMS4gR2V0IEFjY2VzcyBUb2tlbiAodXNpbmcgeW91ciBnbG9iYWwgTU1QVCBjb25zdGFudHMpDQogICAgICAgICAgICBpZiAoIWRyb3Bib3hUb2tlbikgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogcCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7DQogICAgICAgICAgICAgICAgZHJvcGJveFRva2VuID0gZC5hY2Nlc3NfdG9rZW47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIDIuIFByZXBhcmUgRmlsZSBOYW1lcw0KICAgICAgICAgICAgY29uc3QgbE51bSA9IFN0cmluZyhjdXJyZW50TCkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgIGNvbnN0IHBOdW0gPSBTdHJpbmcoY3VycmVudFApLnBhZFN0YXJ0KDIsICcwJyk7DQoNCiAgICAgICAgICAgIC8vIDMuIEZldGNoIFRlbXAgTGlua3MgZnJvbSBEcm9wYm94DQogICAgICAgICAgICBjb25zdCBbbFVybCwgcFVybF0gPSBhd2FpdCBQcm9taXNlLmFsbChbDQogICAgICAgICAgICAgICAgZ2V0RHJvcGJveExpbmsoYEwke2xOdW19LmpwZ2ApLA0KICAgICAgICAgICAgICAgIGdldERyb3Bib3hMaW5rKGBQJHtwTnVtfS5qcGdgKQ0KICAgICAgICAgICAgXSk7DQoNCiAgICAgICAgICAgIC8vIDQuIFVwZGF0ZSBVSSAoTGFuZHNjYXBlKQ0KICAgICAgICAgICAgY29uc3QgbEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdfbGFuZHNjYXBlJyk7DQogICAgICAgICAgICBjb25zdCBsQm94ID0gbEltZy5wYXJlbnRFbGVtZW50Ow0KICAgICAgICAgICAgbEJveC5zdHlsZS5vcGFjaXR5ID0gMC4zOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKGxVcmwpIGxJbWcuc3JjID0gbFVybDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGJsX2xhbmRzY2FwZScpLmlubmVyVGV4dCA9IGBLYW5jaGkgTWFoYXBlcml5YXZhYDsNCiAgICAgICAgICAgICAgICBsQm94LnN0eWxlLm9wYWNpdHkgPSAxOw0KICAgICAgICAgICAgfSwgODAwKTsNCg0KICAgICAgICAgICAgLy8gNS4gVXBkYXRlIFVJIChQb3J0cmFpdCkNCiAgICAgICAgICAgIGNvbnN0IHBJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX3BvcnRyYWl0Jyk7DQogICAgICAgICAgICBjb25zdCBwQm94ID0gcEltZy5wYXJlbnRFbGVtZW50Ow0KICAgICAgICAgICAgcEJveC5zdHlsZS5vcGFjaXR5ID0gMC4zOw0KICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHBVcmwpIHBJbWcuc3JjID0gcFVybDsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGJsX3BvcnRyYWl0JykuaW5uZXJUZXh0ID0gYEthbmNoaSBNYWhhcGVyaXlhdmFgOw0KICAgICAgICAgICAgICAgIHBCb3guc3R5bGUub3BhY2l0eSA9IDE7DQogICAgICAgICAgICB9LCA4MDApOw0KDQogICAgICAgICAgICAvLyA2LiBJbmNyZW1lbnQgb3IgUmVzZXQNCiAgICAgICAgICAgIGN1cnJlbnRMID0gY3VycmVudEwgPj0gQ0hJVFJBTV9DT05GSUcubGFuZHNjYXBlQ291bnQgPyAxIDogY3VycmVudEwgKyAxOw0KICAgICAgICAgICAgY3VycmVudFAgPSBjdXJyZW50UCA+PSBDSElUUkFNX0NPTkZJRy5wb3J0cmFpdENvdW50ID8gMSA6IGN1cnJlbnRQICsgMTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEluaXRpYWxpemUNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7DQogICAgICAgICAgICB1cGRhdGVDaGl0cmFtKCk7DQogICAgICAgICAgICBzZXRJbnRlcnZhbCh1cGRhdGVDaGl0cmFtLCBDSElUUkFNX0NPTkZJRy5pbnRlcnZhbCk7DQogICAgICAgIH0pOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPHN0eWxlPg0KICAgICAgICAubW1wdC1hcmNoaXZlLWJveCB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAyNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAzMHB4IDEwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC5hcmNoaXZlLWhlYWRlciB7DQogICAgICAgICAgICBjb2xvcjogIzgwMDAwMDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjJweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZmZmNWU2Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7DQogICAgICAgIH0NCg0KICAgICAgICAuYXJjaGl2ZS1jb250cm9scyB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZ2FwOiAxNXB4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICB9DQoNCiAgICAgICAgI3NjcmlwdHVyZV9kcm9wZG93biB7DQogICAgICAgICAgICB3aWR0aDogMzgwcHg7DQogICAgICAgICAgICBoZWlnaHQ6IDQ1cHg7DQogICAgICAgICAgICBwYWRkaW5nOiAwIDEwcHg7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjRkY5OTMzOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZhZjA7DQogICAgICAgIH0NCg0KICAgICAgICAuYnRuLWFyY2hpdmUtZG93bmxvYWQgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzgwMDAwMCAwJSwgIzRhMDAwMCAxMDAlKTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMzBweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnM7DQogICAgICAgIH0NCg0KICAgICAgICAgICAgLmJ0bi1hcmNoaXZlLWRvd25sb2FkOmhvdmVyIHsNCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDMpOw0KICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsMCwwLDAuMik7DQogICAgICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9Im1tcHQtYXJjaGl2ZS1ib3giPg0KICAgICAgICA8ZGl2IGNsYXNzPSJhcmNoaXZlLWhlYWRlciI+8J+TnCBTY3JpcHR1cmVzIGZyb20gTU1QVCBBcmNoaXZlczwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJhcmNoaXZlLWNvbnRyb2xzIj4NCiAgICAgICAgICAgIDxzZWxlY3QgaWQ9InNjcmlwdHVyZV9kcm9wZG93biI+DQogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBMb2FkaW5nIFRpdGxlcyBmcm9tIERyaXZlLi4uIC0tPC9vcHRpb24+DQogICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hcmNoaXZlLWRvd25sb2FkIiBvbmNsaWNrPSJoYW5kbGVBcmNoaXZlRG93bmxvYWQoKSI+8J+TpSBEb3dubG9hZCBQREY8L2J1dHRvbj4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjNjY2OyBtYXJnaW4tdG9wOiAxNXB4OyI+Tm90ZTogU2Nhbm5lZCB2ZXJzaW9ucyBhcmUgcHJvdmlkZWQgZm9yIHBlcnNvbmFsIHNwaXJpdHVhbCBzdHVkeS48L3A+DQogICAgPC9kaXY+DQoNCg0KICAgIDxzY3JpcHQ+DQoNCiAgICAgICAgLy8gLS0tIEdPT0dMRSBEUklWRSBBUkNISVZFIExPR0lDIC0tLQ0KICAgICAgICAvLyBSRVBMQUNFICdZT1VSX0FQUFNfU0NSSVBUX1VSTCcgd2l0aCB0aGUgb25lIHlvdSBnZXQgZnJvbSBHb29nbGUgU2NyaXB0IERlcGxveW1lbnQNCiAgICAgICAgY29uc3QgQVJDSElWRV9CUklER0VfVVJMID0gImh0dHBzOi8vc2NyaXB0Lmdvb2dsZS5jb20vbWFjcm9zL3MvQUtmeWNid3Exd05MN3hmUktacVNwMWM1VUdHaGVuYl9JbDJYWUNzY0dQc3BrTjBBenhRcl9sV3lJZ2pKSC1HZmNJN0x1VmpKZkEvZXhlYyI7DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaW5pdE1NUFRBcmNoaXZlKCkgew0KICAgICAgICAgICAgY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyaXB0dXJlX2Ryb3Bkb3duJyk7DQogICAgICAgICAgICBpZiAoIWRyb3Bkb3duKSByZXR1cm47DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgLy8gJ3JlZGlyZWN0OiBmb2xsb3cnIGlzIHJlcXVpcmVkIGZvciBHb29nbGUgQXBwcyBTY3JpcHQgV2ViIEFwcHMNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKEFSQ0hJVkVfQlJJREdFX1VSTCwgeyByZWRpcmVjdDogImZvbGxvdyIgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7DQoNCiAgICAgICAgICAgICAgICBkcm9wZG93bi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTZWxlY3QgYSBTY3JpcHR1cmUgLS08L29wdGlvbj4nOw0KDQogICAgICAgICAgICAgICAgaWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+Tm8gZmlsZXMgZm91bmQgaW4gZm9sZGVyPC9vcHRpb24+JzsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgICAgICAgICAgLy9vcHQudmFsdWUgPSBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL3VjP2V4cG9ydD1kb3dubG9hZCZpZD0ke2ZpbGUuaWR9YDsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS91LzAvdWM/aWQ9JHtmaWxlLmlkfSZleHBvcnQ9ZG93bmxvYWRgOw0KICAgICAgICAgICAgICAgICAgICBvcHQudGV4dENvbnRlbnQgPSBmaWxlLm5hbWU7DQogICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJBcmNoaXZlIEVycm9yOiIsIGVycik7DQogICAgICAgICAgICAgICAgZHJvcGRvd24uaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+QXJjaGl2ZSBPZmZsaW5lIChDaGVjayBVUkwpPC9vcHRpb24+JzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlQXJjaGl2ZURvd25sb2FkKCkgew0KICAgICAgICAgICAgY29uc3QgdXJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmlwdHVyZV9kcm9wZG93bicpLnZhbHVlOw0KICAgICAgICAgICAgaWYgKCF1cmwpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiUGxlYXNlIHNlbGVjdCBhIHNjcmlwdHVyZSB0aXRsZSBmaXJzdC4iKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIEZpbGUgSUQgZnJvbSB0aGUgVVJMDQogICAgICAgICAgICBjb25zdCBmaWxlSWQgPSB1cmwuc3BsaXQoJ2lkPScpWzFdOw0KDQogICAgICAgICAgICAvLyBXZSB1c2UgYSAiYnlwYXNzIiBVUkwgc3RydWN0dXJlLg0KICAgICAgICAgICAgLy8gVGhpcyB0ZWxscyBHb29nbGUgdG8gc2tpcCB0aGUgY29uZmlybWF0aW9uIHBhZ2UgYnkgcHJlLWNvbmZpcm1pbmcgdGhlIGRvd25sb2FkLg0KICAgICAgICAgICAgY29uc3QgZm9yY2VEb3dubG9hZFVybCA9IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/ZXhwb3J0PWRvd25sb2FkJmlkPSR7ZmlsZUlkfSZjb25maXJtPXRgOw0KDQogICAgICAgICAgICB3aW5kb3cub3Blbihmb3JjZURvd25sb2FkVXJsLCAnX2JsYW5rJyk7DQogICAgICAgIH0NCg0KDQogICAgICAgIC8vIEFkZCB0aGlzIHRvIHlvdXIgZXhpc3Rpbmcgd2luZG93LmxvYWQgbGlzdGVuZXIgb3IgY3JlYXRlIGEgbmV3IG9uZToNCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0TU1QVEFyY2hpdmUpOw0KICAgIDwvc2NyaXB0Pg0KDQogICAgDQogICAgPGRpdiBjbGFzcz0ibW1wdC11bmlmaWVkLWJveCIgaWQ9ImF1ZGlvX2FyY2hpdmVfc2VjdGlvbiI+DQogICAgICAgIDxkaXYgY2xhc3M9ImFyY2hpdmUtaGVhZGVyIj4NCiAgICAgICAgICAgIPCfjqcgQXVkaW8gQm9va3MgRnJvbSBNTVBUIEFyY2hpdmVzDQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBnYXA6IDE1cHg7IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgZmxleC13cmFwOiB3cmFwOyBtYXJnaW46IDIwcHggMDsiPg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdDsiPg0KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA1cHg7Ij5Cb29rPC9sYWJlbD4NCiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJhdWRpb19ib29rX2Ryb3Bkb3duIiBvbmNoYW5nZT0ibG9hZEF1ZGlvQ2hhcHRlcnMoKSIgc3R5bGU9Im1pbi13aWR0aDogMjIwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogNHB4OyBwYWRkaW5nOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBiYWNrZ3JvdW5kOiB3aGl0ZTsiPg0KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBCb29rIC0tPC9vcHRpb24+DQogICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdDsiPg0KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA1cHg7Ij5DaGFwdGVyPC9sYWJlbD4NCiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJhdWRpb19jaGFwdGVyX2Ryb3Bkb3duIiBkaXNhYmxlZCBvbmNoYW5nZT0idXBkYXRlQXVkaW9VSSgpIiBzdHlsZT0ibWluLXdpZHRoOiAzMDBweDsgaGVpZ2h0OiAzOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZmY5OTMzOyBib3JkZXItcmFkaXVzOiA0cHg7IHBhZGRpbmc6IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJhY2tncm91bmQ6IHdoaXRlOyI+DQogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IENoYXB0ZXIgLS08L29wdGlvbj4NCiAgICAgICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBnYXA6IDhweDsiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bl9hdWRpb19wbGF5IiBkaXNhYmxlZCBvbmNsaWNrPSJwbGF5QXVkaW9Cb29rKCkiIGNsYXNzPSJidG4tcm4iIHN0eWxlPSJiYWNrZ3JvdW5kOiAjMjhhNzQ1OyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMCAyMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsiPuKWtiBQbGF5PC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuX2F1ZGlvX3N0b3AiIGRpc2FibGVkIG9uY2xpY2s9InN0b3BBdWRpb0Jvb2soKSIgY2xhc3M9ImJ0bi1ybiIgc3R5bGU9ImJhY2tncm91bmQ6ICNkMzJmMmY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAwIDIwcHg7IGhlaWdodDogMzhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyI+4pagIFN0b3A8L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJhdWRpb19wbGF5ZXJfY29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgcG9zaXRpb246IHJlbGF0aXZlOyBtYXJnaW46IDEwcHggYXV0bzsgYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBvdmVyZmxvdzogaGlkZGVuOyBiYWNrZ3JvdW5kOiAjMDAwOyBoZWlnaHQ6IDg1cHg7IG1heC13aWR0aDogOTAwcHg7Ij4NCiAgICAgICAgICAgIDxkaXYgaWQ9InBsYXlfaW5zdHJ1Y3Rpb24iIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjZmY5OTMzOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNHB4OyB0b3A6IDEwcHg7IHotaW5kZXg6IDU7IHBvaW50ZXItZXZlbnRzOiBub25lOyI+DQogICAgICAgICAgICAgICAgQ2xpY2sgUGxheSBvbiB0aGUgcGxheWVyIGJlbG93IHRvIHN0YXJ0DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxpZnJhbWUgaWQ9Imdvb2dsZV9hdWRpb19pZnJhbWUiIHNyYz0iIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxNjAiIGZyYW1lYm9yZGVyPSIwIiBzdHlsZT0ibWFyZ2luLXRvcDogLTM1cHg7Ij48L2lmcmFtZT4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBpZD0iYXVkaW9fc3RhdHVzIiBzdHlsZT0iZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzgwMDAwMDsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi10b3A6IDEwcHg7Ij5Db25uZWN0aW5nIHRvIEFyY2hpdmUuLi48L2Rpdj4NCiAgICA8L2Rpdj4NCg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgLy8gU2NyaXB0IGxvZ2ljIHJlbWFpbnMgdGhlIHNhbWUgKHJlc3RvcmVzIHRoZSBjb25uZWN0aW5nIG1lc3NhZ2UpDQogICAgICAgIGNvbnN0IEdPT0dMRV9BVURJT19VUkwgPSAiaHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J4R0kyQWd3ZHNncVotcUZYRXhtTU1ZRXlPNEtfYUZtLTdIM0FTbmxkS2ZBVHhUOEctR19zYnVIb0s0MHRxdV9iYy0vZXhlYyI7DQogICAgICAgIGxldCBhdWRpb0xpYkRhdGEgPSBbXTsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBpbml0QXVkaW9BcmNoaXZlKCkgew0KICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX3N0YXR1cycpOw0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKEdPT0dMRV9BVURJT19VUkwpOw0KICAgICAgICAgICAgICAgIGF1ZGlvTGliRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCBib29rU2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2Jvb2tfZHJvcGRvd24nKTsNCiAgICAgICAgICAgICAgICBib29rU2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFNlbGVjdCBCb29rIC0tPC9vcHRpb24+JzsNCiAgICAgICAgICAgICAgICBhdWRpb0xpYkRhdGEuZm9yRWFjaCgoaXRlbSwgaWR4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsNCiAgICAgICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gaWR4Ow0KICAgICAgICAgICAgICAgICAgICBvcHQudGV4dENvbnRlbnQgPSBpdGVtLmJvb2tOYW1lOw0KICAgICAgICAgICAgICAgICAgICBib29rU2VsLmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgc3RhdHVzLmlubmVyVGV4dCA9ICJBcmNoaXZlIFJlYWR5LiI7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgc3RhdHVzLmlubmVyVGV4dCA9ICJBcmNoaXZlIGNvbm5lY3Rpb24gZXJyb3IuIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGluaXRBdWRpb0FyY2hpdmUoKTsNCg0KICAgICAgICBmdW5jdGlvbiBsb2FkQXVkaW9DaGFwdGVycygpIHsNCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19ib29rX2Ryb3Bkb3duJykudmFsdWU7DQogICAgICAgICAgICBjb25zdCBjaGFwU2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX2NoYXB0ZXJfZHJvcGRvd24nKTsNCiAgICAgICAgICAgIHN0b3BBdWRpb0Jvb2soKTsNCiAgICAgICAgICAgIGNoYXBTZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU2VsZWN0IENoYXB0ZXIgLS08L29wdGlvbj4nOw0KICAgICAgICAgICAgaWYgKGlkeCA9PT0gIiIpIHsgY2hhcFNlbC5kaXNhYmxlZCA9IHRydWU7IHJldHVybjsgfQ0KICAgICAgICAgICAgYXVkaW9MaWJEYXRhW2lkeF0uY2hhcHRlcnMuZm9yRWFjaChmaWxlID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgb3B0LnZhbHVlID0gZmlsZS5pZDsNCiAgICAgICAgICAgICAgICBvcHQudGV4dENvbnRlbnQgPSBmaWxlLm5hbWUucmVwbGFjZSgvXC5bXi8uXSskLywgIiIpOw0KICAgICAgICAgICAgICAgIGNoYXBTZWwuYXBwZW5kQ2hpbGQob3B0KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgY2hhcFNlbC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQXVkaW9VSSgpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fYXVkaW9fcGxheScpLmRpc2FibGVkID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19jaGFwdGVyX2Ryb3Bkb3duJykudmFsdWUgPT09ICIiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHBsYXlBdWRpb0Jvb2soKSB7DQogICAgICAgICAgICBjb25zdCBmaWxlSWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fY2hhcHRlcl9kcm9wZG93bicpLnZhbHVlOw0KICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX3BsYXllcl9jb250YWluZXInKTsNCiAgICAgICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb29nbGVfYXVkaW9faWZyYW1lJyk7DQogICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9fc3RhdHVzJyk7DQogICAgICAgICAgICBpZiAoIWZpbGVJZCkgcmV0dXJuOw0KICAgICAgICAgICAgaWZyYW1lLnNyYyA9IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZmlsZS9kLyR7ZmlsZUlkfS9wcmV2aWV3YDsNCiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fYXVkaW9fcGxheScpLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fYXVkaW9fc3RvcCcpLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgICAgICBzdGF0dXMuaW5uZXJUZXh0ID0gIlN0cmVhbWluZzogIiArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19jaGFwdGVyX2Ryb3Bkb3duJykuc2VsZWN0ZWRPcHRpb25zWzBdLnRleHQ7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzdG9wQXVkaW9Cb29rKCkgew0KICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvX3BsYXllcl9jb250YWluZXInKTsNCiAgICAgICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb29nbGVfYXVkaW9faWZyYW1lJyk7DQogICAgICAgICAgICBpZnJhbWUuc3JjID0gIiI7DQogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fYXVkaW9fc3RvcCcpLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb19zdGF0dXMnKS5pbm5lclRleHQgPSAiQXJjaGl2ZSBSZWFkeS4iOw0KICAgICAgICAgICAgdXBkYXRlQXVkaW9VSSgpOw0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQoNCiAgICANCiAgICA8ZGl2IGlkPSJ2aWRlby1hcmNoaXZlLWJveCIgY2xhc3M9Im1tcHQtdW5pZmllZC1ib3giIHN0eWxlPSJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IHdpZHRoOiAxMDAlOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOyBwYWRkaW5nOiAyNXB4OyBib3JkZXItcmFkaXVzOiAxMnB4OyBiYWNrZ3JvdW5kOiAjZmZmOyBtYXJnaW46IDE1cHggMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47Ij4NCg0KICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOiAjODAwMDAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc2l6ZTogMjRweDsgbWFyZ2luLXRvcDogMDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPg0KICAgICAgICAgICAg8J+OrCBWaWRlb3MgRnJvbSBNTVBUIEFyY2hpdmVzDQogICAgICAgIDwvaDI+DQoNCiAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzAwMDsgZm9udC1zaXplOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206IDE1cHg7IGxpbmUtaGVpZ2h0OiAxLjY7Ij4NCiAgICAgICAgICAgIDxzdHJvbmcgc3R5bGU9ImNvbG9yOiAjODAwMDAwOyBmb250LXNpemU6IDE3cHg7Ij5Ob3RlOjwvc3Ryb25nPg0KICAgICAgICAgICAgPHN0cm9uZyBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IGZvbnQtd2VpZ2h0OiA5MDA7IGZvbnQtc2l6ZTogMTZweDsiPlNlbGVjdCB0aGUgcmVxdWlyZWQgZXBpc29kZSBmcm9tIHRoZSBwbGF5bGlzdCBpY29uIGF0IHRoZSB0b3AtcmlnaHQgY29ybmVyIG9mIHRoZSB2aWRlbyB3aW5kb3cuPC9zdHJvbmc+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMjBweDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTVweDsgZmxleC13cmFwOiB3cmFwOyI+DQogICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzgwMDAwMDsgZm9udC1zaXplOiAxNnB4OyI+VG9waWM6PC9sYWJlbD4NCiAgICAgICAgICAgIDxzZWxlY3QgaWQ9InRvcGljX3NlbGVjdCIgb25jaGFuZ2U9IlByZXBhcmVWaWRlbygpIiBzdHlsZT0id2lkdGg6IDMyMHB4OyBoZWlnaHQ6IDM4cHg7IGJvcmRlcjogMXB4IHNvbGlkICM4MDAwMDA7IGJvcmRlci1yYWRpdXM6IDVweDsgcGFkZGluZzogNXB4OyBmb250LXdlaWdodDogYm9sZDsgYmFja2dyb3VuZDogI2ZmZjsiPg0KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gTG9hZGluZyBBcmNoaXZlIC0tPC9vcHRpb24+DQogICAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iTGF1bmNoSWZyYW1lKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjMjhhNzQ1OyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMTBweCAzMHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMTVweDsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTsiPuKWtiBQbGF5PC9idXR0b24+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5fc3RvcCIgb25jbGljaz0iU3RvcElmcmFtZSgpIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgYmFja2dyb3VuZDogI2RjMzU0NTsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEwcHggMzBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE1cHg7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7Ij7inJYgU3RvcDwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJEaXZWaWRUaXRsZTEiIHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC1zaXplOiAyMHB4OyBtYXJnaW4tYm90dG9tOiA1cHg7IG1pbi1oZWlnaHQ6IDI2cHg7Ij5SZWFkeS48L2Rpdj4NCiAgICAgICAgPGRpdiBpZD0iRGl2VGltZXIiIHN0eWxlPSJmb250LXNpemU6IDEycHg7IGNvbG9yOiBibHVlOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGhlaWdodDogMjBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7Ij48L2Rpdj4NCg0KICAgICAgICA8ZGl2IGlkPSJ2aWRfY29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgbWFyZ2luOiAyMHB4IGF1dG8gMCBhdXRvOyB3aWR0aDogMTAwJTsgbWF4LXdpZHRoOiA1NjBweDsgYXNwZWN0LXJhdGlvOiAxNi85OyBiYWNrZ3JvdW5kOiAjMDAwOyBib3JkZXI6IDRweCBzb2xpZCAjODAwMDAwOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgNnB4IDE4cHggcmdiYSgwLDAsMCwwLjMpOyI+DQogICAgICAgICAgICA8aWZyYW1lIGlkPSJpZnJfbWFpbiIgbmFtZT0iaWZyX21haW4iIHNyYz0iYWJvdXQ6YmxhbmsiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZyYW1lYm9yZGVyPSIwIg0KICAgICAgICAgICAgICAgICAgICBhbGxvdz0iYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGNsaXBib2FyZC13cml0ZTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZTsgd2ViLXNoYXJlIg0KICAgICAgICAgICAgICAgICAgICByZWZlcnJlcnBvbGljeT0ic3RyaWN0LW9yaWdpbi13aGVuLWNyb3NzLW9yaWdpbiIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIHZhciBUYXJnZXRVcmwgPSAiIjsNCiAgICAgICAgdmFyIGFyY2hpdmVEYXRhID0gW107DQogICAgICAgIGNvbnN0IGlmciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZnJfbWFpbicpOw0KICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkX2NvbnRhaW5lcicpOw0KICAgICAgICBjb25zdCBzdG9wQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bl9zdG9wJyk7DQogICAgICAgIGNvbnN0IERBVEFfU09VUkNFID0gImh0dHBzOi8vZGwuZHJvcGJveHVzZXJjb250ZW50LmNvbS9zY2wvZmkvamtrYnNiaHpkZGp3cmpuenM4MGZ1L1ZpZGVvcy50eHQ/cmxrZXk9czR1Y2hpcDRvdGJ0bjR3ODd3OHg5emhraiZkbD0xIjsNCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBMb2FkQXJjaGl2ZSgpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChEQVRBX1NPVVJDRSk7DQogICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gbmV3IFRleHREZWNvZGVyKCd1dGYtMTZsZScpLmRlY29kZShidWZmZXIpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gdGV4dC5yZXBsYWNlKC9eXHVGRUZGLywgJycpLnNwbGl0KC9ccj9cbi8pLmZpbHRlcihsID0+IGwuaW5jbHVkZXMoJywnKSk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9waWNfc2VsZWN0Jyk7DQogICAgICAgICAgICAgICAgc2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIENob29zZSBhIFRvcGljIC0tPC9vcHRpb24+JzsNCg0KICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2goKGxpbmUsIGkpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCcsJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPCAyKSByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxVcmwgPSBwYXJ0c1sxXS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RJZCA9IGZ1bGxVcmwubWF0Y2goL1s/Jl1saXN0PShbXiZdKykvKT8uWzFdIHx8ICIiOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzaVRva2VuID0gZnVsbFVybC5tYXRjaCgvWz8mXXNpPShbXiZdKykvKT8uWzFdIHx8ICJWeTNGd1VqdFN0ZlE4WDZwIjsNCg0KICAgICAgICAgICAgICAgICAgICBhcmNoaXZlRGF0YS5wdXNoKHsgbmFtZTogcGFydHNbMF0udHJpbSgpLCBpZDogbGlzdElkLCBzaTogc2lUb2tlbiB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7DQogICAgICAgICAgICAgICAgICAgIG9wdC52YWx1ZSA9IGk7IG9wdC50ZXh0Q29udGVudCA9IHBhcnRzWzBdLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgc2VsLmFwcGVuZENoaWxkKG9wdCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0RpdlZpZFRpdGxlMScpLmlubmVyVGV4dCA9ICJEYXRhIExvYWQgRXJyb3IiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gUHJlcGFyZVZpZGVvKCkgew0KICAgICAgICAgICAgY29uc3QgaWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcGljX3NlbGVjdCcpLnZhbHVlOw0KICAgICAgICAgICAgaWYgKGlkeCA9PT0gIiIpIHsgVGFyZ2V0VXJsID0gIiI7IHJldHVybjsgfQ0KICAgICAgICAgICAgY29uc3QgaXRlbSA9IGFyY2hpdmVEYXRhW2lkeF07DQogICAgICAgICAgICBUYXJnZXRVcmwgPSAiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvdmlkZW9zZXJpZXM/c2k9IiArIGl0ZW0uc2kgKyAiJmxpc3Q9IiArIGl0ZW0uaWQgKyAiJmF1dG9wbGF5PTEiOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0RpdlZpZFRpdGxlMScpLmlubmVyVGV4dCA9IGl0ZW0ubmFtZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIExhdW5jaElmcmFtZSgpIHsNCiAgICAgICAgICAgIGlmIChUYXJnZXRVcmwgPT09ICIiKSB7IGFsZXJ0KCJQbGVhc2Ugc2VsZWN0IGEgdG9waWMiKTsgcmV0dXJuOyB9DQogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICBzdG9wQnRuLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsNCiAgICAgICAgICAgIGlmci5zcmMgPSAiYWJvdXQ6YmxhbmsiOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0RpdlRpbWVyJykuaW5uZXJUZXh0ID0gIkVzdGFibGlzaGluZyBDb25uZWN0aW9uLi4uIjsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGlmci5zcmMgPSBUYXJnZXRVcmw7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0RpdlRpbWVyJykuaW5uZXJUZXh0ID0gIiI7DQogICAgICAgICAgICB9LCAxMDAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIFN0b3BJZnJhbWUoKSB7DQogICAgICAgICAgICBpZnIuc3JjID0gImFib3V0OmJsYW5rIjsNCiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgc3RvcEJ0bi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0RpdlRpbWVyJykuaW5uZXJUZXh0ID0gIlBsYXllciBTdG9wcGVkLiI7DQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0RpdlRpbWVyJykuaW5uZXJUZXh0ID0gIiI7IH0sIDIwMDApOw0KICAgICAgICB9DQoNCiAgICAgICAgTG9hZEFyY2hpdmUoKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxkaXYgY2xhc3M9Im1tcHQtdW5pZmllZC1ib3giIGlkPSJwYW5jaGFuZ19zZWN0aW9uIiBzdHlsZT0iYm9yZGVyLWNvbG9yOiAjZmY5OTMzOyI+DQogICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMjRweDsgY29sb3I6ICM4MDAwMDA7IGZvbnQtZmFtaWx5OiAnR2VvcmdpYScsIHNlcmlmOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogMjBweDsiPg0KICAgICAgICAgICAg8J+Vie+4jyBUb2RheSdzIFBhbmNoYW5nDQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgaWQ9InBhbmNoYW5nX2NvbnRlbnQiPg0KICAgICAgICAgICAgPGRpdiBpZD0icGFuY2hhbmdfbG9hZGluZyIgc3R5bGU9ImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzY2NjsiPkZldGNoaW5nIEFsbWFuYWMuLi48L2Rpdj4NCg0KICAgICAgICAgICAgPGRpdiBpZD0icGFuY2hhbmdfZGlzcGxheSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4NCiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImRhdGUtdGFibGUiIHN0eWxlPSJtYXJnaW46IDAgYXV0byAyMHB4IGF1dG87IG1heC13aWR0aDogNjAwcHg7IGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7Ij4NCiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBpZD0icGFuX2hlYWRlcl9kYXRlIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzgwMDAwMDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBmb250LXNpemU6IDE4cHg7Ij48L3RoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD4NCiAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgyODBweCwgMWZyKSk7IGdhcDogMTVweDsgdGV4dC1hbGlnbjogbGVmdDsiPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+MS4gVElUSEk8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBpZD0idGFibGVfdGl0aGkiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6IDEzcHg7Ij48L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+Mi4gTkFLU0hBVFJBPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgaWQ9InRhYmxlX25ha3NoYXRyYSIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTogMTNweDsiPjwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbi1jYXJkIiBzdHlsZT0iYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmZGU2OyBwYWRkaW5nOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY5OTMzOyBtYXJnaW4tYm90dG9tOiA4cHg7Ij4zLiBZT0dBPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgaWQ9InRhYmxlX3lvZ2EiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6IDEzcHg7Ij48L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYW4tY2FyZCIgc3R5bGU9ImJvcmRlcjogMXB4IHNvbGlkICNmZjk5MzM7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2ZmZmRlNjsgcGFkZGluZzogMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjODAwMDAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2ZmOTkzMzsgbWFyZ2luLWJvdHRvbTogOHB4OyI+NC4gS0FSQU5BPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgaWQ9InRhYmxlX2thcmFuYSIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTogMTNweDsiPjwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhbi1jYXJkIiBzdHlsZT0iYm9yZGVyOiAxcHggc29saWQgI2ZmOTkzMzsgYm9yZGVyLXJhZGl1czogOHB4OyBiYWNrZ3JvdW5kOiAjZmZmZGU2OyBwYWRkaW5nOiAxMHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM4MDAwMDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmY5OTMzOyBtYXJnaW4tYm90dG9tOiA4cHg7Ij41LiBWQVJBIChEYXkpPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJkaXNwbGF5X3ZhcmEiIHN0eWxlPSJmb250LXNpemU6IDE2cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBwYWRkaW5nOiA1cHg7Ij48L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIEVuc3VyZSB0aGlzIGlzIGF0IHRoZSB0b3Agb2YgeW91ciBzY3JpcHQNCiAgICAgICAgY29uc3QgUEFOQ0hBTkdfQkFTRSA9ICcvUGFuY2hhbmcnOw0KDQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREYWlseVBhbmNoYW5nKCkgew0KICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgIGNvbnN0IHl5eXkgPSBub3cuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IG1tID0gU3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTsNCiAgICAgICAgICAgIGNvbnN0IGRkID0gU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICAgICAgICBjb25zdCB0b2RheUlTTyA9IGAke3l5eXl9LSR7bW19LSR7ZGR9YDsNCg0KICAgICAgICAgICAgY29uc3QgZGFpbHlQYXRoID0gYCR7UEFOQ0hBTkdfQkFTRX0vJHt5eXl5fS8ke21tfS8ke3l5eXl9JHttbX0ke2RkfS5odG1sYDsNCg0KICAgICAgICAgICAgY29uc3Qga2FhbGFUaW1pbmdzID0gew0KICAgICAgICAgICAgICAgICdTdW5kYXknOiB7IHJhaHU6ICc0OjMwIHBtIHRvIDY6MDAgcG0nLCBndWxpa2E6ICczOjAwIHBtIHRvIDQ6MzAgcG0nLCB5YW06ICcxMjowMCBwbSB0byAxOjMwIHBtJyB9LA0KICAgICAgICAgICAgICAgICdNb25kYXknOiB7IHJhaHU6ICc3OjMwIGFtIHRvIDk6MDAgYW0nLCBndWxpa2E6ICcxOjMwIHBtIHRvIDM6MDAgcG0nLCB5YW06ICcxMDozMCBhbSB0byAxMjowMCBwbScgfSwNCiAgICAgICAgICAgICAgICAnVHVlc2RheSc6IHsgcmFodTogJzM6MDAgcG0gdG8gNDozMCBwbScsIGd1bGlrYTogJzEyOjAwIHBtIHRvIDE6MzAgcG0nLCB5YW06ICc5OjAwIGFtIHRvIDEwOjMwIGFtJyB9LA0KICAgICAgICAgICAgICAgICdXZWRuZXNkYXknOiB7IHJhaHU6ICcxMjowMCBwbSB0byAxOjMwIHBtJywgZ3VsaWthOiAnMTA6MzAgYW0gdG8gMTI6MDAgcG0nLCB5YW06ICc3OjMwIGFtIHRvIDk6MDAgYW0nIH0sDQogICAgICAgICAgICAgICAgJ1RodXJzZGF5JzogeyByYWh1OiAnMTozMCBwbSB0byAzOjAwIHBtJywgZ3VsaWthOiAnOTowMCBhbSB0byAxMDozMCBhbScsIHlhbTogJzY6MDAgYW0gdG8gNzozMCBhbScgfSwNCiAgICAgICAgICAgICAgICAnRnJpZGF5JzogeyByYWh1OiAnMTA6MzAgYW0gdG8gMTI6MDAgcG0nLCBndWxpa2E6ICc3OjMwIGFtIHRvIDk6MDAgYW0nLCB5YW06ICczOjAwIHBtIHRvIDQ6MzAgcG0nIH0sDQogICAgICAgICAgICAgICAgJ1NhdHVyZGF5JzogeyByYWh1OiAnOTowMCBhbSB0byAxMDozMCBhbScsIGd1bGlrYTogJzY6MDAgYW0gdG8gNzozMCBhbScsIHlhbTogJzE6MzAgcG0gdG8gMzowMCBwbScgfQ0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyAxLiBGZXRjaCBTdW5yaXNlL1N1bnNldCBmb3IgQ2hlbm5haSBmcm9tIE9wZW4tTWV0ZW8gQVBJDQogICAgICAgICAgICAgICAgbGV0IHN1bkluZm8gPSAiTG9hZGluZyB0aW1lcy4uLiI7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VuUmVzID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW4tbWV0ZW8uY29tL3YxL2ZvcmVjYXN0P2xhdGl0dWRlPTEzLjA4MjcmbG9uZ2l0dWRlPTgwLjI3MDcmZGFpbHk9c3VucmlzZSxzdW5zZXQmdGltZXpvbmU9YXV0byZzdGFydF9kYXRlPSR7dG9kYXlJU099JmVuZF9kYXRlPSR7dG9kYXlJU099YCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bkRhdGEgPSBhd2FpdCBzdW5SZXMuanNvbigpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXRUaW1lID0gKHQpID0+IG5ldyBEYXRlKHQpLnRvTG9jYWxlVGltZVN0cmluZygnZW4tSU4nLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcsIGhvdXIxMjogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICAgICAgc3VuSW5mbyA9IGBTdW5yaXNlIGlzIGF0IDxiPiR7Zm9ybWF0VGltZShzdW5EYXRhLmRhaWx5LnN1bnJpc2VbMF0pfTwvYj4gYW5kIFN1bnNldCBpcyBhdCA8Yj4ke2Zvcm1hdFRpbWUoc3VuRGF0YS5kYWlseS5zdW5zZXRbMF0pfTwvYj5gOw0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgICAgICBzdW5JbmZvID0gIlN1bnJpc2UgYW5kIFN1bnNldCBkYXRhIGN1cnJlbnRseSB1bmF2YWlsYWJsZSI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gMi4gRHJvcGJveCBGZXRjaCBMb2dpYw0KICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHRva2VuUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgdG9rZW5QYXJhbXMuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgTU1QVF9BVVRIX1NFQ1JFVCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiB0b2tlblBhcmFtcyB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVG9rZW4gPSB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9jb250ZW50LmRyb3Bib3hhcGkuY29tLzIvZmlsZXMvZG93bmxvYWQnLCB7DQogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgYWN0aXZlVG9rZW4sICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGRhaWx5UGF0aCB9KSB9DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoIlN5bmNpbmcuLi4iKTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdEYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gcmF3RGF0YS5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKTsNCg0KICAgICAgICAgICAgICAgIC8vIC0tLSBDT01QQUNUIEhFQURFUiAoTk8gSUNPTikgLS0tDQogICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhbl9oZWFkZXJfZGF0ZScpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhcmFOYW1lID0gcGFydHNbMV0gPyBwYXJ0c1sxXS5zcGxpdCgnOicpWzBdLnRyaW0oKSA6ICIiOw0KDQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmQgPSAibGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzgwMDAwMCAwJSwgIzRhMDAwMCAxMDAlKSI7DQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAiMTVweCI7DQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICIxMHB4IDEwcHggMCAwIjsNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUudGV4dEFsaWduID0gImNlbnRlciI7DQogICAgICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLmJvcmRlckJvdHRvbSA9ICIzcHggc29saWQgI0ZGRDcwMCI7DQoNCiAgICAgICAgICAgICAgICBoZWFkZXJDb250YWluZXIuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBiYXNlbGluZTsgZ2FwOiAxNXB4OyBtYXJnaW4tYm90dG9tOiA1cHg7Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC1zaXplOiAyNnB4OyBmb250LXdlaWdodDogODAwOyBjb2xvcjogI0ZGRDcwMDsgdGV4dC1zaGFkb3c6IDJweCAycHggNHB4IHJnYmEoMCwwLDAsMC41KTsiPiR7cGFydHNbMF19PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6IDIwcHg7IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiAjRkZGRkZGOyBib3JkZXItbGVmdDogMXB4IHNvbGlkICNGRkQ3MDA7IHBhZGRpbmctbGVmdDogMTVweDsiPiR7dmFyYU5hbWV9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDJweCAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjRkZENzAwOyBib3JkZXItcmFkaXVzOiAyMHB4OyBmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogI0ZGRDcwMDsgbGV0dGVyLXNwYWNpbmc6IDAuNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVElNRSBTUEVDSUZJRUQgQVJFIEVORCBUSU1FIElOIElTVA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7DQoNCiAgICAgICAgICAgICAgICAvLyAtLS0gVEFCTEVTIFBPUFVMQVRJT04gLS0tDQogICAgICAgICAgICAgICAgY29uc3QgZmlsbFRhYmxlID0gKGlkLCBzdGFydCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0YmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgICAgICAgICAgICAgICAgIGlmICghdGJsKSByZXR1cm47DQogICAgICAgICAgICAgICAgICAgIHRibC5pbm5lckhUTUwgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYyA9IHBhcnRzW3N0YXJ0ICsgaV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjICYmIHJlYy5pbmNsdWRlcygnOicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHJlYy5zdWJzdHJpbmcoMCwgcmVjLmluZGV4T2YoJzonKSkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSByZWMuc3Vic3RyaW5nKHJlYy5pbmRleE9mKCc6JykgKyAxKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICIiICYmICh0aW1lID09PSAiIiB8fCB0aW1lID09PSAiLS06LS0iKSkgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJvdyA9IHRibC5pbnNlcnRSb3coKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuaW5uZXJIVE1MID0gYDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6NzAwOyBwYWRkaW5nOjZweCA0cHg7IGNvbG9yOiMzMzM7IGZvbnQtc2l6ZToxNHB4OyB3aWR0aDo2NSU7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Ij4ke25hbWV9PC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiNkMzJmMmY7IHBhZGRpbmc6NnB4IDRweDsgZm9udC1mYW1pbHk6bW9ub3NwYWNlOyBmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MTVweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPiR7dGltZX08L3RkPmA7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgZmlsbFRhYmxlKCd0YWJsZV90aXRoaScsIDMpOw0KICAgICAgICAgICAgICAgIGZpbGxUYWJsZSgndGFibGVfbmFrc2hhdHJhJywgNyk7DQogICAgICAgICAgICAgICAgZmlsbFRhYmxlKCd0YWJsZV95b2dhJywgMTEpOw0KICAgICAgICAgICAgICAgIGZpbGxUYWJsZSgndGFibGVfa2FyYW5hJywgMTUpOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3BsYXlfdmFyYScpLmlubmVySFRNTCA9IGA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmZmOWM0OyBib3JkZXI6IDJweCBzb2xpZCAjRkZENzAwOyBwYWRkaW5nOiA4cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY29sb3I6ICM4MDAwMDA7IGZvbnQtc2l6ZTogMjJweDsgZm9udC13ZWlnaHQ6IDkwMDsgdGV4dC1hbGlnbjogY2VudGVyOyI+JHt2YXJhTmFtZX08L2Rpdj5gOw0KDQogICAgICAgICAgICAgICAgLy8gLS0tIEhJTkRVIENBTEVOREFSICYgS0FBTEFTIC0tLQ0KICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsUGFydHMgPSBwYXJ0cy5sZW5ndGg7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsTHVuYXIgPSBwYXJ0c1t0b3RhbFBhcnRzIC0gMl0gfHwgJy0tJzsNCiAgICAgICAgICAgICAgICBjb25zdCB2YWxTb2xhciA9IHBhcnRzW3RvdGFsUGFydHMgLSAzXSB8fCAnLS0nOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbE1hbGF5YWxhbSA9IHBhcnRzW3RvdGFsUGFydHMgLSA0XSB8fCAnLS0nOw0KICAgICAgICAgICAgICAgIGNvbnN0IHZhbFRhbWlsID0gcGFydHNbdG90YWxQYXJ0cyAtIDVdIHx8ICctLSc7DQogICAgICAgICAgICAgICAgY29uc3QgdG9kYXlLYWFsYSA9IGthYWxhVGltaW5nc1t2YXJhTmFtZV0gfHwgeyByYWh1OiAnLS0nLCBndWxpa2E6ICctLScsIHlhbTogJy0tJyB9Ow0KDQogICAgICAgICAgICAgICAgbGV0IGNhbGVuZGFyRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpbmR1X2NhbGVuZGFyX3NlY3Rpb24nKTsNCiAgICAgICAgICAgICAgICBpZiAoIWNhbGVuZGFyRGl2KSB7DQogICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyRGl2LmlkID0gJ2hpbmR1X2NhbGVuZGFyX3NlY3Rpb24nOw0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuY2hhbmdfZGlzcGxheScpLmFwcGVuZENoaWxkKGNhbGVuZGFyRGl2KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjYWxlbmRhckRpdi5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiAjODAwMDAwOyBjb2xvcjogI0ZGRDcwMDsgcGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE2cHg7IG1hcmdpbi10b3A6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOyBib3JkZXItYm90dG9tOiAycHggc29saWQgI0ZGRDcwMDsiPkhpbmR1IENhbGVuZGFyIGZvciBUb2RheTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgYmFja2dyb3VuZDogI2ZmZmRlNzsgYm9yZGVyOiAxcHggc29saWQgI0ZGRDcwMDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5UYW1pbDwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyB0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojODAwMDAwOyBmb250LXdlaWdodDo4MDA7Ij4ke3ZhbFRhbWlsfTwvdGQ+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+TWFsYXlhbGFtPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dmFsTWFsYXlhbGFtfTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+U29sYXI8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6IzgwMDAwMDsgZm9udC13ZWlnaHQ6ODAwOyI+JHt2YWxTb2xhcn08L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgZm9udC13ZWlnaHQ6Ym9sZDsiPkx1bmFyPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiM4MDAwMDA7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dmFsTHVuYXJ9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDogIzgwMDAwMDsgY29sb3I6ICNGRkQ3MDA7IHBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxNnB4OyBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNGRkQ3MDA7Ij5Ub2RheSdzIEthYWxhczwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgYmFja2dyb3VuZDogI2ZmZmRlNzsgYm9yZGVyOiAxcHggc29saWQgI0ZGRDcwMDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SYWh1IEthYWxhPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiNkMzJmMmY7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dG9kYXlLYWFsYS5yYWh1fTwvdGQ+PC90cj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZmZlNTdmOyBmb250LXdlaWdodDpib2xkOyI+R3VsaWthIEthYWxhPC90ZD48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IHRleHQtYWxpZ246cmlnaHQ7IGNvbG9yOiNkMzJmMmY7IGZvbnQtd2VpZ2h0OjgwMDsiPiR7dG9kYXlLYWFsYS5ndWxpa2F9PC90ZD48L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNmZmU1N2Y7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5ZYW1hbmdhZGE8L3RkPjx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2ZmZTU3ZjsgdGV4dC1hbGlnbjpyaWdodDsgY29sb3I6I2QzMmYyZjsgZm9udC13ZWlnaHQ6ODAwOyI+JHt0b2RheUthYWxhLnlhbX08L3RkPjwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICM0YTAwMDAsICM4MDAwMDAsICM0YTAwMDApOyBjb2xvcjogI0ZGRDcwMDsgcGFkZGluZzogMTBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgYm9yZGVyOiAxcHggc29saWQgI0ZGRDcwMDsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4yKTsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvZGF5IGluIENoZW5uYWk6ICR7c3VuSW5mb30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOw0KDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbmNoYW5nX2xvYWRpbmcnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5jaGFuZ19kaXNwbGF5Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJTeW5jIEZhaWxlZCIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICAvLyBDYWxsIGl0IGF0IHRoZSB2ZXJ5IGJvdHRvbSBvZiB5b3VyIHNjcmlwdCB0YWdzDQogICAgICAgIGxvYWREYWlseVBhbmNoYW5nKCk7DQoNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLmx1bmFyLXNlY3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZjsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmx1bmFyLWhlYWQgew0KICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgY29sb3I6ICM4MDAwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIC8qIE1hdGNoZXMgeW91ciBoMyBmb250LXNpemUgZXhhY3RseSAqLw0KICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7DQogICAgICAgICAgICBtYXJnaW46IDAgMCAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci1mbGV4IHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDEwcHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICAgIH0NCg0KICAgICAgICAubHVuYXItaXRlbSB7DQogICAgICAgICAgICBmbGV4OiAxOw0KICAgICAgICAgICAgLyogQnJpZ2h0IENvbnRyYXN0IFRoZW1lOiBEZWVwIE5hdnkgYmFja2dyb3VuZCB3aXRoIEdvbGQvV2hpdGUgdGV4dCAqLw0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMzM2NjsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDRweDsNCiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDkwcHg7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjUpOw0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5sdW5hci1pdGVtIGIgew0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICAgICAgICBjb2xvcjogI2YwYWQ0ZTsgLyogQnJpZ2h0IEdvbGQgZm9yIEhlYWRlciAqLw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsNCiAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIC5sdW5hci10ZXh0IHsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7IC8qIEhpZ2ggQ29udHJhc3QgV2hpdGUgKi8NCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7DQogICAgICAgIH0NCg0KICAgICAgICAubHVuYXItdGltZSB7DQogICAgICAgICAgICBmb250LXNpemU6IDExcHg7DQogICAgICAgICAgICBjb2xvcjogIzAwZmZmZjsgLyogQ3lhbiBmb3IgVGltaW5ncyB0byBzdGFuZCBvdXQgKi8NCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsNCiAgICAgICAgfQ0KICAgIDwvc3R5bGU+DQoNCiAgICA8ZGl2IGNsYXNzPSJsdW5hci1zZWN0aW9uIj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItaGVhZCI+8J+MmSBIaW5kdSBMdW5hciBDYWxlbmRhcjwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1mbGV4Ij4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imx1bmFyLWl0ZW0iPg0KICAgICAgICAgICAgICAgIDxiPkFtYXZhc3lhPC9iPg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImxuLTAxIiBjbGFzcz0ibHVuYXItdGV4dCI+U3luY2luZy4uLjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsdW5hci1pdGVtIj4NCiAgICAgICAgICAgICAgICA8Yj5QYXVybmltYTwvYj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsbi0wMiIgY2xhc3M9Imx1bmFyLXRleHQiPlN5bmNpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibHVuYXItaXRlbSI+DQogICAgICAgICAgICAgICAgPGI+R3JhaGFuYTwvYj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsbi0wMyIgY2xhc3M9Imx1bmFyLXRleHQiPlN5bmNpbmcuLi48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRIaW5kdUx1bmFyKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogcCB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCBkID0gYXdhaXQgci5qc29uKCk7DQogICAgICAgICAgICAgICAgY29uc3QgdCA9IGQuYWNjZXNzX3Rva2VuOw0KDQogICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICBub3cuc2V0SG91cnMoMCwgMCwgMCwgMCk7DQoNCiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRzID0gWw0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnbG4tMDEnLCBmaWxlOiAnL1BhbmNoYW5nL0hpbmR1THVuYXJDYWxlbmRhci8wLjEuaHRtbCcsIHR5cGU6ICdkb3VibGUnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdsbi0wMicsIGZpbGU6ICcvUGFuY2hhbmcvSGluZHVMdW5hckNhbGVuZGFyLzAuMi5odG1sJywgdHlwZTogJ2RvdWJsZScgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2xuLTAzJywgZmlsZTogJy9QYW5jaGFuZy9IaW5kdUx1bmFyQ2FsZW5kYXIvMC4zLmh0bWwnLCB0eXBlOiAnc2luZ2xlJyB9DQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeCBvZiB0YXJnZXRzKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHguZmlsZSB9KSB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBoID0gYXdhaXQgcmVzLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBTdHJpcCB0YWdzIGJ1dCBrZWVwIHN0cnVjdHVyYWwgc2VwYXJhdGlvbg0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhblRleHQgPSBoLnJlcGxhY2UoLzxbXj5dKj4vZywgJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IGNsZWFuVGV4dC5zcGxpdCgnfCcpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzICE9PSAiIik7DQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IG91dCA9ICJObyBVcGNvbWluZyI7DQoNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb3cgPSByb3dzW2ldOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbSA9IHJvdy5tYXRjaCgvKFxkezJ9KVstLzpdKFxkezJ9fFthLXpBLVpdKylbLS86XShcZHs0fSkvKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZHQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKG1bMl0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0ID0gbmV3IERhdGUobVsxXSArICIgIiArIG1bMl0gKyAiICIgKyBtWzNdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdCA9IG5ldyBEYXRlKGAke21bM119LSR7bVsyXX0tJHttWzFdfWApOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkdCA+PSBub3cpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHgudHlwZSA9PT0gJ2RvdWJsZScpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dCA9IGA8c3Bhbj4ke3Jvd308L3NwYW4+PHNwYW4gY2xhc3M9Imx1bmFyLXRpbWUiPiR7cm93c1tpICsgMV0gfHwgJyd9PC9zcGFuPmA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQgPSBgPHNwYW4+JHtyb3d9PC9zcGFuPmA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHguaWQpLmlubmVySFRNTCA9IG91dDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCJMdW5hciBFcnJvciIsIGUpOyB9DQogICAgICAgIH0NCiAgICAgICAgbG9hZEhpbmR1THVuYXIoKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLm5hdi1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODAwMDAwOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBtYXJnaW46IDEwcHggMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtbWFpbi1oZWFkIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBmb250LXNpemU6IDIycHg7IC8qIFNsaWdodGx5IGxhcmdlciBmb3IgdGhlIGljb24gKi8NCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDNweCBkb3VibGUgIzgwMDAwMDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogOHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1ncmlkIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBnYXA6IDhweDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5uYXYtY29sIHsNCiAgICAgICAgICAgIGZsZXg6IDE7DQogICAgICAgICAgICBtaW4td2lkdGg6IDA7DQogICAgICAgIH0NCg0KICAgICAgICAubmF2LWNvbC10aXRsZSB7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsNCiAgICAgICAgICAgIGhlaWdodDogNDJweDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5iZy1zaHlhbWFsYSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNGIwMDgyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJnLWNoYWl0cmEgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2IyMjIyMjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5iZy1hc2FkaGEgew0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwNjQwMDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5iZy1zaGFyYWRoYSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmY4YzAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLm5hdi1ib3ggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjlmMDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM4MDAwMDA7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHggNHB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40Ow0KICAgICAgICB9DQoNCiAgICAgICAgICAgIC5uYXYtYm94IC5kLWRhdGUgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDNweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLm5hdi1ib3ggLmQtZGF5IHsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzAwMDBmZjsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAubmF2LWZvb3RlciB7DQogICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4Ow0KICAgICAgICAgICAgcGFkZGluZy10b3A6IDEycHg7DQogICAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICBnYXA6IDEycHg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ldmVudC1waWxsIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmMGY0ZmY7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjMDAzMzY2Ow0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAxOHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4Ow0KICAgICAgICAgICAgY29sb3I6ICMwMDA7DQogICAgICAgIH0NCg0KICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogODAwcHgpIHsNCiAgICAgICAgICAgIC5uYXYtZ3JpZCB7DQogICAgICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsNCiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7DQogICAgICAgICAgICAgICAgZ2FwOiAxMHB4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgPC9zdHlsZT4NCg0KICAgIDxkaXYgY2xhc3M9Im5hdi1zZWN0aW9uIj4NCiAgICAgICAgPGRpdiBpZD0ibmF2LXllYXItdGl0bGUiIGNsYXNzPSJuYXYtbWFpbi1oZWFkIj7wn6q3IE5hdmFyYXRocmk8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtZ3JpZCI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sLXRpdGxlIGJnLXNoeWFtYWxhIj5TaHlhbWFsYTxicj5OYXZhcmF0aHJpPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iY29sLXNoeWFtYWxhIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbCI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWNvbC10aXRsZSBiZy1jaGFpdHJhIj5DaGFpdHJhPGJyPk5hdmFyYXRocmk8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb2wtY2hhaXRyYSI+PC9kaXY+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5hdi1jb2wtdGl0bGUgYmctYXNhZGhhIj5Bc2FkaGE8YnI+TmF2YXJhdGhyaTwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbC1hc2FkaGEiPjwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtY29sLXRpdGxlIGJnLXNoYXJhZGhhIj5TaGFyYWRoYTxicj5OYXZhcmF0aHJpPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iY29sLXNoYXJhZGhhIj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJuYXYtZm9vdGVyIj4NCiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LXZhc2FudGhhIiBjbGFzcz0iZXZlbnQtcGlsbCI+TG9hZGluZy4uLjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZXYtYXl1ZGhhIiBjbGFzcz0iZXZlbnQtcGlsbCI+TG9hZGluZy4uLjwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBpZD0iZXYtdmlqYXlhIiBjbGFzcz0iZXZlbnQtcGlsbCI+TG9hZGluZy4uLjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxzY3JpcHQ+DQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWROYXZhcmF0aHJpKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBwID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIE1NUFRfQVVUSF9SRUZSRVNIKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X2lkJywgTU1QVF9BVVRIX0tFWSk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBNTVBUX0FVVEhfU0VDUkVUKTsNCiAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlbicsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IHAgfSk7DQogICAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHIuanNvbigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkLmFjY2Vzc190b2tlbjsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGN1clllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2LXllYXItdGl0bGUnKS5pbm5lckhUTUwgPSBg8J+qtyBOYXZhcmF0aHJpIC0gJHtjdXJZZWFyfWA7DQoNCiAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXROYXZMaW5lcyhwYXRoKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IHBhdGggfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR4dC5yZXBsYWNlKC88YnJccypcLz8+L2dpLCAnXG4nKS5yZXBsYWNlKC88W14+XSo+L2csICcnKS5zcGxpdCgnXG4nKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiA1KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBjb25maWdzID0gWw0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29sLXNoeWFtYWxhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpLzAuMi5odG1sJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29sLWNoYWl0cmEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvMC4zLmh0bWwnIH0sDQogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb2wtYXNhZGhhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpLzAuNC5odG1sJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29sLXNoYXJhZGhhJywgcGF0aDogJy9QYW5jaGFuZy9OYXZhcmF0aHJpLzAuMS5odG1sJyB9DQogICAgICAgICAgICAgICAgXTsNCg0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29uZiBvZiBjb25maWdzKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gYXdhaXQgZ2V0TmF2TGluZXMoY29uZi5wYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGh0bWwgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVzW2ldLmluY2x1ZGVzKGN1clllYXIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz0ibmF2LWJveCI+PHNwYW4gY2xhc3M9ImQtZGF0ZSI+JHtsaW5lc1tpXX08L3NwYW4+PHNwYW4gY2xhc3M9ImQtZGF5Ij4ke2xpbmVzW2kgKyAxXSB8fCAnJ308L3NwYW4+PC9kaXY+YDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZi5pZCkuaW5uZXJIVE1MID0gaHRtbCB8fCAiPGRpdiBzdHlsZT0ndGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MTBweDsgZm9udC1zaXplOjExcHg7Jz5ObyBEYXRhPC9kaXY+IjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBjb25zdCBldkZpbGVzID0gWw0KICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZXYtdmFzYW50aGEnLCBwYXRoOiAnL1BhbmNoYW5nL05hdmFyYXRocmkvRXZlbnRzMi5odG1sJywgbWF0Y2g6ICdWQVNBTlRIQSBQQU5DSEFNSScgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2V2LWF5dWRoYScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS9FdmVudHMzLmh0bWwnLCBtYXRjaDogJ0FZVURIQSBQT09KQScgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2V2LXZpamF5YScsIHBhdGg6ICcvUGFuY2hhbmcvTmF2YXJhdGhyaS9FdmVudHM0Lmh0bWwnLCBtYXRjaDogJ1ZJSkFZQSBEQVNBTUknIH0NCiAgICAgICAgICAgICAgICBdOw0KDQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBldiBvZiBldkZpbGVzKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHQsICdEcm9wYm94LUFQSS1BcmcnOiBKU09OLnN0cmluZ2lmeSh7IHBhdGg6IGV2LnBhdGggfSkgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSB0eHQucmVwbGFjZSgvXG4vZywgJycpLnNwbGl0KCcsJykubWFwKHMgPT4gcy50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmREYXRlID0gIk4vQSI7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0SWR4ID0gcGFydHMuZmluZEluZGV4KHAgPT4gcC5pbmNsdWRlcyhldi5tYXRjaCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRJZHggIT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRJZHg7IGogPCBwYXJ0cy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0c1tqXS5pbmNsdWRlcyhjdXJZZWFyKSkgeyBmb3VuZERhdGUgPSBwYXJ0c1tqXTsgYnJlYWs7IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChldi5pZCkuaW5uZXJIVE1MID0gYDxiPiR7ZXYubWF0Y2h9PC9iPiA6ICR7Zm91bmREYXRlfWA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyB9DQogICAgICAgIH0NCiAgICAgICAgbG9hZE5hdmFyYXRocmkoKTsNCiAgICA8L3NjcmlwdD4NCg0KICAgIA0KICAgIDxzdHlsZT4NCiAgICAgICAgLmd1cnUtc2VjdGlvbiB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzgwMDAwMDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIH0NCg0KICAgICAgICAuZ3VydS1oZWFkIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjODAwMDAwOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2VlZTsNCiAgICAgICAgICAgIG1hcmdpbjogMCAwIDE1cHg7DQogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLmd1cnUtbGlzdCB7DQogICAgICAgICAgICBtYXgtaGVpZ2h0OiA0MDBweDsNCiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgICAgIH0NCg0KICAgICAgICAuZ3VydS1yb3ctaXRlbSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDAzMzY2Ow0KICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICBwYWRkaW5nOiAxMnB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA2cHggc29saWQgI2YwYWQ0ZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7DQogICAgICAgIH0NCg0KICAgICAgICAuZ3VydS1kYXRlIHsNCiAgICAgICAgICAgIGNvbG9yOiAjZjBhZDRlOw0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNDE1YTc3Ow0KICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDNweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC5ndXJ1LWV2ZW50LWxpbmUgew0KICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7DQogICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDVweDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qIFN0eWxlIGZvciB0aGUgZHluYW1pYyBHdXJ1IExpbmtzICovDQogICAgICAgIC5ndXJ1LWxpbmsgew0KICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbi1jb2xvcjogI2YwYWQ0ZTsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgICAgICAuZ3VydS1saW5rOmhvdmVyIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogI2YwYWQ0ZTsNCiAgICAgICAgICAgIH0NCiAgICA8L3N0eWxlPg0KDQogICAgPGRpdiBjbGFzcz0iZ3VydS1zZWN0aW9uIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iZ3VydS1oZWFkIj7wn5WJ77iPIEd1cnUgQXJhZGhhbmFzIGFuZCBKYXlhbnRoaXM8L2Rpdj4NCiAgICAgICAgPGRpdiBpZD0iZ3VydS1ldmVudC1saXN0IiBjbGFzcz0iZ3VydS1saXN0Ij4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjIwcHg7IGNvbG9yOiM2NjY7Ij5TeW5jaW5nLi4uPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPHNjcmlwdD4NCiAgICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGV4dHJhY3QgMi1kaWdpdCBudW1iZXIgYW5kIGNyZWF0ZSB0aGUgbGluaw0KICAgICAgICBmdW5jdGlvbiB3cmFwV2l0aEd1cnVMaW5rKHRleHQpIHsNCiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCgvXGR7Mn0vKTsNCiAgICAgICAgICAgIGlmIChtYXRjaCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IG1hdGNoWzBdOw0KICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL215bGFpcGVyaXlhdmEuZ2l0aHViLmlvL0FjaGFyeWEvQSR7bnVtfS5odG1sYDsNCiAgICAgICAgICAgICAgICByZXR1cm4gYDxhIGhyZWY9IiR7dXJsfSIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJndXJ1LWxpbmsiPiR7dGV4dH08L2E+YDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0ZXh0Ow0KICAgICAgICB9DQoNCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gbG9hZEd1cnVBcmFkaGFuYXMoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7DQogICAgICAgICAgICAgICAgcC5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgTU1QVF9BVVRIX1JFRlJFU0gpOw0KICAgICAgICAgICAgICAgIHAuYXBwZW5kKCdjbGllbnRfaWQnLCBNTVBUX0FVVEhfS0VZKTsNCiAgICAgICAgICAgICAgICBwLmFwcGVuZCgnY2xpZW50X3NlY3JldCcsIE1NUFRfQVVUSF9TRUNSRVQpOw0KDQogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5kcm9wYm94LmNvbS9vYXV0aDIvdG9rZW4nLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBwIH0pOw0KICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBhd2FpdCByLmpzb24oKTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZC5hY2Nlc3NfdG9rZW47DQoNCiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgICAgIG5vdy5zZXRIb3VycygwLCAwLCAwLCAwKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2NvbnRlbnQuZHJvcGJveGFwaS5jb20vMi9maWxlcy9kb3dubG9hZCcsIHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0LCAnRHJvcGJveC1BUEktQXJnJzogSlNPTi5zdHJpbmdpZnkoeyBwYXRoOiAnL1BhbmNoYW5nL0d1cnUvRXZlbnRzLmh0bWwnIH0pIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjb25zdCByYXdUZXh0ID0gYXdhaXQgcmVzLnRleHQoKTsNCg0KICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVGV4dCA9IHJhd1RleHQucmVwbGFjZSgvPFtePl0qPi9nLCAnXG4nKTsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNsZWFuVGV4dC5zcGxpdCgnXG4nKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiAwKTsNCg0KICAgICAgICAgICAgICAgIGxldCBncm91cGVkRXZlbnRzID0ge307DQoNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gbGluZXNbaV07DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBjdXJyZW50TGluZS5tYXRjaCgvKFxkezJ9KS0oXGR7Mn0pLShcZHs0fSkvKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAobSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnREYXRlT2JqID0gbmV3IERhdGUocGFyc2VJbnQobVszXSksIHBhcnNlSW50KG1bMl0pIC0gMSwgcGFyc2VJbnQobVsxXSkpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnREYXRlT2JqID49IG5vdykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBjdXJyZW50TGluZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWwgPSBsaW5lc1tpICsgMV0gfHwgIiI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdyb3VwZWRFdmVudHNbZGF0ZVN0cl0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBlZEV2ZW50c1tkYXRlU3RyXSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cGVkRXZlbnRzW2RhdGVTdHJdLnB1c2goZGV0YWlsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGxldCBsaXN0SHRtbCA9ICIiOw0KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZSBpbiBncm91cGVkRXZlbnRzKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBsaW5rIHdyYXBwZXIgdG8gZWFjaCBldmVudCBsaW5lDQogICAgICAgICAgICAgICAgICAgIGxldCBldmVudHNIdG1sID0gZ3JvdXBlZEV2ZW50c1tkYXRlXQ0KICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChldnQgPT4gYDxzcGFuIGNsYXNzPSJndXJ1LWV2ZW50LWxpbmUiPuKAoiAke3dyYXBXaXRoR3VydUxpbmsoZXZ0KX08L3NwYW4+YCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKTsNCg0KICAgICAgICAgICAgICAgICAgICBsaXN0SHRtbCArPSBgDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJndXJ1LXJvdy1pdGVtIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZ3VydS1kYXRlIj4ke2RhdGV9PC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imd1cnUtZGV0YWlsIj4ke2V2ZW50c0h0bWx9PC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndXJ1LWV2ZW50LWxpc3QnKS5pbm5lckhUTUwgPSBsaXN0SHRtbCB8fCAiPGRpdiBzdHlsZT0ndGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MjBweDsnPk5vIHVwY29taW5nIGV2ZW50cyBmb3VuZC48L2Rpdj4iOw0KDQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d1cnUtZXZlbnQtbGlzdCcpLmlubmVySFRNTCA9ICJTeW5jIEVycm9yLiI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgbG9hZEd1cnVBcmFkaGFuYXMoKTsNCiAgICA8L3NjcmlwdD4NCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCiAgICANCiAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDMwcHg7IG1hcmdpbi1ib3R0b206IDUwcHg7IGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOyI+DQogICAgICAgIDxoMyBzdHlsZT0iY29sb3I6ICM1NTU7IGZvbnQtc2l6ZTogMThweDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPklmIGFueSBpc3N1ZXMgd2l0aCB0aGUgYXBwbGljYXRpb24gY29udGFjdCBBZG1pbjwvaDM+DQoNCiAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjb250YWN0QWRtaW5XaGF0c0FwcCgpIiBzdHlsZT0iDQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyNUQzNjY7DQogICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICBwYWRkaW5nOiAxNXB4IDMwcHg7DQogICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7DQogICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDM3LCAyMTEsIDEwMiwgMC4zKTsNCiAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7DQogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzOw0KICAgICIgb25tb3VzZW92ZXI9InRoaXMuc3R5bGUudHJhbnNmb3JtPSdzY2FsZSgxLjA1KSciIG9ubW91c2VvdXQ9InRoaXMuc3R5bGUudHJhbnNmb3JtPSdzY2FsZSgxKSciPg0KICAgICAgICAgICAgPHNwYW4gc3R5bGU9Im1hcmdpbi1yaWdodDogMTBweDsiPvCfkqw8L3NwYW4+IE1lc3NhZ2UgQWRtaW4NCiAgICAgICAgPC9idXR0b24+DQogICAgPC9kaXY+DQogICAgPHNjcmlwdD4NCiAgICAgICAgZnVuY3Rpb24gY29udGFjdEFkbWluV2hhdHNBcHAoKSB7DQogICAgICAgICAgICBjb25zdCBwaG9uZU51bWJlciA9ICI5MTgwNTA3OTQyNTIiOw0KICAgICAgICAgICAgLy8gT3B0aW9uYWw6IEFkZCBhIHByZS1maWxsZWQgbWVzc2FnZSBzbyB5b3Uga25vdyB3aGVyZSB0aGV5IGFyZSBjb21pbmcgZnJvbQ0KICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVuY29kZVVSSUNvbXBvbmVudCgiSGVsbG8gQWRtaW4sIEkgYW0gZmFjaW5nIGFuIGlzc3VlIHdpdGggdGhlIENHIFJlY2VpcHQgQXBwLiIpOw0KICAgICAgICAgICAgY29uc3Qgd2hhdHNhcHBVcmwgPSBgaHR0cHM6Ly93YS5tZS8ke3Bob25lTnVtYmVyfT90ZXh0PSR7bWVzc2FnZX1gOw0KDQogICAgICAgICAgICB3aW5kb3cub3Blbih3aGF0c2FwcFVybCwgJ19ibGFuaycpOw0KICAgICAgICB9DQogICAgPC9zY3JpcHQ+DQoNCg0KDQogICAgDQogICAgPHNjcmlwdD4NCiAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRTZXR0aW5nc0ZpbGUoKSB7DQogICAgICAgICAgICBsZXQgZmlsZUNvbnRlbnQgPSAiIjsNCiAgICAgICAgICAgIGZlYXR1cmVzLmZvckVhY2goZmVhdCA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBlcm1fJHtmZWF0fWApLnZhbHVlOw0KICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9IGAke2ZlYXR9fCR7dmFsfVxuYDsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvLyBGb3Igbm93LCB3ZSBzaG93IGl0IGluIGFuIGFsZXJ0IG9yIGxvZy4NCiAgICAgICAgICAgIC8vIFlvdSBjYW4gY29weSB0aGlzIHRleHQgYW5kIHNhdmUgaXQgYXMgdXNlcm5hbWUudHh0DQogICAgICAgICAgICBjb25zb2xlLmxvZygiLS0tIFNFVFRJTkdTIEZJTEUgQ09OVEVOVCAtLS0iKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVDb250ZW50KTsNCg0KICAgICAgICAgICAgLy8gT3B0aW9uYWw6IFRyaWdnZXIgYW4gYWN0dWFsIGZpbGUgZG93bmxvYWQgZm9yIHRoZSB1c2VyDQogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2ZpbGVDb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7DQogICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSAidXNlcl9zZXR0aW5nc190ZW1wbGF0ZS50eHQiOw0KICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICB9DQoNCg0KICAgICAgICAvL2Z1bmN0aW9uIGNvbnNlbnRBY3Rpb24oKSB7DQogICAgICAgIC8vICAgIGFsZXJ0KCJDb25zZW50IEdyYW50ZWQgZm9yICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRfcmVjbm8nKS52YWx1ZSk7DQogICAgICAgIC8vICAgIC8vIExvZ2ljIGZvciBzYXZlUmVjb3JkKCkgdXN1YWxseSBmb2xsb3dzIGhlcmUNCiAgICAgICAgLy99DQoNCiAgICAgICAgLy9mdW5jdGlvbiBzYXZlRGF0YSgpIHsNCiAgICAgICAgLy8gICAgYWxlcnQoIlJlY29yZCBTYXZlZCBMb2NhbGx5Iik7DQogICAgICAgIC8vICAgIC8vIE9yaWdpbmFsIHNhdmVSZWNvcmQoKSBsb2dpYyByZW1haW5zIGhlcmUNCiAgICAgICAgLy99DQoNCg0KICAgICAgICBmdW5jdGlvbiBtYXRjaFJlY29yZChpZHgsIHF1ZXJ5LCBjb2xJZHgpIHsNCiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBHTE9CQUxfREJfTElORVNbaWR4XS50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgaWYgKGNvbElkeCA9PT0gLTEpIHJldHVybiBsaW5lLmluY2x1ZGVzKHF1ZXJ5KTsNCiAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBsaW5lLnNwbGl0KCd8Jyk7DQogICAgICAgICAgICByZXR1cm4gKGNvbHNbY29sSWR4XSB8fCAiIikuaW5jbHVkZXMocXVlcnkpOw0KICAgICAgICB9DQoNCg0KICAgIDwvc2NyaXB0Pg0KDQoNCg0KDQo8L2JvZHk+DQo8L2h0bWw+DQo="))));</script>